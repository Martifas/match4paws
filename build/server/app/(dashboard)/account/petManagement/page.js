(()=>{var e={};e.id=791,e.ids=[791],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},4573:e=>{"use strict";e.exports=require("node:buffer")},10125:(e,t,r)=>{"use strict";r.d(t,{default:()=>X});var n=r(60687),o=r(88931),s=r(87088),a=r(41434),i=r(24886),l=r(16184),d=r(43210),u=r(49384),c=r(99282),p=r(13555),m=r(84754),h=r(51067),x=r(4144),g=r(82816);function f(e){return(0,g.Ay)("MuiCard",e)}(0,x.A)("MuiCard",["root"]);let b=e=>{let{classes:t}=e;return(0,c.A)({root:["root"]},f,t)},v=(0,p.Ay)(h.A,{name:"MuiCard",slot:"Root"})({overflow:"hidden"}),j=d.forwardRef(function(e,t){let r=(0,m.b)({props:e,name:"MuiCard"}),{className:o,raised:s=!1,...a}=r,i={...r,raised:s},l=b(i);return(0,n.jsx)(v,{className:(0,u.A)(l.root,o),elevation:s?8:void 0,ref:t,ownerState:i,...a})});var y=r(49205),A=r(35512),C=r(14752),w=r(3297),M=r(23428);let P=(0,M.A)((0,n.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.996.996 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit");var k=r(43323),S=r(16189),q=r(32245),z=r(13262);function _(e){return"string"==typeof e?e:e.id}function R({items:e,selected:t,onChange:r,render:o,getId:s=_}){let a=e=>{r(t.includes(e)?t.filter(t=>t!==e):[...t,e])};return(0,n.jsx)("div",{className:"flex flex-wrap gap-2",children:e.map(e=>{let r=s(e),i=t.includes(r);return(0,n.jsx)("button",{onClick:()=>a(r),className:["rounded-full border px-4 py-1 text-sm transition shadow-sm",i?"bg-orange-500 text-white border-orange-500":"bg-white text-gray-800 border-gray-300 hover:bg-gray-100"].join(" "),children:o(e,i)},r)})})}var E=r(89104),N=r(61304),G=r(75515),T=r(41982);let I=(0,M.A)((0,n.jsx)("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2m0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2"}),"MoreVert");function B(e){return(0,g.Ay)("MuiCardMedia",e)}(0,x.A)("MuiCardMedia",["root","media","img"]);let L=e=>{let{classes:t,isMediaComponent:r,isImageComponent:n}=e;return(0,c.A)({root:["root",r&&"media",n&&"img"]},B,t)},O=(0,p.Ay)("div",{name:"MuiCardMedia",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:r}=e,{isMediaComponent:n,isImageComponent:o}=r;return[t.root,n&&t.media,o&&t.img]}})({display:"block",backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center",variants:[{props:{isMediaComponent:!0},style:{width:"100%"}},{props:{isImageComponent:!0},style:{objectFit:"cover"}}]}),$=["video","audio","picture","iframe","img"],D=["picture","img"],V=d.forwardRef(function(e,t){let r=(0,m.b)({props:e,name:"MuiCardMedia"}),{children:o,className:s,component:a="div",image:i,src:l,style:d,...c}=r,p=$.includes(a),h=!p&&i?{backgroundImage:`url("${i}")`,...d}:d,x={...r,component:a,isMediaComponent:p,isImageComponent:D.includes(a)},g=L(x);return(0,n.jsx)(O,{className:(0,u.A)(g.root,s),as:a,role:!p&&i?"img":void 0,ref:t,style:h,ownerState:x,src:p?i||l:void 0,...c,children:o})});function W(e){return(0,g.Ay)("MuiCardContent",e)}(0,x.A)("MuiCardContent",["root"]);let F=e=>{let{classes:t}=e;return(0,c.A)({root:["root"]},W,t)},H=(0,p.Ay)("div",{name:"MuiCardContent",slot:"Root"})({padding:16,"&:last-child":{paddingBottom:24}}),U=d.forwardRef(function(e,t){let r=(0,m.b)({props:e,name:"MuiCardContent"}),{className:o,component:s="div",...a}=r,i={...r,component:s},l=F(i);return(0,n.jsx)(H,{as:s,className:(0,u.A)(l.root,o),ownerState:i,ref:t,...a})});var J=r(83685);function K({pet:e,onView:t,onMenuOpen:r}){let a=[e.breed,e.type,e.ageGroup,e.size].filter(Boolean).join(" • ");return(0,n.jsx)(y.A,{size:{xs:6,sm:6,md:4},children:(0,n.jsxs)(j,{sx:{height:"100%",display:"flex",flexDirection:"column"},children:[!!e.images.length&&(0,n.jsx)(V,{component:"img",image:e.images[0].url,alt:e.name,onClick:()=>t(e.id),sx:{width:"100%",height:{xs:160,md:180},objectFit:"cover",cursor:"pointer",transition:"opacity .25s","&:hover":{opacity:.85}}}),(0,n.jsxs)(U,{sx:{flexGrow:1},children:[(0,n.jsxs)(o.default,{display:"flex",justifyContent:"space-between",mb:1,children:[(0,n.jsx)(s.A,{variant:"h6",noWrap:!0,children:e.name}),(0,n.jsx)(J.A,{size:"small",onClick:t=>r(t,e.id),children:(0,n.jsx)(I,{})})]}),(0,n.jsx)(s.A,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:a})]})]})},e.id)}function X(){let e=(0,S.useRouter)(),t=(0,S.useSearchParams)(),{user:r,isLoading:u}=(0,q.A)(),c=Number(t.get("page")??1),p=(0,d.useMemo)(()=>(t.get("filters")??"").split(",").filter(Boolean),[t]),m=(0,d.useCallback)((t,r)=>{let n=new URLSearchParams;t>1&&n.set("page",String(t)),r.length&&n.set("filters",r.join(",")),e.replace(`?${n}`,{scroll:!1})},[e]),{pets:h,totalCount:x,isLoading:g,error:f}=function(e,t,r){let[n,o]=(0,d.useState)([]),[s,a]=(0,d.useState)(0),[i,l]=(0,d.useState)(!0),[u,c]=(0,d.useState)(null);return{pets:n,totalCount:s,isLoading:i,error:u}}(r?.id,0,0),b=(0,d.useCallback)(()=>m(1,p),[m,p]),[v,M]=(0,d.useState)(!1),[_,I]=(0,d.useState)(null),[B,L]=(0,d.useState)(null),[O,$]=(0,d.useState)(null),D=async(e,t)=>{let r=t?`/api/pets/${t}`:"/api/pets";(await fetch(r,{method:t?"PATCH":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).ok&&b()},V=async e=>{(await fetch(`/api/pets/${e}`,{method:"DELETE"})).ok&&b()},W=Math.max(1,Math.ceil(x/z.md));return u||g?(0,n.jsx)(o.default,{p:3,textAlign:"center",children:(0,n.jsx)(s.A,{children:"Loading…"})}):r&&"petOwner"===r.userType?(0,n.jsxs)(o.default,{sx:{maxWidth:1200,mx:"auto",p:2},children:[(0,n.jsx)(G.default,{left:(0,n.jsx)(N.default,{smartNavigation:!0}),center:(0,n.jsx)(E.A,{title:"My Pet Management",subtitle:"Manage your pets looking for loving homes",centered:!0})}),f&&(0,n.jsx)(a.A,{severity:"error",sx:{mb:3},children:f}),(0,n.jsx)(o.default,{mb:3,children:(0,n.jsx)(R,{items:z.Ao,selected:p,onChange:e=>m(1,e),render:e=>e.label})}),(0,n.jsxs)(o.default,{sx:{display:"flex",alignItems:"center",flexWrap:"nowrap",mb:3,justifyContent:"space-between"},children:[(0,n.jsxs)(s.A,{variant:"h6",sx:{whiteSpace:"nowrap",mr:2},children:[x," ",1===x?"Pet":"Pets"]}),W>1&&(0,n.jsx)(o.default,{sx:{flexGrow:1,display:"flex",justifyContent:"center"},children:(0,n.jsx)(i.A,{count:W,page:c,onChange:(e,t)=>m(t,p),shape:"rounded",size:"small"})}),(0,n.jsx)(l.A,{variant:"contained",startIcon:(0,n.jsx)(w.A,{}),onClick:()=>M(!0),sx:{ml:2,whiteSpace:"nowrap",backgroundColor:"#ed9426","&:hover":{backgroundColor:"#d4841f"}},children:"Add Pet"})]}),0===h.length?(0,n.jsx)(j,{sx:{p:6,textAlign:"center"},children:(0,n.jsx)(s.A,{children:"No pets match your filters"})}):(0,n.jsx)(y.A,{container:!0,spacing:2,pb:6,children:h.map(t=>(0,n.jsx)(K,{pet:t,onView:t=>e.push(`/pet/${t}`),onMenuOpen:(e,t)=>{L(e.currentTarget),$(t)}},t.id))}),(0,n.jsxs)(A.A,{anchorEl:B,open:!!B,onClose:()=>L(null),children:[(0,n.jsxs)(C.A,{onClick:()=>{let e=h.find(e=>e.id===O);if(e){let{id:t,name:r,type:n,breed:o,gender:s,size:a,ageGroup:i,description:l,images:d}=e;I({id:t,name:r,type:n,breed:o??"",gender:s,size:a,ageGroup:i,description:l??"",imageUrls:d.map(e=>e.url)})}L(null)},children:[(0,n.jsx)(P,{sx:{mr:1},fontSize:"small"})," Edit"]}),(0,n.jsxs)(C.A,{onClick:()=>{O&&V(O),L(null)},sx:{color:"error.main"},children:[(0,n.jsx)(k.A,{sx:{mr:1},fontSize:"small"})," Delete"]})]}),(0,n.jsx)(T.A,{open:v||!!_,pet:_??void 0,onClose:()=>{M(!1),I(null)},onSubmit:D})]}):(0,n.jsx)(o.default,{p:3,textAlign:"center",children:(0,n.jsx)(s.A,{children:"Access denied."})})}},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},25581:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});var n=r(37413),o=r(46819);function s(){return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(o.default,{})})}},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},37067:e=>{"use strict";e.exports=require("node:http")},43323:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var n=r(23428),o=r(60687);let s=(0,n.A)((0,o.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete")},44708:e=>{"use strict";e.exports=require("node:https")},46819:(e,t,r)=>{"use strict";r.d(t,{default:()=>n});let n=(0,r(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/home/marty/turing/4-module/4-sprint/match4paws/src/components/pet/petManagement/PetManagement.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/marty/turing/4-module/4-sprint/match4paws/src/components/pet/petManagement/PetManagement.tsx","default")},53719:(e,t,r)=>{Promise.resolve().then(r.bind(r,46819))},55511:e=>{"use strict";e.exports=require("crypto")},55950:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>a.a,__next_app__:()=>c,pages:()=>u,routeModule:()=>p,tree:()=>d});var n=r(65239),o=r(48088),s=r(88170),a=r.n(s),i=r(30893),l={};for(let e in i)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>i[e]);r.d(t,l);let d={children:["",{children:["(dashboard)",{children:["account",{children:["petManagement",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,25581)),"/home/marty/turing/4-module/4-sprint/match4paws/src/app/(dashboard)/account/petManagement/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,57675)),"/home/marty/turing/4-module/4-sprint/match4paws/src/app/(dashboard)/layout.tsx"],error:[()=>Promise.resolve().then(r.bind(r,65315)),"/home/marty/turing/4-module/4-sprint/match4paws/src/app/(dashboard)/error.tsx"],loading:[()=>Promise.resolve().then(r.bind(r,48221)),"/home/marty/turing/4-module/4-sprint/match4paws/src/app/(dashboard)/loading.tsx"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,65284,23)),"next/dist/client/components/unauthorized-error"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,71564)),"/home/marty/turing/4-module/4-sprint/match4paws/src/app/layout.tsx"],error:[()=>Promise.resolve().then(r.bind(r,54431)),"/home/marty/turing/4-module/4-sprint/match4paws/src/app/error.tsx"],loading:[()=>Promise.resolve().then(r.bind(r,67393)),"/home/marty/turing/4-module/4-sprint/match4paws/src/app/loading.tsx"],"not-found":[()=>Promise.resolve().then(r.bind(r,54413)),"/home/marty/turing/4-module/4-sprint/match4paws/src/app/not-found.tsx"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,65284,23)),"next/dist/client/components/unauthorized-error"]}]}.children,u=["/home/marty/turing/4-module/4-sprint/match4paws/src/app/(dashboard)/account/petManagement/page.tsx"],c={require:r,loadChunk:()=>Promise.resolve()},p=new n.AppPageRouteModule({definition:{kind:o.RouteKind.APP_PAGE,page:"/(dashboard)/account/petManagement/page",pathname:"/account/petManagement",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},57975:e=>{"use strict";e.exports=require("node:util")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},77598:e=>{"use strict";e.exports=require("node:crypto")},78474:e=>{"use strict";e.exports=require("node:events")},81743:(e,t,r)=>{Promise.resolve().then(r.bind(r,10125))},89104:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var n=r(60687),o=r(88931),s=r(87088);function a({title:e,subtitle:t,centered:r=!0,marginBottom:a=3}){return(0,n.jsxs)(o.default,{textAlign:r?"center":"left",mb:a,children:[(0,n.jsx)(s.A,{variant:"h4",fontWeight:"bold",gutterBottom:!0,children:e}),t&&(0,n.jsx)(s.A,{variant:"body1",color:"text.secondary",children:t})]})}}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[719,420,367,8,929,986,101,794,763,607],()=>r(55950));module.exports=n})();
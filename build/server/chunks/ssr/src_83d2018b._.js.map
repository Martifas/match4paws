{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///home/marty/turing/4-module/4-sprint/match4paws/src/hooks/useUserProfile.ts"],"sourcesContent":["import { useAuth } from '@/lib/authProvider';\nimport { User } from '@/lib/queries/users';\nimport { useEffect, useState } from 'react';\n\nexport default function useUserProfile() {\n  const authUser = useAuth();\n  const [user, setUser] = useState<User | null>(null);\n  const [isLoading, setIsLoading] = useState(true);\n\n  useEffect(() => {\n    const fetchUserData = async () => {\n      if (!authUser?.id) {\n        setIsLoading(false);\n        return;\n      }\n\n      try {\n        const response = await fetch('/api/user/profile');\n        if (response.ok) {\n          const userData = await response.json();\n          setUser(userData.user);\n        }\n      } catch (error) {\n        console.error('Error fetching user data:', error);\n      } finally {\n        setIsLoading(false);\n      }\n    };\n\n    fetchUserData();\n  }, [authUser?.id]);\n\n  return { user, isLoading };\n}\n"],"names":[],"mappings":";;;AAAA;AAEA;;;AAEe,SAAS;IACtB,MAAM,WAAW,CAAA,GAAA,2HAAA,CAAA,UAAO,AAAD;IACvB,MAAM,CAAC,MAAM,QAAQ,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAe;IAC9C,MAAM,CAAC,WAAW,aAAa,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAE3C,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,MAAM,gBAAgB;YACpB,IAAI,CAAC,UAAU,IAAI;gBACjB,aAAa;gBACb;YACF;YAEA,IAAI;gBACF,MAAM,WAAW,MAAM,MAAM;gBAC7B,IAAI,SAAS,EAAE,EAAE;oBACf,MAAM,WAAW,MAAM,SAAS,IAAI;oBACpC,QAAQ,SAAS,IAAI;gBACvB;YACF,EAAE,OAAO,OAAO;gBACd,QAAQ,KAAK,CAAC,6BAA6B;YAC7C,SAAU;gBACR,aAAa;YACf;QACF;QAEA;IACF,GAAG;QAAC,UAAU;KAAG;IAEjB,OAAO;QAAE;QAAM;IAAU;AAC3B","debugId":null}},
    {"offset": {"line": 51, "column": 0}, "map": {"version":3,"sources":["file:///home/marty/turing/4-module/4-sprint/match4paws/src/components/ui/containers/Header.tsx"],"sourcesContent":["\"use client\";\n\nimport React from \"react\";\n\nexport default function Header({\n  left,\n  center,\n  right,\n  children,\n}: {\n  left?: React.ReactNode;\n  center?: React.ReactNode;\n  right?: React.ReactNode;\n  children?: React.ReactNode;\n}) {\n  return (\n    <header className=\"w-full max-w-md mx-auto  md:max-w-xl py-2 flex items-center justify-between gap-4\">\n      {children ? (\n        children\n      ) : (\n        <>\n          <div className=\"flex-shrink-0\">{left}</div>\n          <div className=\"flex-1 text-center overflow-hidden\">{center}</div>\n          <div className=\"flex-shrink-0\">{right}</div>\n        </>\n      )}\n    </header>\n  );\n}\n"],"names":[],"mappings":";;;;AAAA;;AAIe,SAAS,OAAO,EAC7B,IAAI,EACJ,MAAM,EACN,KAAK,EACL,QAAQ,EAMT;IACC,qBACE,8OAAC;QAAO,WAAU;kBACf,WACC,yBAEA;;8BACE,8OAAC;oBAAI,WAAU;8BAAiB;;;;;;8BAChC,8OAAC;oBAAI,WAAU;8BAAsC;;;;;;8BACrD,8OAAC;oBAAI,WAAU;8BAAiB;;;;;;;;;;;;;AAK1C","debugId":null}},
    {"offset": {"line": 100, "column": 0}, "map": {"version":3,"sources":["file:///home/marty/turing/4-module/4-sprint/match4paws/src/components/ui/buttons/BackButton.tsx"],"sourcesContent":["\"use client\";\n\nimport { useRouter, usePathname } from \"next/navigation\";\nimport ArrowBackIcon from \"@mui/icons-material/ArrowBack\";\nimport clsx from \"clsx\";\nimport { ComponentPropsWithoutRef } from \"react\";\n\ntype BackButtonProps = {\n  to?: string;\n  hidden?: boolean;\n  className?: string;\n  onClick?: () => void;\n  smartNavigation?: boolean;\n} & Omit<ComponentPropsWithoutRef<\"button\">, \"children\" | \"onClick\">;\n\nexport default function BackButton({\n  to,\n  hidden,\n  className,\n  onClick,\n  smartNavigation = false,\n  ...buttonProps\n}: BackButtonProps) {\n  const router = useRouter();\n  const pathname = usePathname();\n\n  if (hidden) return null;\n\n  const handleClick = () => {\n    if (onClick) {\n      onClick();\n    } else if (to) {\n      router.push(to);\n    } else if (smartNavigation) {\n      const referrer = document.referrer;\n\n      if (referrer.includes(\"/favorites\") || pathname.startsWith(\"/pet/\")) {\n        router.push(\"/favorites?refresh=\" + Date.now());\n      } else {\n        router.back();\n      }\n    } else {\n      router.back();\n    }\n  };\n\n  return (\n    <button\n      type=\"button\"\n      onClick={handleClick}\n      className={clsx(\n        \"text-[#ed9426] hover:text-orange-300 hover:scale-110 font-bold\",\n        className\n      )}\n      {...buttonProps}\n    >\n      <ArrowBackIcon fontSize=\"large\" />\n    </button>\n  );\n}\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AAJA;;;;;AAee,SAAS,WAAW,EACjC,EAAE,EACF,MAAM,EACN,SAAS,EACT,OAAO,EACP,kBAAkB,KAAK,EACvB,GAAG,aACa;IAChB,MAAM,SAAS,CAAA,GAAA,kIAAA,CAAA,YAAS,AAAD;IACvB,MAAM,WAAW,CAAA,GAAA,kIAAA,CAAA,cAAW,AAAD;IAE3B,IAAI,QAAQ,OAAO;IAEnB,MAAM,cAAc;QAClB,IAAI,SAAS;YACX;QACF,OAAO,IAAI,IAAI;YACb,OAAO,IAAI,CAAC;QACd,OAAO,IAAI,iBAAiB;YAC1B,MAAM,WAAW,SAAS,QAAQ;YAElC,IAAI,SAAS,QAAQ,CAAC,iBAAiB,SAAS,UAAU,CAAC,UAAU;gBACnE,OAAO,IAAI,CAAC,wBAAwB,KAAK,GAAG;YAC9C,OAAO;gBACL,OAAO,IAAI;YACb;QACF,OAAO;YACL,OAAO,IAAI;QACb;IACF;IAEA,qBACE,8OAAC;QACC,MAAK;QACL,SAAS;QACT,WAAW,CAAA,GAAA,qIAAA,CAAA,UAAI,AAAD,EACZ,kEACA;QAED,GAAG,WAAW;kBAEf,cAAA,8OAAC,8JAAA,CAAA,UAAa;YAAC,UAAS;;;;;;;;;;;AAG9B","debugId":null}},
    {"offset": {"line": 156, "column": 0}, "map": {"version":3,"sources":["file:///home/marty/turing/4-module/4-sprint/match4paws/src/components/profile/ProfileManagement.tsx"],"sourcesContent":["'use client';\n\nimport { useEffect, useState, useCallback } from 'react';\nimport {\n  Box,\n  TextField,\n  Alert,\n  CircularProgress,\n  Snackbar,\n} from '@mui/material';\nimport { MuiTelInput } from 'mui-tel-input';\n\nimport useUserProfile from '@/hooks/useUserProfile';\nimport Header from '@/components/ui/containers/Header';\nimport BackButton from '@/components/ui/buttons/BackButton';\nimport PrimaryButton from '@/components/ui/buttons/PrimaryButton';\n\n/* ------------------------------------------------------------------ */\n/* small local hook – handles form state & dirty flag                 */\n/* ------------------------------------------------------------------ */\n\n\nexport default function ProfileManagement() {\n  const { user, isLoading } = useUserProfile();\n\n  const {\n    fields: form,\n    update,\n    dirty,\n    resetDirty,\n  } = useProfileForm({\n    name: user?.name ?? '',\n    phone: user?.phone ?? '',\n    address: user?.address ?? '',\n  });\n\n  const [busy, setBusy] = useState(false);\n  const [toast, setToast] = useState<'ok' | 'err' | null>(null);\n\n  const save = async () => {\n    if (!dirty) return;\n    setBusy(true);\n    try {\n      const res = await fetch('/api/user/profile', {\n        method: 'PATCH',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(form),\n      });\n      if (!res.ok) throw new Error();\n      setToast('ok');\n      resetDirty();\n    } catch {\n      setToast('err');\n    } finally {\n      setBusy(false);\n    }\n  };\n\n  if (isLoading || !user)\n    return (\n      <Box className=\"flex justify-center py-20\">\n        <CircularProgress />\n      </Box>\n    );\n\n  return (\n    <Box className=\"max-w-lg mx-auto px-4 pb-20 min-h-[90vh] flex flex-col\">\n      <Header\n        left={<BackButton smartNavigation />}\n        center={<h1 className=\"text-lg font-semibold\">My Profile</h1>}\n      />\n\n      <Box component=\"form\" className=\"flex flex-col gap-6 mt-6 flex-1\">\n        <TextField\n          label=\"Full Name\"\n          required\n          value={form.name}\n          onChange={e => update('name', e.target.value)}\n        />\n\n        <MuiTelInput\n          label=\"Phone\"\n          required\n          defaultCountry=\"LT\"\n          value={form.phone}\n          onChange={val => update('phone', val)}\n        />\n\n        <TextField\n          label=\"Address\"\n          multiline\n          rows={2}\n          value={form.address}\n          onChange={e => update('address', e.target.value)}\n          placeholder=\"Street, City, ZIP\"\n        />\n\n        <PrimaryButton\n          disabled={busy || !dirty || !form.name.trim() || !form.phone.trim()}\n          onClick={save}\n        >\n          {busy ? 'Saving…' : 'Save Changes'}\n        </PrimaryButton>\n      </Box>\n\n      <Snackbar\n        open={toast !== null}\n        autoHideDuration={3000}\n        onClose={() => setToast(null)}\n      >\n        {toast === 'ok' ? (\n          <Alert severity=\"success\" sx={{ width: '100%' }}>\n            Profile updated!\n          </Alert>\n        ) : (\n          <Alert severity=\"error\" sx={{ width: '100%' }}>\n            Something went wrong.\n          </Alert>\n        )}\n      </Snackbar>\n    </Box>\n  );\n}\n"],"names":[],"mappings":";;;;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAOA;AAEA;AACA;AACA;AACA;AAfA;;;;;;;;;AAsBe,SAAS;IACtB,MAAM,EAAE,IAAI,EAAE,SAAS,EAAE,GAAG,CAAA,GAAA,8HAAA,CAAA,UAAc,AAAD;IAEzC,MAAM,EACJ,QAAQ,IAAI,EACZ,MAAM,EACN,KAAK,EACL,UAAU,EACX,GAAG,eAAe;QACjB,MAAM,MAAM,QAAQ;QACpB,OAAO,MAAM,SAAS;QACtB,SAAS,MAAM,WAAW;IAC5B;IAEA,MAAM,CAAC,MAAM,QAAQ,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACjC,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAuB;IAExD,MAAM,OAAO;QACX,IAAI,CAAC,OAAO;QACZ,QAAQ;QACR,IAAI;YACF,MAAM,MAAM,MAAM,MAAM,qBAAqB;gBAC3C,QAAQ;gBACR,SAAS;oBAAE,gBAAgB;gBAAmB;gBAC9C,MAAM,KAAK,SAAS,CAAC;YACvB;YACA,IAAI,CAAC,IAAI,EAAE,EAAE,MAAM,IAAI;YACvB,SAAS;YACT;QACF,EAAE,OAAM;YACN,SAAS;QACX,SAAU;YACR,QAAQ;QACV;IACF;IAEA,IAAI,aAAa,CAAC,MAChB,qBACE,8OAAC,wLAAA,CAAA,MAAG;QAAC,WAAU;kBACb,cAAA,8OAAC,+NAAA,CAAA,mBAAgB;;;;;;;;;;IAIvB,qBACE,8OAAC,wLAAA,CAAA,MAAG;QAAC,WAAU;;0BACb,8OAAC,gJAAA,CAAA,UAAM;gBACL,oBAAM,8OAAC,iJAAA,CAAA,UAAU;oBAAC,eAAe;;;;;;gBACjC,sBAAQ,8OAAC;oBAAG,WAAU;8BAAwB;;;;;;;;;;;0BAGhD,8OAAC,wLAAA,CAAA,MAAG;gBAAC,WAAU;gBAAO,WAAU;;kCAC9B,8OAAC,0MAAA,CAAA,YAAS;wBACR,OAAM;wBACN,QAAQ;wBACR,OAAO,KAAK,IAAI;wBAChB,UAAU,CAAA,IAAK,OAAO,QAAQ,EAAE,MAAM,CAAC,KAAK;;;;;;kCAG9C,8OAAC,wKAAA,CAAA,cAAW;wBACV,OAAM;wBACN,QAAQ;wBACR,gBAAe;wBACf,OAAO,KAAK,KAAK;wBACjB,UAAU,CAAA,MAAO,OAAO,SAAS;;;;;;kCAGnC,8OAAC,0MAAA,CAAA,YAAS;wBACR,OAAM;wBACN,SAAS;wBACT,MAAM;wBACN,OAAO,KAAK,OAAO;wBACnB,UAAU,CAAA,IAAK,OAAO,WAAW,EAAE,MAAM,CAAC,KAAK;wBAC/C,aAAY;;;;;;kCAGd,8OAAC,oJAAA,CAAA,UAAa;wBACZ,UAAU,QAAQ,CAAC,SAAS,CAAC,KAAK,IAAI,CAAC,IAAI,MAAM,CAAC,KAAK,KAAK,CAAC,IAAI;wBACjE,SAAS;kCAER,OAAO,YAAY;;;;;;;;;;;;0BAIxB,8OAAC,uMAAA,CAAA,WAAQ;gBACP,MAAM,UAAU;gBAChB,kBAAkB;gBAClB,SAAS,IAAM,SAAS;0BAEvB,UAAU,qBACT,8OAAC,8LAAA,CAAA,QAAK;oBAAC,UAAS;oBAAU,IAAI;wBAAE,OAAO;oBAAO;8BAAG;;;;;yCAIjD,8OAAC,8LAAA,CAAA,QAAK;oBAAC,UAAS;oBAAQ,IAAI;wBAAE,OAAO;oBAAO;8BAAG;;;;;;;;;;;;;;;;;AAOzD","debugId":null}}]
}
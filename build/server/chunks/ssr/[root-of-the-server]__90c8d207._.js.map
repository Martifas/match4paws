{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 58, "column": 0}, "map": {"version":3,"sources":["file:///home/mgrumadas/projects/match4paws/src/lib/db.ts"],"sourcesContent":["import \"dotenv/config\";\nimport { Kysely, PostgresDialect, CamelCasePlugin } from \"kysely\";\nimport { Pool } from \"pg\";\nimport { DB } from \"@/database/types\";\n\nconst pool = new Pool({\n  connectionString: process.env.DATABASE_URL,\n});\n\nconst dialect = new PostgresDialect({ pool });\n\nexport const db = new Kysely<DB>({\n  dialect,\n  plugins: [new CamelCasePlugin()],\n});\n"],"names":[],"mappings":";;;AAAA;AACA;AAAA;AAAA;AACA;;;;;;;;AAGA,MAAM,OAAO,IAAI,oGAAA,CAAA,OAAI,CAAC;IACpB,kBAAkB,QAAQ,GAAG,CAAC,YAAY;AAC5C;AAEA,MAAM,UAAU,IAAI,mLAAA,CAAA,kBAAe,CAAC;IAAE;AAAK;AAEpC,MAAM,KAAK,IAAI,+IAAA,CAAA,SAAM,CAAK;IAC/B;IACA,SAAS;QAAC,IAAI,2LAAA,CAAA,kBAAe;KAAG;AAClC","debugId":null}},
    {"offset": {"line": 92, "column": 0}, "map": {"version":3,"sources":["file:///home/mgrumadas/projects/match4paws/src/lib/queries/users.ts"],"sourcesContent":["import { db } from \"@/lib/db\";\nimport { UpdateOnboardingRequest } from \"@/lib/types/onboarding\";\n\nexport type User = {\n  id: string;\n  auth0Id: string;\n  name?: string;\n  email?: string;\n  phone?: string;\n  gender?: string;\n  userType?: string;\n  onboardingCompleted: boolean;\n  createdAt: Date;\n  lastLoginAt?: Date;\n};\n\nexport async function getUserByAuth0Id(\n  auth0Id: string\n): Promise<{ id: string } | null> {\n  return (\n    (await db\n      .selectFrom(\"users\")\n      .select([\"id\"])\n      .where(\"auth0Id\", \"=\", auth0Id)\n      .executeTakeFirst()) || null\n  );\n}\n\nexport async function getUserById(id: string): Promise<User | null> {\n  return (\n    (await db\n      .selectFrom(\"users\")\n      .selectAll()\n      .where(\"id\", \"=\", id)\n      .executeTakeFirst()) || null\n  );\n}\n\nexport async function createUser(auth0Id: string): Promise<void> {\n  await db\n    .insertInto(\"users\")\n    .values({ auth0Id })\n    .onConflict((oc) => oc.column(\"auth0Id\").doNothing())\n    .execute();\n}\n\nexport async function updateLastLogin(auth0Id: string): Promise<void> {\n  await db\n    .updateTable(\"users\")\n    .set({ lastLoginAt: new Date() })\n    .where(\"auth0Id\", \"=\", auth0Id)\n    .execute();\n}\n\nexport async function getUserOnboardingStatus(\n  auth0Id: string\n): Promise<boolean> {\n  const result = await db\n    .selectFrom(\"users\")\n    .select([\"onboardingCompleted\"])\n    .where(\"auth0Id\", \"=\", auth0Id)\n    .executeTakeFirst();\n\n  return result?.onboardingCompleted ?? false;\n}\n\nexport async function updateUserOnboarding(\n  data: UpdateOnboardingRequest\n): Promise<void> {\n  const { userId, ...updateData } = data;\n\n  await db\n    .updateTable(\"users\")\n    .set({\n      onboardingCompleted: true,\n      onboardingCompletedAt: new Date(),\n      ...updateData,\n\n      preferredAnimalTypes: updateData.preferredAnimalTypes\n        ? JSON.stringify(updateData.preferredAnimalTypes)\n        : undefined,\n    })\n    .where(\"auth0Id\", \"=\", userId)\n    .execute();\n}\n\nexport async function updateUserProfile(\n  userId: string,\n  updates: Partial<Pick<User, \"name\" | \"email\" | \"phone\" | \"gender\">>\n): Promise<void> {\n  await db.updateTable(\"users\").set(updates).where(\"id\", \"=\", userId).execute();\n}\n"],"names":[],"mappings":";;;;;;;;;AAAA;;;;;;AAgBO,eAAe,iBACpB,OAAe;IAEf,OACE,AAAC,MAAM,gHAAA,CAAA,KAAE,CACN,UAAU,CAAC,SACX,MAAM,CAAC;QAAC;KAAK,EACb,KAAK,CAAC,WAAW,KAAK,SACtB,gBAAgB,MAAO;AAE9B;AAEO,eAAe,YAAY,EAAU;IAC1C,OACE,AAAC,MAAM,gHAAA,CAAA,KAAE,CACN,UAAU,CAAC,SACX,SAAS,GACT,KAAK,CAAC,MAAM,KAAK,IACjB,gBAAgB,MAAO;AAE9B;AAEO,eAAe,WAAW,OAAe;IAC9C,MAAM,gHAAA,CAAA,KAAE,CACL,UAAU,CAAC,SACX,MAAM,CAAC;QAAE;IAAQ,GACjB,UAAU,CAAC,CAAC,KAAO,GAAG,MAAM,CAAC,WAAW,SAAS,IACjD,OAAO;AACZ;AAEO,eAAe,gBAAgB,OAAe;IACnD,MAAM,gHAAA,CAAA,KAAE,CACL,WAAW,CAAC,SACZ,GAAG,CAAC;QAAE,aAAa,IAAI;IAAO,GAC9B,KAAK,CAAC,WAAW,KAAK,SACtB,OAAO;AACZ;AAEO,eAAe,wBACpB,OAAe;IAEf,MAAM,SAAS,MAAM,gHAAA,CAAA,KAAE,CACpB,UAAU,CAAC,SACX,MAAM,CAAC;QAAC;KAAsB,EAC9B,KAAK,CAAC,WAAW,KAAK,SACtB,gBAAgB;IAEnB,OAAO,QAAQ,uBAAuB;AACxC;AAEO,eAAe,qBACpB,IAA6B;IAE7B,MAAM,EAAE,MAAM,EAAE,GAAG,YAAY,GAAG;IAElC,MAAM,gHAAA,CAAA,KAAE,CACL,WAAW,CAAC,SACZ,GAAG,CAAC;QACH,qBAAqB;QACrB,uBAAuB,IAAI;QAC3B,GAAG,UAAU;QAEb,sBAAsB,WAAW,oBAAoB,GACjD,KAAK,SAAS,CAAC,WAAW,oBAAoB,IAC9C;IACN,GACC,KAAK,CAAC,WAAW,KAAK,QACtB,OAAO;AACZ;AAEO,eAAe,kBACpB,MAAc,EACd,OAAmE;IAEnE,MAAM,gHAAA,CAAA,KAAE,CAAC,WAAW,CAAC,SAAS,GAAG,CAAC,SAAS,KAAK,CAAC,MAAM,KAAK,QAAQ,OAAO;AAC7E","debugId":null}},
    {"offset": {"line": 150, "column": 0}, "map": {"version":3,"sources":["file:///home/mgrumadas/projects/match4paws/src/lib/queries/favorites.ts"],"sourcesContent":["import { db } from \"@/lib/db\";\nimport { sql } from \"kysely\";\n\nexport async function addFavorite(\n  userId: string,\n  petId: string\n): Promise<void> {\n  await db\n    .insertInto(\"favourites\")\n    .values({ userId, petId })\n    .onConflict((oc) => oc.columns([\"userId\", \"petId\"]).doNothing())\n    .execute();\n}\n\nexport async function removeFavorite(\n  userId: string,\n  petId: string\n): Promise<void> {\n  await db\n    .deleteFrom(\"favourites\")\n    .where(\"userId\", \"=\", userId)\n    .where(\"petId\", \"=\", petId)\n    .execute();\n}\n\nexport async function getUserFavorites(userId: string): Promise<string[]> {\n  const favorites = await db\n    .selectFrom(\"favourites\")\n    .select([\"petId\"])\n    .where(\"userId\", \"=\", userId)\n    .execute();\n\n  return favorites.map((f) => f.petId);\n}\n\nexport type FavoritedPet = {\n  id: string;\n  name: string;\n  ageGroup: string;\n  breed: string | null;\n  size: string;\n  imageUrl: string | null;\n  favoritedAt: Date;\n};\n\nexport async function getUserFavoritedPets(\n  userId: string\n): Promise<FavoritedPet[]> {\n  return await db\n    .selectFrom(\"favourites as f\")\n    .innerJoin(\"pets as p\", \"p.id\", \"f.petId\")\n    .leftJoin(\"petImages as pi\", (j) =>\n      j.onRef(\"pi.petId\", \"=\", \"p.id\").on(\"pi.orderIdx\", \"=\", 0)\n    )\n    .select([\n      \"p.id\",\n      \"p.name\",\n      \"p.ageGroup\",\n      \"p.breed\",\n      \"p.size\",\n      sql<string>`pi.url`.as(\"imageUrl\"),\n      \"f.createdAt as favoritedAt\",\n    ])\n    .where(\"f.userId\", \"=\", userId)\n    .orderBy(\"f.createdAt\", \"desc\")\n    .execute();\n}\n"],"names":[],"mappings":";;;;;;AAAA;AACA;;;;;;;AAEO,eAAe,YACpB,MAAc,EACd,KAAa;IAEb,MAAM,gHAAA,CAAA,KAAE,CACL,UAAU,CAAC,cACX,MAAM,CAAC;QAAE;QAAQ;IAAM,GACvB,UAAU,CAAC,CAAC,KAAO,GAAG,OAAO,CAAC;YAAC;YAAU;SAAQ,EAAE,SAAS,IAC5D,OAAO;AACZ;AAEO,eAAe,eACpB,MAAc,EACd,KAAa;IAEb,MAAM,gHAAA,CAAA,KAAE,CACL,UAAU,CAAC,cACX,KAAK,CAAC,UAAU,KAAK,QACrB,KAAK,CAAC,SAAS,KAAK,OACpB,OAAO;AACZ;AAEO,eAAe,iBAAiB,MAAc;IACnD,MAAM,YAAY,MAAM,gHAAA,CAAA,KAAE,CACvB,UAAU,CAAC,cACX,MAAM,CAAC;QAAC;KAAQ,EAChB,KAAK,CAAC,UAAU,KAAK,QACrB,OAAO;IAEV,OAAO,UAAU,GAAG,CAAC,CAAC,IAAM,EAAE,KAAK;AACrC;AAYO,eAAe,qBACpB,MAAc;IAEd,OAAO,MAAM,gHAAA,CAAA,KAAE,CACZ,UAAU,CAAC,mBACX,SAAS,CAAC,aAAa,QAAQ,WAC/B,QAAQ,CAAC,mBAAmB,CAAC,IAC5B,EAAE,KAAK,CAAC,YAAY,KAAK,QAAQ,EAAE,CAAC,eAAe,KAAK,IAEzD,MAAM,CAAC;QACN;QACA;QACA;QACA;QACA;QACA,8JAAA,CAAA,MAAG,AAAQ,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC;QACvB;KACD,EACA,KAAK,CAAC,YAAY,KAAK,QACvB,OAAO,CAAC,eAAe,QACvB,OAAO;AACZ","debugId":null}},
    {"offset": {"line": 200, "column": 0}, "map": {"version":3,"sources":["file:///home/mgrumadas/projects/match4paws/src/components/ui/containers/Header.tsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/components/ui/containers/Header.tsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/ui/containers/Header.tsx <module evaluation>\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;AAAA;;uCACe,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACjC;IAAa,MAAM,IAAI,MAAM;AAA2S,GACxU,yEACA","debugId":null}},
    {"offset": {"line": 214, "column": 0}, "map": {"version":3,"sources":["file:///home/mgrumadas/projects/match4paws/src/components/ui/containers/Header.tsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/components/ui/containers/Header.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/ui/containers/Header.tsx\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;AAAA;;uCACe,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACjC;IAAa,MAAM,IAAI,MAAM;AAAuR,GACpT,qDACA","debugId":null}},
    {"offset": {"line": 228, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 238, "column": 0}, "map": {"version":3,"sources":["file:///home/mgrumadas/projects/match4paws/src/components/ui/buttons/BackButton.tsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/components/ui/buttons/BackButton.tsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/ui/buttons/BackButton.tsx <module evaluation>\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;AAAA;;uCACe,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACjC;IAAa,MAAM,IAAI,MAAM;AAA4S,GACzU,0EACA","debugId":null}},
    {"offset": {"line": 252, "column": 0}, "map": {"version":3,"sources":["file:///home/mgrumadas/projects/match4paws/src/components/ui/buttons/BackButton.tsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/components/ui/buttons/BackButton.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/ui/buttons/BackButton.tsx\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;AAAA;;uCACe,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACjC;IAAa,MAAM,IAAI,MAAM;AAAwR,GACrT,sDACA","debugId":null}},
    {"offset": {"line": 266, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 276, "column": 0}, "map": {"version":3,"sources":["file:///home/mgrumadas/projects/match4paws/src/components/pet/PetCard.tsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/components/pet/PetCard.tsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/pet/PetCard.tsx <module evaluation>\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;AAAA;;uCACe,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACjC;IAAa,MAAM,IAAI,MAAM;AAAkS,GAC/T,gEACA","debugId":null}},
    {"offset": {"line": 290, "column": 0}, "map": {"version":3,"sources":["file:///home/mgrumadas/projects/match4paws/src/components/pet/PetCard.tsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/components/pet/PetCard.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/pet/PetCard.tsx\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;AAAA;;uCACe,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACjC;IAAa,MAAM,IAAI,MAAM;AAA8Q,GAC3S,4CACA","debugId":null}},
    {"offset": {"line": 304, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 314, "column": 0}, "map": {"version":3,"sources":["file:///home/mgrumadas/projects/match4paws/src/app/%28dashboard%29/favorites/page.tsx"],"sourcesContent":["import { auth0 } from \"@/lib/auth0\";\nimport { getUserByAuth0Id } from \"@/lib/queries/users\";\nimport { getUserFavoritedPets } from \"@/lib/queries/favorites\";\nimport Header from \"@/components/ui/containers/Header\";\nimport BackButton from \"@/components/ui/buttons/BackButton\";\nimport PetCard from \"@/components/pet/PetCard\";\nimport { redirect } from \"next/navigation\";\n\nexport default async function FavoritesPage() {\n  const session = await auth0.getSession();\n\n  if (!session) {\n    redirect(\"/auth/login\");\n  }\n\n  const user = await getUserByAuth0Id(session.user.sub);\n\n  if (!user) {\n    redirect(\"/auth/login\");\n  }\n\n  const favoritedPets = await getUserFavoritedPets(user.id);\n\n  return (\n    <>\n      <Header\n        left={<BackButton />}\n        center={\n          <h1 className=\"text-lg font-semibold tracking-wide select-none\">\n            My Favorites\n          </h1>\n        }\n      />\n\n      <div className=\"max-w-xl mx-auto px-4\">\n        {favoritedPets.length > 0 ? (\n          <div className=\"grid gap-3 md:gap-6 grid-cols-2 lg:grid-cols-3 py-6\">\n            {favoritedPets.map((pet) => (\n              <PetCard\n                key={pet.id}\n                id={pet.id}\n                name={pet.name}\n                age={pet.ageGroup}\n                breed={pet.breed}\n                size={pet.size}\n                imageUrl={pet.imageUrl}\n                isFavorite={true} // All pets on this page are favorited\n              />\n            ))}\n          </div>\n        ) : (\n          <div className=\"text-center py-12\">\n            <div className=\"mb-4 text-6xl\">💔</div>\n            <h2 className=\"text-xl font-semibold text-gray-800 mb-2\">\n              No favorites yet\n            </h2>\n            <p className=\"text-gray-600 mb-6\">\n              Start exploring pets and add some to your favorites!\n            </p>\n            <a\n              href=\"/searchresults\"\n              className=\"inline-block bg-orange-500 text-white px-6 py-3 rounded-full font-semibold hover:bg-orange-600 transition-colors\"\n            >\n              Explore Pets\n            </a>\n          </div>\n        )}\n      </div>\n    </>\n  );\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;;;;;;;;;;;;;;AAEe,eAAe;IAC5B,MAAM,UAAU,MAAM,mHAAA,CAAA,QAAK,CAAC,UAAU;IAEtC,IAAI,CAAC,SAAS;QACZ,CAAA,GAAA,qLAAA,CAAA,WAAQ,AAAD,EAAE;IACX;IAEA,MAAM,OAAO,MAAM,CAAA,GAAA,8HAAA,CAAA,mBAAgB,AAAD,EAAE,QAAQ,IAAI,CAAC,GAAG;IAEpD,IAAI,CAAC,MAAM;QACT,CAAA,GAAA,qLAAA,CAAA,WAAQ,AAAD,EAAE;IACX;IAEA,MAAM,gBAAgB,MAAM,CAAA,GAAA,kIAAA,CAAA,uBAAoB,AAAD,EAAE,KAAK,EAAE;IAExD,qBACE;;0BACE,8OAAC,gJAAA,CAAA,UAAM;gBACL,oBAAM,8OAAC,iJAAA,CAAA,UAAU;;;;;gBACjB,sBACE,8OAAC;oBAAG,WAAU;8BAAkD;;;;;;;;;;;0BAMpE,8OAAC;gBAAI,WAAU;0BACZ,cAAc,MAAM,GAAG,kBACtB,8OAAC;oBAAI,WAAU;8BACZ,cAAc,GAAG,CAAC,CAAC,oBAClB,8OAAC,oIAAA,CAAA,UAAO;4BAEN,IAAI,IAAI,EAAE;4BACV,MAAM,IAAI,IAAI;4BACd,KAAK,IAAI,QAAQ;4BACjB,OAAO,IAAI,KAAK;4BAChB,MAAM,IAAI,IAAI;4BACd,UAAU,IAAI,QAAQ;4BACtB,YAAY;2BAPP,IAAI,EAAE;;;;;;;;;yCAYjB,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BAAI,WAAU;sCAAgB;;;;;;sCAC/B,8OAAC;4BAAG,WAAU;sCAA2C;;;;;;sCAGzD,8OAAC;4BAAE,WAAU;sCAAqB;;;;;;sCAGlC,8OAAC;4BACC,MAAK;4BACL,WAAU;sCACX;;;;;;;;;;;;;;;;;;;AAQb","debugId":null}}]
}
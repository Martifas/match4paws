{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 104, "column": 0}, "map": {"version":3,"sources":["file:///home/marty/turing/4-module/4-sprint/match4paws/src/lib/db.ts"],"sourcesContent":["import \"dotenv/config\";\nimport { Kysely, PostgresDialect, CamelCasePlugin } from \"kysely\";\nimport { Pool } from \"pg\";\nimport { DB } from \"@/database/types\";\n\nconst pool = new Pool({\n  connectionString: process.env.DATABASE_URL,\n});\n\nconst dialect = new PostgresDialect({ pool });\n\nexport const db = new Kysely<DB>({\n  dialect,\n  plugins: [new CamelCasePlugin()],\n});\n"],"names":[],"mappings":";;;AAAA;AACA;AAAA;AAAA;AACA;;;;;;;;AAGA,MAAM,OAAO,IAAI,oGAAA,CAAA,OAAI,CAAC;IACpB,kBAAkB,QAAQ,GAAG,CAAC,YAAY;AAC5C;AAEA,MAAM,UAAU,IAAI,qLAAA,CAAA,kBAAe,CAAC;IAAE;AAAK;AAEpC,MAAM,KAAK,IAAI,iJAAA,CAAA,SAAM,CAAK;IAC/B;IACA,SAAS;QAAC,IAAI,6LAAA,CAAA,kBAAe;KAAG;AAClC","debugId":null}},
    {"offset": {"line": 196, "column": 0}, "map": {"version":3,"sources":["file:///home/marty/turing/4-module/4-sprint/match4paws/src/lib/auth0.ts"],"sourcesContent":["import { Auth0Client } from '@auth0/nextjs-auth0/server';\n\nexport const auth0 = new Auth0Client({\n  domain: process.env.AUTH0_DOMAIN,\n  clientId: process.env.AUTH0_CLIENT_ID,\n  clientSecret: process.env.AUTH0_CLIENT_SECRET,\n  secret: process.env.AUTH0_SECRET,\n  appBaseUrl: process.env.APP_BASE_URL,\n});\n"],"names":[],"mappings":";;;AAAA;AAAA;;AAEO,MAAM,QAAQ,IAAI,wKAAA,CAAA,cAAW,CAAC;IACnC,QAAQ,QAAQ,GAAG,CAAC,YAAY;IAChC,UAAU,QAAQ,GAAG,CAAC,eAAe;IACrC,cAAc,QAAQ,GAAG,CAAC,mBAAmB;IAC7C,QAAQ,QAAQ,GAAG,CAAC,YAAY;IAChC,YAAY,QAAQ,GAAG,CAAC,YAAY;AACtC","debugId":null}},
    {"offset": {"line": 215, "column": 0}, "map": {"version":3,"sources":["file:///home/marty/turing/4-module/4-sprint/match4paws/src/app/api/favorites/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from 'next/server';\nimport { db } from '@/lib/db';\nimport { auth0 } from '@/lib/auth0';\n\nasync function getUserUuid(auth0Id: string | undefined) {\n  if (!auth0Id) return null;\n  const row = await db\n    .selectFrom('users')\n    .select(['id'])\n    .where('auth0Id', '=', auth0Id)\n    .executeTakeFirst();\n  return row?.id ?? null;\n}\n\nexport async function POST(req: NextRequest) {\n  const { petId } = (await req.json()) as { petId: string };\n  const session = await auth0.getSession();\n  const userUuid = await getUserUuid(session?.user?.sub);\n\n  if (!userUuid)\n    return NextResponse.json({ error: 'unauthenticated' }, { status: 401 });\n  if (!petId)\n    return NextResponse.json({ error: 'missing petId' }, { status: 400 });\n\n  await db\n    .insertInto('favourites')\n    .values({ userId: userUuid, petId })\n    .onConflict(oc => oc.columns(['userId', 'petId']).doNothing())\n    .execute();\n\n  return NextResponse.json({ ok: true });\n}\n\nexport async function DELETE(req: NextRequest) {\n  const { petId } = (await req.json()) as { petId: string };\n  const session = await auth0.getSession();\n  const userUuid = await getUserUuid(session?.user?.sub);\n\n  if (!userUuid)\n    return NextResponse.json({ error: 'unauthenticated' }, { status: 401 });\n\n  await db\n    .deleteFrom('favourites')\n    .where('userId', '=', userUuid)\n    .where('petId', '=', petId)\n    .execute();\n\n  return NextResponse.json({ ok: true });\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;;;;;AAEA,eAAe,YAAY,OAA2B;IACpD,IAAI,CAAC,SAAS,OAAO;IACrB,MAAM,MAAM,MAAM,kHAAA,CAAA,KAAE,CACjB,UAAU,CAAC,SACX,MAAM,CAAC;QAAC;KAAK,EACb,KAAK,CAAC,WAAW,KAAK,SACtB,gBAAgB;IACnB,OAAO,KAAK,MAAM;AACpB;AAEO,eAAe,KAAK,GAAgB;IACzC,MAAM,EAAE,KAAK,EAAE,GAAI,MAAM,IAAI,IAAI;IACjC,MAAM,UAAU,MAAM,qHAAA,CAAA,QAAK,CAAC,UAAU;IACtC,MAAM,WAAW,MAAM,YAAY,SAAS,MAAM;IAElD,IAAI,CAAC,UACH,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;QAAE,OAAO;IAAkB,GAAG;QAAE,QAAQ;IAAI;IACvE,IAAI,CAAC,OACH,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;QAAE,OAAO;IAAgB,GAAG;QAAE,QAAQ;IAAI;IAErE,MAAM,kHAAA,CAAA,KAAE,CACL,UAAU,CAAC,cACX,MAAM,CAAC;QAAE,QAAQ;QAAU;IAAM,GACjC,UAAU,CAAC,CAAA,KAAM,GAAG,OAAO,CAAC;YAAC;YAAU;SAAQ,EAAE,SAAS,IAC1D,OAAO;IAEV,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;QAAE,IAAI;IAAK;AACtC;AAEO,eAAe,OAAO,GAAgB;IAC3C,MAAM,EAAE,KAAK,EAAE,GAAI,MAAM,IAAI,IAAI;IACjC,MAAM,UAAU,MAAM,qHAAA,CAAA,QAAK,CAAC,UAAU;IACtC,MAAM,WAAW,MAAM,YAAY,SAAS,MAAM;IAElD,IAAI,CAAC,UACH,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;QAAE,OAAO;IAAkB,GAAG;QAAE,QAAQ;IAAI;IAEvE,MAAM,kHAAA,CAAA,KAAE,CACL,UAAU,CAAC,cACX,KAAK,CAAC,UAAU,KAAK,UACrB,KAAK,CAAC,SAAS,KAAK,OACpB,OAAO;IAEV,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;QAAE,IAAI;IAAK;AACtC","debugId":null}}]
}
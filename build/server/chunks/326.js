exports.id=326,exports.ids=[326],exports.modules={2170:(e,t,r)=>{"use strict";r.d(t,{c:()=>o});var i=r(85788);let o=(0,i.CN)({is:e=>"JSONPathNode"===e.kind,create:e=>(0,i.CN)({kind:"JSONPathNode",inOperator:e,pathLegs:(0,i.CN)([])}),cloneWithLeg:(e,t)=>(0,i.CN)({...e,pathLegs:(0,i.CN)([...e.pathLegs,t])})})},2592:(e,t,r)=>{"use strict";r.d(t,{v:()=>o});var i=r(85788);let o=(0,i.CN)({is:e=>"ListNode"===e.kind,create:e=>(0,i.CN)({kind:"ListNode",items:(0,i.CN)(e)})})},4757:(e,t,r)=>{"use strict";r.d(t,{$O:()=>y,DT:()=>C,NF:()=>w,Ow:()=>b,RY:()=>g,kU:()=>f,q5:()=>v,vd:()=>m});var i=r(58740),o=r(11078),n=r(17035),s=r(98572),a=r(85788),d=r(97778),p=r(52325),h=r(8976),u=r(74936),c=r(35998),l=r(99119),N=r(2170);function m(e){return(0,a.Kg)(e)?v(e):e.toOperationNode()}function f(e){return(0,a.MH)(e)?e.map(e=>y(e)):[y(e)]}function y(e){return(0,d.SS)(e)?(0,d.YK)(e):m(e)}function w(e,t){let r=v(e);if((0,u.Xm)(t))return c.Q.create(r,l.k.create(u.zX.create(t)));let i=t.slice(0,-1);if((0,u.Xm)(i))return c.Q.create(r,N.c.create(u.zX.create(i)));throw Error(`Invalid JSON operator: ${t}`)}function v(e){if(!e.includes("."))return n.q.create(o.Z.create(e));let t=e.split(".").map(x);if(3===t.length){var r=t;let[e,i,a]=r;return n.q.create(o.Z.create(a),s.H.createWithSchema(e,i))}if(2===t.length){var i=t;let[e,r]=i;return n.q.create(o.Z.create(r),s.H.create(e))}throw Error(`invalid column reference ${e}`)}function C(e){let t=" as ";if(!e.includes(t))return v(e);{let[r,o]=e.split(t).map(x);return i.N.create(v(r),p.O.create(o))}}function g(e){return o.Z.create(e)}function b(e){if(!e.includes(" "))return g(e);{let[t,r]=e.split(" ").map(x);if(!(0,h.bE)(r))throw Error(`invalid order direction "${r}" next to "${t}"`);return(0,h.xk)([t,r])[0]}}function x(e){return e.trim()}},8976:(e,t,r)=>{"use strict";r.d(t,{bE:()=>N,xk:()=>m});var i=r(43995),o=r(77187),n=r(85788);let s=(0,n.CN)({is:e=>"OrderByItemNode"===e.kind,create:(e,t)=>(0,n.CN)({kind:"OrderByItemNode",orderBy:e,direction:t}),cloneWith:(e,t)=>(0,n.CN)({...e,...t})});var a=r(38706),d=r(52325);let p={create:e=>(0,n.CN)({kind:"CollateNode",collation:d.O.create(e)})};class h{#e;constructor(e){this.#e=(0,n.CN)(e)}desc(){return new h({node:s.cloneWith(this.#e.node,{direction:a.z.createWithSql("desc")})})}asc(){return new h({node:s.cloneWith(this.#e.node,{direction:a.z.createWithSql("asc")})})}nullsLast(){return new h({node:s.cloneWith(this.#e.node,{nulls:"last"})})}nullsFirst(){return new h({node:s.cloneWith(this.#e.node,{nulls:"first"})})}collate(e){return new h({node:s.cloneWith(this.#e.node,{collation:p.create(e)})})}toOperationNode(){return this.#e.node}}var u=r(95147),c=r(97778),l=r(4757);function N(e){return"asc"===e||"desc"===e}function m(e){if(2===e.length)return[f(e[0],e[1])];if(1===e.length){let[t]=e;return Array.isArray(t)?((0,u.u)("orderBy(array) is deprecated, use multiple orderBy calls instead."),t.map(e=>f(e))):[f(t)]}throw Error(`Invalid number of arguments at order by! expected 1-2, received ${e.length}`)}function f(e,t){let r=function(e){if((0,c.SS)(e))return(0,c.YK)(e);if((0,i.C)(e))return e.toOperationNode();let[t,r]=e.split(" ");return r?((0,u.u)("`orderBy('column asc')` is deprecated. Use `orderBy('column', 'asc')` instead."),y((0,l.q5)(t),r)):(0,l.q5)(e)}(e);if(s.is(r)){if(t)throw Error("Cannot specify direction twice!");return r}return y(r,t)}function y(e,t){if("string"==typeof t){if(!N(t))throw Error(`Invalid order by direction: ${t}`);return s.create(e,a.z.createWithSql(t))}if((0,o.B)(t))return(0,u.u)("`orderBy(..., expr)` is deprecated. Use `orderBy(..., 'asc')` or `orderBy(..., (ob) => ...)` instead."),s.create(e,t.toOperationNode());let r=s.create(e);return t?t(new h({node:r})).toOperationNode():r}},9622:(e,t,r)=>{"use strict";r.d(t,{O:()=>o});var i=r(85788);let o=(0,i.CN)({is:e=>"OrderByNode"===e.kind,create:e=>(0,i.CN)({kind:"OrderByNode",items:(0,i.CN)([...e])}),cloneWithItems:(e,t)=>(0,i.CN)({...e,items:(0,i.CN)([...e.items,...t])})})},11078:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var i=r(85788),o=r(52325);let n=(0,i.CN)({is:e=>"ColumnNode"===e.kind,create:e=>(0,i.CN)({kind:"ColumnNode",column:o.O.create(e)})})},11427:(e,t,r)=>{"use strict";r.d(t,{F:()=>i,x:()=>o});class i extends Error{node;constructor(e){super("no result"),this.node=e}}function o(e){return Object.prototype.hasOwnProperty.call(e,"prototype")}},15400:(e,t,r)=>{"use strict";r.d(t,{l:()=>y});var i=r(52325),o=r(39865),n=r(38706),s=r(62863),a=r(4757),d=r(99758),p=r(78853),h=r(81460),u=r(58740),c=r(85788),l=r(36296);class N{#e;constructor(e){this.#e=(0,c.CN)(e)}get expressionType(){}get isRawBuilder(){return!0}as(e){return new f(this,e)}$castTo(){return new N({...this.#e})}$notNull(){return new N(this.#e)}withPlugin(e){return new N({...this.#e,plugins:void 0!==this.#e.plugins?(0,c.CN)([...this.#e.plugins,e]):(0,c.CN)([e])})}toOperationNode(){return this.#t(this.#r())}compile(e){return this.#i(this.#r(e))}async execute(e){let t=this.#r(e);return t.executeQuery(this.#i(t),this.#e.queryId)}#r(e){let t=void 0!==e?e.getExecutor():l.W;return void 0!==this.#e.plugins?t.withPlugins(this.#e.plugins):t}#t(e){return e.transformQuery(this.#e.rawNode,this.#e.queryId)}#i(e){return e.compileQuery(this.#t(e),this.#e.queryId)}}function m(e){return new N(e)}class f{#o;#n;constructor(e,t){this.#o=e,this.#n=t}get expression(){return this.#o}get alias(){return this.#n}get rawBuilder(){return this.#o}toOperationNode(){return u.N.create(this.#o.toOperationNode(),(0,o.N)(this.#n)?this.#n.toOperationNode():i.O.create(this.#n))}}let y=Object.assign((e,...t)=>m({queryId:(0,h.a)(),rawNode:n.z.create(e,t?.map(w)??[])}),{ref:e=>m({queryId:(0,h.a)(),rawNode:n.z.createWithChild((0,a.q5)(e))}),val:e=>m({queryId:(0,h.a)(),rawNode:n.z.createWithChild((0,p.$s)(e))}),value(e){return this.val(e)},table:e=>m({queryId:(0,h.a)(),rawNode:n.z.createWithChild((0,d.M$)(e))}),id(...e){let t=Array(e.length+1).fill(".");return t[0]="",t[t.length-1]="",m({queryId:(0,h.a)(),rawNode:n.z.create(t,e.map(i.O.create))})},lit:e=>m({queryId:(0,h.a)(),rawNode:n.z.createWithChild(s.q.createImmediate(e))}),literal(e){return this.lit(e)},raw:e=>m({queryId:(0,h.a)(),rawNode:n.z.createWithSql(e)}),join(e,t=y`, `){let r=Array(Math.max(2*e.length-1,0)),i=t.toOperationNode();for(let t=0;t<e.length;++t)r[2*t]=w(e[t]),t!==e.length-1&&(r[2*t+1]=i);return m({queryId:(0,h.a)(),rawNode:n.z.createWithChildren(r)})}});function w(e){return(0,o.N)(e)?e.toOperationNode():(0,p.$s)(e)}},17035:(e,t,r)=>{"use strict";r.d(t,{q:()=>n});var i=r(46502),o=r(85788);let n=(0,o.CN)({is:e=>"ReferenceNode"===e.kind,create:(e,t)=>(0,o.CN)({kind:"ReferenceNode",table:t,column:e}),createSelectAll:e=>(0,o.CN)({kind:"ReferenceNode",table:e,column:i.U.create()})})},17052:(e,t,r)=>{"use strict";r.d(t,{V:()=>o});var i=r(85788);class o{nodeStack=[];#s=(0,i.CN)({AliasNode:this.transformAlias.bind(this),ColumnNode:this.transformColumn.bind(this),IdentifierNode:this.transformIdentifier.bind(this),SchemableIdentifierNode:this.transformSchemableIdentifier.bind(this),RawNode:this.transformRaw.bind(this),ReferenceNode:this.transformReference.bind(this),SelectQueryNode:this.transformSelectQuery.bind(this),SelectionNode:this.transformSelection.bind(this),TableNode:this.transformTable.bind(this),FromNode:this.transformFrom.bind(this),SelectAllNode:this.transformSelectAll.bind(this),AndNode:this.transformAnd.bind(this),OrNode:this.transformOr.bind(this),ValueNode:this.transformValue.bind(this),ValueListNode:this.transformValueList.bind(this),PrimitiveValueListNode:this.transformPrimitiveValueList.bind(this),ParensNode:this.transformParens.bind(this),JoinNode:this.transformJoin.bind(this),OperatorNode:this.transformOperator.bind(this),WhereNode:this.transformWhere.bind(this),InsertQueryNode:this.transformInsertQuery.bind(this),DeleteQueryNode:this.transformDeleteQuery.bind(this),ReturningNode:this.transformReturning.bind(this),CreateTableNode:this.transformCreateTable.bind(this),AddColumnNode:this.transformAddColumn.bind(this),ColumnDefinitionNode:this.transformColumnDefinition.bind(this),DropTableNode:this.transformDropTable.bind(this),DataTypeNode:this.transformDataType.bind(this),OrderByNode:this.transformOrderBy.bind(this),OrderByItemNode:this.transformOrderByItem.bind(this),GroupByNode:this.transformGroupBy.bind(this),GroupByItemNode:this.transformGroupByItem.bind(this),UpdateQueryNode:this.transformUpdateQuery.bind(this),ColumnUpdateNode:this.transformColumnUpdate.bind(this),LimitNode:this.transformLimit.bind(this),OffsetNode:this.transformOffset.bind(this),OnConflictNode:this.transformOnConflict.bind(this),OnDuplicateKeyNode:this.transformOnDuplicateKey.bind(this),CreateIndexNode:this.transformCreateIndex.bind(this),DropIndexNode:this.transformDropIndex.bind(this),ListNode:this.transformList.bind(this),PrimaryKeyConstraintNode:this.transformPrimaryKeyConstraint.bind(this),UniqueConstraintNode:this.transformUniqueConstraint.bind(this),ReferencesNode:this.transformReferences.bind(this),CheckConstraintNode:this.transformCheckConstraint.bind(this),WithNode:this.transformWith.bind(this),CommonTableExpressionNode:this.transformCommonTableExpression.bind(this),CommonTableExpressionNameNode:this.transformCommonTableExpressionName.bind(this),HavingNode:this.transformHaving.bind(this),CreateSchemaNode:this.transformCreateSchema.bind(this),DropSchemaNode:this.transformDropSchema.bind(this),AlterTableNode:this.transformAlterTable.bind(this),DropColumnNode:this.transformDropColumn.bind(this),RenameColumnNode:this.transformRenameColumn.bind(this),AlterColumnNode:this.transformAlterColumn.bind(this),ModifyColumnNode:this.transformModifyColumn.bind(this),AddConstraintNode:this.transformAddConstraint.bind(this),DropConstraintNode:this.transformDropConstraint.bind(this),RenameConstraintNode:this.transformRenameConstraint.bind(this),ForeignKeyConstraintNode:this.transformForeignKeyConstraint.bind(this),CreateViewNode:this.transformCreateView.bind(this),RefreshMaterializedViewNode:this.transformRefreshMaterializedView.bind(this),DropViewNode:this.transformDropView.bind(this),GeneratedNode:this.transformGenerated.bind(this),DefaultValueNode:this.transformDefaultValue.bind(this),OnNode:this.transformOn.bind(this),ValuesNode:this.transformValues.bind(this),SelectModifierNode:this.transformSelectModifier.bind(this),CreateTypeNode:this.transformCreateType.bind(this),DropTypeNode:this.transformDropType.bind(this),ExplainNode:this.transformExplain.bind(this),DefaultInsertValueNode:this.transformDefaultInsertValue.bind(this),AggregateFunctionNode:this.transformAggregateFunction.bind(this),OverNode:this.transformOver.bind(this),PartitionByNode:this.transformPartitionBy.bind(this),PartitionByItemNode:this.transformPartitionByItem.bind(this),SetOperationNode:this.transformSetOperation.bind(this),BinaryOperationNode:this.transformBinaryOperation.bind(this),UnaryOperationNode:this.transformUnaryOperation.bind(this),UsingNode:this.transformUsing.bind(this),FunctionNode:this.transformFunction.bind(this),CaseNode:this.transformCase.bind(this),WhenNode:this.transformWhen.bind(this),JSONReferenceNode:this.transformJSONReference.bind(this),JSONPathNode:this.transformJSONPath.bind(this),JSONPathLegNode:this.transformJSONPathLeg.bind(this),JSONOperatorChainNode:this.transformJSONOperatorChain.bind(this),TupleNode:this.transformTuple.bind(this),MergeQueryNode:this.transformMergeQuery.bind(this),MatchedNode:this.transformMatched.bind(this),AddIndexNode:this.transformAddIndex.bind(this),CastNode:this.transformCast.bind(this),FetchNode:this.transformFetch.bind(this),TopNode:this.transformTop.bind(this),OutputNode:this.transformOutput.bind(this),OrActionNode:this.transformOrAction.bind(this),CollateNode:this.transformCollate.bind(this)});transformNode(e,t){if(!e)return e;this.nodeStack.push(e);let r=this.transformNodeImpl(e,t);return this.nodeStack.pop(),(0,i.CN)(r)}transformNodeImpl(e,t){return this.#s[e.kind](e,t)}transformNodeList(e,t){return e?(0,i.CN)(e.map(e=>this.transformNode(e,t))):e}transformSelectQuery(e,t){return{kind:"SelectQueryNode",from:this.transformNode(e.from,t),selections:this.transformNodeList(e.selections,t),distinctOn:this.transformNodeList(e.distinctOn,t),joins:this.transformNodeList(e.joins,t),groupBy:this.transformNode(e.groupBy,t),orderBy:this.transformNode(e.orderBy,t),where:this.transformNode(e.where,t),frontModifiers:this.transformNodeList(e.frontModifiers,t),endModifiers:this.transformNodeList(e.endModifiers,t),limit:this.transformNode(e.limit,t),offset:this.transformNode(e.offset,t),with:this.transformNode(e.with,t),having:this.transformNode(e.having,t),explain:this.transformNode(e.explain,t),setOperations:this.transformNodeList(e.setOperations,t),fetch:this.transformNode(e.fetch,t),top:this.transformNode(e.top,t)}}transformSelection(e,t){return{kind:"SelectionNode",selection:this.transformNode(e.selection,t)}}transformColumn(e,t){return{kind:"ColumnNode",column:this.transformNode(e.column,t)}}transformAlias(e,t){return{kind:"AliasNode",node:this.transformNode(e.node,t),alias:this.transformNode(e.alias,t)}}transformTable(e,t){return{kind:"TableNode",table:this.transformNode(e.table,t)}}transformFrom(e,t){return{kind:"FromNode",froms:this.transformNodeList(e.froms,t)}}transformReference(e,t){return{kind:"ReferenceNode",column:this.transformNode(e.column,t),table:this.transformNode(e.table,t)}}transformAnd(e,t){return{kind:"AndNode",left:this.transformNode(e.left,t),right:this.transformNode(e.right,t)}}transformOr(e,t){return{kind:"OrNode",left:this.transformNode(e.left,t),right:this.transformNode(e.right,t)}}transformValueList(e,t){return{kind:"ValueListNode",values:this.transformNodeList(e.values,t)}}transformParens(e,t){return{kind:"ParensNode",node:this.transformNode(e.node,t)}}transformJoin(e,t){return{kind:"JoinNode",joinType:e.joinType,table:this.transformNode(e.table,t),on:this.transformNode(e.on,t)}}transformRaw(e,t){return{kind:"RawNode",sqlFragments:(0,i.CN)([...e.sqlFragments]),parameters:this.transformNodeList(e.parameters,t)}}transformWhere(e,t){return{kind:"WhereNode",where:this.transformNode(e.where,t)}}transformInsertQuery(e,t){return{kind:"InsertQueryNode",into:this.transformNode(e.into,t),columns:this.transformNodeList(e.columns,t),values:this.transformNode(e.values,t),returning:this.transformNode(e.returning,t),onConflict:this.transformNode(e.onConflict,t),onDuplicateKey:this.transformNode(e.onDuplicateKey,t),endModifiers:this.transformNodeList(e.endModifiers,t),with:this.transformNode(e.with,t),ignore:e.ignore,orAction:this.transformNode(e.orAction,t),replace:e.replace,explain:this.transformNode(e.explain,t),defaultValues:e.defaultValues,top:this.transformNode(e.top,t),output:this.transformNode(e.output,t)}}transformValues(e,t){return{kind:"ValuesNode",values:this.transformNodeList(e.values,t)}}transformDeleteQuery(e,t){return{kind:"DeleteQueryNode",from:this.transformNode(e.from,t),using:this.transformNode(e.using,t),joins:this.transformNodeList(e.joins,t),where:this.transformNode(e.where,t),returning:this.transformNode(e.returning,t),endModifiers:this.transformNodeList(e.endModifiers,t),with:this.transformNode(e.with,t),orderBy:this.transformNode(e.orderBy,t),limit:this.transformNode(e.limit,t),explain:this.transformNode(e.explain,t),top:this.transformNode(e.top,t),output:this.transformNode(e.output,t)}}transformReturning(e,t){return{kind:"ReturningNode",selections:this.transformNodeList(e.selections,t)}}transformCreateTable(e,t){return{kind:"CreateTableNode",table:this.transformNode(e.table,t),columns:this.transformNodeList(e.columns,t),constraints:this.transformNodeList(e.constraints,t),temporary:e.temporary,ifNotExists:e.ifNotExists,onCommit:e.onCommit,frontModifiers:this.transformNodeList(e.frontModifiers,t),endModifiers:this.transformNodeList(e.endModifiers,t),selectQuery:this.transformNode(e.selectQuery,t)}}transformColumnDefinition(e,t){return{kind:"ColumnDefinitionNode",column:this.transformNode(e.column,t),dataType:this.transformNode(e.dataType,t),references:this.transformNode(e.references,t),primaryKey:e.primaryKey,autoIncrement:e.autoIncrement,unique:e.unique,notNull:e.notNull,unsigned:e.unsigned,defaultTo:this.transformNode(e.defaultTo,t),check:this.transformNode(e.check,t),generated:this.transformNode(e.generated,t),frontModifiers:this.transformNodeList(e.frontModifiers,t),endModifiers:this.transformNodeList(e.endModifiers,t),nullsNotDistinct:e.nullsNotDistinct,identity:e.identity,ifNotExists:e.ifNotExists}}transformAddColumn(e,t){return{kind:"AddColumnNode",column:this.transformNode(e.column,t)}}transformDropTable(e,t){return{kind:"DropTableNode",table:this.transformNode(e.table,t),ifExists:e.ifExists,cascade:e.cascade}}transformOrderBy(e,t){return{kind:"OrderByNode",items:this.transformNodeList(e.items,t)}}transformOrderByItem(e,t){return{kind:"OrderByItemNode",orderBy:this.transformNode(e.orderBy,t),direction:this.transformNode(e.direction,t),collation:this.transformNode(e.collation,t),nulls:e.nulls}}transformGroupBy(e,t){return{kind:"GroupByNode",items:this.transformNodeList(e.items,t)}}transformGroupByItem(e,t){return{kind:"GroupByItemNode",groupBy:this.transformNode(e.groupBy,t)}}transformUpdateQuery(e,t){return{kind:"UpdateQueryNode",table:this.transformNode(e.table,t),from:this.transformNode(e.from,t),joins:this.transformNodeList(e.joins,t),where:this.transformNode(e.where,t),updates:this.transformNodeList(e.updates,t),returning:this.transformNode(e.returning,t),endModifiers:this.transformNodeList(e.endModifiers,t),with:this.transformNode(e.with,t),explain:this.transformNode(e.explain,t),limit:this.transformNode(e.limit,t),top:this.transformNode(e.top,t),output:this.transformNode(e.output,t),orderBy:this.transformNode(e.orderBy,t)}}transformColumnUpdate(e,t){return{kind:"ColumnUpdateNode",column:this.transformNode(e.column,t),value:this.transformNode(e.value,t)}}transformLimit(e,t){return{kind:"LimitNode",limit:this.transformNode(e.limit,t)}}transformOffset(e,t){return{kind:"OffsetNode",offset:this.transformNode(e.offset,t)}}transformOnConflict(e,t){return{kind:"OnConflictNode",columns:this.transformNodeList(e.columns,t),constraint:this.transformNode(e.constraint,t),indexExpression:this.transformNode(e.indexExpression,t),indexWhere:this.transformNode(e.indexWhere,t),updates:this.transformNodeList(e.updates,t),updateWhere:this.transformNode(e.updateWhere,t),doNothing:e.doNothing}}transformOnDuplicateKey(e,t){return{kind:"OnDuplicateKeyNode",updates:this.transformNodeList(e.updates,t)}}transformCreateIndex(e,t){return{kind:"CreateIndexNode",name:this.transformNode(e.name,t),table:this.transformNode(e.table,t),columns:this.transformNodeList(e.columns,t),unique:e.unique,using:this.transformNode(e.using,t),ifNotExists:e.ifNotExists,where:this.transformNode(e.where,t),nullsNotDistinct:e.nullsNotDistinct}}transformList(e,t){return{kind:"ListNode",items:this.transformNodeList(e.items,t)}}transformDropIndex(e,t){return{kind:"DropIndexNode",name:this.transformNode(e.name,t),table:this.transformNode(e.table,t),ifExists:e.ifExists,cascade:e.cascade}}transformPrimaryKeyConstraint(e,t){return{kind:"PrimaryKeyConstraintNode",columns:this.transformNodeList(e.columns,t),name:this.transformNode(e.name,t),deferrable:e.deferrable,initiallyDeferred:e.initiallyDeferred}}transformUniqueConstraint(e,t){return{kind:"UniqueConstraintNode",columns:this.transformNodeList(e.columns,t),name:this.transformNode(e.name,t),nullsNotDistinct:e.nullsNotDistinct,deferrable:e.deferrable,initiallyDeferred:e.initiallyDeferred}}transformForeignKeyConstraint(e,t){return{kind:"ForeignKeyConstraintNode",columns:this.transformNodeList(e.columns,t),references:this.transformNode(e.references,t),name:this.transformNode(e.name,t),onDelete:e.onDelete,onUpdate:e.onUpdate,deferrable:e.deferrable,initiallyDeferred:e.initiallyDeferred}}transformSetOperation(e,t){return{kind:"SetOperationNode",operator:e.operator,expression:this.transformNode(e.expression,t),all:e.all}}transformReferences(e,t){return{kind:"ReferencesNode",table:this.transformNode(e.table,t),columns:this.transformNodeList(e.columns,t),onDelete:e.onDelete,onUpdate:e.onUpdate}}transformCheckConstraint(e,t){return{kind:"CheckConstraintNode",expression:this.transformNode(e.expression,t),name:this.transformNode(e.name,t)}}transformWith(e,t){return{kind:"WithNode",expressions:this.transformNodeList(e.expressions,t),recursive:e.recursive}}transformCommonTableExpression(e,t){return{kind:"CommonTableExpressionNode",name:this.transformNode(e.name,t),materialized:e.materialized,expression:this.transformNode(e.expression,t)}}transformCommonTableExpressionName(e,t){return{kind:"CommonTableExpressionNameNode",table:this.transformNode(e.table,t),columns:this.transformNodeList(e.columns,t)}}transformHaving(e,t){return{kind:"HavingNode",having:this.transformNode(e.having,t)}}transformCreateSchema(e,t){return{kind:"CreateSchemaNode",schema:this.transformNode(e.schema,t),ifNotExists:e.ifNotExists}}transformDropSchema(e,t){return{kind:"DropSchemaNode",schema:this.transformNode(e.schema,t),ifExists:e.ifExists,cascade:e.cascade}}transformAlterTable(e,t){return{kind:"AlterTableNode",table:this.transformNode(e.table,t),renameTo:this.transformNode(e.renameTo,t),setSchema:this.transformNode(e.setSchema,t),columnAlterations:this.transformNodeList(e.columnAlterations,t),addConstraint:this.transformNode(e.addConstraint,t),dropConstraint:this.transformNode(e.dropConstraint,t),renameConstraint:this.transformNode(e.renameConstraint,t),addIndex:this.transformNode(e.addIndex,t),dropIndex:this.transformNode(e.dropIndex,t)}}transformDropColumn(e,t){return{kind:"DropColumnNode",column:this.transformNode(e.column,t)}}transformRenameColumn(e,t){return{kind:"RenameColumnNode",column:this.transformNode(e.column,t),renameTo:this.transformNode(e.renameTo,t)}}transformAlterColumn(e,t){return{kind:"AlterColumnNode",column:this.transformNode(e.column,t),dataType:this.transformNode(e.dataType,t),dataTypeExpression:this.transformNode(e.dataTypeExpression,t),setDefault:this.transformNode(e.setDefault,t),dropDefault:e.dropDefault,setNotNull:e.setNotNull,dropNotNull:e.dropNotNull}}transformModifyColumn(e,t){return{kind:"ModifyColumnNode",column:this.transformNode(e.column,t)}}transformAddConstraint(e,t){return{kind:"AddConstraintNode",constraint:this.transformNode(e.constraint,t)}}transformDropConstraint(e,t){return{kind:"DropConstraintNode",constraintName:this.transformNode(e.constraintName,t),ifExists:e.ifExists,modifier:e.modifier}}transformRenameConstraint(e,t){return{kind:"RenameConstraintNode",oldName:this.transformNode(e.oldName,t),newName:this.transformNode(e.newName,t)}}transformCreateView(e,t){return{kind:"CreateViewNode",name:this.transformNode(e.name,t),temporary:e.temporary,orReplace:e.orReplace,ifNotExists:e.ifNotExists,materialized:e.materialized,columns:this.transformNodeList(e.columns,t),as:this.transformNode(e.as,t)}}transformRefreshMaterializedView(e,t){return{kind:"RefreshMaterializedViewNode",name:this.transformNode(e.name,t),concurrently:e.concurrently,withNoData:e.withNoData}}transformDropView(e,t){return{kind:"DropViewNode",name:this.transformNode(e.name,t),ifExists:e.ifExists,materialized:e.materialized,cascade:e.cascade}}transformGenerated(e,t){return{kind:"GeneratedNode",byDefault:e.byDefault,always:e.always,identity:e.identity,stored:e.stored,expression:this.transformNode(e.expression,t)}}transformDefaultValue(e,t){return{kind:"DefaultValueNode",defaultValue:this.transformNode(e.defaultValue,t)}}transformOn(e,t){return{kind:"OnNode",on:this.transformNode(e.on,t)}}transformSelectModifier(e,t){return{kind:"SelectModifierNode",modifier:e.modifier,rawModifier:this.transformNode(e.rawModifier,t),of:this.transformNodeList(e.of,t)}}transformCreateType(e,t){return{kind:"CreateTypeNode",name:this.transformNode(e.name,t),enum:this.transformNode(e.enum,t)}}transformDropType(e,t){return{kind:"DropTypeNode",name:this.transformNode(e.name,t),ifExists:e.ifExists}}transformExplain(e,t){return{kind:"ExplainNode",format:e.format,options:this.transformNode(e.options,t)}}transformSchemableIdentifier(e,t){return{kind:"SchemableIdentifierNode",schema:this.transformNode(e.schema,t),identifier:this.transformNode(e.identifier,t)}}transformAggregateFunction(e,t){return{kind:"AggregateFunctionNode",func:e.func,aggregated:this.transformNodeList(e.aggregated,t),distinct:e.distinct,orderBy:this.transformNode(e.orderBy,t),withinGroup:this.transformNode(e.withinGroup,t),filter:this.transformNode(e.filter,t),over:this.transformNode(e.over,t)}}transformOver(e,t){return{kind:"OverNode",orderBy:this.transformNode(e.orderBy,t),partitionBy:this.transformNode(e.partitionBy,t)}}transformPartitionBy(e,t){return{kind:"PartitionByNode",items:this.transformNodeList(e.items,t)}}transformPartitionByItem(e,t){return{kind:"PartitionByItemNode",partitionBy:this.transformNode(e.partitionBy,t)}}transformBinaryOperation(e,t){return{kind:"BinaryOperationNode",leftOperand:this.transformNode(e.leftOperand,t),operator:this.transformNode(e.operator,t),rightOperand:this.transformNode(e.rightOperand,t)}}transformUnaryOperation(e,t){return{kind:"UnaryOperationNode",operator:this.transformNode(e.operator,t),operand:this.transformNode(e.operand,t)}}transformUsing(e,t){return{kind:"UsingNode",tables:this.transformNodeList(e.tables,t)}}transformFunction(e,t){return{kind:"FunctionNode",func:e.func,arguments:this.transformNodeList(e.arguments,t)}}transformCase(e,t){return{kind:"CaseNode",value:this.transformNode(e.value,t),when:this.transformNodeList(e.when,t),else:this.transformNode(e.else,t),isStatement:e.isStatement}}transformWhen(e,t){return{kind:"WhenNode",condition:this.transformNode(e.condition,t),result:this.transformNode(e.result,t)}}transformJSONReference(e,t){return{kind:"JSONReferenceNode",reference:this.transformNode(e.reference,t),traversal:this.transformNode(e.traversal,t)}}transformJSONPath(e,t){return{kind:"JSONPathNode",inOperator:this.transformNode(e.inOperator,t),pathLegs:this.transformNodeList(e.pathLegs,t)}}transformJSONPathLeg(e,t){return{kind:"JSONPathLegNode",type:e.type,value:e.value}}transformJSONOperatorChain(e,t){return{kind:"JSONOperatorChainNode",operator:this.transformNode(e.operator,t),values:this.transformNodeList(e.values,t)}}transformTuple(e,t){return{kind:"TupleNode",values:this.transformNodeList(e.values,t)}}transformMergeQuery(e,t){return{kind:"MergeQueryNode",into:this.transformNode(e.into,t),using:this.transformNode(e.using,t),whens:this.transformNodeList(e.whens,t),with:this.transformNode(e.with,t),top:this.transformNode(e.top,t),endModifiers:this.transformNodeList(e.endModifiers,t),output:this.transformNode(e.output,t),returning:this.transformNode(e.returning,t)}}transformMatched(e,t){return{kind:"MatchedNode",not:e.not,bySource:e.bySource}}transformAddIndex(e,t){return{kind:"AddIndexNode",name:this.transformNode(e.name,t),columns:this.transformNodeList(e.columns,t),unique:e.unique,using:this.transformNode(e.using,t),ifNotExists:e.ifNotExists}}transformCast(e,t){return{kind:"CastNode",expression:this.transformNode(e.expression,t),dataType:this.transformNode(e.dataType,t)}}transformFetch(e,t){return{kind:"FetchNode",rowCount:this.transformNode(e.rowCount,t),modifier:e.modifier}}transformTop(e,t){return{kind:"TopNode",expression:e.expression,modifiers:e.modifiers}}transformOutput(e,t){return{kind:"OutputNode",selections:this.transformNodeList(e.selections,t)}}transformDataType(e,t){return e}transformSelectAll(e,t){return e}transformIdentifier(e,t){return e}transformValue(e,t){return e}transformPrimitiveValueList(e,t){return e}transformOperator(e,t){return e}transformDefaultInsertValue(e,t){return e}transformOrAction(e,t){return e}transformCollate(e,t){return e}}},23064:(e,t,r)=>{"use strict";r.d(t,{b:()=>a});var i=r(85788),o=r(86663),n=r(78107);let s=(0,i.CN)({is:e=>"OnNode"===e.kind,create:e=>(0,i.CN)({kind:"OnNode",on:e}),cloneWithOperation:(e,t,r)=>(0,i.CN)({...e,on:"And"===t?o.s.create(e.on,r):n.K.create(e.on,r)})}),a=(0,i.CN)({is:e=>"JoinNode"===e.kind,create:(e,t)=>(0,i.CN)({kind:"JoinNode",joinType:e,table:t,on:void 0}),createWithOn:(e,t,r)=>(0,i.CN)({kind:"JoinNode",joinType:e,table:t,on:s.create(r)}),cloneWithOn:(e,t)=>(0,i.CN)({...e,on:e.on?s.cloneWithOperation(e.on,"And",t):s.create(t)})})},23721:(e,t,r)=>{"use strict";r.d(t,{Is:()=>h});var i=r(58740),o=r(86663),n=r(52325),s=r(39865),a=r(78107),d=r(92435),p=r(39411);class h{#a;constructor(e){this.#a=e}get expressionType(){}as(e){return new u(this,e)}or(...e){return new c(a.K.create(this.#a,(0,p.GB)(e)))}and(...e){return new l(o.s.create(this.#a,(0,p.GB)(e)))}$castTo(){return new h(this.#a)}$notNull(){return new h(this.#a)}toOperationNode(){return this.#a}}class u{#d;#n;constructor(e,t){this.#d=e,this.#n=t}get expression(){return this.#d}get alias(){return this.#n}toOperationNode(){return i.N.create(this.#d.toOperationNode(),(0,s.N)(this.#n)?this.#n.toOperationNode():n.O.create(this.#n))}}class c{#a;constructor(e){this.#a=e}get expressionType(){}as(e){return new u(this,e)}or(...e){return new c(a.K.create(this.#a,(0,p.GB)(e)))}$castTo(){return new c(this.#a)}toOperationNode(){return d.k.create(this.#a)}}class l{#a;constructor(e){this.#a=e}get expressionType(){}as(e){return new u(this,e)}and(...e){return new l(o.s.create(this.#a,(0,p.GB)(e)))}$castTo(){return new l(this.#a)}toOperationNode(){return d.k.create(this.#a)}}},23892:(e,t,r)=>{"use strict";r.d(t,{o:()=>o});var i=r(85788);let o=(0,i.CN)({is:e=>"InsertQueryNode"===e.kind,create:(e,t,r)=>(0,i.CN)({kind:"InsertQueryNode",into:e,...t&&{with:t},replace:r}),createWithoutInto:()=>(0,i.CN)({kind:"InsertQueryNode"}),cloneWith:(e,t)=>(0,i.CN)({...e,...t})})},24584:(e,t,r)=>{"use strict";r.d(t,{U:()=>s});var i=r(85788),o=r(94456),n=r(2592);let s=(0,i.CN)({is:e=>"UpdateQueryNode"===e.kind,create:(e,t)=>(0,i.CN)({kind:"UpdateQueryNode",table:1===e.length?e[0]:n.v.create(e),...t&&{with:t}}),createWithoutTable:()=>(0,i.CN)({kind:"UpdateQueryNode"}),cloneWithFromItems:(e,t)=>(0,i.CN)({...e,from:e.from?o.N.cloneWithFroms(e.from,t):o.N.create(t)}),cloneWithUpdates:(e,t)=>(0,i.CN)({...e,updates:e.updates?(0,i.CN)([...e.updates,...t]):t}),cloneWithLimit:(e,t)=>(0,i.CN)({...e,limit:t})})},25532:(e,t,r)=>{"use strict";r.d(t,{e:()=>a});var i=r(85788),o=r(94456);let n=(0,i.CN)({is:e=>"UsingNode"===e.kind,create:e=>(0,i.CN)({kind:"UsingNode",tables:(0,i.CN)(e)}),cloneWithTables:(e,t)=>(0,i.CN)({...e,tables:(0,i.CN)([...e.tables,...t])})});var s=r(40237);let a=(0,i.CN)({is:e=>"DeleteQueryNode"===e.kind,create:(e,t)=>(0,i.CN)({kind:"DeleteQueryNode",from:o.N.create(e),...t&&{with:t}}),cloneWithOrderByItems:(e,t)=>s.L.cloneWithOrderByItems(e,t),cloneWithoutOrderBy:e=>s.L.cloneWithoutOrderBy(e),cloneWithLimit:(e,t)=>(0,i.CN)({...e,limit:t}),cloneWithoutLimit:e=>(0,i.CN)({...e,limit:void 0}),cloneWithUsing:(e,t)=>(0,i.CN)({...e,using:void 0!==e.using?n.cloneWithTables(e.using,t):n.create(t)})})},30650:(e,t,r)=>{"use strict";r.d(t,{E:()=>d});var i=r(85788),o=r(17052);class n extends o.V{#p;constructor(e){super(),this.#p=e}transformIdentifier(e,t){return{...e=super.transformIdentifier(e,t),name:this.#p(e.name)}}}function s(e){return e>="0"&&e<="9"}function a(e){let t=new Map;return r=>{let i=t.get(r);return i||(i=e(r),t.set(r,i)),i}}class d{opt;#h;#p;#u;constructor(e={}){this.opt=e,this.#h=function({upperCase:e=!1}={}){return a(t=>{if(0===t.length)return t;e&&function(e){for(let t=1,r=e.length;t<r;++t){let r=e[t];if("_"!==r&&r!==r.toUpperCase())return!1}return!0}(t)&&(t=t.toLowerCase());let r=t[0];for(let e=1,i=t.length;e<i;++e){let i=t[e],o=t[e-1];"_"!==i&&("_"===o?r+=i.toUpperCase():r+=i)}return r})}(e),this.#p=function({upperCase:e=!1,underscoreBeforeDigits:t=!1,underscoreBetweenUppercaseLetters:r=!1}={}){return a(i=>{if(0===i.length)return i;let o=i.toUpperCase(),n=i.toLowerCase(),a=n[0];for(let e=1,d=i.length;e<d;++e){let d=i[e],p=i[e-1],h=o[e],u=o[e-1],c=n[e],l=n[e-1];if(t&&s(d)&&!s(p)&&!a.endsWith("_")){a+="_"+d;continue}if(d===h&&h!==c){let e=p===u&&u!==l;r||!e?a+="_"+c:a+=c}else a+=d}return e?a.toUpperCase():a})}(e),this.#u=new n(this.snakeCase.bind(this))}transformQuery(e){return this.#u.transformNode(e.node,e.queryId)}async transformResult(e){return e.result.rows&&Array.isArray(e.result.rows)?{...e.result,rows:e.result.rows.map(e=>this.mapRow(e))}:e.result}mapRow(e){return Object.keys(e).reduce((t,r)=>{let i=e[r];return Array.isArray(i)?i=i.map(e=>p(e,this.opt)?this.mapRow(e):e):p(i,this.opt)&&(i=this.mapRow(i)),t[this.camelCase(r)]=i,t},{})}snakeCase(e){return this.#p(e)}camelCase(e){return this.#h(e)}}function p(e,t){return(0,i.Qd)(e)&&!t?.maintainNestedObjectKeys}},30813:(e,t,r)=>{"use strict";r.d(t,{OU:()=>p});var i=r(23721),o=r(85788),n=r(63300),s=r(88208),a=r(39411),d=r(78853);class p{#e;constructor(e){this.#e=(0,o.CN)(e)}when(...e){return new h({...this.#e,node:n.P.cloneWithWhen(this.#e.node,s.t.create((0,a.GB)(e)))})}}class h{#e;constructor(e){this.#e=(0,o.CN)(e)}then(e){return new u({...this.#e,node:n.P.cloneWithThen(this.#e.node,(0,d.qH)(e)?(0,d.dJ)(e):(0,d.$s)(e))})}}class u{#e;constructor(e){this.#e=(0,o.CN)(e)}when(...e){return new h({...this.#e,node:n.P.cloneWithWhen(this.#e.node,s.t.create((0,a.GB)(e)))})}else(e){return new c({...this.#e,node:n.P.cloneWith(this.#e.node,{else:(0,d.qH)(e)?(0,d.dJ)(e):(0,d.$s)(e)})})}end(){return new i.Is(n.P.cloneWith(this.#e.node,{isStatement:!1}))}endCase(){return new i.Is(n.P.cloneWith(this.#e.node,{isStatement:!0}))}}class c{#e;constructor(e){this.#e=(0,o.CN)(e)}end(){return new i.Is(n.P.cloneWith(this.#e.node,{isStatement:!1}))}endCase(){return new i.Is(n.P.cloneWith(this.#e.node,{isStatement:!0}))}}},32378:(e,t,r)=>{"use strict";r.d(t,{J:()=>l,G:()=>function e(t){return(0,i.Tn)(t)?e(t((0,u.A)())):(0,i.MH)(t)?t.map(e=>c(e)):[c(t)]}});var i=r(85788),o=r(17035),n=r(46502);let s=(0,i.CN)({is:e=>"SelectionNode"===e.kind,create:e=>(0,i.CN)({kind:"SelectionNode",selection:e}),createSelectAll:()=>(0,i.CN)({kind:"SelectionNode",selection:n.U.create()}),createSelectAllFromTable:e=>(0,i.CN)({kind:"SelectionNode",selection:o.q.createSelectAll(e)})});var a=r(4757),d=r(43995),p=r(97778),h=r(99758),u=r(68126);function c(e){return(0,i.Kg)(e)?s.create((0,a.DT)(e)):(0,d.C)(e)?s.create(e.toOperationNode()):s.create((0,p.v0)(e))}function l(e){return e?Array.isArray(e)?e.map(N):[N(e)]:[s.createSelectAll()]}function N(e){if((0,i.Kg)(e))return s.createSelectAllFromTable((0,h.M$)(e));throw Error(`invalid value selectAll expression: ${JSON.stringify(e)}`)}},35998:(e,t,r)=>{"use strict";r.d(t,{Q:()=>o});var i=r(85788);let o=(0,i.CN)({is:e=>"JSONReferenceNode"===e.kind,create:(e,t)=>(0,i.CN)({kind:"JSONReferenceNode",reference:e,traversal:t}),cloneWithTraversal:(e,t)=>(0,i.CN)({...e,traversal:t})})},36296:(e,t,r)=>{"use strict";r.d(t,{W:()=>n});var i=r(36569);class o extends i.R{get adapter(){throw Error("this query cannot be compiled to SQL")}compileQuery(){throw Error("this query cannot be compiled to SQL")}provideConnection(){throw Error("this query cannot be executed")}withConnectionProvider(){throw Error("this query cannot have a connection provider")}withPlugin(e){return new o([...this.plugins,e])}withPlugins(e){return new o([...this.plugins,...e])}withPluginAtFront(e){return new o([e,...this.plugins])}withoutPlugins(){return new o([])}}let n=new o},36569:(e,t,r)=>{"use strict";r.d(t,{R:()=>a});var i=r(85788),o=r(95970),n=r(95147);let s=(0,i.CN)([]);class a{#c;constructor(e=s){this.#c=e}get plugins(){return this.#c}transformQuery(e,t){for(let r of this.#c){let i=r.transformQuery({node:e,queryId:t});if(i.kind===e.kind)e=i;else throw Error(`KyselyPlugin.transformQuery must return a node of the same kind that was given to it. The plugin was given a ${e.kind} but it returned a ${i.kind}`)}return e}async executeQuery(e,t){return await this.provideConnection(async r=>{let i=await r.executeQuery(e);return"numUpdatedOrDeletedRows"in i&&(0,n.u)("kysely:warning: outdated driver/plugin detected! `QueryResult.numUpdatedOrDeletedRows` has been replaced with `QueryResult.numAffectedRows`."),await this.#l(i,t)})}async *stream(e,t,r){let{connection:i,release:n}=await (0,o.G)(this);try{for await(let o of i.streamQuery(e,t))yield await this.#l(o,r)}finally{n()}}async #l(e,t){for(let r of this.#c)e=await r.transformResult({result:e,queryId:t});return e}}},36576:(e,t,r)=>{"use strict";r.d(t,{f:()=>n});var i=r(85788);let o=(0,i.CN)({is:e=>"TopNode"===e.kind,create:(e,t)=>(0,i.CN)({kind:"TopNode",expression:e,modifiers:t})});function n(e,t){var r;if(!(0,i.Et)(e)&&!(0,i.sI)(e))throw Error(`Invalid top expression: ${e}`);if(!(0,i.b0)(t)&&"percent"!==(r=t)&&"with ties"!==r&&"percent with ties"!==r)throw Error(`Invalid top modifiers: ${t}`);return o.create(e,t)}},37085:(e,t,r)=>{"use strict";r.d(t,{o:()=>s});var i=r(85788),o=r(86663),n=r(78107);let s=(0,i.CN)({is:e=>"WhereNode"===e.kind,create:e=>(0,i.CN)({kind:"WhereNode",where:e}),cloneWithOperation:(e,t,r)=>(0,i.CN)({...e,where:"And"===t?o.s.create(e.where,r):n.K.create(e.where,r)})})},38706:(e,t,r)=>{"use strict";r.d(t,{z:()=>o});var i=r(85788);let o=(0,i.CN)({is:e=>"RawNode"===e.kind,create:(e,t)=>(0,i.CN)({kind:"RawNode",sqlFragments:(0,i.CN)(e),parameters:(0,i.CN)(t)}),createWithSql:e=>o.create([e],[]),createWithChild:e=>o.create(["",""],[e]),createWithChildren:e=>o.create(Array(e.length+1).fill(""),e)})},38802:e=>{let t={};null!=process.env.DOTENV_CONFIG_ENCODING&&(t.encoding=process.env.DOTENV_CONFIG_ENCODING),null!=process.env.DOTENV_CONFIG_PATH&&(t.path=process.env.DOTENV_CONFIG_PATH),null!=process.env.DOTENV_CONFIG_DEBUG&&(t.debug=process.env.DOTENV_CONFIG_DEBUG),null!=process.env.DOTENV_CONFIG_OVERRIDE&&(t.override=process.env.DOTENV_CONFIG_OVERRIDE),null!=process.env.DOTENV_CONFIG_DOTENV_KEY&&(t.DOTENV_KEY=process.env.DOTENV_CONFIG_DOTENV_KEY),e.exports=t},39411:(e,t,r)=>{"use strict";r.d(t,{GB:()=>l,KN:()=>y,Ve:()=>f,ds:()=>N,vC:()=>m});var i=r(64063),o=r(85788),n=r(39865),s=r(74936),a=r(4757),d=r(78853),p=r(62863),h=r(86663),u=r(92435),c=r(78107);function l(e){if(3===e.length)return N(e[0],e[1],e[2]);if(1===e.length)return(0,d.$s)(e[0]);throw Error(`invalid arguments: ${JSON.stringify(e)}`)}function N(e,t,r){var o;return("is"===(o=t)||"is not"===o)&&w(r)?i.l.create((0,a.$O)(e),v(t),p.q.createImmediate(r)):i.l.create((0,a.$O)(e),v(t),(0,d.U2)(r))}function m(e,t,r){return i.l.create((0,a.$O)(e),v(t),(0,a.$O)(r))}function f(e,t){return y(Object.entries(e).filter(([,e])=>!(0,o.b0)(e)).map(([e,t])=>N(e,w(t)?"is":"=",t)),t)}function y(e,t,r=!0){let o="and"===t?h.s.create:c.K.create;if(0===e.length)return i.l.create(p.q.createImmediate(1),s.zX.create("="),p.q.createImmediate(+("and"===t)));let n=C(e[0]);for(let t=1;t<e.length;++t)n=o(n,C(e[t]));return e.length>1&&r?u.k.create(n):n}function w(e){return(0,o.kZ)(e)||(0,o.Lm)(e)}function v(e){if((0,o.Kg)(e)&&s.we.includes(e))return s.zX.create(e);if((0,n.N)(e))return e.toOperationNode();throw Error(`invalid operator ${JSON.stringify(e)}`)}function C(e){return(0,n.N)(e)?e.toOperationNode():e}},39865:(e,t,r)=>{"use strict";r.d(t,{N:()=>o});var i=r(85788);function o(e){return(0,i.Gv)(e)&&(0,i.Tn)(e.toOperationNode)}},40237:(e,t,r)=>{"use strict";r.d(t,{L:()=>N});var i=r(23892),o=r(75499),n=r(24584),s=r(25532),a=r(37085),d=r(85788);let p=(0,d.CN)({is:e=>"ReturningNode"===e.kind,create:e=>(0,d.CN)({kind:"ReturningNode",selections:(0,d.CN)(e)}),cloneWithSelections:(e,t)=>(0,d.CN)({...e,selections:e.selections?(0,d.CN)([...e.selections,...t]):(0,d.CN)(t)})}),h=(0,d.CN)({is:e=>"ExplainNode"===e.kind,create:(e,t)=>(0,d.CN)({kind:"ExplainNode",format:e,options:t})});var u=r(64943);let c=(0,d.CN)({is:e=>"OutputNode"===e.kind,create:e=>(0,d.CN)({kind:"OutputNode",selections:(0,d.CN)(e)}),cloneWithSelections:(e,t)=>(0,d.CN)({...e,selections:e.selections?(0,d.CN)([...e.selections,...t]):(0,d.CN)(t)})});var l=r(9622);let N=(0,d.CN)({is:e=>o.L.is(e)||i.o.is(e)||n.U.is(e)||s.e.is(e)||u.r.is(e),cloneWithEndModifier:(e,t)=>(0,d.CN)({...e,endModifiers:e.endModifiers?(0,d.CN)([...e.endModifiers,t]):(0,d.CN)([t])}),cloneWithWhere:(e,t)=>(0,d.CN)({...e,where:e.where?a.o.cloneWithOperation(e.where,"And",t):a.o.create(t)}),cloneWithJoin:(e,t)=>(0,d.CN)({...e,joins:e.joins?(0,d.CN)([...e.joins,t]):(0,d.CN)([t])}),cloneWithReturning:(e,t)=>(0,d.CN)({...e,returning:e.returning?p.cloneWithSelections(e.returning,t):p.create(t)}),cloneWithoutReturning:e=>(0,d.CN)({...e,returning:void 0}),cloneWithoutWhere:e=>(0,d.CN)({...e,where:void 0}),cloneWithExplain:(e,t,r)=>(0,d.CN)({...e,explain:h.create(t,r?.toOperationNode())}),cloneWithTop:(e,t)=>(0,d.CN)({...e,top:t}),cloneWithOutput:(e,t)=>(0,d.CN)({...e,output:e.output?c.cloneWithSelections(e.output,t):c.create(t)}),cloneWithOrderByItems:(e,t)=>(0,d.CN)({...e,orderBy:e.orderBy?l.O.cloneWithItems(e.orderBy,t):l.O.create(t)}),cloneWithoutOrderBy:e=>(0,d.CN)({...e,orderBy:void 0})})},40586:(e,t,r)=>{"use strict";r.d(t,{_$:()=>eG});var i=r(85788);let o=(0,i.CN)({is:e=>"AlterTableNode"===e.kind,create:e=>(0,i.CN)({kind:"AlterTableNode",table:e}),cloneWithTableProps:(e,t)=>(0,i.CN)({...e,...t}),cloneWithColumnAlteration:(e,t)=>(0,i.CN)({...e,columnAlterations:e.columnAlterations?[...e.columnAlterations,t]:[t]})});var n=r(52325);let s=(0,i.CN)({is:e=>"CreateIndexNode"===e.kind,create:e=>(0,i.CN)({kind:"CreateIndexNode",name:n.O.create(e)}),cloneWith:(e,t)=>(0,i.CN)({...e,...t}),cloneWithColumns:(e,t)=>(0,i.CN)({...e,columns:[...e.columns||[],...t]})}),a=(0,i.CN)({is:e=>"CreateSchemaNode"===e.kind,create:(e,t)=>(0,i.CN)({kind:"CreateSchemaNode",schema:n.O.create(e),...t}),cloneWith:(e,t)=>(0,i.CN)({...e,...t})});var d=r(92763),p=r(77668);let h=(0,i.CN)({is:e=>"DropIndexNode"===e.kind,create:(e,t)=>(0,i.CN)({kind:"DropIndexNode",name:p.y.create(e),...t}),cloneWith:(e,t)=>(0,i.CN)({...e,...t})}),u=(0,i.CN)({is:e=>"DropSchemaNode"===e.kind,create:(e,t)=>(0,i.CN)({kind:"DropSchemaNode",schema:n.O.create(e),...t}),cloneWith:(e,t)=>(0,i.CN)({...e,...t})}),c=(0,i.CN)({is:e=>"DropTableNode"===e.kind,create:(e,t)=>(0,i.CN)({kind:"DropTableNode",table:e,...t}),cloneWith:(e,t)=>(0,i.CN)({...e,...t})});var l=r(99758);let N=(0,i.CN)({is:e=>"AddColumnNode"===e.kind,create:e=>(0,i.CN)({kind:"AddColumnNode",column:e})});var m=r(11078);let f=(0,i.CN)({is:e=>"ColumnDefinitionNode"===e.kind,create:(e,t)=>(0,i.CN)({kind:"ColumnDefinitionNode",column:m.Z.create(e),dataType:t}),cloneWithFrontModifier:(e,t)=>(0,i.CN)({...e,frontModifiers:e.frontModifiers?(0,i.CN)([...e.frontModifiers,t]):[t]}),cloneWithEndModifier:(e,t)=>(0,i.CN)({...e,endModifiers:e.endModifiers?(0,i.CN)([...e.endModifiers,t]):[t]}),cloneWith:(e,t)=>(0,i.CN)({...e,...t})}),y=(0,i.CN)({is:e=>"DropColumnNode"===e.kind,create:e=>(0,i.CN)({kind:"DropColumnNode",column:m.Z.create(e)})}),w=(0,i.CN)({is:e=>"RenameColumnNode"===e.kind,create:(e,t)=>(0,i.CN)({kind:"RenameColumnNode",column:m.Z.create(e),renameTo:m.Z.create(t)})}),v=(0,i.CN)({is:e=>"CheckConstraintNode"===e.kind,create:(e,t)=>(0,i.CN)({kind:"CheckConstraintNode",expression:e,name:t?n.O.create(t):void 0})}),C=["no action","restrict","cascade","set null","set default"],g=(0,i.CN)({is:e=>"ReferencesNode"===e.kind,create:(e,t)=>(0,i.CN)({kind:"ReferencesNode",table:e,columns:(0,i.CN)([...t])}),cloneWithOnDelete:(e,t)=>(0,i.CN)({...e,onDelete:t}),cloneWithOnUpdate:(e,t)=>(0,i.CN)({...e,onUpdate:t})});var b=r(46502),x=r(4757),O=r(39865),W=r(62863);function q(e){return(0,O.N)(e)?e.toOperationNode():W.q.createImmediate(e)}let k=(0,i.CN)({is:e=>"GeneratedNode"===e.kind,create:e=>(0,i.CN)({kind:"GeneratedNode",...e}),createWithExpression:e=>(0,i.CN)({kind:"GeneratedNode",always:!0,expression:e}),cloneWith:(e,t)=>(0,i.CN)({...e,...t})}),I=(0,i.CN)({is:e=>"DefaultValueNode"===e.kind,create:e=>(0,i.CN)({kind:"DefaultValueNode",defaultValue:e})});function T(e){if(C.includes(e))return e;throw Error(`invalid OnModifyForeignAction ${e}`)}class L{#a;constructor(e){this.#a=e}autoIncrement(){return new L(f.cloneWith(this.#a,{autoIncrement:!0}))}identity(){return new L(f.cloneWith(this.#a,{identity:!0}))}primaryKey(){return new L(f.cloneWith(this.#a,{primaryKey:!0}))}references(e){let t=(0,x.q5)(e);if(!t.table||b.U.is(t.column))throw Error(`invalid call references('${e}'). The reference must have format table.column or schema.table.column`);return new L(f.cloneWith(this.#a,{references:g.create(t.table,[t.column])}))}onDelete(e){if(!this.#a.references)throw Error("on delete constraint can only be added for foreign keys");return new L(f.cloneWith(this.#a,{references:g.cloneWithOnDelete(this.#a.references,T(e))}))}onUpdate(e){if(!this.#a.references)throw Error("on update constraint can only be added for foreign keys");return new L(f.cloneWith(this.#a,{references:g.cloneWithOnUpdate(this.#a.references,T(e))}))}unique(){return new L(f.cloneWith(this.#a,{unique:!0}))}notNull(){return new L(f.cloneWith(this.#a,{notNull:!0}))}unsigned(){return new L(f.cloneWith(this.#a,{unsigned:!0}))}defaultTo(e){return new L(f.cloneWith(this.#a,{defaultTo:I.create(q(e))}))}check(e){return new L(f.cloneWith(this.#a,{check:v.create(e.toOperationNode())}))}generatedAlwaysAs(e){return new L(f.cloneWith(this.#a,{generated:k.createWithExpression(e.toOperationNode())}))}generatedAlwaysAsIdentity(){return new L(f.cloneWith(this.#a,{generated:k.create({identity:!0,always:!0})}))}generatedByDefaultAsIdentity(){return new L(f.cloneWith(this.#a,{generated:k.create({identity:!0,byDefault:!0})}))}stored(){if(!this.#a.generated)throw Error("stored() can only be called after generatedAlwaysAs");return new L(f.cloneWith(this.#a,{generated:k.cloneWith(this.#a.generated,{stored:!0})}))}modifyFront(e){return new L(f.cloneWithFrontModifier(this.#a,e.toOperationNode()))}nullsNotDistinct(){return new L(f.cloneWith(this.#a,{nullsNotDistinct:!0}))}ifNotExists(){return new L(f.cloneWith(this.#a,{ifNotExists:!0}))}modifyEnd(e){return new L(f.cloneWithEndModifier(this.#a,e.toOperationNode()))}$call(e){return e(this)}toOperationNode(){return this.#a}}let E=(0,i.CN)({is:e=>"ModifyColumnNode"===e.kind,create:e=>(0,i.CN)({kind:"ModifyColumnNode",column:e})});var D=r(53859);let S=(0,i.CN)({is:e=>"ForeignKeyConstraintNode"===e.kind,create:(e,t,r,o)=>(0,i.CN)({kind:"ForeignKeyConstraintNode",columns:e,references:g.create(t,r),name:o?n.O.create(o):void 0}),cloneWith:(e,t)=>(0,i.CN)({...e,...t})});class B{#a;constructor(e){this.#a=e}onDelete(e){return new B(S.cloneWith(this.#a,{onDelete:T(e)}))}onUpdate(e){return new B(S.cloneWith(this.#a,{onUpdate:T(e)}))}deferrable(){return new B(S.cloneWith(this.#a,{deferrable:!0}))}notDeferrable(){return new B(S.cloneWith(this.#a,{deferrable:!1}))}initiallyDeferred(){return new B(S.cloneWith(this.#a,{initiallyDeferred:!0}))}initiallyImmediate(){return new B(S.cloneWith(this.#a,{initiallyDeferred:!1}))}$call(e){return e(this)}toOperationNode(){return this.#a}}let A=(0,i.CN)({is:e=>"AddConstraintNode"===e.kind,create:e=>(0,i.CN)({kind:"AddConstraintNode",constraint:e})}),M=(0,i.CN)({is:e=>"UniqueConstraintNode"===e.kind,create:(e,t,r)=>(0,i.CN)({kind:"UniqueConstraintNode",columns:(0,i.CN)(e.map(m.Z.create)),name:t?n.O.create(t):void 0,nullsNotDistinct:r}),cloneWith:(e,t)=>(0,i.CN)({...e,...t})}),P=(0,i.CN)({is:e=>"DropConstraintNode"===e.kind,create:e=>(0,i.CN)({kind:"DropConstraintNode",constraintName:n.O.create(e)}),cloneWith:(e,t)=>(0,i.CN)({...e,...t})}),Q=(0,i.CN)({is:e=>"AlterColumnNode"===e.kind,create:(e,t,r)=>(0,i.CN)({kind:"AlterColumnNode",column:m.Z.create(e),[t]:r})});class R{#N;constructor(e){this.#N=e}setDataType(e){return new $(Q.create(this.#N,"dataType",(0,D.Q)(e)))}setDefault(e){return new $(Q.create(this.#N,"setDefault",q(e)))}dropDefault(){return new $(Q.create(this.#N,"dropDefault",!0))}setNotNull(){return new $(Q.create(this.#N,"setNotNull",!0))}dropNotNull(){return new $(Q.create(this.#N,"dropNotNull",!0))}$call(e){return e(this)}}class ${#m;constructor(e){this.#m=e}toOperationNode(){return this.#m}}class F{#e;constructor(e){this.#e=(0,i.CN)(e)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}class V{#e;constructor(e){this.#e=(0,i.CN)(e)}onDelete(e){return new V({...this.#e,constraintBuilder:this.#e.constraintBuilder.onDelete(e)})}onUpdate(e){return new V({...this.#e,constraintBuilder:this.#e.constraintBuilder.onUpdate(e)})}deferrable(){return new V({...this.#e,constraintBuilder:this.#e.constraintBuilder.deferrable()})}notDeferrable(){return new V({...this.#e,constraintBuilder:this.#e.constraintBuilder.notDeferrable()})}initiallyDeferred(){return new V({...this.#e,constraintBuilder:this.#e.constraintBuilder.initiallyDeferred()})}initiallyImmediate(){return new V({...this.#e,constraintBuilder:this.#e.constraintBuilder.initiallyImmediate()})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(o.cloneWithTableProps(this.#e.node,{addConstraint:A.create(this.#e.constraintBuilder.toOperationNode())}),this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}class U{#e;constructor(e){this.#e=(0,i.CN)(e)}ifExists(){return new U({...this.#e,node:o.cloneWithTableProps(this.#e.node,{dropConstraint:P.cloneWith(this.#e.node.dropConstraint,{ifExists:!0})})})}cascade(){return new U({...this.#e,node:o.cloneWithTableProps(this.#e.node,{dropConstraint:P.cloneWith(this.#e.node.dropConstraint,{modifier:"cascade"})})})}restrict(){return new U({...this.#e,node:o.cloneWithTableProps(this.#e.node,{dropConstraint:P.cloneWith(this.#e.node.dropConstraint,{modifier:"restrict"})})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}let J=(0,i.CN)({is:e=>"PrimaryKeyConstraintNode"===e.kind,create:(e,t)=>(0,i.CN)({kind:"PrimaryKeyConstraintNode",columns:(0,i.CN)(e.map(m.Z.create)),name:t?n.O.create(t):void 0}),cloneWith:(e,t)=>(0,i.CN)({...e,...t})}),_=(0,i.CN)({is:e=>"AddIndexNode"===e.kind,create:e=>(0,i.CN)({kind:"AddIndexNode",name:n.O.create(e)}),cloneWith:(e,t)=>(0,i.CN)({...e,...t}),cloneWithColumns:(e,t)=>(0,i.CN)({...e,columns:[...e.columns||[],...t]})});var j=r(38706);class K{#e;constructor(e){this.#e=(0,i.CN)(e)}unique(){return new K({...this.#e,node:o.cloneWithTableProps(this.#e.node,{addIndex:_.cloneWith(this.#e.node.addIndex,{unique:!0})})})}column(e){return new K({...this.#e,node:o.cloneWithTableProps(this.#e.node,{addIndex:_.cloneWithColumns(this.#e.node.addIndex,[(0,x.Ow)(e)])})})}columns(e){return new K({...this.#e,node:o.cloneWithTableProps(this.#e.node,{addIndex:_.cloneWithColumns(this.#e.node.addIndex,e.map(x.Ow))})})}expression(e){return new K({...this.#e,node:o.cloneWithTableProps(this.#e.node,{addIndex:_.cloneWithColumns(this.#e.node.addIndex,[e.toOperationNode()])})})}using(e){return new K({...this.#e,node:o.cloneWithTableProps(this.#e.node,{addIndex:_.cloneWith(this.#e.node.addIndex,{using:j.z.createWithSql(e)})})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}class G{#a;constructor(e){this.#a=e}nullsNotDistinct(){return new G(M.cloneWith(this.#a,{nullsNotDistinct:!0}))}deferrable(){return new G(M.cloneWith(this.#a,{deferrable:!0}))}notDeferrable(){return new G(M.cloneWith(this.#a,{deferrable:!1}))}initiallyDeferred(){return new G(M.cloneWith(this.#a,{initiallyDeferred:!0}))}initiallyImmediate(){return new G(M.cloneWith(this.#a,{initiallyDeferred:!1}))}$call(e){return e(this)}toOperationNode(){return this.#a}}class z{#a;constructor(e){this.#a=e}deferrable(){return new z(J.cloneWith(this.#a,{deferrable:!0}))}notDeferrable(){return new z(J.cloneWith(this.#a,{deferrable:!1}))}initiallyDeferred(){return new z(J.cloneWith(this.#a,{initiallyDeferred:!0}))}initiallyImmediate(){return new z(J.cloneWith(this.#a,{initiallyDeferred:!1}))}$call(e){return e(this)}toOperationNode(){return this.#a}}class Y{#a;constructor(e){this.#a=e}$call(e){return e(this)}toOperationNode(){return this.#a}}let H=(0,i.CN)({is:e=>"RenameConstraintNode"===e.kind,create:(e,t)=>(0,i.CN)({kind:"RenameConstraintNode",oldName:n.O.create(e),newName:n.O.create(t)})});class Z{#e;constructor(e){this.#e=(0,i.CN)(e)}renameTo(e){return new F({...this.#e,node:o.cloneWithTableProps(this.#e.node,{renameTo:(0,l.M$)(e)})})}setSchema(e){return new F({...this.#e,node:o.cloneWithTableProps(this.#e.node,{setSchema:n.O.create(e)})})}alterColumn(e,t){let r=t(new R(e));return new X({...this.#e,node:o.cloneWithColumnAlteration(this.#e.node,r.toOperationNode())})}dropColumn(e){return new X({...this.#e,node:o.cloneWithColumnAlteration(this.#e.node,y.create(e))})}renameColumn(e,t){return new X({...this.#e,node:o.cloneWithColumnAlteration(this.#e.node,w.create(e,t))})}addColumn(e,t,r=i.lQ){let n=r(new L(f.create(e,(0,D.Q)(t))));return new X({...this.#e,node:o.cloneWithColumnAlteration(this.#e.node,N.create(n.toOperationNode()))})}modifyColumn(e,t,r=i.lQ){let n=r(new L(f.create(e,(0,D.Q)(t))));return new X({...this.#e,node:o.cloneWithColumnAlteration(this.#e.node,E.create(n.toOperationNode()))})}addUniqueConstraint(e,t,r=i.lQ){let n=r(new G(M.create(t,e)));return new F({...this.#e,node:o.cloneWithTableProps(this.#e.node,{addConstraint:A.create(n.toOperationNode())})})}addCheckConstraint(e,t,r=i.lQ){let n=r(new Y(v.create(t.toOperationNode(),e)));return new F({...this.#e,node:o.cloneWithTableProps(this.#e.node,{addConstraint:A.create(n.toOperationNode())})})}addForeignKeyConstraint(e,t,r,o,n=i.lQ){let s=n(new B(S.create(t.map(m.Z.create),(0,l.M$)(r),o.map(m.Z.create),e)));return new V({...this.#e,constraintBuilder:s})}addPrimaryKeyConstraint(e,t,r=i.lQ){let n=r(new z(J.create(t,e)));return new F({...this.#e,node:o.cloneWithTableProps(this.#e.node,{addConstraint:A.create(n.toOperationNode())})})}dropConstraint(e){return new U({...this.#e,node:o.cloneWithTableProps(this.#e.node,{dropConstraint:P.create(e)})})}renameConstraint(e,t){return new U({...this.#e,node:o.cloneWithTableProps(this.#e.node,{renameConstraint:H.create(e,t)})})}addIndex(e){return new K({...this.#e,node:o.cloneWithTableProps(this.#e.node,{addIndex:_.create(e)})})}dropIndex(e){return new F({...this.#e,node:o.cloneWithTableProps(this.#e.node,{dropIndex:h.create(e)})})}$call(e){return e(this)}}class X{#e;constructor(e){this.#e=(0,i.CN)(e)}alterColumn(e,t){let r=t(new R(e));return new X({...this.#e,node:o.cloneWithColumnAlteration(this.#e.node,r.toOperationNode())})}dropColumn(e){return new X({...this.#e,node:o.cloneWithColumnAlteration(this.#e.node,y.create(e))})}renameColumn(e,t){return new X({...this.#e,node:o.cloneWithColumnAlteration(this.#e.node,w.create(e,t))})}addColumn(e,t,r=i.lQ){let n=r(new L(f.create(e,(0,D.Q)(t))));return new X({...this.#e,node:o.cloneWithColumnAlteration(this.#e.node,N.create(n.toOperationNode()))})}modifyColumn(e,t,r=i.lQ){let n=r(new L(f.create(e,(0,D.Q)(t))));return new X({...this.#e,node:o.cloneWithColumnAlteration(this.#e.node,E.create(n.toOperationNode()))})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}var ee=r(39411),et=r(40237),er=r(17052),ei=r(77460);class eo extends er.V{transformPrimitiveValueList(e){return ei.s.create(e.values.map(W.q.createImmediate))}transformValue(e){return W.q.createImmediate(e.value)}}class en{#e;constructor(e){this.#e=(0,i.CN)(e)}ifNotExists(){return new en({...this.#e,node:s.cloneWith(this.#e.node,{ifNotExists:!0})})}unique(){return new en({...this.#e,node:s.cloneWith(this.#e.node,{unique:!0})})}nullsNotDistinct(){return new en({...this.#e,node:s.cloneWith(this.#e.node,{nullsNotDistinct:!0})})}on(e){return new en({...this.#e,node:s.cloneWith(this.#e.node,{table:(0,l.M$)(e)})})}column(e){return new en({...this.#e,node:s.cloneWithColumns(this.#e.node,[(0,x.Ow)(e)])})}columns(e){return new en({...this.#e,node:s.cloneWithColumns(this.#e.node,e.map(x.Ow))})}expression(e){return new en({...this.#e,node:s.cloneWithColumns(this.#e.node,[e.toOperationNode()])})}using(e){return new en({...this.#e,node:s.cloneWith(this.#e.node,{using:j.z.createWithSql(e)})})}where(...e){let t=new eo;return new en({...this.#e,node:et.L.cloneWithWhere(this.#e.node,t.transformNode((0,ee.GB)(e),this.#e.queryId))})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}class es{#e;constructor(e){this.#e=(0,i.CN)(e)}ifNotExists(){return new es({...this.#e,node:a.cloneWith(this.#e.node,{ifNotExists:!0})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}var ea=r(97778);class ed{#e;constructor(e){this.#e=(0,i.CN)(e)}temporary(){return new ed({...this.#e,node:d.B.cloneWith(this.#e.node,{temporary:!0})})}onCommit(e){return new ed({...this.#e,node:d.B.cloneWith(this.#e.node,{onCommit:function(e){if(d.o.includes(e))return e;throw Error(`invalid OnCommitAction ${e}`)}(e)})})}ifNotExists(){return new ed({...this.#e,node:d.B.cloneWith(this.#e.node,{ifNotExists:!0})})}addColumn(e,t,r=i.lQ){let o=r(new L(f.create(e,(0,D.Q)(t))));return new ed({...this.#e,node:d.B.cloneWithColumn(this.#e.node,o.toOperationNode())})}addPrimaryKeyConstraint(e,t,r=i.lQ){let o=r(new z(J.create(t,e)));return new ed({...this.#e,node:d.B.cloneWithConstraint(this.#e.node,o.toOperationNode())})}addUniqueConstraint(e,t,r=i.lQ){let o=r(new G(M.create(t,e)));return new ed({...this.#e,node:d.B.cloneWithConstraint(this.#e.node,o.toOperationNode())})}addCheckConstraint(e,t,r=i.lQ){let o=r(new Y(v.create(t.toOperationNode(),e)));return new ed({...this.#e,node:d.B.cloneWithConstraint(this.#e.node,o.toOperationNode())})}addForeignKeyConstraint(e,t,r,o,n=i.lQ){let s=n(new B(S.create(t.map(m.Z.create),(0,l.M$)(r),o.map(m.Z.create),e)));return new ed({...this.#e,node:d.B.cloneWithConstraint(this.#e.node,s.toOperationNode())})}modifyFront(e){return new ed({...this.#e,node:d.B.cloneWithFrontModifier(this.#e.node,e.toOperationNode())})}modifyEnd(e){return new ed({...this.#e,node:d.B.cloneWithEndModifier(this.#e.node,e.toOperationNode())})}as(e){return new ed({...this.#e,node:d.B.cloneWith(this.#e.node,{selectQuery:(0,ea.YK)(e)})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}class ep{#e;constructor(e){this.#e=(0,i.CN)(e)}on(e){return new ep({...this.#e,node:h.cloneWith(this.#e.node,{table:(0,l.M$)(e)})})}ifExists(){return new ep({...this.#e,node:h.cloneWith(this.#e.node,{ifExists:!0})})}cascade(){return new ep({...this.#e,node:h.cloneWith(this.#e.node,{cascade:!0})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}class eh{#e;constructor(e){this.#e=(0,i.CN)(e)}ifExists(){return new eh({...this.#e,node:u.cloneWith(this.#e.node,{ifExists:!0})})}cascade(){return new eh({...this.#e,node:u.cloneWith(this.#e.node,{cascade:!0})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}class eu{#e;constructor(e){this.#e=(0,i.CN)(e)}ifExists(){return new eu({...this.#e,node:c.cloneWith(this.#e.node,{ifExists:!0})})}cascade(){return new eu({...this.#e,node:c.cloneWith(this.#e.node,{cascade:!0})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}var ec=r(81460),el=r(68789),eN=r(74586);class em{#f=new eo;transformQuery(e){return this.#f.transformNode(e.node,e.queryId)}transformResult(e){return Promise.resolve(e.result)}}class ef{#e;constructor(e){this.#e=(0,i.CN)(e)}temporary(){return new ef({...this.#e,node:eN.Y.cloneWith(this.#e.node,{temporary:!0})})}materialized(){return new ef({...this.#e,node:eN.Y.cloneWith(this.#e.node,{materialized:!0})})}ifNotExists(){return new ef({...this.#e,node:eN.Y.cloneWith(this.#e.node,{ifNotExists:!0})})}orReplace(){return new ef({...this.#e,node:eN.Y.cloneWith(this.#e.node,{orReplace:!0})})}columns(e){return new ef({...this.#e,node:eN.Y.cloneWith(this.#e.node,{columns:e.map(x.RY)})})}as(e){let t=e.withPlugin(new em).toOperationNode();return new ef({...this.#e,node:eN.Y.cloneWith(this.#e.node,{as:t})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}let ey=(0,i.CN)({is:e=>"DropViewNode"===e.kind,create:e=>(0,i.CN)({kind:"DropViewNode",name:p.y.create(e)}),cloneWith:(e,t)=>(0,i.CN)({...e,...t})});class ew{#e;constructor(e){this.#e=(0,i.CN)(e)}materialized(){return new ew({...this.#e,node:ey.cloneWith(this.#e.node,{materialized:!0})})}ifExists(){return new ew({...this.#e,node:ey.cloneWith(this.#e.node,{ifExists:!0})})}cascade(){return new ew({...this.#e,node:ey.cloneWith(this.#e.node,{cascade:!0})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}let ev=(0,i.CN)({is:e=>"CreateTypeNode"===e.kind,create:e=>(0,i.CN)({kind:"CreateTypeNode",name:e}),cloneWithEnum:(e,t)=>(0,i.CN)({...e,enum:ei.s.create(t.map(W.q.createImmediate))})});class eC{#e;constructor(e){this.#e=(0,i.CN)(e)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}asEnum(e){return new eC({...this.#e,node:ev.cloneWithEnum(this.#e.node,e)})}$call(e){return e(this)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}let eg=(0,i.CN)({is:e=>"DropTypeNode"===e.kind,create:e=>(0,i.CN)({kind:"DropTypeNode",name:e}),cloneWith:(e,t)=>(0,i.CN)({...e,...t})});class eb{#e;constructor(e){this.#e=(0,i.CN)(e)}ifExists(){return new eb({...this.#e,node:eg.cloneWith(this.#e.node,{ifExists:!0})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}function ex(e){if(!e.includes("."))return p.y.create(e);{let t=e.split(".").map(eO);if(2===t.length)return p.y.createWithSchema(t[0],t[1]);throw Error(`invalid schemable identifier ${e}`)}}function eO(e){return e.trim()}let eW=(0,i.CN)({is:e=>"RefreshMaterializedViewNode"===e.kind,create:e=>(0,i.CN)({kind:"RefreshMaterializedViewNode",name:p.y.create(e)}),cloneWith:(e,t)=>(0,i.CN)({...e,...t})});class eq{#e;constructor(e){this.#e=(0,i.CN)(e)}concurrently(){return new eq({...this.#e,node:eW.cloneWith(this.#e.node,{concurrently:!0,withNoData:!1})})}withData(){return new eq({...this.#e,node:eW.cloneWith(this.#e.node,{withNoData:!1})})}withNoData(){return new eq({...this.#e,node:eW.cloneWith(this.#e.node,{withNoData:!0,concurrently:!1})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}class ek{#y;constructor(e){this.#y=e}createTable(e){return new ed({queryId:(0,ec.a)(),executor:this.#y,node:d.B.create((0,l.M$)(e))})}dropTable(e){return new eu({queryId:(0,ec.a)(),executor:this.#y,node:c.create((0,l.M$)(e))})}createIndex(e){return new en({queryId:(0,ec.a)(),executor:this.#y,node:s.create(e)})}dropIndex(e){return new ep({queryId:(0,ec.a)(),executor:this.#y,node:h.create(e)})}createSchema(e){return new es({queryId:(0,ec.a)(),executor:this.#y,node:a.create(e)})}dropSchema(e){return new eh({queryId:(0,ec.a)(),executor:this.#y,node:u.create(e)})}alterTable(e){return new Z({queryId:(0,ec.a)(),executor:this.#y,node:o.create((0,l.M$)(e))})}createView(e){return new ef({queryId:(0,ec.a)(),executor:this.#y,node:eN.Y.create(e)})}refreshMaterializedView(e){return new eq({queryId:(0,ec.a)(),executor:this.#y,node:eW.create(e)})}dropView(e){return new ew({queryId:(0,ec.a)(),executor:this.#y,node:ey.create(e)})}createType(e){return new eC({queryId:(0,ec.a)(),executor:this.#y,node:ev.create(ex(e))})}dropType(e){return new eb({queryId:(0,ec.a)(),executor:this.#y,node:eg.create(ex(e))})}withPlugin(e){return new ek(this.#y.withPlugin(e))}withoutPlugins(){return new ek(this.#y.withoutPlugins())}withSchema(e){return new ek(this.#y.withPluginAtFront(new el.B(e)))}}var eI=r(43995),eT=r(52102);class eL{ref(e){return new eI.g(e)}table(e){return new eT.bj(e)}}class eE{#w;constructor(e){this.#w=e}async provideConnection(e){let t=await this.#w.acquireConnection();try{return await e(t)}finally{await this.#w.releaseConnection(t)}}}var eD=r(67515),eS=r(36569);class eB extends eS.R{#v;#C;#g;constructor(e,t,r,i=[]){super(i),this.#v=e,this.#C=t,this.#g=r}get adapter(){return this.#C}compileQuery(e,t){return this.#v.compileQuery(e,t)}provideConnection(e){return this.#g.provideConnection(e)}withPlugins(e){return new eB(this.#v,this.#C,this.#g,[...this.plugins,...e])}withPlugin(e){return new eB(this.#v,this.#C,this.#g,[...this.plugins,e])}withPluginAtFront(e){return new eB(this.#v,this.#C,this.#g,[e,...this.plugins])}withConnectionProvider(e){return new eB(this.#v,this.#C,e,[...this.plugins])}withoutPlugins(){return new eB(this.#v,this.#C,this.#g,[])}}function eA(){return"undefined"!=typeof performance&&(0,i.Tn)(performance.now)?performance.now():Date.now()}class eM{#w;#b;#x;#O;#W;#q=new WeakSet;constructor(e,t){this.#O=!1,this.#w=e,this.#b=t}async init(){if(this.#W)throw Error("driver has already been destroyed");this.#x||(this.#x=this.#w.init().then(()=>{this.#O=!0}).catch(e=>(this.#x=void 0,Promise.reject(e)))),await this.#x}async acquireConnection(){if(this.#W)throw Error("driver has already been destroyed");this.#O||await this.init();let e=await this.#w.acquireConnection();return this.#q.has(e)||(this.#k()&&this.#I(e),this.#q.add(e)),e}async releaseConnection(e){await this.#w.releaseConnection(e)}beginTransaction(e,t){return this.#w.beginTransaction(e,t)}commitTransaction(e){return this.#w.commitTransaction(e)}rollbackTransaction(e){return this.#w.rollbackTransaction(e)}savepoint(e,t,r){if(this.#w.savepoint)return this.#w.savepoint(e,t,r);throw Error("The `savepoint` method is not supported by this driver")}rollbackToSavepoint(e,t,r){if(this.#w.rollbackToSavepoint)return this.#w.rollbackToSavepoint(e,t,r);throw Error("The `rollbackToSavepoint` method is not supported by this driver")}releaseSavepoint(e,t,r){if(this.#w.releaseSavepoint)return this.#w.releaseSavepoint(e,t,r);throw Error("The `releaseSavepoint` method is not supported by this driver")}async destroy(){this.#x&&(await this.#x,this.#W||(this.#W=this.#w.destroy().catch(e=>(this.#W=void 0,Promise.reject(e)))),await this.#W)}#k(){return this.#b.isLevelEnabled("query")||this.#b.isLevelEnabled("error")}#I(e){let t=e.executeQuery,r=e.streamQuery,i=this;e.executeQuery=async r=>{let o,n=eA();try{return await t.call(e,r)}catch(e){throw o=e,await i.#T(e,r,n),e}finally{o||await i.#L(r,n)}},e.streamQuery=async function*(t,o){let n,s=eA();try{for await(let i of r.call(e,t,o))yield i}catch(e){throw n=e,await i.#T(e,t,s),e}finally{n||await i.#L(t,s,!0)}}}async #T(e,t,r){await this.#b.error(()=>({level:"error",error:e,query:t,queryDurationMillis:this.#E(r)}))}async #L(e,t,r=!1){await this.#b.query(()=>({level:"query",isStream:r,query:e,queryDurationMillis:this.#E(t)}))}#E(e){return eA()-e}}let eP=()=>{};class eQ{#D;#S;constructor(e){this.#D=e}async provideConnection(e){for(;this.#S;)await this.#S.catch(eP);return this.#S=this.#B(e).finally(()=>{this.#S=void 0}),this.#S}async #B(e){return await e(this.#D)}}let eR=["read only","read write"],e$=["read uncommitted","read committed","repeatable read","serializable","snapshot"];function eF(e){if(e.accessMode&&!eR.includes(e.accessMode))throw Error(`invalid transaction access mode ${e.accessMode}`);if(e.isolationLevel&&!e$.includes(e.isolationLevel))throw Error(`invalid transaction isolation level ${e.isolationLevel}`)}var eV=r(77655);(0,i.CN)(["query","error"]);class eU{#A;#M;constructor(e){(0,i.Tn)(e)?(this.#M=e,this.#A=(0,i.CN)({query:!0,error:!0})):(this.#M=eJ,this.#A=(0,i.CN)({query:e.includes("query"),error:e.includes("error")}))}isLevelEnabled(e){return this.#A[e]}async query(e){this.#A.query&&await this.#M(e())}async error(e){this.#A.error&&await this.#M(e())}}function eJ(e){if("query"===e.level){let t=`kysely:query:${e.isStream?"stream:":""}`;console.log(`${t} ${e.query.sql}`),console.log(`${t} duration: ${e.queryDurationMillis.toFixed(1)}ms`)}else"error"===e.level&&(e.error instanceof Error?console.error(`kysely:error: ${e.error.stack??e.error.message}`):console.error(`kysely:error: ${JSON.stringify({error:e.error,query:e.query.sql,queryDurationMillis:e.queryDurationMillis})}`))}var e_=r(30813),ej=r(63300),eK=r(95970);Symbol.asyncDispose??=Symbol("Symbol.asyncDispose");class eG extends eD.n{#e;constructor(e){let t,r;if(function(e){return(0,i.Gv)(e)&&(0,i.Gv)(e.config)&&(0,i.Gv)(e.driver)&&(0,i.Gv)(e.executor)&&(0,i.Gv)(e.dialect)}(e))t={executor:e.executor},r={...e};else{let i=e.dialect,o=i.createDriver(),n=i.createQueryCompiler(),s=i.createAdapter(),a=new eM(o,new eU(e.log??[])),d=new eB(n,s,new eE(a),e.plugins??[]);t={executor:d},r={config:e,executor:d,dialect:i,driver:a}}super(t),this.#e=(0,i.CN)(r)}get schema(){return new ek(this.#e.executor)}get dynamic(){return new eL}get introspection(){return this.#e.dialect.createIntrospector(this.withoutPlugins())}case(e){return new e_.OU({node:ej.P.create((0,i.b0)(e)?void 0:(0,ea.YK)(e))})}get fn(){return(0,eV.t)()}transaction(){return new eH({...this.#e})}startTransaction(){return new eZ({...this.#e})}connection(){return new eY({...this.#e})}withPlugin(e){return new eG({...this.#e,executor:this.#e.executor.withPlugin(e)})}withoutPlugins(){return new eG({...this.#e,executor:this.#e.executor.withoutPlugins()})}withSchema(e){return new eG({...this.#e,executor:this.#e.executor.withPluginAtFront(new el.B(e))})}withTables(){return new eG({...this.#e})}async destroy(){await this.#e.driver.destroy()}get isTransaction(){return!1}getExecutor(){return this.#e.executor}executeQuery(e,t=(0,ec.a)()){let r=(0,i.Gv)(e)&&(0,i.Tn)(e.compile)?e.compile():e;return this.getExecutor().executeQuery(r,t)}async [Symbol.asyncDispose](){await this.destroy()}}class ez extends eG{#e;constructor(e){super(e),this.#e=e}get isTransaction(){return!0}transaction(){throw Error("calling the transaction method for a Transaction is not supported")}connection(){throw Error("calling the connection method for a Transaction is not supported")}async destroy(){throw Error("calling the destroy method for a Transaction is not supported")}withPlugin(e){return new ez({...this.#e,executor:this.#e.executor.withPlugin(e)})}withoutPlugins(){return new ez({...this.#e,executor:this.#e.executor.withoutPlugins()})}withSchema(e){return new ez({...this.#e,executor:this.#e.executor.withPluginAtFront(new el.B(e))})}withTables(){return new ez({...this.#e})}}class eY{#e;constructor(e){this.#e=(0,i.CN)(e)}async execute(e){return this.#e.executor.provideConnection(async t=>{let r=this.#e.executor.withConnectionProvider(new eQ(t)),i=new eG({...this.#e,executor:r});return await e(i)})}}class eH{#e;constructor(e){this.#e=(0,i.CN)(e)}setAccessMode(e){return new eH({...this.#e,accessMode:e})}setIsolationLevel(e){return new eH({...this.#e,isolationLevel:e})}async execute(e){let{isolationLevel:t,accessMode:r,...i}=this.#e,o={isolationLevel:t,accessMode:r};return eF(o),this.#e.executor.provideConnection(async t=>{let r=this.#e.executor.withConnectionProvider(new eQ(t)),n=new ez({...i,executor:r});try{await this.#e.driver.beginTransaction(t,o);let r=await e(n);return await this.#e.driver.commitTransaction(t),r}catch(e){throw await this.#e.driver.rollbackTransaction(t),e}})}}class eZ{#e;constructor(e){this.#e=(0,i.CN)(e)}setAccessMode(e){return new eZ({...this.#e,accessMode:e})}setIsolationLevel(e){return new eZ({...this.#e,isolationLevel:e})}async execute(){let{isolationLevel:e,accessMode:t,...r}=this.#e,i={isolationLevel:e,accessMode:t};eF(i);let o=await (0,eK.G)(this.#e.executor);return await this.#e.driver.beginTransaction(o.connection,i),new eX({...r,connection:o,executor:this.#e.executor.withConnectionProvider(new eQ(o.connection))})}}class eX extends ez{#e;#P;#Q;constructor(e){let t={isCommitted:!1,isRolledBack:!1},{connection:r,...o}=e={...e,executor:new e7(e.executor,t)};super(o),this.#e=(0,i.CN)(e),this.#Q=t;let n=(0,ec.a)();this.#P=t=>e.executor.compileQuery(t,n)}get isCommitted(){return this.#Q.isCommitted}get isRolledBack(){return this.#Q.isRolledBack}commit(){return e8(this.#Q),new e0(async()=>{await this.#e.driver.commitTransaction(this.#e.connection.connection),this.#Q.isCommitted=!0,this.#e.connection.release()})}rollback(){return e8(this.#Q),new e0(async()=>{await this.#e.driver.rollbackTransaction(this.#e.connection.connection),this.#Q.isRolledBack=!0,this.#e.connection.release()})}savepoint(e){return e8(this.#Q),new e0(async()=>(await this.#e.driver.savepoint?.(this.#e.connection.connection,e,this.#P),new eX({...this.#e})))}rollbackToSavepoint(e){return e8(this.#Q),new e0(async()=>(await this.#e.driver.rollbackToSavepoint?.(this.#e.connection.connection,e,this.#P),new eX({...this.#e})))}releaseSavepoint(e){return e8(this.#Q),new e0(async()=>(await this.#e.driver.releaseSavepoint?.(this.#e.connection.connection,e,this.#P),new eX({...this.#e})))}withPlugin(e){return new eX({...this.#e,executor:this.#e.executor.withPlugin(e)})}withoutPlugins(){return new eX({...this.#e,executor:this.#e.executor.withoutPlugins()})}withSchema(e){return new eX({...this.#e,executor:this.#e.executor.withPluginAtFront(new el.B(e))})}withTables(){return new eX({...this.#e})}}class e0{#R;constructor(e){this.#R=e}async execute(){return await this.#R()}}function e8(e){if(e.isCommitted)throw Error("Transaction is already committed");if(e.isRolledBack)throw Error("Transaction is already rolled back")}class e7{#y;#Q;constructor(e,t){e instanceof e7?this.#y=e.#y:this.#y=e,this.#Q=t}get adapter(){return this.#y.adapter}get plugins(){return this.#y.plugins}transformQuery(e,t){return this.#y.transformQuery(e,t)}compileQuery(e,t){return this.#y.compileQuery(e,t)}provideConnection(e){return this.#y.provideConnection(e)}executeQuery(e,t){return e8(this.#Q),this.#y.executeQuery(e,t)}stream(e,t,r){return e8(this.#Q),this.#y.stream(e,t,r)}withConnectionProvider(e){return new e7(this.#y.withConnectionProvider(e),this.#Q)}withPlugin(e){return new e7(this.#y.withPlugin(e),this.#Q)}withPlugins(e){return new e7(this.#y.withPlugins(e),this.#Q)}withPluginAtFront(e){return new e7(this.#y.withPluginAtFront(e),this.#Q)}withoutPlugins(){return new e7(this.#y.withoutPlugins(),this.#Q)}}},43995:(e,t,r)=>{"use strict";r.d(t,{C:()=>a,g:()=>s});var i=r(39865),o=r(4757),n=r(85788);class s{#$;get dynamicReference(){return this.#$}get refType(){}constructor(e){this.#$=e}toOperationNode(){return(0,o.vd)(this.#$)}}function a(e){return(0,n.Gv)(e)&&(0,i.N)(e)&&(0,n.Kg)(e.dynamicReference)}},46502:(e,t,r)=>{"use strict";r.d(t,{U:()=>o});var i=r(85788);let o=(0,i.CN)({is:e=>"SelectAllNode"===e.kind,create:()=>(0,i.CN)({kind:"SelectAllNode"})})},52102:(e,t,r)=>{"use strict";r.d(t,{bj:()=>d,uc:()=>h});var i=r(58740),o=r(52325),n=r(39865),s=r(99758),a=r(85788);class d{#F;get table(){return this.#F}constructor(e){this.#F=e}as(e){return new p(this.#F,e)}}class p{#F;#n;get table(){return this.#F}get alias(){return this.#n}constructor(e,t){this.#F=e,this.#n=t}toOperationNode(){return i.N.create((0,s.M$)(this.#F),o.O.create(this.#n))}}function h(e){return(0,a.Gv)(e)&&(0,n.N)(e)&&(0,a.Kg)(e.table)&&(0,a.Kg)(e.alias)}},52325:(e,t,r)=>{"use strict";r.d(t,{O:()=>o});var i=r(85788);let o=(0,i.CN)({is:e=>"IdentifierNode"===e.kind,create:e=>(0,i.CN)({kind:"IdentifierNode",name:e})})},53859:(e,t,r)=>{"use strict";r.d(t,{Q:()=>d});var i=r(85788);let o=["varchar","char","text","integer","int2","int4","int8","smallint","bigint","boolean","real","double precision","float4","float8","decimal","numeric","binary","bytea","date","datetime","time","timetz","timestamp","timestamptz","serial","bigserial","uuid","json","jsonb","blob","varbinary","int4range","int4multirange","int8range","int8multirange","numrange","nummultirange","tsrange","tsmultirange","tstzrange","tstzmultirange","daterange","datemultirange"],n=[/^varchar\(\d+\)$/,/^char\(\d+\)$/,/^decimal\(\d+, \d+\)$/,/^numeric\(\d+, \d+\)$/,/^binary\(\d+\)$/,/^datetime\(\d+\)$/,/^time\(\d+\)$/,/^timetz\(\d+\)$/,/^timestamp\(\d+\)$/,/^timestamptz\(\d+\)$/,/^varbinary\(\d+\)$/],s=(0,i.CN)({is:e=>"DataTypeNode"===e.kind,create:e=>(0,i.CN)({kind:"DataTypeNode",dataType:e})});var a=r(39865);function d(e){if((0,a.N)(e))return e.toOperationNode();if(o.includes(e)||n.some(t=>t.test(e)))return s.create(e);throw Error(`invalid column data type ${JSON.stringify(e)}`)}},58740:(e,t,r)=>{"use strict";r.d(t,{N:()=>o});var i=r(85788);let o=(0,i.CN)({is:e=>"AliasNode"===e.kind,create:(e,t)=>(0,i.CN)({kind:"AliasNode",node:e,alias:t})})},62863:(e,t,r)=>{"use strict";r.d(t,{q:()=>o});var i=r(85788);let o=(0,i.CN)({is:e=>"ValueNode"===e.kind,create:e=>(0,i.CN)({kind:"ValueNode",value:e}),createImmediate:e=>(0,i.CN)({kind:"ValueNode",value:e,immediate:!0})})},63300:(e,t,r)=>{"use strict";r.d(t,{P:()=>n});var i=r(85788),o=r(88208);let n=(0,i.CN)({is:e=>"CaseNode"===e.kind,create:e=>(0,i.CN)({kind:"CaseNode",value:e}),cloneWithWhen:(e,t)=>(0,i.CN)({...e,when:(0,i.CN)(e.when?[...e.when,t]:[t])}),cloneWithThen:(e,t)=>(0,i.CN)({...e,when:e.when?(0,i.CN)([...e.when.slice(0,-1),o.t.cloneWithResult(e.when[e.when.length-1],t)]):void 0}),cloneWith:(e,t)=>(0,i.CN)({...e,...t})})},63783:(e,t,r)=>{"use strict";r.d(t,{GQ:()=>C,EQ:()=>g,bl:()=>v});var i=r(23064),o=r(85788),n=r(9622);let s=(0,o.CN)({is:e=>"PartitionByNode"===e.kind,create:e=>(0,o.CN)({kind:"PartitionByNode",items:(0,o.CN)(e)}),cloneWithItems:(e,t)=>(0,o.CN)({...e,items:(0,o.CN)([...e.items,...t])})}),a=(0,o.CN)({is:e=>"OverNode"===e.kind,create:()=>(0,o.CN)({kind:"OverNode"}),cloneWithOrderByItems:(e,t)=>(0,o.CN)({...e,orderBy:e.orderBy?n.O.cloneWithItems(e.orderBy,t):n.O.create(t)}),cloneWithPartitionByItems:(e,t)=>(0,o.CN)({...e,partitionBy:e.partitionBy?s.cloneWithItems(e.partitionBy,t):s.create(t)})});var d=r(38706),p=r(39411);class h{#e;constructor(e){this.#e=(0,o.CN)(e)}on(...e){return new h({...this.#e,joinNode:i.b.cloneWithOn(this.#e.joinNode,(0,p.GB)(e))})}onRef(e,t,r){return new h({...this.#e,joinNode:i.b.cloneWithOn(this.#e.joinNode,(0,p.vC)(e,t,r))})}onTrue(){return new h({...this.#e,joinNode:i.b.cloneWithOn(this.#e.joinNode,d.z.createWithSql("true"))})}$call(e){return e(this)}toOperationNode(){return this.#e.joinNode}}var u=r(40237),c=r(8976);let l=(0,o.CN)({is:e=>"PartitionByItemNode"===e.kind,create:e=>(0,o.CN)({kind:"PartitionByItemNode",partitionBy:e})});var N=r(4757);class m{#e;constructor(e){this.#e=(0,o.CN)(e)}orderBy(...e){return new m({overNode:a.cloneWithOrderByItems(this.#e.overNode,(0,c.xk)(e))})}clearOrderBy(){return new m({overNode:u.L.cloneWithoutOrderBy(this.#e.overNode)})}partitionBy(e){return new m({overNode:a.cloneWithPartitionByItems(this.#e.overNode,(0,N.kU)(e).map(l.create))})}$call(e){return e(this)}toOperationNode(){return this.#e.overNode}}var f=r(67515),y=r(36296),w=r(99758);function v(){return new f.n({executor:y.W})}function C(e,t){return new h({joinNode:i.b.create(e,(0,w.uJ)(t))})}function g(){return new m({overNode:a.create()})}},64063:(e,t,r)=>{"use strict";r.d(t,{l:()=>o});var i=r(85788);let o=(0,i.CN)({is:e=>"BinaryOperationNode"===e.kind,create:(e,t,r)=>(0,i.CN)({kind:"BinaryOperationNode",leftOperand:e,operator:t,rightOperand:r})})},64943:(e,t,r)=>{"use strict";r.d(t,{r:()=>n});var i=r(85788),o=r(88208);let n=(0,i.CN)({is:e=>"MergeQueryNode"===e.kind,create:(e,t)=>(0,i.CN)({kind:"MergeQueryNode",into:e,...t&&{with:t}}),cloneWithUsing:(e,t)=>(0,i.CN)({...e,using:t}),cloneWithWhen:(e,t)=>(0,i.CN)({...e,whens:e.whens?(0,i.CN)([...e.whens,t]):(0,i.CN)([t])}),cloneWithThen:(e,t)=>(0,i.CN)({...e,whens:e.whens?(0,i.CN)([...e.whens.slice(0,-1),o.t.cloneWithResult(e.whens[e.whens.length-1],t)]):void 0})})},67515:(e,t,r)=>{"use strict";r.d(t,{n:()=>el});var i=r(86708),o=r(32378),n=r(11078),s=r(85152),a=r(77460),d=r(85788),p=r(78853);let h=(0,d.CN)({is:e=>"ValuesNode"===e.kind,create:e=>(0,d.CN)({kind:"ValuesNode",values:(0,d.CN)(e)})});var u=r(97778);let c=(0,d.CN)({is:e=>"DefaultInsertValueNode"===e.kind,create:()=>(0,d.CN)({kind:"DefaultInsertValueNode"})});var l=r(68126);function N(e){let t=(0,d.Tn)(e)?e((0,l.A)()):e;var r=(0,d.MH)(t)?t:(0,d.CN)([t]);let i=function(e){let t=new Map;for(let r of e)for(let e of Object.keys(r))t.has(e)||void 0===r[e]||t.set(e,t.size);return t}(r);return[(0,d.CN)([...i.keys()].map(n.Z.create)),h.create(r.map(e=>(function(e,t){let r=Object.keys(e),i=Array.from({length:t.size}),o=!1,n=r.length;for(let s of r){let r=t.get(s);if((0,d.b0)(r)){n--;continue}let a=e[s];((0,d.b0)(a)||(0,u.SS)(a))&&(o=!0),i[r]=a}if(n<t.size||o){let e=c.create();return a.s.create(i.map(t=>(0,d.b0)(t)?e:(0,p.$s)(t)))}return s.h.create(i)})(e,i)))]}var m=r(23892),f=r(40237);let y=(0,d.CN)({is:e=>"ColumnUpdateNode"===e.kind,create:(e,t)=>(0,d.CN)({kind:"ColumnUpdateNode",column:e,value:t})});var w=r(4757);function v(e){return Object.entries((0,d.Tn)(e)?e((0,l.A)()):e).filter(([e,t])=>void 0!==t).map(([e,t])=>y.create(n.Z.create(e),(0,p.$s)(t)))}let C=(0,d.CN)({is:e=>"OnDuplicateKeyNode"===e.kind,create:e=>(0,d.CN)({kind:"OnDuplicateKeyNode",updates:e})});class g{insertId;numInsertedOrUpdatedRows;constructor(e,t){this.insertId=e,this.numInsertedOrUpdatedRows=t}}var b=r(11427),x=r(52325),O=r(37085);let W=(0,d.CN)({is:e=>"OnConflictNode"===e.kind,create:()=>(0,d.CN)({kind:"OnConflictNode"}),cloneWith:(e,t)=>(0,d.CN)({...e,...t}),cloneWithIndexWhere:(e,t)=>(0,d.CN)({...e,indexWhere:e.indexWhere?O.o.cloneWithOperation(e.indexWhere,"And",t):O.o.create(t)}),cloneWithIndexOrWhere:(e,t)=>(0,d.CN)({...e,indexWhere:e.indexWhere?O.o.cloneWithOperation(e.indexWhere,"Or",t):O.o.create(t)}),cloneWithUpdateWhere:(e,t)=>(0,d.CN)({...e,updateWhere:e.updateWhere?O.o.cloneWithOperation(e.updateWhere,"And",t):O.o.create(t)}),cloneWithUpdateOrWhere:(e,t)=>(0,d.CN)({...e,updateWhere:e.updateWhere?O.o.cloneWithOperation(e.updateWhere,"Or",t):O.o.create(t)}),cloneWithoutIndexWhere:e=>(0,d.CN)({...e,indexWhere:void 0}),cloneWithoutUpdateWhere:e=>(0,d.CN)({...e,updateWhere:void 0})});var q=r(39411);class k{#e;constructor(e){this.#e=(0,d.CN)(e)}column(e){let t=n.Z.create(e);return new k({...this.#e,onConflictNode:W.cloneWith(this.#e.onConflictNode,{columns:this.#e.onConflictNode.columns?(0,d.CN)([...this.#e.onConflictNode.columns,t]):(0,d.CN)([t])})})}columns(e){let t=e.map(n.Z.create);return new k({...this.#e,onConflictNode:W.cloneWith(this.#e.onConflictNode,{columns:this.#e.onConflictNode.columns?(0,d.CN)([...this.#e.onConflictNode.columns,...t]):(0,d.CN)(t)})})}constraint(e){return new k({...this.#e,onConflictNode:W.cloneWith(this.#e.onConflictNode,{constraint:x.O.create(e)})})}expression(e){return new k({...this.#e,onConflictNode:W.cloneWith(this.#e.onConflictNode,{indexExpression:e.toOperationNode()})})}where(...e){return new k({...this.#e,onConflictNode:W.cloneWithIndexWhere(this.#e.onConflictNode,(0,q.GB)(e))})}whereRef(e,t,r){return new k({...this.#e,onConflictNode:W.cloneWithIndexWhere(this.#e.onConflictNode,(0,q.vC)(e,t,r))})}clearWhere(){return new k({...this.#e,onConflictNode:W.cloneWithoutIndexWhere(this.#e.onConflictNode)})}doNothing(){return new I({...this.#e,onConflictNode:W.cloneWith(this.#e.onConflictNode,{doNothing:!0})})}doUpdateSet(e){return new T({...this.#e,onConflictNode:W.cloneWith(this.#e.onConflictNode,{updates:v(e)})})}$call(e){return e(this)}}class I{#e;constructor(e){this.#e=(0,d.CN)(e)}toOperationNode(){return this.#e.onConflictNode}}class T{#e;constructor(e){this.#e=(0,d.CN)(e)}where(...e){return new T({...this.#e,onConflictNode:W.cloneWithUpdateWhere(this.#e.onConflictNode,(0,q.GB)(e))})}whereRef(e,t,r){return new T({...this.#e,onConflictNode:W.cloneWithUpdateWhere(this.#e.onConflictNode,(0,q.vC)(e,t,r))})}clearWhere(){return new T({...this.#e,onConflictNode:W.cloneWithoutUpdateWhere(this.#e.onConflictNode)})}$call(e){return e(this)}toOperationNode(){return this.#e.onConflictNode}}var L=r(36576);let E=(0,d.CN)({is:e=>"OrActionNode"===e.kind,create:e=>(0,d.CN)({kind:"OrActionNode",action:e})});class D{#e;constructor(e){this.#e=(0,d.CN)(e)}values(e){let[t,r]=N(e);return new D({...this.#e,queryNode:m.o.cloneWith(this.#e.queryNode,{columns:t,values:r})})}columns(e){return new D({...this.#e,queryNode:m.o.cloneWith(this.#e.queryNode,{columns:(0,d.CN)(e.map(n.Z.create))})})}expression(e){return new D({...this.#e,queryNode:m.o.cloneWith(this.#e.queryNode,{values:(0,u.YK)(e)})})}defaultValues(){return new D({...this.#e,queryNode:m.o.cloneWith(this.#e.queryNode,{defaultValues:!0})})}modifyEnd(e){return new D({...this.#e,queryNode:f.L.cloneWithEndModifier(this.#e.queryNode,e.toOperationNode())})}ignore(){return new D({...this.#e,queryNode:m.o.cloneWith(this.#e.queryNode,{orAction:E.create("ignore")})})}orIgnore(){return new D({...this.#e,queryNode:m.o.cloneWith(this.#e.queryNode,{orAction:E.create("ignore")})})}orAbort(){return new D({...this.#e,queryNode:m.o.cloneWith(this.#e.queryNode,{orAction:E.create("abort")})})}orFail(){return new D({...this.#e,queryNode:m.o.cloneWith(this.#e.queryNode,{orAction:E.create("fail")})})}orReplace(){return new D({...this.#e,queryNode:m.o.cloneWith(this.#e.queryNode,{orAction:E.create("replace")})})}orRollback(){return new D({...this.#e,queryNode:m.o.cloneWith(this.#e.queryNode,{orAction:E.create("rollback")})})}top(e,t){return new D({...this.#e,queryNode:f.L.cloneWithTop(this.#e.queryNode,(0,L.f)(e,t))})}onConflict(e){return new D({...this.#e,queryNode:m.o.cloneWith(this.#e.queryNode,{onConflict:e(new k({onConflictNode:W.create()})).toOperationNode()})})}onDuplicateKeyUpdate(e){return new D({...this.#e,queryNode:m.o.cloneWith(this.#e.queryNode,{onDuplicateKey:C.create(v(e))})})}returning(e){return new D({...this.#e,queryNode:f.L.cloneWithReturning(this.#e.queryNode,(0,o.G)(e))})}returningAll(){return new D({...this.#e,queryNode:f.L.cloneWithReturning(this.#e.queryNode,(0,o.J)())})}output(e){return new D({...this.#e,queryNode:f.L.cloneWithOutput(this.#e.queryNode,(0,o.G)(e))})}outputAll(e){return new D({...this.#e,queryNode:f.L.cloneWithOutput(this.#e.queryNode,(0,o.J)(e))})}clearReturning(){return new D({...this.#e,queryNode:f.L.cloneWithoutReturning(this.#e.queryNode)})}$call(e){return e(this)}$if(e,t){return e?t(this):new D({...this.#e})}$castTo(){return new D(this.#e)}$narrowType(){return new D(this.#e)}$assertType(){return new D(this.#e)}withPlugin(e){return new D({...this.#e,executor:this.#e.executor.withPlugin(e)})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.queryNode,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){let e=this.compile(),t=await this.#e.executor.executeQuery(e,this.#e.queryId),{adapter:r}=this.#e.executor,i=e.query;return i.returning&&r.supportsReturning||i.output&&r.supportsOutput?t.rows:[new g(t.insertId,t.numAffectedRows??BigInt(0))]}async executeTakeFirst(){let[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=b.F){let t=await this.executeTakeFirst();if(void 0===t)throw(0,b.x)(e)?new e(this.toOperationNode()):e(this.toOperationNode());return t}async *stream(e=100){let t=this.compile();for await(let r of this.#e.executor.stream(t,e,this.#e.queryId))yield*r.rows}async explain(e,t){let r=new D({...this.#e,queryNode:f.L.cloneWithExplain(this.#e.queryNode,e,t)});return await r.execute()}}var S=r(78896),B=r(99758);class A{numDeletedRows;constructor(e){this.numDeletedRows=e}}var M=r(25532),P=r(96645),Q=r(8976);class R{#e;constructor(e){this.#e=(0,d.CN)(e)}where(...e){return new R({...this.#e,queryNode:f.L.cloneWithWhere(this.#e.queryNode,(0,q.GB)(e))})}whereRef(e,t,r){return new R({...this.#e,queryNode:f.L.cloneWithWhere(this.#e.queryNode,(0,q.vC)(e,t,r))})}clearWhere(){return new R({...this.#e,queryNode:f.L.cloneWithoutWhere(this.#e.queryNode)})}top(e,t){return new R({...this.#e,queryNode:f.L.cloneWithTop(this.#e.queryNode,(0,L.f)(e,t))})}using(e){return new R({...this.#e,queryNode:M.e.cloneWithUsing(this.#e.queryNode,(0,B.JB)(e))})}innerJoin(...e){return this.#V("InnerJoin",e)}leftJoin(...e){return this.#V("LeftJoin",e)}rightJoin(...e){return this.#V("RightJoin",e)}fullJoin(...e){return this.#V("FullJoin",e)}#V(e,t){return new R({...this.#e,queryNode:f.L.cloneWithJoin(this.#e.queryNode,(0,S.a)(e,t))})}returning(e){return new R({...this.#e,queryNode:f.L.cloneWithReturning(this.#e.queryNode,(0,o.G)(e))})}returningAll(e){return new R({...this.#e,queryNode:f.L.cloneWithReturning(this.#e.queryNode,(0,o.J)(e))})}output(e){return new R({...this.#e,queryNode:f.L.cloneWithOutput(this.#e.queryNode,(0,o.G)(e))})}outputAll(e){return new R({...this.#e,queryNode:f.L.cloneWithOutput(this.#e.queryNode,(0,o.J)(e))})}clearReturning(){return new R({...this.#e,queryNode:f.L.cloneWithoutReturning(this.#e.queryNode)})}clearLimit(){return new R({...this.#e,queryNode:M.e.cloneWithoutLimit(this.#e.queryNode)})}orderBy(...e){return new R({...this.#e,queryNode:f.L.cloneWithOrderByItems(this.#e.queryNode,(0,Q.xk)(e))})}clearOrderBy(){return new R({...this.#e,queryNode:f.L.cloneWithoutOrderBy(this.#e.queryNode)})}limit(e){return new R({...this.#e,queryNode:M.e.cloneWithLimit(this.#e.queryNode,P.a.create((0,p.$s)(e)))})}modifyEnd(e){return new R({...this.#e,queryNode:f.L.cloneWithEndModifier(this.#e.queryNode,e.toOperationNode())})}$call(e){return e(this)}$if(e,t){return e?t(this):new R({...this.#e})}$castTo(){return new R(this.#e)}$narrowType(){return new R(this.#e)}$assertType(){return new R(this.#e)}withPlugin(e){return new R({...this.#e,executor:this.#e.executor.withPlugin(e)})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.queryNode,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){let e=this.compile(),t=await this.#e.executor.executeQuery(e,this.#e.queryId),{adapter:r}=this.#e.executor,i=e.query;return i.returning&&r.supportsReturning||i.output&&r.supportsOutput?t.rows:[new A(t.numAffectedRows??BigInt(0))]}async executeTakeFirst(){let[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=b.F){let t=await this.executeTakeFirst();if(void 0===t)throw(0,b.x)(e)?new e(this.toOperationNode()):e(this.toOperationNode());return t}async *stream(e=100){let t=this.compile();for await(let r of this.#e.executor.stream(t,e,this.#e.queryId))yield*r.rows}async explain(e,t){let r=new R({...this.#e,queryNode:f.L.cloneWithExplain(this.#e.queryNode,e,t)});return await r.execute()}}var $=r(24584);class F{numUpdatedRows;numChangedRows;constructor(e,t){this.numUpdatedRows=e,this.numChangedRows=t}}class V{#e;constructor(e){this.#e=(0,d.CN)(e)}where(...e){return new V({...this.#e,queryNode:f.L.cloneWithWhere(this.#e.queryNode,(0,q.GB)(e))})}whereRef(e,t,r){return new V({...this.#e,queryNode:f.L.cloneWithWhere(this.#e.queryNode,(0,q.vC)(e,t,r))})}clearWhere(){return new V({...this.#e,queryNode:f.L.cloneWithoutWhere(this.#e.queryNode)})}top(e,t){return new V({...this.#e,queryNode:f.L.cloneWithTop(this.#e.queryNode,(0,L.f)(e,t))})}from(e){return new V({...this.#e,queryNode:$.U.cloneWithFromItems(this.#e.queryNode,(0,B.JB)(e))})}innerJoin(...e){return this.#V("InnerJoin",e)}leftJoin(...e){return this.#V("LeftJoin",e)}rightJoin(...e){return this.#V("RightJoin",e)}fullJoin(...e){return this.#V("FullJoin",e)}#V(e,t){return new V({...this.#e,queryNode:f.L.cloneWithJoin(this.#e.queryNode,(0,S.a)(e,t))})}orderBy(...e){return new V({...this.#e,queryNode:f.L.cloneWithOrderByItems(this.#e.queryNode,(0,Q.xk)(e))})}clearOrderBy(){return new V({...this.#e,queryNode:f.L.cloneWithoutOrderBy(this.#e.queryNode)})}limit(e){return new V({...this.#e,queryNode:$.U.cloneWithLimit(this.#e.queryNode,P.a.create((0,p.$s)(e)))})}set(...e){return new V({...this.#e,queryNode:$.U.cloneWithUpdates(this.#e.queryNode,function(...e){return 2===e.length?[y.create((0,w.$O)(e[0]),(0,p.$s)(e[1]))]:v(e[0])}(...e))})}returning(e){return new V({...this.#e,queryNode:f.L.cloneWithReturning(this.#e.queryNode,(0,o.G)(e))})}returningAll(e){return new V({...this.#e,queryNode:f.L.cloneWithReturning(this.#e.queryNode,(0,o.J)(e))})}output(e){return new V({...this.#e,queryNode:f.L.cloneWithOutput(this.#e.queryNode,(0,o.G)(e))})}outputAll(e){return new V({...this.#e,queryNode:f.L.cloneWithOutput(this.#e.queryNode,(0,o.J)(e))})}modifyEnd(e){return new V({...this.#e,queryNode:f.L.cloneWithEndModifier(this.#e.queryNode,e.toOperationNode())})}clearReturning(){return new V({...this.#e,queryNode:f.L.cloneWithoutReturning(this.#e.queryNode)})}$call(e){return e(this)}$if(e,t){return e?t(this):new V({...this.#e})}$castTo(){return new V(this.#e)}$narrowType(){return new V(this.#e)}$assertType(){return new V(this.#e)}withPlugin(e){return new V({...this.#e,executor:this.#e.executor.withPlugin(e)})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.queryNode,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){let e=this.compile(),t=await this.#e.executor.executeQuery(e,this.#e.queryId),{adapter:r}=this.#e.executor,i=e.query;return i.returning&&r.supportsReturning||i.output&&r.supportsOutput?t.rows:[new F(t.numAffectedRows??BigInt(0),t.numChangedRows)]}async executeTakeFirst(){let[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=b.F){let t=await this.executeTakeFirst();if(void 0===t)throw(0,b.x)(e)?new e(this.toOperationNode()):e(this.toOperationNode());return t}async *stream(e=100){let t=this.compile();for await(let r of this.#e.executor.stream(t,e,this.#e.queryId))yield*r.rows}async explain(e,t){let r=new V({...this.#e,queryNode:f.L.cloneWithExplain(this.#e.queryNode,e,t)});return await r.execute()}}var U=r(75499),J=r(98572);let _=(0,d.CN)({is:e=>"CommonTableExpressionNameNode"===e.kind,create:(e,t)=>(0,d.CN)({kind:"CommonTableExpressionNameNode",table:J.H.create(e),columns:t?(0,d.CN)(t.map(n.Z.create)):void 0})});var j=r(63783);let K=(0,d.CN)({is:e=>"CommonTableExpressionNode"===e.kind,create:(e,t)=>(0,d.CN)({kind:"CommonTableExpressionNode",name:e,expression:t}),cloneWith:(e,t)=>(0,d.CN)({...e,...t})});class G{#e;constructor(e){this.#e=(0,d.CN)(e)}materialized(){return new G({...this.#e,node:K.cloneWith(this.#e.node,{materialized:!0})})}notMaterialized(){return new G({...this.#e,node:K.cloneWith(this.#e.node,{materialized:!1})})}toOperationNode(){return this.#e.node}}function z(e,t){var r;let i=t((0,j.bl)()).toOperationNode();return(0,d.Tn)(e)?e((r=i,e=>new G({node:K.create(Y(e),r)}))).toOperationNode():K.create(Y(e),i)}function Y(e){if(!e.includes("("))return _.create(e);{let t=e.split(/[\(\)]/),r=t[0],i=t[1].split(",").map(e=>e.trim());return _.create(r,i)}}let H=(0,d.CN)({is:e=>"WithNode"===e.kind,create:(e,t)=>(0,d.CN)({kind:"WithNode",expressions:(0,d.CN)([e]),...t}),cloneWithExpression:(e,t)=>(0,d.CN)({...e,expressions:(0,d.CN)([...e.expressions,t])})});var Z=r(81460),X=r(68789),ee=r(64943);let et=(0,d.CN)({is:e=>"MatchedNode"===e.kind,create:(e,t=!1)=>(0,d.CN)({kind:"MatchedNode",not:e,bySource:t})});var er=r(39865),ei=r(38706),eo=r(88208);function en(e,t,r){return eo.t.create((0,q.KN)([et.create(!e.isMatched,e.bySource),...t&&t.length>0?[3===t.length&&r?(0,q.vC)(t[0],t[1],t[2]):(0,q.GB)(t)]:[]],"and",!1))}function es(e){return(0,d.Kg)(e)?ei.z.create([e],[]):(0,er.N)(e)?e.toOperationNode():e}var ea=r(36296);class ed{numChangedRows;constructor(e){this.numChangedRows=e}}class ep{#e;constructor(e){this.#e=(0,d.CN)(e)}modifyEnd(e){return new ep({...this.#e,queryNode:f.L.cloneWithEndModifier(this.#e.queryNode,e.toOperationNode())})}top(e,t){return new ep({...this.#e,queryNode:f.L.cloneWithTop(this.#e.queryNode,(0,L.f)(e,t))})}using(...e){return new eh({...this.#e,queryNode:ee.r.cloneWithUsing(this.#e.queryNode,(0,S.a)("Using",e))})}returning(e){return new ep({...this.#e,queryNode:f.L.cloneWithReturning(this.#e.queryNode,(0,o.G)(e))})}returningAll(e){return new ep({...this.#e,queryNode:f.L.cloneWithReturning(this.#e.queryNode,(0,o.J)(e))})}output(e){return new ep({...this.#e,queryNode:f.L.cloneWithOutput(this.#e.queryNode,(0,o.G)(e))})}outputAll(e){return new ep({...this.#e,queryNode:f.L.cloneWithOutput(this.#e.queryNode,(0,o.J)(e))})}}class eh{#e;constructor(e){this.#e=(0,d.CN)(e)}modifyEnd(e){return new eh({...this.#e,queryNode:f.L.cloneWithEndModifier(this.#e.queryNode,e.toOperationNode())})}top(e,t){return new eh({...this.#e,queryNode:f.L.cloneWithTop(this.#e.queryNode,(0,L.f)(e,t))})}whenMatched(){return this.#U([])}whenMatchedAnd(...e){return this.#U(e)}whenMatchedAndRef(e,t,r){return this.#U([e,t,r],!0)}#U(e,t){return new eu({...this.#e,queryNode:ee.r.cloneWithWhen(this.#e.queryNode,en({isMatched:!0},e,t))})}whenNotMatched(){return this.#J([])}whenNotMatchedAnd(...e){return this.#J(e)}whenNotMatchedAndRef(e,t,r){return this.#J([e,t,r],!0)}whenNotMatchedBySource(){return this.#J([],!1,!0)}whenNotMatchedBySourceAnd(...e){return this.#J(e,!1,!0)}whenNotMatchedBySourceAndRef(e,t,r){return this.#J([e,t,r],!0,!0)}returning(e){return new eh({...this.#e,queryNode:f.L.cloneWithReturning(this.#e.queryNode,(0,o.G)(e))})}returningAll(e){return new eh({...this.#e,queryNode:f.L.cloneWithReturning(this.#e.queryNode,(0,o.J)(e))})}output(e){return new eh({...this.#e,queryNode:f.L.cloneWithOutput(this.#e.queryNode,(0,o.G)(e))})}outputAll(e){return new eh({...this.#e,queryNode:f.L.cloneWithOutput(this.#e.queryNode,(0,o.J)(e))})}#J(e,t=!1,r=!1){let i={...this.#e,queryNode:ee.r.cloneWithWhen(this.#e.queryNode,en({isMatched:!1,bySource:r},e,t))};return new(r?eu:ec)(i)}$call(e){return e(this)}$if(e,t){return e?t(this):new eh({...this.#e})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.queryNode,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){let e=this.compile(),t=await this.#e.executor.executeQuery(e,this.#e.queryId),{adapter:r}=this.#e.executor,i=e.query;return i.returning&&r.supportsReturning||i.output&&r.supportsOutput?t.rows:[new ed(t.numAffectedRows)]}async executeTakeFirst(){let[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=b.F){let t=await this.executeTakeFirst();if(void 0===t)throw(0,b.x)(e)?new e(this.toOperationNode()):e(this.toOperationNode());return t}}class eu{#e;constructor(e){this.#e=(0,d.CN)(e)}thenDelete(){return new eh({...this.#e,queryNode:ee.r.cloneWithThen(this.#e.queryNode,es("delete"))})}thenDoNothing(){return new eh({...this.#e,queryNode:ee.r.cloneWithThen(this.#e.queryNode,es("do nothing"))})}thenUpdate(e){return new eh({...this.#e,queryNode:ee.r.cloneWithThen(this.#e.queryNode,es(e(new V({queryId:this.#e.queryId,executor:ea.W,queryNode:$.U.createWithoutTable()}))))})}thenUpdateSet(...e){return this.thenUpdate(t=>t.set(...e))}}class ec{#e;constructor(e){this.#e=(0,d.CN)(e)}thenDoNothing(){return new eh({...this.#e,queryNode:ee.r.cloneWithThen(this.#e.queryNode,es("do nothing"))})}thenInsertValues(e){let[t,r]=N(e);return new eh({...this.#e,queryNode:ee.r.cloneWithThen(this.#e.queryNode,es(m.o.cloneWith(m.o.createWithoutInto(),{columns:t,values:r})))})}}class el{#e;constructor(e){this.#e=(0,d.CN)(e)}selectFrom(e){return(0,i.c)({queryId:(0,Z.a)(),executor:this.#e.executor,queryNode:U.L.createFrom((0,B.JB)(e),this.#e.withNode)})}selectNoFrom(e){return(0,i.c)({queryId:(0,Z.a)(),executor:this.#e.executor,queryNode:U.L.cloneWithSelections(U.L.create(this.#e.withNode),(0,o.G)(e))})}insertInto(e){return new D({queryId:(0,Z.a)(),executor:this.#e.executor,queryNode:m.o.create((0,B.M$)(e),this.#e.withNode)})}replaceInto(e){return new D({queryId:(0,Z.a)(),executor:this.#e.executor,queryNode:m.o.create((0,B.M$)(e),this.#e.withNode,!0)})}deleteFrom(e){return new R({queryId:(0,Z.a)(),executor:this.#e.executor,queryNode:M.e.create((0,B.JB)(e),this.#e.withNode)})}updateTable(e){return new V({queryId:(0,Z.a)(),executor:this.#e.executor,queryNode:$.U.create((0,B.JB)(e),this.#e.withNode)})}mergeInto(e){return new ep({queryId:(0,Z.a)(),executor:this.#e.executor,queryNode:ee.r.create((0,B.Xm)(e),this.#e.withNode)})}with(e,t){let r=z(e,t);return new el({...this.#e,withNode:this.#e.withNode?H.cloneWithExpression(this.#e.withNode,r):H.create(r)})}withRecursive(e,t){let r=z(e,t);return new el({...this.#e,withNode:this.#e.withNode?H.cloneWithExpression(this.#e.withNode,r):H.create(r,{recursive:!0})})}withPlugin(e){return new el({...this.#e,executor:this.#e.executor.withPlugin(e)})}withoutPlugins(){return new el({...this.#e,executor:this.#e.executor.withoutPlugins()})}withSchema(e){return new el({...this.#e,executor:this.#e.executor.withPluginAtFront(new X.B(e))})}}},68126:(e,t,r)=>{"use strict";r.d(t,{O:()=>M,A:()=>P});var i=r(86708),o=r(75499),n=r(99758),s=r(68789),a=r(81460),d=r(77655),p=r(4757),h=r(39411),u=r(92435),c=r(23721),l=r(74936),N=r(85788);let m=(0,N.CN)({is:e=>"UnaryOperationNode"===e.kind,create:(e,t)=>(0,N.CN)({kind:"UnaryOperationNode",operator:e,operand:t})});var f=r(78853),y=r(36296),w=r(30813),v=r(63300),C=r(58740),g=r(52325),b=r(99119);let x=(0,N.CN)({is:e=>"JSONPathLegNode"===e.kind,create:(e,t)=>(0,N.CN)({kind:"JSONPathLegNode",type:e,value:t})});var O=r(2170),W=r(35998),q=r(39865),k=r(62863);class I{#a;constructor(e){this.#a=e}at(e){return this.#_("ArrayLocation",e)}key(e){return this.#_("Member",e)}#_(e,t){return new T(W.Q.is(this.#a)?W.Q.cloneWithTraversal(this.#a,O.c.is(this.#a.traversal)?O.c.cloneWithLeg(this.#a.traversal,x.create(e,t)):b.k.cloneWithValue(this.#a.traversal,k.q.createImmediate(t))):O.c.cloneWithLeg(this.#a,x.create(e,t)))}}class T extends I{#a;constructor(e){super(e),this.#a=e}get expressionType(){}as(e){return new L(this,e)}$castTo(){return new T(this.#a)}$notNull(){return new T(this.#a)}toOperationNode(){return this.#a}}class L{#j;#n;constructor(e,t){this.#j=e,this.#n=t}get expression(){return this.#j}get alias(){return this.#n}toOperationNode(){return C.N.create(this.#j.toOperationNode(),(0,q.N)(this.#n)?this.#n.toOperationNode():g.O.create(this.#n))}}var E=r(64063),D=r(86663);let S=(0,N.CN)({is:e=>"TupleNode"===e.kind,create:e=>(0,N.CN)({kind:"TupleNode",values:(0,N.CN)(e)})});var B=r(53859);let A=(0,N.CN)({is:e=>"CastNode"===e.kind,create:(e,t)=>(0,N.CN)({kind:"CastNode",expression:e,dataType:t})});function M(e=y.W){function t(e,t){var r,i;return new c.Is((r=e,i=t,m.create(l.zX.create(r),(0,p.$O)(i))))}let r=Object.assign(function(e,t,r){return new c.Is((0,h.ds)(e,t,r))},{fn:void 0,eb:void 0,selectFrom:t=>(0,i.c)({queryId:(0,a.a)(),executor:e,queryNode:o.L.createFrom((0,n.JB)(t))}),case:e=>new w.OU({node:v.P.create((0,N.b0)(e)?void 0:(0,p.$O)(e))}),ref:(e,t)=>(0,N.b0)(t)?new c.Is((0,p.q5)(e)):new I((0,p.NF)(e,t)),jsonPath:()=>new I(O.c.create()),table:e=>new c.Is((0,n.M$)(e)),val:e=>new c.Is((0,f.$s)(e)),refTuple:(...e)=>new c.Is(S.create(e.map(p.$O))),tuple:(...e)=>new c.Is(S.create(e.map(f.$s))),lit:e=>new c.Is((0,f.dJ)(e)),unary:t,not:e=>t("not",e),exists:e=>t("exists",e),neg:e=>t("-",e),between:(e,t,r)=>new c.Is(E.l.create((0,p.$O)(e),l.zX.create("between"),D.s.create((0,f.$s)(t),(0,f.$s)(r)))),betweenSymmetric:(e,t,r)=>new c.Is(E.l.create((0,p.$O)(e),l.zX.create("between symmetric"),D.s.create((0,f.$s)(t),(0,f.$s)(r)))),and:e=>new c.Is((0,N.MH)(e)?(0,h.KN)(e,"and"):(0,h.Ve)(e,"and")),or:e=>new c.Is((0,N.MH)(e)?(0,h.KN)(e,"or"):(0,h.Ve)(e,"or")),parens(...e){let t=(0,h.GB)(e);return new c.Is(u.k.is(t)?t:u.k.create(t))},cast:(e,t)=>new c.Is(A.create((0,p.$O)(e),(0,B.Q)(t))),withSchema:t=>M(e.withPluginAtFront(new s.B(t)))});return r.fn=(0,d.t)(),r.eb=r,r}function P(e){return M()}},68789:(e,t,r)=>{"use strict";r.d(t,{B:()=>c});var i=r(58740),o=r(52325),n=r(2592),s=r(17052),a=r(77668),d=r(98572);let p=(0,r(85788).CN)({AlterTableNode:!0,CreateIndexNode:!0,CreateSchemaNode:!0,CreateTableNode:!0,CreateTypeNode:!0,CreateViewNode:!0,RefreshMaterializedViewNode:!0,DeleteQueryNode:!0,DropIndexNode:!0,DropSchemaNode:!0,DropTableNode:!0,DropTypeNode:!0,DropViewNode:!0,InsertQueryNode:!0,RawNode:!0,SelectQueryNode:!0,UpdateQueryNode:!0,MergeQueryNode:!0}),h={json_agg:!0,to_json:!0};class u extends s.V{#K;#G=new Set;#z=new Set;constructor(e){super(),this.#K=e}transformNodeImpl(e,t){if(!this.#Y(e))return super.transformNodeImpl(e,t);let r=this.#H(e);for(let e of r)this.#z.add(e);let i=this.#Z(e);for(let e of i)this.#G.add(e);let o=super.transformNodeImpl(e,t);for(let e of i)this.#G.delete(e);for(let e of r)this.#z.delete(e);return o}transformSchemableIdentifier(e,t){let r=super.transformSchemableIdentifier(e,t);return r.schema||!this.#G.has(e.identifier.name)?r:{...r,schema:o.O.create(this.#K)}}transformReferences(e,t){let r=super.transformReferences(e,t);return r.table.table.schema?r:{...r,table:d.H.createWithSchema(this.#K,r.table.table.identifier.name)}}transformAggregateFunction(e,t){return{...super.transformAggregateFunction({...e,aggregated:[]},t),aggregated:this.#X(e,t,"aggregated")}}transformFunction(e,t){return{...super.transformFunction({...e,arguments:[]},t),arguments:this.#X(e,t,"arguments")}}#X(e,t,r){return h[e.func]?e[r].map(e=>!d.H.is(e)||e.table.schema?this.transformNode(e,t):{...e,table:this.transformIdentifier(e.table.identifier,t)}):this.transformNodeList(e[r],t)}#Y(e){return e.kind in p}#Z(e){let t=new Set;if("name"in e&&e.name&&a.y.is(e.name)&&this.#ee(e.name,t),"from"in e&&e.from)for(let r of e.from.froms)this.#et(r,t);if("into"in e&&e.into&&this.#et(e.into,t),"table"in e&&e.table&&this.#et(e.table,t),"joins"in e&&e.joins)for(let r of e.joins)this.#et(r.table,t);return"using"in e&&e.using&&this.#et(e.using,t),t}#H(e){let t=new Set;return"with"in e&&e.with&&this.#er(e.with,t),t}#et(e,t){if(d.H.is(e))this.#ee(e.table,t);else if(i.N.is(e)&&d.H.is(e.node))this.#ee(e.node.table,t);else if(n.v.is(e))for(let r of e.items)this.#et(r,t)}#ee(e,t){let r=e.identifier.name;this.#G.has(r)||this.#z.has(r)||t.add(r)}#er(e,t){for(let r of e.expressions){let e=r.name.table.table.identifier.name;this.#z.has(e)||t.add(e)}}}class c{#f;constructor(e){this.#f=new u(e)}transformQuery(e){return this.#f.transformNode(e.node,e.queryId)}async transformResult(e){return e.result}}},73948:(e,t,r)=>{"use strict";r.d(t,{i:()=>o});var i=r(85788);let o=(0,i.CN)({is:e=>"SetOperationNode"===e.kind,create:(e,t,r)=>(0,i.CN)({kind:"SetOperationNode",operator:e,expression:t,all:r})})},74586:(e,t,r)=>{"use strict";r.d(t,{Y:()=>n});var i=r(85788),o=r(77668);let n=(0,i.CN)({is:e=>"CreateViewNode"===e.kind,create:e=>(0,i.CN)({kind:"CreateViewNode",name:o.y.create(e)}),cloneWith:(e,t)=>(0,i.CN)({...e,...t})})},74936:(e,t,r)=>{"use strict";r.d(t,{Xm:()=>a,we:()=>n,zX:()=>s});var i=r(85788);let o=["->","->>"],n=["=","==","!=","<>",">",">=","<","<=","in","not in","is","is not","like","not like","match","ilike","not ilike","@>","<@","^@","&&","?","?&","?|","!<","!>","<=>","!~","~","~*","!~*","@@","@@@","!!","<->","regexp","is distinct from","is not distinct from","+","-","*","/","%","^","&","|","#","<<",">>","&&","||",...o,"not","-","exists","not exists","between","between symmetric"],s=(0,i.CN)({is:e=>"OperatorNode"===e.kind,create:e=>(0,i.CN)({kind:"OperatorNode",operator:e})});function a(e){return(0,i.Kg)(e)&&o.includes(e)}},75499:(e,t,r)=>{"use strict";r.d(t,{L:()=>h});var i=r(85788),o=r(94456);let n=(0,i.CN)({is:e=>"GroupByNode"===e.kind,create:e=>(0,i.CN)({kind:"GroupByNode",items:(0,i.CN)(e)}),cloneWithItems:(e,t)=>(0,i.CN)({...e,items:(0,i.CN)([...e.items,...t])})});var s=r(86663),a=r(78107);let d=(0,i.CN)({is:e=>"HavingNode"===e.kind,create:e=>(0,i.CN)({kind:"HavingNode",having:e}),cloneWithOperation:(e,t,r)=>(0,i.CN)({...e,having:"And"===t?s.s.create(e.having,r):a.K.create(e.having,r)})});var p=r(40237);let h=(0,i.CN)({is:e=>"SelectQueryNode"===e.kind,create:e=>(0,i.CN)({kind:"SelectQueryNode",...e&&{with:e}}),createFrom:(e,t)=>(0,i.CN)({kind:"SelectQueryNode",from:o.N.create(e),...t&&{with:t}}),cloneWithSelections:(e,t)=>(0,i.CN)({...e,selections:e.selections?(0,i.CN)([...e.selections,...t]):(0,i.CN)(t)}),cloneWithDistinctOn:(e,t)=>(0,i.CN)({...e,distinctOn:e.distinctOn?(0,i.CN)([...e.distinctOn,...t]):(0,i.CN)(t)}),cloneWithFrontModifier:(e,t)=>(0,i.CN)({...e,frontModifiers:e.frontModifiers?(0,i.CN)([...e.frontModifiers,t]):(0,i.CN)([t])}),cloneWithOrderByItems:(e,t)=>p.L.cloneWithOrderByItems(e,t),cloneWithGroupByItems:(e,t)=>(0,i.CN)({...e,groupBy:e.groupBy?n.cloneWithItems(e.groupBy,t):n.create(t)}),cloneWithLimit:(e,t)=>(0,i.CN)({...e,limit:t}),cloneWithOffset:(e,t)=>(0,i.CN)({...e,offset:t}),cloneWithFetch:(e,t)=>(0,i.CN)({...e,fetch:t}),cloneWithHaving:(e,t)=>(0,i.CN)({...e,having:e.having?d.cloneWithOperation(e.having,"And",t):d.create(t)}),cloneWithSetOperations:(e,t)=>(0,i.CN)({...e,setOperations:e.setOperations?(0,i.CN)([...e.setOperations,...t]):(0,i.CN)([...t])}),cloneWithoutSelections:e=>(0,i.CN)({...e,selections:[]}),cloneWithoutLimit:e=>(0,i.CN)({...e,limit:void 0}),cloneWithoutOffset:e=>(0,i.CN)({...e,offset:void 0}),cloneWithoutOrderBy:e=>p.L.cloneWithoutOrderBy(e),cloneWithoutGroupBy:e=>(0,i.CN)({...e,groupBy:void 0})})},77187:(e,t,r)=>{"use strict";r.d(t,{B:()=>n,q:()=>s});var i=r(39865),o=r(85788);function n(e){return(0,o.Gv)(e)&&"expressionType"in e&&(0,i.N)(e)}function s(e){return(0,o.Gv)(e)&&"expression"in e&&(0,o.Kg)(e.alias)&&(0,i.N)(e)}},77336:e=>{"use strict";e.exports=JSON.parse('{"name":"dotenv","version":"16.5.0","description":"Loads environment variables from .env file","main":"lib/main.js","types":"lib/main.d.ts","exports":{".":{"types":"./lib/main.d.ts","require":"./lib/main.js","default":"./lib/main.js"},"./config":"./config.js","./config.js":"./config.js","./lib/env-options":"./lib/env-options.js","./lib/env-options.js":"./lib/env-options.js","./lib/cli-options":"./lib/cli-options.js","./lib/cli-options.js":"./lib/cli-options.js","./package.json":"./package.json"},"scripts":{"dts-check":"tsc --project tests/types/tsconfig.json","lint":"standard","pretest":"npm run lint && npm run dts-check","test":"tap run --allow-empty-coverage --disable-coverage --timeout=60000","test:coverage":"tap run --show-full-coverage --timeout=60000 --coverage-report=lcov","prerelease":"npm test","release":"standard-version"},"repository":{"type":"git","url":"git://github.com/motdotla/dotenv.git"},"homepage":"https://github.com/motdotla/dotenv#readme","funding":"https://dotenvx.com","keywords":["dotenv","env",".env","environment","variables","config","settings"],"readmeFilename":"README.md","license":"BSD-2-Clause","devDependencies":{"@types/node":"^18.11.3","decache":"^4.6.2","sinon":"^14.0.1","standard":"^17.0.0","standard-version":"^9.5.0","tap":"^19.2.0","typescript":"^4.8.4"},"engines":{"node":">=12"},"browser":{"fs":false}}')},77460:(e,t,r)=>{"use strict";r.d(t,{s:()=>o});var i=r(85788);let o=(0,i.CN)({is:e=>"ValueListNode"===e.kind,create:e=>(0,i.CN)({kind:"ValueListNode",values:(0,i.CN)(e)})})},77655:(e,t,r)=>{"use strict";r.d(t,{t:()=>C});var i=r(23721),o=r(85788),n=r(37085),s=r(9622);let a=(0,o.CN)({is:e=>"AggregateFunctionNode"===e.kind,create:(e,t=[])=>(0,o.CN)({kind:"AggregateFunctionNode",func:e,aggregated:t}),cloneWithDistinct:e=>(0,o.CN)({...e,distinct:!0}),cloneWithOrderBy(e,t,r=!1){let i=r?"withinGroup":"orderBy";return(0,o.CN)({...e,[i]:e[i]?s.O.cloneWithItems(e[i],t):s.O.create(t)})},cloneWithFilter:(e,t)=>(0,o.CN)({...e,filter:e.filter?n.o.cloneWithOperation(e.filter,"And",t):n.o.create(t)}),cloneWithOrFilter:(e,t)=>(0,o.CN)({...e,filter:e.filter?n.o.cloneWithOperation(e.filter,"Or",t):n.o.create(t)}),cloneWithOver:(e,t)=>(0,o.CN)({...e,over:t})}),d=(0,o.CN)({is:e=>"FunctionNode"===e.kind,create:(e,t)=>(0,o.CN)({kind:"FunctionNode",func:e,arguments:t})});var p=r(4757),h=r(32378),u=r(58740),c=r(52325),l=r(63783),N=r(39411),m=r(8976),f=r(40237);class y{#e;constructor(e){this.#e=(0,o.CN)(e)}get expressionType(){}as(e){return new w(this,e)}distinct(){return new y({...this.#e,aggregateFunctionNode:a.cloneWithDistinct(this.#e.aggregateFunctionNode)})}orderBy(...e){return new y({...this.#e,aggregateFunctionNode:f.L.cloneWithOrderByItems(this.#e.aggregateFunctionNode,(0,m.xk)(e))})}clearOrderBy(){return new y({...this.#e,aggregateFunctionNode:f.L.cloneWithoutOrderBy(this.#e.aggregateFunctionNode)})}withinGroupOrderBy(...e){return new y({...this.#e,aggregateFunctionNode:a.cloneWithOrderBy(this.#e.aggregateFunctionNode,(0,m.xk)(e),!0)})}filterWhere(...e){return new y({...this.#e,aggregateFunctionNode:a.cloneWithFilter(this.#e.aggregateFunctionNode,(0,N.GB)(e))})}filterWhereRef(e,t,r){return new y({...this.#e,aggregateFunctionNode:a.cloneWithFilter(this.#e.aggregateFunctionNode,(0,N.vC)(e,t,r))})}over(e){let t=(0,l.EQ)();return new y({...this.#e,aggregateFunctionNode:a.cloneWithOver(this.#e.aggregateFunctionNode,(e?e(t):t).toOperationNode())})}$call(e){return e(this)}$castTo(){return new y(this.#e)}$notNull(){return new y(this.#e)}toOperationNode(){return this.#e.aggregateFunctionNode}}class w{#ei;#n;constructor(e,t){this.#ei=e,this.#n=t}get expression(){return this.#ei}get alias(){return this.#n}toOperationNode(){return u.N.create(this.#ei.toOperationNode(),c.O.create(this.#n))}}var v=r(99758);function C(){let e=(e,t)=>new i.Is(d.create(e,(0,p.kU)(t??[]))),t=(e,t)=>new y({aggregateFunctionNode:a.create(e,t?(0,p.kU)(t):void 0)});return Object.assign(e,{agg:t,avg:e=>t("avg",[e]),coalesce:(...t)=>e("coalesce",t),count:e=>t("count",[e]),countAll:e=>new y({aggregateFunctionNode:a.create("count",(0,h.J)(e))}),max:e=>t("max",[e]),min:e=>t("min",[e]),sum:e=>t("sum",[e]),any:t=>e("any",[t]),jsonAgg:e=>new y({aggregateFunctionNode:a.create("json_agg",[(0,o.Kg)(e)?(0,v.M$)(e):e.toOperationNode()])}),toJson:e=>new i.Is(d.create("to_json",[(0,o.Kg)(e)?(0,v.M$)(e):e.toOperationNode()]))})}},77668:(e,t,r)=>{"use strict";r.d(t,{y:()=>n});var i=r(85788),o=r(52325);let n=(0,i.CN)({is:e=>"SchemableIdentifierNode"===e.kind,create:e=>(0,i.CN)({kind:"SchemableIdentifierNode",identifier:o.O.create(e)}),createWithSchema:(e,t)=>(0,i.CN)({kind:"SchemableIdentifierNode",schema:o.O.create(e),identifier:o.O.create(t)})})},78107:(e,t,r)=>{"use strict";r.d(t,{K:()=>o});var i=r(85788);let o=(0,i.CN)({is:e=>"OrNode"===e.kind,create:(e,t)=>(0,i.CN)({kind:"OrNode",left:e,right:t})})},78853:(e,t,r)=>{"use strict";r.d(t,{$s:()=>p,U2:()=>d,dJ:()=>u,qH:()=>h});var i=r(85152),o=r(77460),n=r(62863),s=r(85788),a=r(97778);function d(e){var t;return(0,s.MH)(e)?(t=e).some(a.SS)?o.s.create(t.map(e=>p(e))):i.h.create(t):p(e)}function p(e){return(0,a.SS)(e)?(0,a.YK)(e):n.q.create(e)}function h(e){return(0,s.Et)(e)||(0,s.Lm)(e)||(0,s.kZ)(e)}function u(e){if(!h(e))throw Error(`unsafe immediate value ${JSON.stringify(e)}`);return n.q.createImmediate(e)}},78896:(e,t,r)=>{"use strict";r.d(t,{a:()=>a});var i=r(23064),o=r(39411),n=r(63783),s=r(99758);function a(e,t){var r,a,d,p,h,u,c,l;if(3===t.length){return r=e,a=t[0],d=t[1],p=t[2],i.b.createWithOn(r,(0,s.uJ)(a),(0,o.vC)(d,"=",p))}if(2===t.length){return h=e,u=t[0],(0,t[1])((0,n.GQ)(h,u)).toOperationNode()}if(1===t.length){return c=e,l=t[0],i.b.create(c,(0,s.uJ)(l))}throw Error("not implemented")}},81460:(e,t,r)=>{"use strict";r.d(t,{a:()=>o});let i=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9"];function o(){return new n}class n{#eo;get queryId(){return void 0===this.#eo&&(this.#eo=function(e){let t="";for(let e=0;e<8;++e)t+=i[~~(Math.random()*i.length)];return t}(0)),this.#eo}}},85152:(e,t,r)=>{"use strict";r.d(t,{h:()=>o});var i=r(85788);let o=(0,i.CN)({is:e=>"PrimitiveValueListNode"===e.kind,create:e=>(0,i.CN)({kind:"PrimitiveValueListNode",values:(0,i.CN)([...e])})})},85788:(e,t,r)=>{"use strict";function i(e){return void 0===e||void 0===e}function o(e){return"string"==typeof e}function n(e){return"number"==typeof e}function s(e){return"boolean"==typeof e}function a(e){return null===e}function d(e){return e instanceof Date}function p(e){return"bigint"==typeof e}function h(e){return"undefined"!=typeof Buffer&&Buffer.isBuffer(e)}function u(e){return"function"==typeof e}function c(e){return"object"==typeof e&&null!==e}function l(e){var t;if(!c(e)||"[object Object]"!==(null==(t=e)?void 0===t?"[object Undefined]":"[object Null]":w.call(t)))return!1;if(null===Object.getPrototypeOf(e))return!0;let r=e;for(;null!==Object.getPrototypeOf(r);)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(e)===r}function N(e){return Object.freeze(e)}function m(e){return f(e)?e:[e]}function f(e){return Array.isArray(e)}function y(e){return e}r.d(t,{$P:()=>d,CN:()=>N,Et:()=>n,Gv:()=>c,Kg:()=>o,Lm:()=>s,MH:()=>f,Qd:()=>l,Tn:()=>u,_j:()=>m,b0:()=>i,kZ:()=>a,lQ:()=>y,sI:()=>p});let w=Object.prototype.toString},86287:e=>{let t=/^dotenv_config_(encoding|path|debug|override|DOTENV_KEY)=(.+)$/;e.exports=function(e){return e.reduce(function(e,r){let i=r.match(t);return i&&(e[i[1]]=i[2]),e},{})}},86663:(e,t,r)=>{"use strict";r.d(t,{s:()=>o});var i=r(85788);let o=(0,i.CN)({is:e=>"AndNode"===e.kind,create:(e,t)=>(0,i.CN)({kind:"AndNode",left:e,right:t})})},86708:(e,t,r)=>{"use strict";r.d(t,{c:()=>T});var i=r(58740),o=r(85788);let n=(0,o.CN)({is:e=>"SelectModifierNode"===e.kind,create:(e,t)=>(0,o.CN)({kind:"SelectModifierNode",modifier:e,of:t}),createWithExpression:e=>(0,o.CN)({kind:"SelectModifierNode",rawModifier:e})});var s=r(78896),a=r(99758),d=r(32378),p=r(4757),h=r(75499),u=r(40237),c=r(8976),l=r(96645);let N=(0,o.CN)({is:e=>"OffsetNode"===e.kind,create:e=>(0,o.CN)({kind:"OffsetNode",offset:e})}),m=(0,o.CN)({is:e=>"GroupByItemNode"===e.kind,create:e=>(0,o.CN)({kind:"GroupByItemNode",groupBy:e})});var f=r(68126),y=r(11427),w=r(52325),v=r(73948),C=r(97778);function g(e,t,r){return(0,o.Tn)(t)&&(t=t((0,f.O)())),(0,o.MH)(t)||(t=[t]),t.map(t=>v.i.create(e,(0,C.YK)(t),r))}var b=r(39411),x=r(23721),O=r(78853),W=r(62863);let q={create:(e,t)=>({kind:"FetchNode",rowCount:W.q.create(e),modifier:t})};var k=r(36576);class I{#e;constructor(e){this.#e=(0,o.CN)(e)}get expressionType(){}get isSelectQueryBuilder(){return!0}where(...e){return new I({...this.#e,queryNode:u.L.cloneWithWhere(this.#e.queryNode,(0,b.GB)(e))})}whereRef(e,t,r){return new I({...this.#e,queryNode:u.L.cloneWithWhere(this.#e.queryNode,(0,b.vC)(e,t,r))})}having(...e){return new I({...this.#e,queryNode:h.L.cloneWithHaving(this.#e.queryNode,(0,b.GB)(e))})}havingRef(e,t,r){return new I({...this.#e,queryNode:h.L.cloneWithHaving(this.#e.queryNode,(0,b.vC)(e,t,r))})}select(e){return new I({...this.#e,queryNode:h.L.cloneWithSelections(this.#e.queryNode,(0,d.G)(e))})}distinctOn(e){return new I({...this.#e,queryNode:h.L.cloneWithDistinctOn(this.#e.queryNode,(0,p.kU)(e))})}modifyFront(e){return new I({...this.#e,queryNode:h.L.cloneWithFrontModifier(this.#e.queryNode,n.createWithExpression(e.toOperationNode()))})}modifyEnd(e){return new I({...this.#e,queryNode:u.L.cloneWithEndModifier(this.#e.queryNode,n.createWithExpression(e.toOperationNode()))})}distinct(){return new I({...this.#e,queryNode:h.L.cloneWithFrontModifier(this.#e.queryNode,n.create("Distinct"))})}forUpdate(e){return new I({...this.#e,queryNode:u.L.cloneWithEndModifier(this.#e.queryNode,n.create("ForUpdate",e?(0,o._j)(e).map(a.M$):void 0))})}forShare(e){return new I({...this.#e,queryNode:u.L.cloneWithEndModifier(this.#e.queryNode,n.create("ForShare",e?(0,o._j)(e).map(a.M$):void 0))})}forKeyShare(e){return new I({...this.#e,queryNode:u.L.cloneWithEndModifier(this.#e.queryNode,n.create("ForKeyShare",e?(0,o._j)(e).map(a.M$):void 0))})}forNoKeyUpdate(e){return new I({...this.#e,queryNode:u.L.cloneWithEndModifier(this.#e.queryNode,n.create("ForNoKeyUpdate",e?(0,o._j)(e).map(a.M$):void 0))})}skipLocked(){return new I({...this.#e,queryNode:u.L.cloneWithEndModifier(this.#e.queryNode,n.create("SkipLocked"))})}noWait(){return new I({...this.#e,queryNode:u.L.cloneWithEndModifier(this.#e.queryNode,n.create("NoWait"))})}selectAll(e){return new I({...this.#e,queryNode:h.L.cloneWithSelections(this.#e.queryNode,(0,d.J)(e))})}innerJoin(...e){return this.#V("InnerJoin",e)}leftJoin(...e){return this.#V("LeftJoin",e)}rightJoin(...e){return this.#V("RightJoin",e)}fullJoin(...e){return this.#V("FullJoin",e)}crossJoin(...e){return this.#V("CrossJoin",e)}innerJoinLateral(...e){return this.#V("LateralInnerJoin",e)}leftJoinLateral(...e){return this.#V("LateralLeftJoin",e)}crossJoinLateral(...e){return this.#V("LateralCrossJoin",e)}crossApply(...e){return this.#V("CrossApply",e)}outerApply(...e){return this.#V("OuterApply",e)}#V(e,t){return new I({...this.#e,queryNode:u.L.cloneWithJoin(this.#e.queryNode,(0,s.a)(e,t))})}orderBy(...e){return new I({...this.#e,queryNode:u.L.cloneWithOrderByItems(this.#e.queryNode,(0,c.xk)(e))})}groupBy(e){var t;return new I({...this.#e,queryNode:h.L.cloneWithGroupByItems(this.#e.queryNode,(t=e,t=(0,o.Tn)(t)?t((0,f.A)()):t,(0,p.kU)(t).map(m.create)))})}limit(e){return new I({...this.#e,queryNode:h.L.cloneWithLimit(this.#e.queryNode,l.a.create((0,O.$s)(e)))})}offset(e){return new I({...this.#e,queryNode:h.L.cloneWithOffset(this.#e.queryNode,N.create((0,O.$s)(e)))})}fetch(e,t="only"){return new I({...this.#e,queryNode:h.L.cloneWithFetch(this.#e.queryNode,function(e,t){var r;if(!(0,o.Et)(e)&&!(0,o.sI)(e))throw Error(`Invalid fetch row count: ${e}`);if("only"!==(r=t)&&"with ties"!==r)throw Error(`Invalid fetch modifier: ${t}`);return q.create(e,t)}(e,t))})}top(e,t){return new I({...this.#e,queryNode:u.L.cloneWithTop(this.#e.queryNode,(0,k.f)(e,t))})}union(e){return new I({...this.#e,queryNode:h.L.cloneWithSetOperations(this.#e.queryNode,g("union",e,!1))})}unionAll(e){return new I({...this.#e,queryNode:h.L.cloneWithSetOperations(this.#e.queryNode,g("union",e,!0))})}intersect(e){return new I({...this.#e,queryNode:h.L.cloneWithSetOperations(this.#e.queryNode,g("intersect",e,!1))})}intersectAll(e){return new I({...this.#e,queryNode:h.L.cloneWithSetOperations(this.#e.queryNode,g("intersect",e,!0))})}except(e){return new I({...this.#e,queryNode:h.L.cloneWithSetOperations(this.#e.queryNode,g("except",e,!1))})}exceptAll(e){return new I({...this.#e,queryNode:h.L.cloneWithSetOperations(this.#e.queryNode,g("except",e,!0))})}as(e){return new L(this,e)}clearSelect(){return new I({...this.#e,queryNode:h.L.cloneWithoutSelections(this.#e.queryNode)})}clearWhere(){return new I({...this.#e,queryNode:u.L.cloneWithoutWhere(this.#e.queryNode)})}clearLimit(){return new I({...this.#e,queryNode:h.L.cloneWithoutLimit(this.#e.queryNode)})}clearOffset(){return new I({...this.#e,queryNode:h.L.cloneWithoutOffset(this.#e.queryNode)})}clearOrderBy(){return new I({...this.#e,queryNode:u.L.cloneWithoutOrderBy(this.#e.queryNode)})}clearGroupBy(){return new I({...this.#e,queryNode:h.L.cloneWithoutGroupBy(this.#e.queryNode)})}$call(e){return e(this)}$if(e,t){return e?t(this):new I({...this.#e})}$castTo(){return new I(this.#e)}$narrowType(){return new I(this.#e)}$assertType(){return new I(this.#e)}$asTuple(){return new x.Is(this.toOperationNode())}$asScalar(){return new x.Is(this.toOperationNode())}withPlugin(e){return new I({...this.#e,executor:this.#e.executor.withPlugin(e)})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.queryNode,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){let e=this.compile();return(await this.#e.executor.executeQuery(e,this.#e.queryId)).rows}async executeTakeFirst(){let[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=y.F){let t=await this.executeTakeFirst();if(void 0===t)throw(0,y.x)(e)?new e(this.toOperationNode()):e(this.toOperationNode());return t}async *stream(e=100){let t=this.compile();for await(let r of this.#e.executor.stream(t,e,this.#e.queryId))yield*r.rows}async explain(e,t){let r=new I({...this.#e,queryNode:u.L.cloneWithExplain(this.#e.queryNode,e,t)});return await r.execute()}}function T(e){return new I(e)}class L{#en;#n;constructor(e,t){this.#en=e,this.#n=t}get expression(){return this.#en}get alias(){return this.#n}get isAliasedSelectQueryBuilder(){return!0}toOperationNode(){return i.N.create(this.#en.toOperationNode(),w.O.create(this.#n))}}},88208:(e,t,r)=>{"use strict";r.d(t,{t:()=>o});var i=r(85788);let o=(0,i.CN)({is:e=>"WhenNode"===e.kind,create:e=>(0,i.CN)({kind:"WhenNode",condition:e}),cloneWithResult:(e,t)=>(0,i.CN)({...e,result:t})})},92435:(e,t,r)=>{"use strict";r.d(t,{k:()=>o});var i=r(85788);let o=(0,i.CN)({is:e=>"ParensNode"===e.kind,create:e=>(0,i.CN)({kind:"ParensNode",node:e})})},92763:(e,t,r)=>{"use strict";r.d(t,{B:()=>n,o:()=>o});var i=r(85788);let o=["preserve rows","delete rows","drop"],n=(0,i.CN)({is:e=>"CreateTableNode"===e.kind,create:e=>(0,i.CN)({kind:"CreateTableNode",table:e,columns:(0,i.CN)([])}),cloneWithColumn:(e,t)=>(0,i.CN)({...e,columns:(0,i.CN)([...e.columns,t])}),cloneWithConstraint:(e,t)=>(0,i.CN)({...e,constraints:e.constraints?(0,i.CN)([...e.constraints,t]):(0,i.CN)([t])}),cloneWithFrontModifier:(e,t)=>(0,i.CN)({...e,frontModifiers:e.frontModifiers?(0,i.CN)([...e.frontModifiers,t]):(0,i.CN)([t])}),cloneWithEndModifier:(e,t)=>(0,i.CN)({...e,endModifiers:e.endModifiers?(0,i.CN)([...e.endModifiers,t]):(0,i.CN)([t])}),cloneWith:(e,t)=>(0,i.CN)({...e,...t})})},94456:(e,t,r)=>{"use strict";r.d(t,{N:()=>o});var i=r(85788);let o=(0,i.CN)({is:e=>"FromNode"===e.kind,create:e=>(0,i.CN)({kind:"FromNode",froms:(0,i.CN)(e)}),cloneWithFroms:(e,t)=>(0,i.CN)({...e,froms:(0,i.CN)([...e.froms,...t])})})},95147:(e,t,r)=>{"use strict";r.d(t,{u:()=>o});let i=new Set;function o(e){i.has(e)||(i.add(e),console.log(e))}},95710:(e,t,r)=>{r(97329).config(Object.assign({},r(38802),r(86287)(process.argv)))},95970:(e,t,r)=>{"use strict";r.d(t,{G:()=>n});class i{#es;#ea;#ed;constructor(){this.#es=new Promise((e,t)=>{this.#ed=t,this.#ea=e})}get promise(){return this.#es}resolve=e=>{this.#ea&&this.#ea(e)};reject=e=>{this.#ed&&this.#ed(e)}}var o=r(85788);async function n(e){let t=new i,r=new i;return e.provideConnection(async e=>(t.resolve(e),await r.promise)).catch(e=>t.reject(e)),(0,o.CN)({connection:await t.promise,release:r.resolve})}},96645:(e,t,r)=>{"use strict";r.d(t,{a:()=>o});var i=r(85788);let o=(0,i.CN)({is:e=>"LimitNode"===e.kind,create:e=>(0,i.CN)({kind:"LimitNode",limit:e})})},97329:(e,t,r)=>{let i=r(29021),o=r(33873),n=r(21820),s=r(55511),a=r(77336).version,d=/(?:^|^)\s*(?:export\s+)?([\w.-]+)(?:\s*=\s*?|:\s+?)(\s*'(?:\\'|[^'])*'|\s*"(?:\\"|[^"])*"|\s*`(?:\\`|[^`])*`|[^#\r\n]+)?\s*(?:#.*)?(?:$|$)/mg;function p(e){console.log(`[dotenv@${a}][DEBUG] ${e}`)}function h(e){return e&&e.DOTENV_KEY&&e.DOTENV_KEY.length>0?e.DOTENV_KEY:process.env.DOTENV_KEY&&process.env.DOTENV_KEY.length>0?process.env.DOTENV_KEY:""}function u(e){let t=null;if(e&&e.path&&e.path.length>0)if(Array.isArray(e.path))for(let r of e.path)i.existsSync(r)&&(t=r.endsWith(".vault")?r:`${r}.vault`);else t=e.path.endsWith(".vault")?e.path:`${e.path}.vault`;else t=o.resolve(process.cwd(),".env.vault");return i.existsSync(t)?t:null}function c(e){return"~"===e[0]?o.join(n.homedir(),e.slice(1)):e}let l={configDotenv:function(e){let t,r=o.resolve(process.cwd(),".env"),n="utf8",s=!!(e&&e.debug);e&&e.encoding?n=e.encoding:s&&p("No encoding is specified. UTF-8 is used by default");let a=[r];if(e&&e.path)if(Array.isArray(e.path))for(let t of(a=[],e.path))a.push(c(t));else a=[c(e.path)];let d={};for(let r of a)try{let t=l.parse(i.readFileSync(r,{encoding:n}));l.populate(d,t,e)}catch(e){s&&p(`Failed to load ${r} ${e.message}`),t=e}let h=process.env;return(e&&null!=e.processEnv&&(h=e.processEnv),l.populate(h,d,e),t)?{parsed:d,error:t}:{parsed:d}},_configVault:function(e){e&&e.debug&&p("Loading env from encrypted .env.vault");let t=l._parseVault(e),r=process.env;return e&&null!=e.processEnv&&(r=e.processEnv),l.populate(r,t,e),{parsed:t}},_parseVault:function(e){let t,r=u(e),i=l.configDotenv({path:r});if(!i.parsed){let e=Error(`MISSING_DATA: Cannot parse ${r} for an unknown reason`);throw e.code="MISSING_DATA",e}let o=h(e).split(","),n=o.length;for(let e=0;e<n;e++)try{let r=o[e].trim(),n=function(e,t){let r;try{r=new URL(t)}catch(e){if("ERR_INVALID_URL"===e.code){let e=Error("INVALID_DOTENV_KEY: Wrong format. Must be in valid uri format like dotenv://:key_1234@dotenvx.com/vault/.env.vault?environment=development");throw e.code="INVALID_DOTENV_KEY",e}throw e}let i=r.password;if(!i){let e=Error("INVALID_DOTENV_KEY: Missing key part");throw e.code="INVALID_DOTENV_KEY",e}let o=r.searchParams.get("environment");if(!o){let e=Error("INVALID_DOTENV_KEY: Missing environment part");throw e.code="INVALID_DOTENV_KEY",e}let n=`DOTENV_VAULT_${o.toUpperCase()}`,s=e.parsed[n];if(!s){let e=Error(`NOT_FOUND_DOTENV_ENVIRONMENT: Cannot locate environment ${n} in your .env.vault file.`);throw e.code="NOT_FOUND_DOTENV_ENVIRONMENT",e}return{ciphertext:s,key:i}}(i,r);t=l.decrypt(n.ciphertext,n.key);break}catch(t){if(e+1>=n)throw t}return l.parse(t)},config:function(e){if(0===h(e).length)return l.configDotenv(e);let t=u(e);if(!t){var r;return r=`You set DOTENV_KEY but you are missing a .env.vault file at ${t}. Did you forget to build it?`,console.log(`[dotenv@${a}][WARN] ${r}`),l.configDotenv(e)}return l._configVault(e)},decrypt:function(e,t){let r=Buffer.from(t.slice(-64),"hex"),i=Buffer.from(e,"base64"),o=i.subarray(0,12),n=i.subarray(-16);i=i.subarray(12,-16);try{let e=s.createDecipheriv("aes-256-gcm",r,o);return e.setAuthTag(n),`${e.update(i)}${e.final()}`}catch(i){let e=i instanceof RangeError,t="Invalid key length"===i.message,r="Unsupported state or unable to authenticate data"===i.message;if(e||t){let e=Error("INVALID_DOTENV_KEY: It must be 64 characters long (or more)");throw e.code="INVALID_DOTENV_KEY",e}if(r){let e=Error("DECRYPTION_FAILED: Please check your DOTENV_KEY");throw e.code="DECRYPTION_FAILED",e}throw i}},parse:function(e){let t,r={},i=e.toString();for(i=i.replace(/\r\n?/mg,"\n");null!=(t=d.exec(i));){let e=t[1],i=t[2]||"",o=(i=i.trim())[0];i=i.replace(/^(['"`])([\s\S]*)\1$/mg,"$2"),'"'===o&&(i=(i=i.replace(/\\n/g,"\n")).replace(/\\r/g,"\r")),r[e]=i}return r},populate:function(e,t,r={}){let i=!!(r&&r.debug),o=!!(r&&r.override);if("object"!=typeof t){let e=Error("OBJECT_REQUIRED: Please check the processEnv argument being passed to populate");throw e.code="OBJECT_REQUIRED",e}for(let r of Object.keys(t))Object.prototype.hasOwnProperty.call(e,r)?(!0===o&&(e[r]=t[r]),i&&(!0===o?p(`"${r}" is already defined and WAS overwritten`):p(`"${r}" is already defined and was NOT overwritten`))):e[r]=t[r]}};e.exports.configDotenv=l.configDotenv,e.exports._configVault=l._configVault,e.exports._parseVault=l._parseVault,e.exports.config=l.config,e.exports.decrypt=l.decrypt,e.exports.parse=l.parse,e.exports.populate=l.populate,e.exports=l},97778:(e,t,r)=>{"use strict";r.d(t,{SS:()=>p,YK:()=>a,v0:()=>d});var i=r(77187),o=r(39865),n=r(68126),s=r(85788);function a(e){if((0,o.N)(e))return e.toOperationNode();if((0,s.Tn)(e))return e((0,n.A)()).toOperationNode();throw Error(`invalid expression: ${JSON.stringify(e)}`)}function d(e){if((0,o.N)(e))return e.toOperationNode();if((0,s.Tn)(e))return e((0,n.A)()).toOperationNode();throw Error(`invalid aliased expression: ${JSON.stringify(e)}`)}function p(e){return(0,i.B)(e)||(0,i.q)(e)||(0,s.Tn)(e)}},98572:(e,t,r)=>{"use strict";r.d(t,{H:()=>n});var i=r(85788),o=r(77668);let n=(0,i.CN)({is:e=>"TableNode"===e.kind,create:e=>(0,i.CN)({kind:"TableNode",table:o.y.create(e)}),createWithSchema:(e,t)=>(0,i.CN)({kind:"TableNode",table:o.y.createWithSchema(e,t)})})},98614:(e,t,r)=>{"use strict";r.d(t,{a:()=>B});var i=r(52325),o=r(38706);function n(e,t){return o.z.createWithChildren([o.z.createWithSql(`${e} `),i.O.create(t)])}var s=r(85788),a=r(81460);let d=(0,s.CN)({raw:(e,t=[])=>(0,s.CN)({sql:e,query:o.z.createWithSql(e),parameters:(0,s.CN)(t),queryId:(0,a.a)()})}),p=Symbol();class h{#ep;#q=new WeakMap;#eh;constructor(e){this.#ep=(0,s.CN)({...e})}async init(){this.#eh=(0,s.Tn)(this.#ep.pool)?await this.#ep.pool():this.#ep.pool}async acquireConnection(){let e=await this.#eh.connect(),t=this.#q.get(e);return!t&&(t=new u(e,{cursor:this.#ep.cursor??null}),this.#q.set(e,t),this.#ep.onCreateConnection&&await this.#ep.onCreateConnection(t)),this.#ep.onReserveConnection&&await this.#ep.onReserveConnection(t),t}async beginTransaction(e,t){if(t.isolationLevel||t.accessMode){let r="start transaction";t.isolationLevel&&(r+=` isolation level ${t.isolationLevel}`),t.accessMode&&(r+=` ${t.accessMode}`),await e.executeQuery(d.raw(r))}else await e.executeQuery(d.raw("begin"))}async commitTransaction(e){await e.executeQuery(d.raw("commit"))}async rollbackTransaction(e){await e.executeQuery(d.raw("rollback"))}async savepoint(e,t,r){await e.executeQuery(r(n("savepoint",t),(0,a.a)()))}async rollbackToSavepoint(e,t,r){await e.executeQuery(r(n("rollback to",t),(0,a.a)()))}async releaseSavepoint(e,t,r){await e.executeQuery(r(n("release",t),(0,a.a)()))}async releaseConnection(e){e[p]()}async destroy(){if(this.#eh){let e=this.#eh;this.#eh=void 0,await e.end()}}}class u{#eu;#ec;constructor(e,t){this.#eu=e,this.#ec=t}async executeQuery(e){try{let{command:t,rowCount:r,rows:i}=await this.#eu.query(e.sql,[...e.parameters]);return{numAffectedRows:"INSERT"===t||"UPDATE"===t||"DELETE"===t||"MERGE"===t?BigInt(r):void 0,rows:i??[]}}catch(e){throw function(e,t){var r;if(r=e,(0,s.Gv)(r)&&(0,s.Kg)(r.stack)&&t.stack){let r=t.stack.split("\n").slice(1).join("\n");e.stack+=`
${r}`}return e}(e,Error())}}async *streamQuery(e,t){if(!this.#ec.cursor)throw Error("'cursor' is not present in your postgres dialect config. It's required to make streaming work in postgres.");if(!Number.isInteger(t)||t<=0)throw Error("chunkSize must be a positive integer");let r=this.#eu.query(new this.#ec.cursor(e.sql,e.parameters.slice()));try{for(;;){let e=await r.read(t);if(0===e.length)break;yield{rows:e}}}finally{await r.close()}}[p](){this.#eu.release()}}(0,s.CN)({__noMigrations__:!0});var c=r(15400);class l{#el;constructor(e){this.#el=e}async getSchemas(){return(await this.#el.selectFrom("pg_catalog.pg_namespace").select("nspname").$castTo().execute()).map(e=>({name:e.nspname}))}async getTables(e={withInternalKyselyTables:!1}){let t=this.#el.selectFrom("pg_catalog.pg_attribute as a").innerJoin("pg_catalog.pg_class as c","a.attrelid","c.oid").innerJoin("pg_catalog.pg_namespace as ns","c.relnamespace","ns.oid").innerJoin("pg_catalog.pg_type as typ","a.atttypid","typ.oid").innerJoin("pg_catalog.pg_namespace as dtns","typ.typnamespace","dtns.oid").select(["a.attname as column","a.attnotnull as not_null","a.atthasdef as has_default","c.relname as table","c.relkind as table_type","ns.nspname as schema","typ.typname as type","dtns.nspname as type_schema",(0,c.l)`col_description(a.attrelid, a.attnum)`.as("column_description"),(0,c.l)`pg_get_serial_sequence(quote_ident(ns.nspname) || '.' || quote_ident(c.relname), a.attname)`.as("auto_incrementing")]).where("c.relkind","in",["r","v","p"]).where("ns.nspname","!~","^pg_").where("ns.nspname","!=","information_schema").where("a.attnum",">=",0).where("a.attisdropped","!=",!0).orderBy("ns.nspname").orderBy("c.relname").orderBy("a.attnum").$castTo();e.withInternalKyselyTables||(t=t.where("c.relname","!=","kysely_migration").where("c.relname","!=","kysely_migration_lock"));let r=await t.execute();return this.#eN(r)}async getMetadata(e){return{tables:await this.getTables(e)}}#eN(e){return e.reduce((e,t)=>{let r=e.find(e=>e.name===t.table&&e.schema===t.schema);return r||(r=(0,s.CN)({name:t.table,isView:"v"===t.table_type,schema:t.schema,columns:[]}),e.push(r)),r.columns.push((0,s.CN)({name:t.column,dataType:t.type,dataTypeSchema:t.type_schema,isNullable:!t.not_null,isAutoIncrementing:null!==t.auto_incrementing,hasDefaultValue:t.has_default,comment:t.column_description??void 0})),e},[])}}var N=r(92763),m=r(23892);class f{nodeStack=[];get parentNode(){return this.nodeStack[this.nodeStack.length-2]}#em=(0,s.CN)({AliasNode:this.visitAlias.bind(this),ColumnNode:this.visitColumn.bind(this),IdentifierNode:this.visitIdentifier.bind(this),SchemableIdentifierNode:this.visitSchemableIdentifier.bind(this),RawNode:this.visitRaw.bind(this),ReferenceNode:this.visitReference.bind(this),SelectQueryNode:this.visitSelectQuery.bind(this),SelectionNode:this.visitSelection.bind(this),TableNode:this.visitTable.bind(this),FromNode:this.visitFrom.bind(this),SelectAllNode:this.visitSelectAll.bind(this),AndNode:this.visitAnd.bind(this),OrNode:this.visitOr.bind(this),ValueNode:this.visitValue.bind(this),ValueListNode:this.visitValueList.bind(this),PrimitiveValueListNode:this.visitPrimitiveValueList.bind(this),ParensNode:this.visitParens.bind(this),JoinNode:this.visitJoin.bind(this),OperatorNode:this.visitOperator.bind(this),WhereNode:this.visitWhere.bind(this),InsertQueryNode:this.visitInsertQuery.bind(this),DeleteQueryNode:this.visitDeleteQuery.bind(this),ReturningNode:this.visitReturning.bind(this),CreateTableNode:this.visitCreateTable.bind(this),AddColumnNode:this.visitAddColumn.bind(this),ColumnDefinitionNode:this.visitColumnDefinition.bind(this),DropTableNode:this.visitDropTable.bind(this),DataTypeNode:this.visitDataType.bind(this),OrderByNode:this.visitOrderBy.bind(this),OrderByItemNode:this.visitOrderByItem.bind(this),GroupByNode:this.visitGroupBy.bind(this),GroupByItemNode:this.visitGroupByItem.bind(this),UpdateQueryNode:this.visitUpdateQuery.bind(this),ColumnUpdateNode:this.visitColumnUpdate.bind(this),LimitNode:this.visitLimit.bind(this),OffsetNode:this.visitOffset.bind(this),OnConflictNode:this.visitOnConflict.bind(this),OnDuplicateKeyNode:this.visitOnDuplicateKey.bind(this),CreateIndexNode:this.visitCreateIndex.bind(this),DropIndexNode:this.visitDropIndex.bind(this),ListNode:this.visitList.bind(this),PrimaryKeyConstraintNode:this.visitPrimaryKeyConstraint.bind(this),UniqueConstraintNode:this.visitUniqueConstraint.bind(this),ReferencesNode:this.visitReferences.bind(this),CheckConstraintNode:this.visitCheckConstraint.bind(this),WithNode:this.visitWith.bind(this),CommonTableExpressionNode:this.visitCommonTableExpression.bind(this),CommonTableExpressionNameNode:this.visitCommonTableExpressionName.bind(this),HavingNode:this.visitHaving.bind(this),CreateSchemaNode:this.visitCreateSchema.bind(this),DropSchemaNode:this.visitDropSchema.bind(this),AlterTableNode:this.visitAlterTable.bind(this),DropColumnNode:this.visitDropColumn.bind(this),RenameColumnNode:this.visitRenameColumn.bind(this),AlterColumnNode:this.visitAlterColumn.bind(this),ModifyColumnNode:this.visitModifyColumn.bind(this),AddConstraintNode:this.visitAddConstraint.bind(this),DropConstraintNode:this.visitDropConstraint.bind(this),RenameConstraintNode:this.visitRenameConstraint.bind(this),ForeignKeyConstraintNode:this.visitForeignKeyConstraint.bind(this),CreateViewNode:this.visitCreateView.bind(this),RefreshMaterializedViewNode:this.visitRefreshMaterializedView.bind(this),DropViewNode:this.visitDropView.bind(this),GeneratedNode:this.visitGenerated.bind(this),DefaultValueNode:this.visitDefaultValue.bind(this),OnNode:this.visitOn.bind(this),ValuesNode:this.visitValues.bind(this),SelectModifierNode:this.visitSelectModifier.bind(this),CreateTypeNode:this.visitCreateType.bind(this),DropTypeNode:this.visitDropType.bind(this),ExplainNode:this.visitExplain.bind(this),DefaultInsertValueNode:this.visitDefaultInsertValue.bind(this),AggregateFunctionNode:this.visitAggregateFunction.bind(this),OverNode:this.visitOver.bind(this),PartitionByNode:this.visitPartitionBy.bind(this),PartitionByItemNode:this.visitPartitionByItem.bind(this),SetOperationNode:this.visitSetOperation.bind(this),BinaryOperationNode:this.visitBinaryOperation.bind(this),UnaryOperationNode:this.visitUnaryOperation.bind(this),UsingNode:this.visitUsing.bind(this),FunctionNode:this.visitFunction.bind(this),CaseNode:this.visitCase.bind(this),WhenNode:this.visitWhen.bind(this),JSONReferenceNode:this.visitJSONReference.bind(this),JSONPathNode:this.visitJSONPath.bind(this),JSONPathLegNode:this.visitJSONPathLeg.bind(this),JSONOperatorChainNode:this.visitJSONOperatorChain.bind(this),TupleNode:this.visitTuple.bind(this),MergeQueryNode:this.visitMergeQuery.bind(this),MatchedNode:this.visitMatched.bind(this),AddIndexNode:this.visitAddIndex.bind(this),CastNode:this.visitCast.bind(this),FetchNode:this.visitFetch.bind(this),TopNode:this.visitTop.bind(this),OutputNode:this.visitOutput.bind(this),OrActionNode:this.visitOrAction.bind(this),CollateNode:this.visitCollate.bind(this)});visitNode=e=>{this.nodeStack.push(e),this.#em[e.kind](e),this.nodeStack.pop()}}var y=r(74936),w=r(92435),v=r(40237),C=r(74586),g=r(73948),b=r(64943),x=r(95147);let O=/'/g;class W extends f{#ef="";#ey=[];get numParameters(){return this.#ey.length}compileQuery(e,t){return this.#ef="",this.#ey=[],this.nodeStack.splice(0,this.nodeStack.length),this.visitNode(e),(0,s.CN)({query:e,queryId:t,sql:this.getSql(),parameters:[...this.#ey]})}getSql(){return this.#ef}visitSelectQuery(e){let t=void 0!==this.parentNode&&!w.k.is(this.parentNode)&&!m.o.is(this.parentNode)&&!N.B.is(this.parentNode)&&!C.Y.is(this.parentNode)&&!g.i.is(this.parentNode);void 0===this.parentNode&&e.explain&&(this.visitNode(e.explain),this.append(" ")),t&&this.append("("),e.with&&(this.visitNode(e.with),this.append(" ")),this.append("select"),e.distinctOn&&(this.append(" "),this.compileDistinctOn(e.distinctOn)),e.frontModifiers?.length&&(this.append(" "),this.compileList(e.frontModifiers," ")),e.top&&(this.append(" "),this.visitNode(e.top)),e.selections&&(this.append(" "),this.compileList(e.selections)),e.from&&(this.append(" "),this.visitNode(e.from)),e.joins&&(this.append(" "),this.compileList(e.joins," ")),e.where&&(this.append(" "),this.visitNode(e.where)),e.groupBy&&(this.append(" "),this.visitNode(e.groupBy)),e.having&&(this.append(" "),this.visitNode(e.having)),e.setOperations&&(this.append(" "),this.compileList(e.setOperations," ")),e.orderBy&&(this.append(" "),this.visitNode(e.orderBy)),e.limit&&(this.append(" "),this.visitNode(e.limit)),e.offset&&(this.append(" "),this.visitNode(e.offset)),e.fetch&&(this.append(" "),this.visitNode(e.fetch)),e.endModifiers?.length&&(this.append(" "),this.compileList(this.sortSelectModifiers([...e.endModifiers])," ")),t&&this.append(")")}visitFrom(e){this.append("from "),this.compileList(e.froms)}visitSelection(e){this.visitNode(e.selection)}visitColumn(e){this.visitNode(e.column)}compileDistinctOn(e){this.append("distinct on ("),this.compileList(e),this.append(")")}compileList(e,t=", "){let r=e.length-1;for(let i=0;i<=r;i++)this.visitNode(e[i]),i<r&&this.append(t)}visitWhere(e){this.append("where "),this.visitNode(e.where)}visitHaving(e){this.append("having "),this.visitNode(e.having)}visitInsertQuery(e){let t=this.nodeStack.find(v.L.is),r=t!==e;!r&&e.explain&&(this.visitNode(e.explain),this.append(" ")),r&&!b.r.is(t)&&this.append("("),e.with&&(this.visitNode(e.with),this.append(" ")),this.append(e.replace?"replace":"insert"),e.ignore&&((0,x.u)("`InsertQueryNode.ignore` is deprecated. Use `InsertQueryNode.orAction` instead."),this.append(" ignore")),e.orAction&&(this.append(" "),this.visitNode(e.orAction)),e.top&&(this.append(" "),this.visitNode(e.top)),e.into&&(this.append(" into "),this.visitNode(e.into)),e.columns&&(this.append(" ("),this.compileList(e.columns),this.append(")")),e.output&&(this.append(" "),this.visitNode(e.output)),e.values&&(this.append(" "),this.visitNode(e.values)),e.defaultValues&&(this.append(" "),this.append("default values")),e.onConflict&&(this.append(" "),this.visitNode(e.onConflict)),e.onDuplicateKey&&(this.append(" "),this.visitNode(e.onDuplicateKey)),e.returning&&(this.append(" "),this.visitNode(e.returning)),r&&!b.r.is(t)&&this.append(")"),e.endModifiers?.length&&(this.append(" "),this.compileList(e.endModifiers," "))}visitValues(e){this.append("values "),this.compileList(e.values)}visitDeleteQuery(e){let t=this.nodeStack.find(v.L.is)!==e;!t&&e.explain&&(this.visitNode(e.explain),this.append(" ")),t&&this.append("("),e.with&&(this.visitNode(e.with),this.append(" ")),this.append("delete "),e.top&&(this.visitNode(e.top),this.append(" ")),this.visitNode(e.from),e.output&&(this.append(" "),this.visitNode(e.output)),e.using&&(this.append(" "),this.visitNode(e.using)),e.joins&&(this.append(" "),this.compileList(e.joins," ")),e.where&&(this.append(" "),this.visitNode(e.where)),e.orderBy&&(this.append(" "),this.visitNode(e.orderBy)),e.limit&&(this.append(" "),this.visitNode(e.limit)),e.returning&&(this.append(" "),this.visitNode(e.returning)),t&&this.append(")"),e.endModifiers?.length&&(this.append(" "),this.compileList(e.endModifiers," "))}visitReturning(e){this.append("returning "),this.compileList(e.selections)}visitAlias(e){this.visitNode(e.node),this.append(" as "),this.visitNode(e.alias)}visitReference(e){e.table&&(this.visitNode(e.table),this.append(".")),this.visitNode(e.column)}visitSelectAll(e){this.append("*")}visitIdentifier(e){this.append(this.getLeftIdentifierWrapper()),this.compileUnwrappedIdentifier(e),this.append(this.getRightIdentifierWrapper())}compileUnwrappedIdentifier(e){if(!(0,s.Kg)(e.name))throw Error("a non-string identifier was passed to compileUnwrappedIdentifier.");this.append(this.sanitizeIdentifier(e.name))}visitAnd(e){this.visitNode(e.left),this.append(" and "),this.visitNode(e.right)}visitOr(e){this.visitNode(e.left),this.append(" or "),this.visitNode(e.right)}visitValue(e){e.immediate?this.appendImmediateValue(e.value):this.appendValue(e.value)}visitValueList(e){this.append("("),this.compileList(e.values),this.append(")")}visitTuple(e){this.append("("),this.compileList(e.values),this.append(")")}visitPrimitiveValueList(e){this.append("(");let{values:t}=e;for(let e=0;e<t.length;++e)this.appendValue(t[e]),e!==t.length-1&&this.append(", ");this.append(")")}visitParens(e){this.append("("),this.visitNode(e.node),this.append(")")}visitJoin(e){this.append(I[e.joinType]),this.append(" "),this.visitNode(e.table),e.on&&(this.append(" "),this.visitNode(e.on))}visitOn(e){this.append("on "),this.visitNode(e.on)}visitRaw(e){let{sqlFragments:t,parameters:r}=e;for(let e=0;e<t.length;++e)this.append(t[e]),r.length>e&&this.visitNode(r[e])}visitOperator(e){this.append(e.operator)}visitTable(e){this.visitNode(e.table)}visitSchemableIdentifier(e){e.schema&&(this.visitNode(e.schema),this.append(".")),this.visitNode(e.identifier)}visitCreateTable(e){this.append("create "),e.frontModifiers&&e.frontModifiers.length>0&&(this.compileList(e.frontModifiers," "),this.append(" ")),e.temporary&&this.append("temporary "),this.append("table "),e.ifNotExists&&this.append("if not exists "),this.visitNode(e.table),e.selectQuery?(this.append(" as "),this.visitNode(e.selectQuery)):(this.append(" ("),this.compileList([...e.columns,...e.constraints??[]]),this.append(")"),e.onCommit&&(this.append(" on commit "),this.append(e.onCommit)),e.endModifiers&&e.endModifiers.length>0&&(this.append(" "),this.compileList(e.endModifiers," ")))}visitColumnDefinition(e){e.ifNotExists&&this.append("if not exists "),this.visitNode(e.column),this.append(" "),this.visitNode(e.dataType),e.unsigned&&this.append(" unsigned"),e.frontModifiers&&e.frontModifiers.length>0&&(this.append(" "),this.compileList(e.frontModifiers," ")),e.generated&&(this.append(" "),this.visitNode(e.generated)),e.identity&&this.append(" identity"),e.defaultTo&&(this.append(" "),this.visitNode(e.defaultTo)),e.notNull&&this.append(" not null"),e.unique&&this.append(" unique"),e.nullsNotDistinct&&this.append(" nulls not distinct"),e.primaryKey&&this.append(" primary key"),e.autoIncrement&&(this.append(" "),this.append(this.getAutoIncrement())),e.references&&(this.append(" "),this.visitNode(e.references)),e.check&&(this.append(" "),this.visitNode(e.check)),e.endModifiers&&e.endModifiers.length>0&&(this.append(" "),this.compileList(e.endModifiers," "))}getAutoIncrement(){return"auto_increment"}visitReferences(e){this.append("references "),this.visitNode(e.table),this.append(" ("),this.compileList(e.columns),this.append(")"),e.onDelete&&(this.append(" on delete "),this.append(e.onDelete)),e.onUpdate&&(this.append(" on update "),this.append(e.onUpdate))}visitDropTable(e){this.append("drop table "),e.ifExists&&this.append("if exists "),this.visitNode(e.table),e.cascade&&this.append(" cascade")}visitDataType(e){this.append(e.dataType)}visitOrderBy(e){this.append("order by "),this.compileList(e.items)}visitOrderByItem(e){this.visitNode(e.orderBy),e.collation&&(this.append(" "),this.visitNode(e.collation)),e.direction&&(this.append(" "),this.visitNode(e.direction)),e.nulls&&(this.append(" nulls "),this.append(e.nulls))}visitGroupBy(e){this.append("group by "),this.compileList(e.items)}visitGroupByItem(e){this.visitNode(e.groupBy)}visitUpdateQuery(e){let t=this.nodeStack.find(v.L.is),r=t!==e;if(!r&&e.explain&&(this.visitNode(e.explain),this.append(" ")),r&&!b.r.is(t)&&this.append("("),e.with&&(this.visitNode(e.with),this.append(" ")),this.append("update "),e.top&&(this.visitNode(e.top),this.append(" ")),e.table&&(this.visitNode(e.table),this.append(" ")),this.append("set "),e.updates&&this.compileList(e.updates),e.output&&(this.append(" "),this.visitNode(e.output)),e.from&&(this.append(" "),this.visitNode(e.from)),e.joins){if(!e.from)throw Error("Joins in an update query are only supported as a part of a PostgreSQL 'update set from join' query. If you want to create a MySQL 'update join set' query, see https://kysely.dev/docs/examples/update/my-sql-joins");this.append(" "),this.compileList(e.joins," ")}e.where&&(this.append(" "),this.visitNode(e.where)),e.orderBy&&(this.append(" "),this.visitNode(e.orderBy)),e.limit&&(this.append(" "),this.visitNode(e.limit)),e.returning&&(this.append(" "),this.visitNode(e.returning)),r&&!b.r.is(t)&&this.append(")"),e.endModifiers?.length&&(this.append(" "),this.compileList(e.endModifiers," "))}visitColumnUpdate(e){this.visitNode(e.column),this.append(" = "),this.visitNode(e.value)}visitLimit(e){this.append("limit "),this.visitNode(e.limit)}visitOffset(e){this.append("offset "),this.visitNode(e.offset)}visitOnConflict(e){this.append("on conflict"),e.columns?(this.append(" ("),this.compileList(e.columns),this.append(")")):e.constraint?(this.append(" on constraint "),this.visitNode(e.constraint)):e.indexExpression&&(this.append(" ("),this.visitNode(e.indexExpression),this.append(")")),e.indexWhere&&(this.append(" "),this.visitNode(e.indexWhere)),!0===e.doNothing?this.append(" do nothing"):e.updates&&(this.append(" do update set "),this.compileList(e.updates),e.updateWhere&&(this.append(" "),this.visitNode(e.updateWhere)))}visitOnDuplicateKey(e){this.append("on duplicate key update "),this.compileList(e.updates)}visitCreateIndex(e){this.append("create "),e.unique&&this.append("unique "),this.append("index "),e.ifNotExists&&this.append("if not exists "),this.visitNode(e.name),e.table&&(this.append(" on "),this.visitNode(e.table)),e.using&&(this.append(" using "),this.visitNode(e.using)),e.columns&&(this.append(" ("),this.compileList(e.columns),this.append(")")),e.nullsNotDistinct&&this.append(" nulls not distinct"),e.where&&(this.append(" "),this.visitNode(e.where))}visitDropIndex(e){this.append("drop index "),e.ifExists&&this.append("if exists "),this.visitNode(e.name),e.table&&(this.append(" on "),this.visitNode(e.table)),e.cascade&&this.append(" cascade")}visitCreateSchema(e){this.append("create schema "),e.ifNotExists&&this.append("if not exists "),this.visitNode(e.schema)}visitDropSchema(e){this.append("drop schema "),e.ifExists&&this.append("if exists "),this.visitNode(e.schema),e.cascade&&this.append(" cascade")}visitPrimaryKeyConstraint(e){e.name&&(this.append("constraint "),this.visitNode(e.name),this.append(" ")),this.append("primary key ("),this.compileList(e.columns),this.append(")"),this.buildDeferrable(e)}buildDeferrable(e){void 0!==e.deferrable&&(e.deferrable?this.append(" deferrable"):this.append(" not deferrable")),void 0!==e.initiallyDeferred&&(e.initiallyDeferred?this.append(" initially deferred"):this.append(" initially immediate"))}visitUniqueConstraint(e){e.name&&(this.append("constraint "),this.visitNode(e.name),this.append(" ")),this.append("unique"),e.nullsNotDistinct&&this.append(" nulls not distinct"),this.append(" ("),this.compileList(e.columns),this.append(")"),this.buildDeferrable(e)}visitCheckConstraint(e){e.name&&(this.append("constraint "),this.visitNode(e.name),this.append(" ")),this.append("check ("),this.visitNode(e.expression),this.append(")")}visitForeignKeyConstraint(e){e.name&&(this.append("constraint "),this.visitNode(e.name),this.append(" ")),this.append("foreign key ("),this.compileList(e.columns),this.append(") "),this.visitNode(e.references),e.onDelete&&(this.append(" on delete "),this.append(e.onDelete)),e.onUpdate&&(this.append(" on update "),this.append(e.onUpdate)),this.buildDeferrable(e)}visitList(e){this.compileList(e.items)}visitWith(e){this.append("with "),e.recursive&&this.append("recursive "),this.compileList(e.expressions)}visitCommonTableExpression(e){this.visitNode(e.name),this.append(" as "),(0,s.Lm)(e.materialized)&&(e.materialized||this.append("not "),this.append("materialized ")),this.visitNode(e.expression)}visitCommonTableExpressionName(e){this.visitNode(e.table),e.columns&&(this.append("("),this.compileList(e.columns),this.append(")"))}visitAlterTable(e){this.append("alter table "),this.visitNode(e.table),this.append(" "),e.renameTo&&(this.append("rename to "),this.visitNode(e.renameTo)),e.setSchema&&(this.append("set schema "),this.visitNode(e.setSchema)),e.addConstraint&&this.visitNode(e.addConstraint),e.dropConstraint&&this.visitNode(e.dropConstraint),e.renameConstraint&&this.visitNode(e.renameConstraint),e.columnAlterations&&this.compileColumnAlterations(e.columnAlterations),e.addIndex&&this.visitNode(e.addIndex),e.dropIndex&&this.visitNode(e.dropIndex)}visitAddColumn(e){this.append("add column "),this.visitNode(e.column)}visitRenameColumn(e){this.append("rename column "),this.visitNode(e.column),this.append(" to "),this.visitNode(e.renameTo)}visitDropColumn(e){this.append("drop column "),this.visitNode(e.column)}visitAlterColumn(e){this.append("alter column "),this.visitNode(e.column),this.append(" "),e.dataType&&(this.announcesNewColumnDataType()&&this.append("type "),this.visitNode(e.dataType),e.dataTypeExpression&&(this.append("using "),this.visitNode(e.dataTypeExpression))),e.setDefault&&(this.append("set default "),this.visitNode(e.setDefault)),e.dropDefault&&this.append("drop default"),e.setNotNull&&this.append("set not null"),e.dropNotNull&&this.append("drop not null")}visitModifyColumn(e){this.append("modify column "),this.visitNode(e.column)}visitAddConstraint(e){this.append("add "),this.visitNode(e.constraint)}visitDropConstraint(e){this.append("drop constraint "),e.ifExists&&this.append("if exists "),this.visitNode(e.constraintName),"cascade"===e.modifier?this.append(" cascade"):"restrict"===e.modifier&&this.append(" restrict")}visitRenameConstraint(e){this.append("rename constraint "),this.visitNode(e.oldName),this.append(" to "),this.visitNode(e.newName)}visitSetOperation(e){this.append(e.operator),this.append(" "),e.all&&this.append("all "),this.visitNode(e.expression)}visitCreateView(e){this.append("create "),e.orReplace&&this.append("or replace "),e.materialized&&this.append("materialized "),e.temporary&&this.append("temporary "),this.append("view "),e.ifNotExists&&this.append("if not exists "),this.visitNode(e.name),this.append(" "),e.columns&&(this.append("("),this.compileList(e.columns),this.append(") ")),e.as&&(this.append("as "),this.visitNode(e.as))}visitRefreshMaterializedView(e){this.append("refresh materialized view "),e.concurrently&&this.append("concurrently "),this.visitNode(e.name),e.withNoData?this.append(" with no data"):this.append(" with data")}visitDropView(e){this.append("drop "),e.materialized&&this.append("materialized "),this.append("view "),e.ifExists&&this.append("if exists "),this.visitNode(e.name),e.cascade&&this.append(" cascade")}visitGenerated(e){this.append("generated "),e.always&&this.append("always "),e.byDefault&&this.append("by default "),this.append("as "),e.identity&&this.append("identity"),e.expression&&(this.append("("),this.visitNode(e.expression),this.append(")")),e.stored&&this.append(" stored")}visitDefaultValue(e){this.append("default "),this.visitNode(e.defaultValue)}visitSelectModifier(e){e.rawModifier?this.visitNode(e.rawModifier):this.append(q[e.modifier]),e.of&&(this.append(" of "),this.compileList(e.of,", "))}visitCreateType(e){this.append("create type "),this.visitNode(e.name),e.enum&&(this.append(" as enum "),this.visitNode(e.enum))}visitDropType(e){this.append("drop type "),e.ifExists&&this.append("if exists "),this.visitNode(e.name)}visitExplain(e){this.append("explain"),(e.options||e.format)&&(this.append(" "),this.append(this.getLeftExplainOptionsWrapper()),e.options&&(this.visitNode(e.options),e.format&&this.append(this.getExplainOptionsDelimiter())),e.format&&(this.append("format"),this.append(this.getExplainOptionAssignment()),this.append(e.format)),this.append(this.getRightExplainOptionsWrapper()))}visitDefaultInsertValue(e){this.append("default")}visitAggregateFunction(e){this.append(e.func),this.append("("),e.distinct&&this.append("distinct "),this.compileList(e.aggregated),e.orderBy&&(this.append(" "),this.visitNode(e.orderBy)),this.append(")"),e.withinGroup&&(this.append(" within group ("),this.visitNode(e.withinGroup),this.append(")")),e.filter&&(this.append(" filter("),this.visitNode(e.filter),this.append(")")),e.over&&(this.append(" "),this.visitNode(e.over))}visitOver(e){this.append("over("),e.partitionBy&&(this.visitNode(e.partitionBy),e.orderBy&&this.append(" ")),e.orderBy&&this.visitNode(e.orderBy),this.append(")")}visitPartitionBy(e){this.append("partition by "),this.compileList(e.items)}visitPartitionByItem(e){this.visitNode(e.partitionBy)}visitBinaryOperation(e){this.visitNode(e.leftOperand),this.append(" "),this.visitNode(e.operator),this.append(" "),this.visitNode(e.rightOperand)}visitUnaryOperation(e){this.visitNode(e.operator),this.isMinusOperator(e.operator)||this.append(" "),this.visitNode(e.operand)}isMinusOperator(e){return y.zX.is(e)&&"-"===e.operator}visitUsing(e){this.append("using "),this.compileList(e.tables)}visitFunction(e){this.append(e.func),this.append("("),this.compileList(e.arguments),this.append(")")}visitCase(e){this.append("case"),e.value&&(this.append(" "),this.visitNode(e.value)),e.when&&(this.append(" "),this.compileList(e.when," ")),e.else&&(this.append(" else "),this.visitNode(e.else)),this.append(" end"),e.isStatement&&this.append(" case")}visitWhen(e){this.append("when "),this.visitNode(e.condition),e.result&&(this.append(" then "),this.visitNode(e.result))}visitJSONReference(e){this.visitNode(e.reference),this.visitNode(e.traversal)}visitJSONPath(e){for(let t of(e.inOperator&&this.visitNode(e.inOperator),this.append("'$"),e.pathLegs))this.visitNode(t);this.append("'")}visitJSONPathLeg(e){let t="ArrayLocation"===e.type;this.append(t?"[":"."),this.append(String(e.value)),t&&this.append("]")}visitJSONOperatorChain(e){for(let t=0,r=e.values.length;t<r;t++)t===r-1?this.visitNode(e.operator):this.append("->"),this.visitNode(e.values[t])}visitMergeQuery(e){e.with&&(this.visitNode(e.with),this.append(" ")),this.append("merge "),e.top&&(this.visitNode(e.top),this.append(" ")),this.append("into "),this.visitNode(e.into),e.using&&(this.append(" "),this.visitNode(e.using)),e.whens&&(this.append(" "),this.compileList(e.whens," ")),e.returning&&(this.append(" "),this.visitNode(e.returning)),e.output&&(this.append(" "),this.visitNode(e.output)),e.endModifiers?.length&&(this.append(" "),this.compileList(e.endModifiers," "))}visitMatched(e){e.not&&this.append("not "),this.append("matched"),e.bySource&&this.append(" by source")}visitAddIndex(e){this.append("add "),e.unique&&this.append("unique "),this.append("index "),this.visitNode(e.name),e.columns&&(this.append(" ("),this.compileList(e.columns),this.append(")")),e.using&&(this.append(" using "),this.visitNode(e.using))}visitCast(e){this.append("cast("),this.visitNode(e.expression),this.append(" as "),this.visitNode(e.dataType),this.append(")")}visitFetch(e){this.append("fetch next "),this.visitNode(e.rowCount),this.append(` rows ${e.modifier}`)}visitOutput(e){this.append("output "),this.compileList(e.selections)}visitTop(e){this.append(`top(${e.expression})`),e.modifiers&&this.append(` ${e.modifiers}`)}visitOrAction(e){this.append(e.action)}visitCollate(e){this.append("collate "),this.visitNode(e.collation)}append(e){this.#ef+=e}appendValue(e){this.addParameter(e),this.append(this.getCurrentParameterPlaceholder())}getLeftIdentifierWrapper(){return'"'}getRightIdentifierWrapper(){return'"'}getCurrentParameterPlaceholder(){return"$"+this.numParameters}getLeftExplainOptionsWrapper(){return"("}getExplainOptionAssignment(){return" "}getExplainOptionsDelimiter(){return", "}getRightExplainOptionsWrapper(){return")"}sanitizeIdentifier(e){let t=this.getLeftIdentifierWrapper(),r=this.getRightIdentifierWrapper(),i="";for(let o of e)i+=o,o===t?i+=t:o===r&&(i+=r);return i}sanitizeStringLiteral(e){return e.replace(O,"''")}addParameter(e){this.#ey.push(e)}appendImmediateValue(e){if((0,s.Kg)(e))this.appendStringLiteral(e);else if((0,s.Et)(e)||(0,s.Lm)(e))this.append(e.toString());else if((0,s.kZ)(e))this.append("null");else if((0,s.$P)(e))this.appendImmediateValue(e.toISOString());else if((0,s.sI)(e))this.appendImmediateValue(e.toString());else throw Error(`invalid immediate value ${e}`)}appendStringLiteral(e){this.append("'"),this.append(this.sanitizeStringLiteral(e)),this.append("'")}sortSelectModifiers(e){return e.sort((e,t)=>e.modifier&&t.modifier?k[e.modifier]-k[t.modifier]:1),(0,s.CN)(e)}compileColumnAlterations(e){this.compileList(e)}announcesNewColumnDataType(){return!0}}let q=(0,s.CN)({ForKeyShare:"for key share",ForNoKeyUpdate:"for no key update",ForUpdate:"for update",ForShare:"for share",NoWait:"nowait",SkipLocked:"skip locked",Distinct:"distinct"}),k=(0,s.CN)({ForKeyShare:1,ForNoKeyUpdate:1,ForUpdate:1,ForShare:1,NoWait:2,SkipLocked:2,Distinct:0}),I=(0,s.CN)({InnerJoin:"inner join",LeftJoin:"left join",RightJoin:"right join",FullJoin:"full join",CrossJoin:"cross join",LateralInnerJoin:"inner join lateral",LateralLeftJoin:"left join lateral",LateralCrossJoin:"cross join lateral",OuterApply:"outer apply",CrossApply:"cross apply",Using:"using"}),T=/"/g;class L extends W{sanitizeIdentifier(e){return e.replace(T,'""')}}class E{get supportsCreateIfNotExists(){return!0}get supportsTransactionalDdl(){return!1}get supportsReturning(){return!1}get supportsOutput(){return!1}}let D=BigInt("3853314791062309107");class S extends E{get supportsTransactionalDdl(){return!0}get supportsReturning(){return!0}async acquireMigrationLock(e,t){await (0,c.l)`select pg_advisory_xact_lock(${c.l.lit(D)})`.execute(e)}async releaseMigrationLock(e,t){}}class B{#ep;constructor(e){this.#ep=e}createDriver(){return new h(this.#ep)}createQueryCompiler(){return new L}createAdapter(){return new S}createIntrospector(e){return new l(e)}}},99119:(e,t,r)=>{"use strict";r.d(t,{k:()=>o});var i=r(85788);let o=(0,i.CN)({is:e=>"JSONOperatorChainNode"===e.kind,create:e=>(0,i.CN)({kind:"JSONOperatorChainNode",operator:e,values:(0,i.CN)([])}),cloneWithValue:(e,t)=>(0,i.CN)({...e,values:(0,i.CN)([...e.values,t])})})},99758:(e,t,r)=>{"use strict";r.d(t,{JB:()=>p,M$:()=>c,Xm:()=>u,uJ:()=>h});var i=r(85788),o=r(58740),n=r(98572),s=r(97778),a=r(52325),d=r(52102);function p(e){return(0,i.MH)(e)?e.map(e=>h(e)):[h(e)]}function h(e){return(0,i.Kg)(e)?u(e):(0,d.uc)(e)?e.toOperationNode():(0,s.v0)(e)}function u(e){let t=" as ";if(!e.includes(t))return c(e);{let[r,i]=e.split(t).map(l);return o.N.create(c(r),a.O.create(i))}}function c(e){if(!e.includes("."))return n.H.create(e);{let[t,r]=e.split(".").map(l);return n.H.createWithSchema(t,r)}}function l(e){return e.trim()}}};
exports.id=420,exports.ids=[420],exports.modules={4525:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{ImageResponse:function(){return n.ImageResponse},NextRequest:function(){return i.NextRequest},NextResponse:function(){return a.NextResponse},URLPattern:function(){return s.URLPattern},after:function(){return c.after},connection:function(){return u.connection},unstable_rootParams:function(){return l.unstable_rootParams},userAgent:function(){return o.userAgent},userAgentFromString:function(){return o.userAgentFromString}});let n=r(42174),i=r(76268),a=r(93426),o=r(53182),s=r(11243),c=r(93381),u=r(12944),l=r(72079)},8719:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{isRequestAPICallableInsideAfter:function(){return c},throwForSearchParamsAccessInUseCache:function(){return s},throwWithStaticGenerationBailoutError:function(){return a},throwWithStaticGenerationBailoutErrorWithDynamicError:function(){return o}});let n=r(80023),i=r(3295);function a(e,t){throw Object.defineProperty(new n.StaticGenBailoutError(`Route ${e} couldn't be rendered statically because it used ${t}. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`),"__NEXT_ERROR_CODE",{value:"E576",enumerable:!1,configurable:!0})}function o(e,t){throw Object.defineProperty(new n.StaticGenBailoutError(`Route ${e} with \`dynamic = "error"\` couldn't be rendered statically because it used ${t}. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`),"__NEXT_ERROR_CODE",{value:"E543",enumerable:!1,configurable:!0})}function s(e){let t=Object.defineProperty(Error(`Route ${e.route} used "searchParams" inside "use cache". Accessing Dynamic data sources inside a cache scope is not supported. If you need this data inside a cached function use "searchParams" outside of the cached function and pass the required dynamic data in as an argument. See more info here: https://nextjs.org/docs/messages/next-request-in-use-cache`),"__NEXT_ERROR_CODE",{value:"E634",enumerable:!1,configurable:!0});throw e.invalidUsageError??=t,t}function c(){let e=i.afterTaskAsyncStorage.getStore();return(null==e?void 0:e.rootTaskSpawnPhase)==="action"}},11243:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"URLPattern",{enumerable:!0,get:function(){return r}});let r="undefined"==typeof URLPattern?void 0:URLPattern},12944:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"connection",{enumerable:!0,get:function(){return u}});let n=r(29294),i=r(63033),a=r(84971),o=r(80023),s=r(68388),c=r(8719);function u(){let e=n.workAsyncStorage.getStore(),t=i.workUnitAsyncStorage.getStore();if(e){if(t&&"after"===t.phase&&!(0,c.isRequestAPICallableInsideAfter)())throw Object.defineProperty(Error(`Route ${e.route} used "connection" inside "after(...)". The \`connection()\` function is used to indicate the subsequent code must only run when there is an actual Request, but "after(...)" executes after the request, so this function is not allowed in this scope. See more info here: https://nextjs.org/docs/canary/app/api-reference/functions/after`),"__NEXT_ERROR_CODE",{value:"E186",enumerable:!1,configurable:!0});if(e.forceStatic)return Promise.resolve(void 0);if(t){if("cache"===t.type)throw Object.defineProperty(Error(`Route ${e.route} used "connection" inside "use cache". The \`connection()\` function is used to indicate the subsequent code must only run when there is an actual Request, but caches must be able to be produced before a Request so this function is not allowed in this scope. See more info here: https://nextjs.org/docs/messages/next-request-in-use-cache`),"__NEXT_ERROR_CODE",{value:"E111",enumerable:!1,configurable:!0});else if("unstable-cache"===t.type)throw Object.defineProperty(Error(`Route ${e.route} used "connection" inside a function cached with "unstable_cache(...)". The \`connection()\` function is used to indicate the subsequent code must only run when there is an actual Request, but caches must be able to be produced before a Request so this function is not allowed in this scope. See more info here: https://nextjs.org/docs/app/api-reference/functions/unstable_cache`),"__NEXT_ERROR_CODE",{value:"E1",enumerable:!1,configurable:!0})}if(e.dynamicShouldError)throw Object.defineProperty(new o.StaticGenBailoutError(`Route ${e.route} with \`dynamic = "error"\` couldn't be rendered statically because it used \`connection\`. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`),"__NEXT_ERROR_CODE",{value:"E562",enumerable:!1,configurable:!0});if(t)if("prerender"===t.type)return(0,s.makeHangingPromise)(t.renderSignal,"`connection()`");else"prerender-ppr"===t.type?(0,a.postponeWithTracking)(e.route,"connection",t.dynamicTracking):"prerender-legacy"===t.type&&(0,a.throwToInterruptStaticGeneration)("connection",e,t);(0,a.trackDynamicDataInDynamicRender)(e,t)}return Promise.resolve(void 0)}},14871:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"after",{enumerable:!0,get:function(){return i}});let n=r(29294);function i(e){let t=n.workAsyncStorage.getStore();if(!t)throw Object.defineProperty(Error("`after` was called outside a request scope. Read more: https://nextjs.org/docs/messages/next-dynamic-api-wrong-context"),"__NEXT_ERROR_CODE",{value:"E468",enumerable:!1,configurable:!0});let{afterContext:r}=t;return r.after(e)}},32190:(e,t,r)=>{"use strict";var n=r(4525);r.o(n,"NextRequest")&&r.d(t,{NextRequest:function(){return n.NextRequest}}),r.o(n,"NextResponse")&&r.d(t,{NextResponse:function(){return n.NextResponse}})},42174:(e,t)=>{"use strict";function r(){throw Object.defineProperty(Error('ImageResponse moved from "next/server" to "next/og" since Next.js 14, please import from "next/og" instead'),"__NEXT_ERROR_CODE",{value:"E183",enumerable:!1,configurable:!0})}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"ImageResponse",{enumerable:!0,get:function(){return r}})},43763:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"ReflectAdapter",{enumerable:!0,get:function(){return r}});class r{static get(e,t,r){let n=Reflect.get(e,t,r);return"function"==typeof n?n.bind(e):n}static set(e,t,r,n){return Reflect.set(e,t,r,n)}static has(e,t){return Reflect.has(e,t)}static deleteProperty(e,t){return Reflect.deleteProperty(e,t)}}},53182:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{isBot:function(){return i},userAgent:function(){return o},userAgentFromString:function(){return a}});let n=function(e){return e&&e.__esModule?e:{default:e}}(r(70397));function i(e){return/Googlebot|Mediapartners-Google|AdsBot-Google|googleweblight|Storebot-Google|Google-PageRenderer|Google-InspectionTool|Bingbot|BingPreview|Slurp|DuckDuckBot|baiduspider|yandex|sogou|LinkedInBot|bitlybot|tumblr|vkShare|quora link preview|facebookexternalhit|facebookcatalog|Twitterbot|applebot|redditbot|Slackbot|Discordbot|WhatsApp|SkypeUriPreview|ia_archiver/i.test(e)}function a(e){return{...(0,n.default)(e),isBot:void 0!==e&&i(e)}}function o({headers:e}){return a(e.get("user-agent")||void 0)}},70397:(e,t,r)=>{var n;(()=>{var i={226:function(i,a){!function(o,s){"use strict";var c="function",u="undefined",l="object",d="string",h="major",p="model",f="name",y="type",w="vendor",m="version",b="architecture",g="console",_="mobile",S="tablet",E="smarttv",v="wearable",k="embedded",A="Amazon",T="Apple",R="ASUS",x="BlackBerry",P="Browser",O="Chrome",C="Firefox",H="Google",I="Huawei",j="Microsoft",N="Motorola",D="Opera",U="Samsung",W="Sharp",K="Sony",M="Xiaomi",$="Zebra",J="Facebook",L="Chromium OS",q="Mac OS",z=function(e,t){var r={};for(var n in e)t[n]&&t[n].length%2==0?r[n]=t[n].concat(e[n]):r[n]=e[n];return r},B=function(e){for(var t={},r=0;r<e.length;r++)t[e[r].toUpperCase()]=e[r];return t},G=function(e,t){return typeof e===d&&-1!==F(t).indexOf(F(e))},F=function(e){return e.toLowerCase()},V=function(e,t){if(typeof e===d)return e=e.replace(/^\s\s*/,""),typeof t===u?e:e.substring(0,350)},X=function(e,t){for(var r,n,i,a,o,u,d=0;d<t.length&&!o;){var h=t[d],p=t[d+1];for(r=n=0;r<h.length&&!o&&h[r];)if(o=h[r++].exec(e))for(i=0;i<p.length;i++)u=o[++n],typeof(a=p[i])===l&&a.length>0?2===a.length?typeof a[1]==c?this[a[0]]=a[1].call(this,u):this[a[0]]=a[1]:3===a.length?typeof a[1]!==c||a[1].exec&&a[1].test?this[a[0]]=u?u.replace(a[1],a[2]):void 0:this[a[0]]=u?a[1].call(this,u,a[2]):void 0:4===a.length&&(this[a[0]]=u?a[3].call(this,u.replace(a[1],a[2])):s):this[a]=u||s;d+=2}},Y=function(e,t){for(var r in t)if(typeof t[r]===l&&t[r].length>0){for(var n=0;n<t[r].length;n++)if(G(t[r][n],e))return"?"===r?s:r}else if(G(t[r],e))return"?"===r?s:r;return e},Z={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},Q={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[m,[f,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[m,[f,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[f,m],[/opios[\/ ]+([\w\.]+)/i],[m,[f,D+" Mini"]],[/\bopr\/([\w\.]+)/i],[m,[f,D]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[f,m],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[m,[f,"UC"+P]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i],[m,[f,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[m,[f,"WeChat"]],[/konqueror\/([\w\.]+)/i],[m,[f,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[m,[f,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[m,[f,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[f,/(.+)/,"$1 Secure "+P],m],[/\bfocus\/([\w\.]+)/i],[m,[f,C+" Focus"]],[/\bopt\/([\w\.]+)/i],[m,[f,D+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[m,[f,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[m,[f,"Dolphin"]],[/coast\/([\w\.]+)/i],[m,[f,D+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[m,[f,"MIUI "+P]],[/fxios\/([-\w\.]+)/i],[m,[f,C]],[/\bqihu|(qi?ho?o?|360)browser/i],[[f,"360 "+P]],[/(oculus|samsung|sailfish|huawei)browser\/([\w\.]+)/i],[[f,/(.+)/,"$1 "+P],m],[/(comodo_dragon)\/([\w\.]+)/i],[[f,/_/g," "],m],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[f,m],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i,/\[(linkedin)app\]/i],[f],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[f,J],m],[/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[f,m],[/\bgsa\/([\w\.]+) .*safari\//i],[m,[f,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[m,[f,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[m,[f,O+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[f,O+" WebView"],m],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[m,[f,"Android "+P]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[f,m],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[m,[f,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[m,f],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[f,[m,Y,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[f,m],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[f,"Netscape"],m],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[m,[f,C+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[f,m],[/(cobalt)\/([\w\.]+)/i],[f,[m,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[b,"amd64"]],[/(ia32(?=;))/i],[[b,F]],[/((?:i[346]|x)86)[;\)]/i],[[b,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[b,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[b,"armhf"]],[/windows (ce|mobile); ppc;/i],[[b,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[b,/ower/,"",F]],[/(sun4\w)[;\)]/i],[[b,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[b,F]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[p,[w,U],[y,S]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[p,[w,U],[y,_]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[p,[w,T],[y,_]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[p,[w,T],[y,S]],[/(macintosh);/i],[p,[w,T]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[p,[w,W],[y,_]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[p,[w,I],[y,S]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[p,[w,I],[y,_]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[p,/_/g," "],[w,M],[y,_]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[p,/_/g," "],[w,M],[y,S]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[p,[w,"OPPO"],[y,_]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[p,[w,"Vivo"],[y,_]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[p,[w,"Realme"],[y,_]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[p,[w,N],[y,_]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[p,[w,N],[y,S]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[p,[w,"LG"],[y,S]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[p,[w,"LG"],[y,_]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[p,[w,"Lenovo"],[y,S]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[p,/_/g," "],[w,"Nokia"],[y,_]],[/(pixel c)\b/i],[p,[w,H],[y,S]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[p,[w,H],[y,_]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[p,[w,K],[y,_]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[p,"Xperia Tablet"],[w,K],[y,S]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[p,[w,"OnePlus"],[y,_]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[p,[w,A],[y,S]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[p,/(.+)/g,"Fire Phone $1"],[w,A],[y,_]],[/(playbook);[-\w\),; ]+(rim)/i],[p,w,[y,S]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[p,[w,x],[y,_]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[p,[w,R],[y,S]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[p,[w,R],[y,_]],[/(nexus 9)/i],[p,[w,"HTC"],[y,S]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[w,[p,/_/g," "],[y,_]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[p,[w,"Acer"],[y,S]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[p,[w,"Meizu"],[y,_]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[w,p,[y,_]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[w,p,[y,S]],[/(surface duo)/i],[p,[w,j],[y,S]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[p,[w,"Fairphone"],[y,_]],[/(u304aa)/i],[p,[w,"AT&T"],[y,_]],[/\bsie-(\w*)/i],[p,[w,"Siemens"],[y,_]],[/\b(rct\w+) b/i],[p,[w,"RCA"],[y,S]],[/\b(venue[\d ]{2,7}) b/i],[p,[w,"Dell"],[y,S]],[/\b(q(?:mv|ta)\w+) b/i],[p,[w,"Verizon"],[y,S]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[p,[w,"Barnes & Noble"],[y,S]],[/\b(tm\d{3}\w+) b/i],[p,[w,"NuVision"],[y,S]],[/\b(k88) b/i],[p,[w,"ZTE"],[y,S]],[/\b(nx\d{3}j) b/i],[p,[w,"ZTE"],[y,_]],[/\b(gen\d{3}) b.+49h/i],[p,[w,"Swiss"],[y,_]],[/\b(zur\d{3}) b/i],[p,[w,"Swiss"],[y,S]],[/\b((zeki)?tb.*\b) b/i],[p,[w,"Zeki"],[y,S]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[w,"Dragon Touch"],p,[y,S]],[/\b(ns-?\w{0,9}) b/i],[p,[w,"Insignia"],[y,S]],[/\b((nxa|next)-?\w{0,9}) b/i],[p,[w,"NextBook"],[y,S]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[w,"Voice"],p,[y,_]],[/\b(lvtel\-)?(v1[12]) b/i],[[w,"LvTel"],p,[y,_]],[/\b(ph-1) /i],[p,[w,"Essential"],[y,_]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[p,[w,"Envizen"],[y,S]],[/\b(trio[-\w\. ]+) b/i],[p,[w,"MachSpeed"],[y,S]],[/\btu_(1491) b/i],[p,[w,"Rotor"],[y,S]],[/(shield[\w ]+) b/i],[p,[w,"Nvidia"],[y,S]],[/(sprint) (\w+)/i],[w,p,[y,_]],[/(kin\.[onetw]{3})/i],[[p,/\./g," "],[w,j],[y,_]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[p,[w,$],[y,S]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[p,[w,$],[y,_]],[/smart-tv.+(samsung)/i],[w,[y,E]],[/hbbtv.+maple;(\d+)/i],[[p,/^/,"SmartTV"],[w,U],[y,E]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[w,"LG"],[y,E]],[/(apple) ?tv/i],[w,[p,T+" TV"],[y,E]],[/crkey/i],[[p,O+"cast"],[w,H],[y,E]],[/droid.+aft(\w)( bui|\))/i],[p,[w,A],[y,E]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[p,[w,W],[y,E]],[/(bravia[\w ]+)( bui|\))/i],[p,[w,K],[y,E]],[/(mitv-\w{5}) bui/i],[p,[w,M],[y,E]],[/Hbbtv.*(technisat) (.*);/i],[w,p,[y,E]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[w,V],[p,V],[y,E]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[y,E]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[w,p,[y,g]],[/droid.+; (shield) bui/i],[p,[w,"Nvidia"],[y,g]],[/(playstation [345portablevi]+)/i],[p,[w,K],[y,g]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[p,[w,j],[y,g]],[/((pebble))app/i],[w,p,[y,v]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[p,[w,T],[y,v]],[/droid.+; (glass) \d/i],[p,[w,H],[y,v]],[/droid.+; (wt63?0{2,3})\)/i],[p,[w,$],[y,v]],[/(quest( 2| pro)?)/i],[p,[w,J],[y,v]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[w,[y,k]],[/(aeobc)\b/i],[p,[w,A],[y,k]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[p,[y,_]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[p,[y,S]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[y,S]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[y,_]],[/(android[-\w\. ]{0,9});.+buil/i],[p,[w,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[m,[f,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[m,[f,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[f,m],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[m,f]],os:[[/microsoft (windows) (vista|xp)/i],[f,m],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[f,[m,Y,Z]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[f,"Windows"],[m,Y,Z]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/ios;fbsv\/([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[m,/_/g,"."],[f,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[f,q],[m,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[m,f],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[f,m],[/\(bb(10);/i],[m,[f,x]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[m,[f,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[m,[f,C+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[m,[f,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[m,[f,"watchOS"]],[/crkey\/([\d\.]+)/i],[m,[f,O+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[f,L],m],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[f,m],[/(sunos) ?([\w\.\d]*)/i],[[f,"Solaris"],m],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[f,m]]},ee=function(e,t){if(typeof e===l&&(t=e,e=s),!(this instanceof ee))return new ee(e,t).getResult();var r=typeof o!==u&&o.navigator?o.navigator:s,n=e||(r&&r.userAgent?r.userAgent:""),i=r&&r.userAgentData?r.userAgentData:s,a=t?z(Q,t):Q,g=r&&r.userAgent==n;return this.getBrowser=function(){var e,t={};return t[f]=s,t[m]=s,X.call(t,n,a.browser),t[h]=typeof(e=t[m])===d?e.replace(/[^\d\.]/g,"").split(".")[0]:s,g&&r&&r.brave&&typeof r.brave.isBrave==c&&(t[f]="Brave"),t},this.getCPU=function(){var e={};return e[b]=s,X.call(e,n,a.cpu),e},this.getDevice=function(){var e={};return e[w]=s,e[p]=s,e[y]=s,X.call(e,n,a.device),g&&!e[y]&&i&&i.mobile&&(e[y]=_),g&&"Macintosh"==e[p]&&r&&typeof r.standalone!==u&&r.maxTouchPoints&&r.maxTouchPoints>2&&(e[p]="iPad",e[y]=S),e},this.getEngine=function(){var e={};return e[f]=s,e[m]=s,X.call(e,n,a.engine),e},this.getOS=function(){var e={};return e[f]=s,e[m]=s,X.call(e,n,a.os),g&&!e[f]&&i&&"Unknown"!=i.platform&&(e[f]=i.platform.replace(/chrome os/i,L).replace(/macos/i,q)),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return n},this.setUA=function(e){return n=typeof e===d&&e.length>350?V(e,350):e,this},this.setUA(n),this};ee.VERSION="1.0.35",ee.BROWSER=B([f,m,h]),ee.CPU=B([b]),ee.DEVICE=B([p,w,y,g,_,E,S,v,k]),ee.ENGINE=ee.OS=B([f,m]),typeof a!==u?(i.exports&&(a=i.exports=ee),a.UAParser=ee):r.amdO?void 0===(n=(function(){return ee}).call(t,r,t,e))||(e.exports=n):typeof o!==u&&(o.UAParser=ee);var et=typeof o!==u&&(o.jQuery||o.Zepto);if(et&&!et.ua){var er=new ee;et.ua=er.getResult(),et.ua.get=function(){return er.getUA()},et.ua.set=function(e){er.setUA(e);var t=er.getResult();for(var r in t)et.ua[r]=t[r]}}}("object"==typeof window?window:this)}},a={};function o(e){var t=a[e];if(void 0!==t)return t.exports;var r=a[e]={exports:{}},n=!0;try{i[e].call(r.exports,r,r.exports,o),n=!1}finally{n&&delete a[e]}return r.exports}o.ab=__dirname+"/",e.exports=o(226)})()},72079:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"unstable_rootParams",{enumerable:!0,get:function(){return l}});let n=r(71617),i=r(84971),a=r(29294),o=r(63033),s=r(68388),c=r(72609),u=new WeakMap;async function l(){let e=a.workAsyncStorage.getStore();if(!e)throw Object.defineProperty(new n.InvariantError("Missing workStore in unstable_rootParams"),"__NEXT_ERROR_CODE",{value:"E615",enumerable:!1,configurable:!0});let t=o.workUnitAsyncStorage.getStore();if(!t)throw Object.defineProperty(Error(`Route ${e.route} used \`unstable_rootParams()\` in Pages Router. This API is only available within App Router.`),"__NEXT_ERROR_CODE",{value:"E641",enumerable:!1,configurable:!0});switch(t.type){case"unstable-cache":case"cache":throw Object.defineProperty(Error(`Route ${e.route} used \`unstable_rootParams()\` inside \`"use cache"\` or \`unstable_cache\`. Support for this API inside cache scopes is planned for a future version of Next.js.`),"__NEXT_ERROR_CODE",{value:"E642",enumerable:!1,configurable:!0});case"prerender":case"prerender-ppr":case"prerender-legacy":return function(e,t,r){let n=t.fallbackRouteParams;if(n){let h=!1;for(let t in e)if(n.has(t)){h=!0;break}if(h){if("prerender"===r.type){let t=u.get(e);if(t)return t;let n=(0,s.makeHangingPromise)(r.renderSignal,"`unstable_rootParams`");return u.set(e,n),n}var a=e,o=n,l=t,d=r;let h=u.get(a);if(h)return h;let p={...a},f=Promise.resolve(p);return u.set(a,f),Object.keys(a).forEach(e=>{c.wellKnownProperties.has(e)||(o.has(e)?Object.defineProperty(p,e,{get(){let t=(0,c.describeStringPropertyAccess)("unstable_rootParams",e);"prerender-ppr"===d.type?(0,i.postponeWithTracking)(l.route,t,d.dynamicTracking):(0,i.throwToInterruptStaticGeneration)(t,l,d)},enumerable:!0}):f[e]=a[e])}),f}}return Promise.resolve(e)}(t.rootParams,e,t);default:return Promise.resolve(t.rootParams)}}},72609:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{describeHasCheckingStringProperty:function(){return i},describeStringPropertyAccess:function(){return n},wellKnownProperties:function(){return a}});let r=/^[A-Za-z_$][A-Za-z0-9_$]*$/;function n(e,t){return r.test(t)?"`"+e+"."+t+"`":"`"+e+"["+JSON.stringify(t)+"]`"}function i(e,t){let r=JSON.stringify(t);return"`Reflect.has("+e+", "+r+")`, `"+r+" in "+e+"`, or similar"}let a=new Set(["hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toString","valueOf","toLocaleString","then","catch","finally","status","displayName","toJSON","$$typeof","__esModule"])},73913:(e,t,r)=>{"use strict";let n=r(63033),i=r(29294),a=r(84971),o=r(76926),s=r(80023),c=r(98479);function u(){let e=i.workAsyncStorage.getStore(),t=n.workUnitAsyncStorage.getStore();switch((!e||!t)&&(0,n.throwForMissingRequestStore)("draftMode"),t.type){case"request":return l(t.draftMode,e);case"cache":case"unstable-cache":let r=(0,n.getDraftModeProviderForCacheScope)(e,t);if(r)return l(r,e);case"prerender":case"prerender-ppr":case"prerender-legacy":return h(null);default:return t}}function l(e,t){let r,n=d.get(u);return n||(r=h(e),d.set(e,r),r)}let d=new WeakMap;function h(e){let t=new p(e),r=Promise.resolve(t);return Object.defineProperty(r,"isEnabled",{get:()=>t.isEnabled,set(e){Object.defineProperty(r,"isEnabled",{value:e,writable:!0,enumerable:!0})},enumerable:!0,configurable:!0}),r.enable=t.enable.bind(t),r.disable=t.disable.bind(t),r}class p{constructor(e){this._provider=e}get isEnabled(){return null!==this._provider&&this._provider.isEnabled}enable(){y("draftMode().enable()"),null!==this._provider&&this._provider.enable()}disable(){y("draftMode().disable()"),null!==this._provider&&this._provider.disable()}}let f=(0,o.createDedupedByCallsiteServerErrorLoggerDev)(function(e,t){let r=e?`Route "${e}" `:"This route ";return Object.defineProperty(Error(`${r}used ${t}. \`draftMode()\` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis`),"__NEXT_ERROR_CODE",{value:"E377",enumerable:!1,configurable:!0})});function y(e){let t=i.workAsyncStorage.getStore(),r=n.workUnitAsyncStorage.getStore();if(t){if(r){if("cache"===r.type)throw Object.defineProperty(Error(`Route ${t.route} used "${e}" inside "use cache". The enabled status of draftMode can be read in caches but you must not enable or disable draftMode inside a cache. See more info here: https://nextjs.org/docs/messages/next-request-in-use-cache`),"__NEXT_ERROR_CODE",{value:"E246",enumerable:!1,configurable:!0});else if("unstable-cache"===r.type)throw Object.defineProperty(Error(`Route ${t.route} used "${e}" inside a function cached with "unstable_cache(...)". The enabled status of draftMode can be read in caches but you must not enable or disable draftMode inside a cache. See more info here: https://nextjs.org/docs/app/api-reference/functions/unstable_cache`),"__NEXT_ERROR_CODE",{value:"E259",enumerable:!1,configurable:!0});else if("after"===r.phase)throw Object.defineProperty(Error(`Route ${t.route} used "${e}" inside \`after\`. The enabled status of draftMode can be read inside \`after\` but you cannot enable or disable draftMode. See more info here: https://nextjs.org/docs/app/api-reference/functions/after`),"__NEXT_ERROR_CODE",{value:"E348",enumerable:!1,configurable:!0})}if(t.dynamicShouldError)throw Object.defineProperty(new s.StaticGenBailoutError(`Route ${t.route} with \`dynamic = "error"\` couldn't be rendered statically because it used \`${e}\`. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`),"__NEXT_ERROR_CODE",{value:"E553",enumerable:!1,configurable:!0});if(r){if("prerender"===r.type){let n=Object.defineProperty(Error(`Route ${t.route} used ${e} without first calling \`await connection()\`. See more info here: https://nextjs.org/docs/messages/next-prerender-sync-headers`),"__NEXT_ERROR_CODE",{value:"E126",enumerable:!1,configurable:!0});(0,a.abortAndThrowOnSynchronousRequestDataAccess)(t.route,e,n,r)}else if("prerender-ppr"===r.type)(0,a.postponeWithTracking)(t.route,e,r.dynamicTracking);else if("prerender-legacy"===r.type){r.revalidate=0;let n=Object.defineProperty(new c.DynamicServerError(`Route ${t.route} couldn't be rendered statically because it used \`${e}\`. See more info here: https://nextjs.org/docs/messages/dynamic-server-error`),"__NEXT_ERROR_CODE",{value:"E558",enumerable:!1,configurable:!0});throw t.dynamicUsageDescription=e,t.dynamicUsageStack=n.stack,n}}}}},76926:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"createDedupedByCallsiteServerErrorLoggerDev",{enumerable:!0,get:function(){return c}});let n=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=i(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=a?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=e[o]}return n.default=e,r&&r.set(e,n),n}(r(61120));function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(i=function(e){return e?r:t})(e)}let a={current:null},o="function"==typeof n.cache?n.cache:e=>e,s=console.warn;function c(e){return function(...t){s(e(...t))}}o(e=>{try{s(a.current)}finally{a.current=null}})},86280:(e,t,r)=>{"use strict";let n=r(92584),i=r(29294),a=r(63033),o=r(84971),s=r(80023),c=r(68388),u=r(76926),l=(r(44523),r(8719)),d=new WeakMap;function h(e){let t=d.get(e);if(t)return t;let r=Promise.resolve(e);return d.set(e,r),Object.defineProperties(r,{append:{value:e.append.bind(e)},delete:{value:e.delete.bind(e)},get:{value:e.get.bind(e)},has:{value:e.has.bind(e)},set:{value:e.set.bind(e)},getSetCookie:{value:e.getSetCookie.bind(e)},forEach:{value:e.forEach.bind(e)},keys:{value:e.keys.bind(e)},values:{value:e.values.bind(e)},entries:{value:e.entries.bind(e)},[Symbol.iterator]:{value:e[Symbol.iterator].bind(e)}}),r}function p(e){return"string"==typeof e?`'${e}'`:"..."}let f=(0,u.createDedupedByCallsiteServerErrorLoggerDev)(y);function y(e,t){let r=e?`Route "${e}" `:"This route ";return Object.defineProperty(Error(`${r}used ${t}. \`headers()\` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis`),"__NEXT_ERROR_CODE",{value:"E277",enumerable:!1,configurable:!0})}},92584:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{HeadersAdapter:function(){return a},ReadonlyHeadersError:function(){return i}});let n=r(43763);class i extends Error{constructor(){super("Headers cannot be modified. Read more: https://nextjs.org/docs/app/api-reference/functions/headers")}static callable(){throw new i}}class a extends Headers{constructor(e){super(),this.headers=new Proxy(e,{get(t,r,i){if("symbol"==typeof r)return n.ReflectAdapter.get(t,r,i);let a=r.toLowerCase(),o=Object.keys(e).find(e=>e.toLowerCase()===a);if(void 0!==o)return n.ReflectAdapter.get(t,o,i)},set(t,r,i,a){if("symbol"==typeof r)return n.ReflectAdapter.set(t,r,i,a);let o=r.toLowerCase(),s=Object.keys(e).find(e=>e.toLowerCase()===o);return n.ReflectAdapter.set(t,s??r,i,a)},has(t,r){if("symbol"==typeof r)return n.ReflectAdapter.has(t,r);let i=r.toLowerCase(),a=Object.keys(e).find(e=>e.toLowerCase()===i);return void 0!==a&&n.ReflectAdapter.has(t,a)},deleteProperty(t,r){if("symbol"==typeof r)return n.ReflectAdapter.deleteProperty(t,r);let i=r.toLowerCase(),a=Object.keys(e).find(e=>e.toLowerCase()===i);return void 0===a||n.ReflectAdapter.deleteProperty(t,a)}})}static seal(e){return new Proxy(e,{get(e,t,r){switch(t){case"append":case"delete":case"set":return i.callable;default:return n.ReflectAdapter.get(e,t,r)}}})}merge(e){return Array.isArray(e)?e.join(", "):e}static from(e){return e instanceof Headers?e:new a(e)}append(e,t){let r=this.headers[e];"string"==typeof r?this.headers[e]=[r,t]:Array.isArray(r)?r.push(t):this.headers[e]=t}delete(e){delete this.headers[e]}get(e){let t=this.headers[e];return void 0!==t?this.merge(t):null}has(e){return void 0!==this.headers[e]}set(e,t){this.headers[e]=t}forEach(e,t){for(let[r,n]of this.entries())e.call(t,n,r,this)}*entries(){for(let e of Object.keys(this.headers)){let t=e.toLowerCase(),r=this.get(t);yield[t,r]}}*keys(){for(let e of Object.keys(this.headers)){let t=e.toLowerCase();yield t}}*values(){for(let e of Object.keys(this.headers)){let t=this.get(e);yield t}}[Symbol.iterator](){return this.entries()}}},93381:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){Object.keys(e).forEach(function(r){"default"===r||Object.prototype.hasOwnProperty.call(t,r)||Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[r]}})})}(r(14871),t)},93426:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"NextResponse",{enumerable:!0,get:function(){return d}});let n=r(23158),i=r(66608),a=r(47912),o=r(43763),s=r(23158),c=Symbol("internal response"),u=new Set([301,302,303,307,308]);function l(e,t){var r;if(null==e||null==(r=e.request)?void 0:r.headers){if(!(e.request.headers instanceof Headers))throw Object.defineProperty(Error("request.headers must be an instance of Headers"),"__NEXT_ERROR_CODE",{value:"E119",enumerable:!1,configurable:!0});let r=[];for(let[n,i]of e.request.headers)t.set("x-middleware-request-"+n,i),r.push(n);t.set("x-middleware-override-headers",r.join(","))}}class d extends Response{constructor(e,t={}){super(e,t);let r=this.headers,u=new Proxy(new s.ResponseCookies(r),{get(e,i,a){switch(i){case"delete":case"set":return(...a)=>{let o=Reflect.apply(e[i],e,a),c=new Headers(r);return o instanceof s.ResponseCookies&&r.set("x-middleware-set-cookie",o.getAll().map(e=>(0,n.stringifyCookie)(e)).join(",")),l(t,c),o};default:return o.ReflectAdapter.get(e,i,a)}}});this[c]={cookies:u,url:t.url?new i.NextURL(t.url,{headers:(0,a.toNodeOutgoingHttpHeaders)(r),nextConfig:t.nextConfig}):void 0}}[Symbol.for("edge-runtime.inspect.custom")](){return{cookies:this.cookies,url:this.url,body:this.body,bodyUsed:this.bodyUsed,headers:Object.fromEntries(this.headers),ok:this.ok,redirected:this.redirected,status:this.status,statusText:this.statusText,type:this.type}}get cookies(){return this[c].cookies}static json(e,t){let r=Response.json(e,t);return new d(r.body,r)}static redirect(e,t){let r="number"==typeof t?t:(null==t?void 0:t.status)??307;if(!u.has(r))throw Object.defineProperty(RangeError('Failed to execute "redirect" on "response": Invalid status code'),"__NEXT_ERROR_CODE",{value:"E529",enumerable:!1,configurable:!0});let n="object"==typeof t?t:{},i=new Headers(null==n?void 0:n.headers);return i.set("Location",(0,a.validateURL)(e)),new d(null,{...n,headers:i,status:r})}static rewrite(e,t){let r=new Headers(null==t?void 0:t.headers);return r.set("x-middleware-rewrite",(0,a.validateURL)(e)),l(t,r),new d(null,{...t,headers:r})}static next(e){let t=new Headers(null==e?void 0:e.headers);return t.set("x-middleware-next","1"),l(e,t),new d(null,{...e,headers:t})}}},94069:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{MutableRequestCookiesAdapter:function(){return h},ReadonlyRequestCookiesError:function(){return s},RequestCookiesAdapter:function(){return c},appendMutableCookies:function(){return d},areCookiesMutableInCurrentPhase:function(){return f},getModifiedCookieValues:function(){return l},responseCookiesToRequestCookies:function(){return w},wrapWithMutableAccessCheck:function(){return p}});let n=r(23158),i=r(43763),a=r(29294),o=r(63033);class s extends Error{constructor(){super("Cookies can only be modified in a Server Action or Route Handler. Read more: https://nextjs.org/docs/app/api-reference/functions/cookies#options")}static callable(){throw new s}}class c{static seal(e){return new Proxy(e,{get(e,t,r){switch(t){case"clear":case"delete":case"set":return s.callable;default:return i.ReflectAdapter.get(e,t,r)}}})}}let u=Symbol.for("next.mutated.cookies");function l(e){let t=e[u];return t&&Array.isArray(t)&&0!==t.length?t:[]}function d(e,t){let r=l(t);if(0===r.length)return!1;let i=new n.ResponseCookies(e),a=i.getAll();for(let e of r)i.set(e);for(let e of a)i.set(e);return!0}class h{static wrap(e,t){let r=new n.ResponseCookies(new Headers);for(let t of e.getAll())r.set(t);let o=[],s=new Set,c=()=>{let e=a.workAsyncStorage.getStore();if(e&&(e.pathWasRevalidated=!0),o=r.getAll().filter(e=>s.has(e.name)),t){let e=[];for(let t of o){let r=new n.ResponseCookies(new Headers);r.set(t),e.push(r.toString())}t(e)}},l=new Proxy(r,{get(e,t,r){switch(t){case u:return o;case"delete":return function(...t){s.add("string"==typeof t[0]?t[0]:t[0].name);try{return e.delete(...t),l}finally{c()}};case"set":return function(...t){s.add("string"==typeof t[0]?t[0]:t[0].name);try{return e.set(...t),l}finally{c()}};default:return i.ReflectAdapter.get(e,t,r)}}});return l}}function p(e){let t=new Proxy(e,{get(e,r,n){switch(r){case"delete":return function(...r){return y("cookies().delete"),e.delete(...r),t};case"set":return function(...r){return y("cookies().set"),e.set(...r),t};default:return i.ReflectAdapter.get(e,r,n)}}});return t}function f(e){return"action"===e.phase}function y(e){if(!f((0,o.getExpectedRequestStore)(e)))throw new s}function w(e){let t=new n.RequestCookies(new Headers);for(let r of e.getAll())t.set(r);return t}},94420:(e,t,r)=>{"use strict";let n,i,a,o,s,c,u,l;r.d(t,{OF:()=>im});var d,h,p=r(99933);r(86280),r(73913);var f=r(32190);class y extends Error{}class w extends y{constructor({code:e,message:t}){super(t??"An error occured while interacting with the authorization server."),this.name="OAuth2Error",this.code=e}}class m extends y{constructor(e){super(e??"Discovery failed for the OpenID Connect configuration."),this.code="discovery_error",this.name="DiscoveryError"}}class b extends y{constructor(e){super(e??"The state parameter is missing."),this.code="missing_state",this.name="MissingStateError"}}class g extends y{constructor(e){super(e??"The state parameter is invalid."),this.code="invalid_state",this.name="InvalidStateError"}}class _ extends y{constructor({cause:e,message:t}){super(t??"An error occured during the authorization flow."),this.code="authorization_error",this.cause=e,this.name="AuthorizationError"}}class S extends y{constructor({cause:e,message:t}){super(t??"An error occured while trying to exchange the authorization code."),this.code="authorization_code_grant_error",this.cause=e,this.name="AuthorizationCodeGrantError"}}class E extends y{constructor(e){super(e??"An error occured while completing the backchannel logout request."),this.code="backchannel_logout_error",this.name="BackchannelLogoutError"}}!function(e){e.MISSING_SESSION="missing_session",e.MISSING_REFRESH_TOKEN="missing_refresh_token",e.FAILED_TO_REFRESH_TOKEN="failed_to_refresh_token"}(d||(d={}));class v extends y{constructor(e,t){super(t),this.name="AccessTokenError",this.code=e}}!function(e){e.MISSING_SESSION="missing_session",e.MISSING_REFRESH_TOKEN="missing_refresh_token",e.FAILED_TO_EXCHANGE="failed_to_exchange_refresh_token"}(h||(h={}));class k extends y{constructor(e,t,r){super(t),this.name="AccessTokenForConnectionError",this.code=e,this.cause=r}}var A=r(37067),T=r(44708),R=r(78474);class x extends Error{static code="ERR_JOSE_GENERIC";code="ERR_JOSE_GENERIC";constructor(e,t){super(e,t),this.name=this.constructor.name,Error.captureStackTrace?.(this,this.constructor)}}class P extends x{static code="ERR_JWT_CLAIM_VALIDATION_FAILED";code="ERR_JWT_CLAIM_VALIDATION_FAILED";claim;reason;payload;constructor(e,t,r="unspecified",n="unspecified"){super(e,{cause:{claim:r,reason:n,payload:t}}),this.claim=r,this.reason=n,this.payload=t}}class O extends x{static code="ERR_JWT_EXPIRED";code="ERR_JWT_EXPIRED";claim;reason;payload;constructor(e,t,r="unspecified",n="unspecified"){super(e,{cause:{claim:r,reason:n,payload:t}}),this.claim=r,this.reason=n,this.payload=t}}class C extends x{static code="ERR_JOSE_ALG_NOT_ALLOWED";code="ERR_JOSE_ALG_NOT_ALLOWED"}class H extends x{static code="ERR_JOSE_NOT_SUPPORTED";code="ERR_JOSE_NOT_SUPPORTED"}class I extends x{static code="ERR_JWE_DECRYPTION_FAILED";code="ERR_JWE_DECRYPTION_FAILED";constructor(e="decryption operation failed",t){super(e,t)}}class j extends x{static code="ERR_JWE_INVALID";code="ERR_JWE_INVALID"}class N extends x{static code="ERR_JWS_INVALID";code="ERR_JWS_INVALID"}class D extends x{static code="ERR_JWT_INVALID";code="ERR_JWT_INVALID"}class U extends x{static code="ERR_JWKS_INVALID";code="ERR_JWKS_INVALID"}class W extends x{static code="ERR_JWKS_NO_MATCHING_KEY";code="ERR_JWKS_NO_MATCHING_KEY";constructor(e="no applicable key found in the JSON Web Key Set",t){super(e,t)}}class K extends x{[Symbol.asyncIterator];static code="ERR_JWKS_MULTIPLE_MATCHING_KEYS";code="ERR_JWKS_MULTIPLE_MATCHING_KEYS";constructor(e="multiple matching keys found in the JSON Web Key Set",t){super(e,t)}}class M extends x{static code="ERR_JWKS_TIMEOUT";code="ERR_JWKS_TIMEOUT";constructor(e="request timed out",t){super(e,t)}}class $ extends x{static code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED";code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED";constructor(e="signature verification failed",t){super(e,t)}}var J=r(77598);let L=(e,t)=>(0,J.createHash)(e).update(t).digest(),q=new TextEncoder,z=new TextDecoder;function B(...e){let t=new Uint8Array(e.reduce((e,{length:t})=>e+t,0)),r=0;for(let n of e)t.set(n,r),r+=n.length;return t}function G(e,t){return B(q.encode(e),new Uint8Array([0]),t)}function F(e,t,r){if(t<0||t>=0x100000000)throw RangeError(`value must be >= 0 and <= ${0x100000000-1}. Received ${t}`);e.set([t>>>24,t>>>16,t>>>8,255&t],r)}function V(e){let t=new Uint8Array(4);return F(t,e),t}function X(e){return B(V(e.length),e)}async function Y(e,t,r){let n=Math.ceil((t>>3)/32),i=new Uint8Array(32*n);for(let t=0;t<n;t++){let n=new Uint8Array(4+e.length+r.length);n.set(V(t+1)),n.set(e,4),n.set(r,4+e.length),i.set(await L("sha256",n),32*t)}return i.slice(0,t>>3)}let Z=async(e,t,r)=>{let n;switch(e.protocol){case"https:":n=T.get;break;case"http:":n=A.get;break;default:throw TypeError("Unsupported URL protocol.")}let{agent:i,headers:a}=r,o=n(e.href,{agent:i,timeout:t,headers:a}),[s]=await Promise.race([(0,R.once)(o,"response"),(0,R.once)(o,"timeout")]);if(!s)throw o.destroy(),new M;if(200!==s.statusCode)throw new x("Expected 200 OK from the JSON Web Key Set HTTP response");let c=[];for await(let e of s)c.push(e);try{return JSON.parse(z.decode(B(...c)))}catch{throw new x("Failed to parse the JSON Web Key Set HTTP response as JSON")}};var Q=r(4573);let ee=e=>Q.Buffer.from(e).toString("base64url"),et=e=>new Uint8Array(Q.Buffer.from(function(e){let t=e;return t instanceof Uint8Array&&(t=z.decode(t)),t}(e),"base64url")),er=e=>(0,J.createPrivateKey)({key:Q.Buffer.from(e.replace(/(?:-----(?:BEGIN|END) PRIVATE KEY-----|\s)/g,""),"base64"),type:"pkcs8",format:"der"}),en=e=>e.d?(0,J.createPrivateKey)({format:"jwk",key:e}):(0,J.createPublicKey)({format:"jwk",key:e});function ei(e){if("object"!=typeof e||null===e||"[object Object]"!==Object.prototype.toString.call(e))return!1;if(null===Object.getPrototypeOf(e))return!0;let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}async function ea(e,t,r){if("string"!=typeof e||0!==e.indexOf("-----BEGIN PRIVATE KEY-----"))throw TypeError('"pkcs8" must be PKCS#8 formatted string');return er(e,t,r)}async function eo(e,t){if(!ei(e))throw TypeError("JWK must be an object");switch(t||=e.alg,e.kty){case"oct":if("string"!=typeof e.k||!e.k)throw TypeError('missing "k" (Key Value) Parameter value');return et(e.k);case"RSA":if("oth"in e&&void 0!==e.oth)throw new H('RSA JWK "oth" (Other Primes Info) Parameter value is not supported');case"EC":case"OKP":return en({...e,alg:t});default:throw new H('Unsupported "kty" (Key Type) Parameter value')}}function es(e){return ei(e)}function ec(e){return"function"==typeof structuredClone?structuredClone(e):JSON.parse(JSON.stringify(e))}class eu{_jwks;_cached=new WeakMap;constructor(e){if(!function(e){return e&&"object"==typeof e&&Array.isArray(e.keys)&&e.keys.every(es)}(e))throw new U("JSON Web Key Set malformed");this._jwks=ec(e)}async getKey(e,t){let{alg:r,kid:n}={...e,...t?.header},i=function(e){switch("string"==typeof e&&e.slice(0,2)){case"RS":case"PS":return"RSA";case"ES":return"EC";case"Ed":return"OKP";default:throw new H('Unsupported "alg" value for a JSON Web Key Set')}}(r),a=this._jwks.keys.filter(e=>{let t=i===e.kty;if(t&&"string"==typeof n&&(t=n===e.kid),t&&"string"==typeof e.alg&&(t=r===e.alg),t&&"string"==typeof e.use&&(t="sig"===e.use),t&&Array.isArray(e.key_ops)&&(t=e.key_ops.includes("verify")),t)switch(r){case"ES256":t="P-256"===e.crv;break;case"ES256K":t="secp256k1"===e.crv;break;case"ES384":t="P-384"===e.crv;break;case"ES512":t="P-521"===e.crv;break;case"Ed25519":t="Ed25519"===e.crv;break;case"EdDSA":t="Ed25519"===e.crv||"Ed448"===e.crv}return t}),{0:o,length:s}=a;if(0===s)throw new W;if(1!==s){let e=new K,{_cached:t}=this;throw e[Symbol.asyncIterator]=async function*(){for(let e of a)try{yield await el(t,e,r)}catch{}},e}return el(this._cached,o,r)}}async function el(e,t,r){let n=e.get(t)||e.set(t,{}).get(t);if(void 0===n[r]){let e=await eo({...t,ext:!0},r);if(e instanceof Uint8Array||"public"!==e.type)throw new U("JSON Web Key Set members must be public keys");n[r]=e}return n[r]}function ed(e){let t=new eu(e),r=async(e,r)=>t.getKey(e,r);return Object.defineProperties(r,{jwks:{value:()=>ec(t._jwks),enumerable:!0,configurable:!1,writable:!1}}),r}"undefined"!=typeof navigator&&navigator.userAgent?.startsWith?.("Mozilla/5.0 ")||(n="jose/v5.10.0");let eh=Symbol();class ep{_url;_timeoutDuration;_cooldownDuration;_cacheMaxAge;_jwksTimestamp;_pendingFetch;_options;_local;_cache;constructor(e,t){if(!(e instanceof URL))throw TypeError("url must be an instance of URL");this._url=new URL(e.href),this._options={agent:t?.agent,headers:t?.headers},this._timeoutDuration="number"==typeof t?.timeoutDuration?t?.timeoutDuration:5e3,this._cooldownDuration="number"==typeof t?.cooldownDuration?t?.cooldownDuration:3e4,this._cacheMaxAge="number"==typeof t?.cacheMaxAge?t?.cacheMaxAge:6e5,t?.[eh]!==void 0&&(this._cache=t?.[eh],function(e,t){return!("object"!=typeof e||null===e||!("uat"in e)||"number"!=typeof e.uat||Date.now()-e.uat>=t)&&"jwks"in e&&!!ei(e.jwks)&&!!Array.isArray(e.jwks.keys)&&!!Array.prototype.every.call(e.jwks.keys,ei)}(t?.[eh],this._cacheMaxAge)&&(this._jwksTimestamp=this._cache.uat,this._local=ed(this._cache.jwks)))}coolingDown(){return"number"==typeof this._jwksTimestamp&&Date.now()<this._jwksTimestamp+this._cooldownDuration}fresh(){return"number"==typeof this._jwksTimestamp&&Date.now()<this._jwksTimestamp+this._cacheMaxAge}async getKey(e,t){this._local&&this.fresh()||await this.reload();try{return await this._local(e,t)}catch(r){if(r instanceof W&&!1===this.coolingDown())return await this.reload(),this._local(e,t);throw r}}async reload(){this._pendingFetch&&("undefined"!=typeof WebSocketPair||"undefined"!=typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||"undefined"!=typeof EdgeRuntime&&"vercel"===EdgeRuntime)&&(this._pendingFetch=void 0);let e=new Headers(this._options.headers);n&&!e.has("User-Agent")&&(e.set("User-Agent",n),this._options.headers=Object.fromEntries(e.entries())),this._pendingFetch||=Z(this._url,this._timeoutDuration,this._options).then(e=>{this._local=ed(e),this._cache&&(this._cache.uat=Date.now(),this._cache.jwks=e),this._jwksTimestamp=Date.now(),this._pendingFetch=void 0}).catch(e=>{throw this._pendingFetch=void 0,e}),await this._pendingFetch}}var ef=r(57975);function ey(e){switch(e){case"PS256":case"RS256":case"ES256":case"ES256K":return"sha256";case"PS384":case"RS384":case"ES384":return"sha384";case"PS512":case"RS512":case"ES512":return"sha512";case"Ed25519":case"EdDSA":return;default:throw new H(`alg ${e} is not supported either by JOSE or your javascript runtime`)}}let ew=J.webcrypto,em=e=>ef.types.isCryptoKey(e),eb=e=>ef.types.isKeyObject(e);function eg(e,t,...r){if((r=r.filter(Boolean)).length>2){let t=r.pop();e+=`one of type ${r.join(", ")}, or ${t}.`}else 2===r.length?e+=`one of type ${r[0]} or ${r[1]}.`:e+=`of type ${r[0]}.`;return null==t?e+=` Received ${t}`:"function"==typeof t&&t.name?e+=` Received function ${t.name}`:"object"==typeof t&&null!=t&&t.constructor?.name&&(e+=` Received an instance of ${t.constructor.name}`),e}let e_=(e,...t)=>eg("Key must be ",e,...t);function eS(e,t,...r){return eg(`Key for the ${e} algorithm must be `,t,...r)}let eE=e=>eb(e)||em(e),ev=["KeyObject"];function ek(e){return ei(e)&&"string"==typeof e.kty}(globalThis.CryptoKey||ew?.CryptoKey)&&ev.push("CryptoKey"),new WeakMap;let eA=e=>{switch(e){case"prime256v1":return"P-256";case"secp384r1":return"P-384";case"secp521r1":return"P-521";case"secp256k1":return"secp256k1";default:throw new H("Unsupported key curve for this operation")}},eT=(e,t)=>{let r;if(em(e))r=J.KeyObject.from(e);else if(eb(e))r=e;else if(ek(e))return e.crv;else throw TypeError(e_(e,...ev));if("secret"===r.type)throw TypeError('only "private" or "public" type keys can be used for this operation');switch(r.asymmetricKeyType){case"ed25519":case"ed448":return`Ed${r.asymmetricKeyType.slice(2)}`;case"x25519":case"x448":return`X${r.asymmetricKeyType.slice(1)}`;case"ec":{let e=r.asymmetricKeyDetails.namedCurve;if(t)return e;return eA(e)}default:throw TypeError("Invalid asymmetric key type for this operation")}},eR=(e,t)=>{let r;try{r=e instanceof J.KeyObject?e.asymmetricKeyDetails?.modulusLength:Buffer.from(e.n,"base64url").byteLength<<3}catch{}if("number"!=typeof r||r<2048)throw TypeError(`${t} requires key modulusLength to be 2048 bits or larger`)},ex=new Map([["ES256","P-256"],["ES256K","secp256k1"],["ES384","P-384"],["ES512","P-521"]]);function eP(e,t){let r,n,i,a;if(t instanceof J.KeyObject)r=t.asymmetricKeyType,n=t.asymmetricKeyDetails;else switch(i=!0,t.kty){case"RSA":r="rsa";break;case"EC":r="ec";break;case"OKP":if("Ed25519"===t.crv){r="ed25519";break}if("Ed448"===t.crv){r="ed448";break}throw TypeError("Invalid key for this operation, its crv must be Ed25519 or Ed448");default:throw TypeError("Invalid key for this operation, its kty must be RSA, OKP, or EC")}switch(e){case"Ed25519":if("ed25519"!==r)throw TypeError("Invalid key for this operation, its asymmetricKeyType must be ed25519");break;case"EdDSA":if(!["ed25519","ed448"].includes(r))throw TypeError("Invalid key for this operation, its asymmetricKeyType must be ed25519 or ed448");break;case"RS256":case"RS384":case"RS512":if("rsa"!==r)throw TypeError("Invalid key for this operation, its asymmetricKeyType must be rsa");eR(t,e);break;case"PS256":case"PS384":case"PS512":if("rsa-pss"===r){let{hashAlgorithm:t,mgf1HashAlgorithm:r,saltLength:i}=n,a=parseInt(e.slice(-3),10);if(void 0!==t&&(t!==`sha${a}`||r!==t))throw TypeError(`Invalid key for this operation, its RSA-PSS parameters do not meet the requirements of "alg" ${e}`);if(void 0!==i&&i>a>>3)throw TypeError(`Invalid key for this operation, its RSA-PSS parameter saltLength does not meet the requirements of "alg" ${e}`)}else if("rsa"!==r)throw TypeError("Invalid key for this operation, its asymmetricKeyType must be rsa or rsa-pss");eR(t,e),a={padding:J.constants.RSA_PKCS1_PSS_PADDING,saltLength:J.constants.RSA_PSS_SALTLEN_DIGEST};break;case"ES256":case"ES256K":case"ES384":case"ES512":{if("ec"!==r)throw TypeError("Invalid key for this operation, its asymmetricKeyType must be ec");let n=eT(t),i=ex.get(e);if(n!==i)throw TypeError(`Invalid key curve for the algorithm, its curve must be ${i}, got ${n}`);a={dsaEncoding:"ieee-p1363"};break}default:throw new H(`alg ${e} is not supported either by JOSE or your javascript runtime`)}return i?{format:"jwk",key:t,...a}:a?{...a,key:t}:t}function eO(e,t="algorithm.name"){return TypeError(`CryptoKey does not support this operation, its ${t} must be ${e}`)}function eC(e,t){return e.name===t}function eH(e){return parseInt(e.name.slice(4),10)}function eI(e,t){if(t.length&&!t.some(t=>e.usages.includes(t))){let e="CryptoKey does not support this operation, its usages must include ";if(t.length>2){let r=t.pop();e+=`one of ${t.join(", ")}, or ${r}.`}else 2===t.length?e+=`one of ${t[0]} or ${t[1]}.`:e+=`${t[0]}.`;throw TypeError(e)}}function ej(e,t,...r){switch(t){case"A128GCM":case"A192GCM":case"A256GCM":{if(!eC(e.algorithm,"AES-GCM"))throw eO("AES-GCM");let r=parseInt(t.slice(1,4),10);if(e.algorithm.length!==r)throw eO(r,"algorithm.length");break}case"A128KW":case"A192KW":case"A256KW":{if(!eC(e.algorithm,"AES-KW"))throw eO("AES-KW");let r=parseInt(t.slice(1,4),10);if(e.algorithm.length!==r)throw eO(r,"algorithm.length");break}case"ECDH":switch(e.algorithm.name){case"ECDH":case"X25519":case"X448":break;default:throw eO("ECDH, X25519, or X448")}break;case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":if(!eC(e.algorithm,"PBKDF2"))throw eO("PBKDF2");break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":{if(!eC(e.algorithm,"RSA-OAEP"))throw eO("RSA-OAEP");let r=parseInt(t.slice(9),10)||1;if(eH(e.algorithm.hash)!==r)throw eO(`SHA-${r}`,"algorithm.hash");break}default:throw TypeError("CryptoKey does not support this operation")}eI(e,r)}function eN(e,t,r){if(t instanceof Uint8Array){if(!e.startsWith("HS"))throw TypeError(e_(t,...ev));return(0,J.createSecretKey)(t)}if(t instanceof J.KeyObject)return t;if(em(t))return!function(e,t,...r){switch(t){case"HS256":case"HS384":case"HS512":{if(!eC(e.algorithm,"HMAC"))throw eO("HMAC");let r=parseInt(t.slice(2),10);if(eH(e.algorithm.hash)!==r)throw eO(`SHA-${r}`,"algorithm.hash");break}case"RS256":case"RS384":case"RS512":{if(!eC(e.algorithm,"RSASSA-PKCS1-v1_5"))throw eO("RSASSA-PKCS1-v1_5");let r=parseInt(t.slice(2),10);if(eH(e.algorithm.hash)!==r)throw eO(`SHA-${r}`,"algorithm.hash");break}case"PS256":case"PS384":case"PS512":{if(!eC(e.algorithm,"RSA-PSS"))throw eO("RSA-PSS");let r=parseInt(t.slice(2),10);if(eH(e.algorithm.hash)!==r)throw eO(`SHA-${r}`,"algorithm.hash");break}case"EdDSA":if("Ed25519"!==e.algorithm.name&&"Ed448"!==e.algorithm.name)throw eO("Ed25519 or Ed448");break;case"Ed25519":if(!eC(e.algorithm,"Ed25519"))throw eO("Ed25519");break;case"ES256":case"ES384":case"ES512":{if(!eC(e.algorithm,"ECDSA"))throw eO("ECDSA");let r=function(e){switch(e){case"ES256":return"P-256";case"ES384":return"P-384";case"ES512":return"P-521";default:throw Error("unreachable")}}(t);if(e.algorithm.namedCurve!==r)throw eO(r,"algorithm.namedCurve");break}default:throw TypeError("CryptoKey does not support this operation")}eI(e,r)}(t,e,r),J.KeyObject.from(t);if(ek(t))return e.startsWith("HS")?(0,J.createSecretKey)(Buffer.from(t.k,"base64url")):t;throw TypeError(e_(t,...ev,"Uint8Array","JSON Web Key"))}let eD=(0,ef.promisify)(J.sign),eU=async(e,t,r)=>{let n=eN(e,t,"sign");if(e.startsWith("HS")){let t=J.createHmac(function(e){switch(e){case"HS256":return"sha256";case"HS384":return"sha384";case"HS512":return"sha512";default:throw new H(`alg ${e} is not supported either by JOSE or your javascript runtime`)}}(e),n);return t.update(r),t.digest()}return eD(ey(e),r,eP(e,n))},eW=(0,ef.promisify)(J.verify),eK=async(e,t,r,n)=>{let i=eN(e,t,"verify");if(e.startsWith("HS")){let t=await eU(e,i,n);try{return J.timingSafeEqual(r,t)}catch{return!1}}let a=ey(e),o=eP(e,i);try{return await eW(a,n,o,r)}catch{return!1}},eM=(...e)=>{let t,r=e.filter(Boolean);if(0===r.length||1===r.length)return!0;for(let e of r){let r=Object.keys(e);if(!t||0===t.size){t=new Set(r);continue}for(let e of r){if(t.has(e))return!1;t.add(e)}}return!0},e$=e=>e?.[Symbol.toStringTag],eJ=(e,t,r)=>{if(void 0!==t.use&&"sig"!==t.use)throw TypeError("Invalid key for this operation, when present its use must be sig");if(void 0!==t.key_ops&&t.key_ops.includes?.(r)!==!0)throw TypeError(`Invalid key for this operation, when present its key_ops must include ${r}`);if(void 0!==t.alg&&t.alg!==e)throw TypeError(`Invalid key for this operation, when present its alg must be ${e}`);return!0},eL=(e,t,r,n)=>{if(!(t instanceof Uint8Array)){if(n&&ek(t)){if(function(e){return ek(e)&&"oct"===e.kty&&"string"==typeof e.k}(t)&&eJ(e,t,r))return;throw TypeError('JSON Web Key for symmetric algorithms must have JWK "kty" (Key Type) equal to "oct" and the JWK "k" (Key Value) present')}if(!eE(t))throw TypeError(eS(e,t,...ev,"Uint8Array",n?"JSON Web Key":null));if("secret"!==t.type)throw TypeError(`${e$(t)} instances for symmetric algorithms must be of type "secret"`)}},eq=(e,t,r,n)=>{if(n&&ek(t))switch(r){case"sign":if(function(e){return"oct"!==e.kty&&"string"==typeof e.d}(t)&&eJ(e,t,r))return;throw TypeError("JSON Web Key for this operation be a private JWK");case"verify":if(function(e){return"oct"!==e.kty&&void 0===e.d}(t)&&eJ(e,t,r))return;throw TypeError("JSON Web Key for this operation be a public JWK")}if(!eE(t))throw TypeError(eS(e,t,...ev,n?"JSON Web Key":null));if("secret"===t.type)throw TypeError(`${e$(t)} instances for asymmetric algorithms must not be of type "secret"`);if("sign"===r&&"public"===t.type)throw TypeError(`${e$(t)} instances for asymmetric algorithm signing must be of type "private"`);if("decrypt"===r&&"public"===t.type)throw TypeError(`${e$(t)} instances for asymmetric algorithm decryption must be of type "private"`);if(t.algorithm&&"verify"===r&&"private"===t.type)throw TypeError(`${e$(t)} instances for asymmetric algorithm verifying must be of type "public"`);if(t.algorithm&&"encrypt"===r&&"private"===t.type)throw TypeError(`${e$(t)} instances for asymmetric algorithm encryption must be of type "public"`)};function ez(e,t,r,n){t.startsWith("HS")||"dir"===t||t.startsWith("PBES2")||/^A\d{3}(?:GCM)?KW$/.test(t)?eL(t,r,n,e):eq(t,r,n,e)}let eB=ez.bind(void 0,!1),eG=ez.bind(void 0,!0),eF=function(e,t,r,n,i){let a;if(void 0!==i.crit&&n?.crit===void 0)throw new e('"crit" (Critical) Header Parameter MUST be integrity protected');if(!n||void 0===n.crit)return new Set;if(!Array.isArray(n.crit)||0===n.crit.length||n.crit.some(e=>"string"!=typeof e||0===e.length))throw new e('"crit" (Critical) Header Parameter MUST be an array of non-empty strings when present');for(let o of(a=void 0!==r?new Map([...Object.entries(r),...t.entries()]):t,n.crit)){if(!a.has(o))throw new H(`Extension Header Parameter "${o}" is not recognized`);if(void 0===i[o])throw new e(`Extension Header Parameter "${o}" is missing`);if(a.get(o)&&void 0===n[o])throw new e(`Extension Header Parameter "${o}" MUST be integrity protected`)}return new Set(n.crit)},eV=(e,t)=>{if(void 0!==t&&(!Array.isArray(t)||t.some(e=>"string"!=typeof e)))throw TypeError(`"${e}" option must be an array of strings`);if(t)return new Set(t)};async function eX(e,t,r){let n,i;if(!ei(e))throw new N("Flattened JWS must be an object");if(void 0===e.protected&&void 0===e.header)throw new N('Flattened JWS must have either of the "protected" or "header" members');if(void 0!==e.protected&&"string"!=typeof e.protected)throw new N("JWS Protected Header incorrect type");if(void 0===e.payload)throw new N("JWS Payload missing");if("string"!=typeof e.signature)throw new N("JWS Signature missing or incorrect type");if(void 0!==e.header&&!ei(e.header))throw new N("JWS Unprotected Header incorrect type");let a={};if(e.protected)try{let t=et(e.protected);a=JSON.parse(z.decode(t))}catch{throw new N("JWS Protected Header is invalid")}if(!eM(a,e.header))throw new N("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");let o={...a,...e.header},s=eF(N,new Map([["b64",!0]]),r?.crit,a,o),c=!0;if(s.has("b64")&&"boolean"!=typeof(c=a.b64))throw new N('The "b64" (base64url-encode payload) Header Parameter must be a boolean');let{alg:u}=o;if("string"!=typeof u||!u)throw new N('JWS "alg" (Algorithm) Header Parameter missing or invalid');let l=r&&eV("algorithms",r.algorithms);if(l&&!l.has(u))throw new C('"alg" (Algorithm) Header Parameter value not allowed');if(c){if("string"!=typeof e.payload)throw new N("JWS Payload must be a string")}else if("string"!=typeof e.payload&&!(e.payload instanceof Uint8Array))throw new N("JWS Payload must be a string or an Uint8Array instance");let d=!1;"function"==typeof t?(t=await t(a,e),d=!0,eG(u,t,"verify"),ek(t)&&(t=await eo(t,u))):eG(u,t,"verify");let h=B(q.encode(e.protected??""),q.encode("."),"string"==typeof e.payload?q.encode(e.payload):e.payload);try{n=et(e.signature)}catch{throw new N("Failed to base64url decode the signature")}if(!await eK(u,t,n,h))throw new $;if(c)try{i=et(e.payload)}catch{throw new N("Failed to base64url decode the payload")}else i="string"==typeof e.payload?q.encode(e.payload):e.payload;let p={payload:i};return(void 0!==e.protected&&(p.protectedHeader=a),void 0!==e.header&&(p.unprotectedHeader=e.header),d)?{...p,key:t}:p}async function eY(e,t,r){if(e instanceof Uint8Array&&(e=z.decode(e)),"string"!=typeof e)throw new N("Compact JWS must be a string or Uint8Array");let{0:n,1:i,2:a,length:o}=e.split(".");if(3!==o)throw new N("Invalid Compact JWS");let s=await eX({payload:i,protected:n,signature:a},t,r),c={payload:s.payload,protectedHeader:s.protectedHeader};return"function"==typeof t?{...c,key:s.key}:c}let eZ=e=>Math.floor(e.getTime()/1e3),eQ=/^(\+|\-)? ?(\d+|\d+\.\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)(?: (ago|from now))?$/i,e0=e=>{let t,r=eQ.exec(e);if(!r||r[4]&&r[1])throw TypeError("Invalid time period format");let n=parseFloat(r[2]);switch(r[3].toLowerCase()){case"sec":case"secs":case"second":case"seconds":case"s":t=Math.round(n);break;case"minute":case"minutes":case"min":case"mins":case"m":t=Math.round(60*n);break;case"hour":case"hours":case"hr":case"hrs":case"h":t=Math.round(3600*n);break;case"day":case"days":case"d":t=Math.round(86400*n);break;case"week":case"weeks":case"w":t=Math.round(604800*n);break;default:t=Math.round(0x1e187e0*n)}return"-"===r[1]||"ago"===r[4]?-t:t},e1=e=>e.toLowerCase().replace(/^application\//,""),e2=(e,t)=>"string"==typeof e?t.includes(e):!!Array.isArray(e)&&t.some(Set.prototype.has.bind(new Set(e))),e5=(e,t,r={})=>{let n,i;try{n=JSON.parse(z.decode(t))}catch{}if(!ei(n))throw new D("JWT Claims Set must be a top-level JSON object");let{typ:a}=r;if(a&&("string"!=typeof e.typ||e1(e.typ)!==e1(a)))throw new P('unexpected "typ" JWT header value',n,"typ","check_failed");let{requiredClaims:o=[],issuer:s,subject:c,audience:u,maxTokenAge:l}=r,d=[...o];for(let e of(void 0!==l&&d.push("iat"),void 0!==u&&d.push("aud"),void 0!==c&&d.push("sub"),void 0!==s&&d.push("iss"),new Set(d.reverse())))if(!(e in n))throw new P(`missing required "${e}" claim`,n,e,"missing");if(s&&!(Array.isArray(s)?s:[s]).includes(n.iss))throw new P('unexpected "iss" claim value',n,"iss","check_failed");if(c&&n.sub!==c)throw new P('unexpected "sub" claim value',n,"sub","check_failed");if(u&&!e2(n.aud,"string"==typeof u?[u]:u))throw new P('unexpected "aud" claim value',n,"aud","check_failed");switch(typeof r.clockTolerance){case"string":i=e0(r.clockTolerance);break;case"number":i=r.clockTolerance;break;case"undefined":i=0;break;default:throw TypeError("Invalid clockTolerance option type")}let{currentDate:h}=r,p=eZ(h||new Date);if((void 0!==n.iat||l)&&"number"!=typeof n.iat)throw new P('"iat" claim must be a number',n,"iat","invalid");if(void 0!==n.nbf){if("number"!=typeof n.nbf)throw new P('"nbf" claim must be a number',n,"nbf","invalid");if(n.nbf>p+i)throw new P('"nbf" claim timestamp check failed',n,"nbf","check_failed")}if(void 0!==n.exp){if("number"!=typeof n.exp)throw new P('"exp" claim must be a number',n,"exp","invalid");if(n.exp<=p-i)throw new O('"exp" claim timestamp check failed',n,"exp","check_failed")}if(l){let e=p-n.iat;if(e-i>("number"==typeof l?l:e0(l)))throw new O('"iat" claim timestamp check failed (too far in the past)',n,"iat","check_failed");if(e<0-i)throw new P('"iat" claim timestamp check failed (it should be in the past)',n,"iat","check_failed")}return n};async function e3(e,t,r){let n=await eY(e,t,r);if(n.protectedHeader.crit?.includes("b64")&&!1===n.protectedHeader.b64)throw new D("JWTs MUST NOT use unencoded payload");let i={payload:e5(n.protectedHeader,n.payload,r),protectedHeader:n.protectedHeader};return"function"==typeof t?{...i,key:n.key}:i}function e4(e,t){if(null==e)return!1;try{return e instanceof t||Object.getPrototypeOf(e)[Symbol.toStringTag]===t.prototype[Symbol.toStringTag]}catch{return!1}}"undefined"!=typeof navigator&&navigator.userAgent?.startsWith?.("Mozilla/5.0 ")||(i="oauth4webapi/v3.5.2");let e6="ERR_INVALID_ARG_VALUE",e8="ERR_INVALID_ARG_TYPE";function e9(e,t,r){let n=TypeError(e,{cause:r});return Object.assign(n,{code:t}),n}let e7=Symbol(),te=Symbol(),tt=Symbol(),tr=Symbol(),tn=Symbol(),ti=Symbol(),ta=Symbol(),to=new TextEncoder,ts=new TextDecoder;function tc(e){return"string"==typeof e?to.encode(e):ts.decode(e)}function tu(e){return"string"==typeof e?o(e):a(e)}a=Uint8Array.prototype.toBase64?e=>(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),e.toBase64({alphabet:"base64url",omitPadding:!0})):e=>{e instanceof ArrayBuffer&&(e=new Uint8Array(e));let t=[];for(let r=0;r<e.byteLength;r+=32768)t.push(String.fromCharCode.apply(null,e.subarray(r,r+32768)));return btoa(t.join("")).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")},o=Uint8Array.fromBase64?e=>{try{return Uint8Array.fromBase64(e,{alphabet:"base64url"})}catch(e){throw e9("The input to be decoded is not correctly encoded.",e6,e)}}:e=>{try{let t=atob(e.replace(/-/g,"+").replace(/_/g,"/").replace(/\s/g,"")),r=new Uint8Array(t.length);for(let e=0;e<t.length;e++)r[e]=t.charCodeAt(e);return r}catch(e){throw e9("The input to be decoded is not correctly encoded.",e6,e)}};class tl extends Error{code;constructor(e,t){super(e,t),this.name=this.constructor.name,this.code=rw,Error.captureStackTrace?.(this,this.constructor)}}class td extends Error{code;constructor(e,t){super(e,t),this.name=this.constructor.name,t?.code&&(this.code=t?.code),Error.captureStackTrace?.(this,this.constructor)}}function th(e,t,r){return new td(e,{code:t,cause:r})}function tp(e,t){if(!(e instanceof CryptoKey))throw e9(`${t} must be a CryptoKey`,e8)}function tf(e,t){if(tp(e,t),"private"!==e.type)throw e9(`${t} must be a private CryptoKey`,e6)}function ty(e){return!(null===e||"object"!=typeof e||Array.isArray(e))}function tw(e){e4(e,Headers)&&(e=Object.fromEntries(e.entries()));let t=new Headers(e);if(i&&!t.has("user-agent")&&t.set("user-agent",i),t.has("authorization"))throw e9('"options.headers" must not include the "authorization" header name',e6);return t}function tm(e){if("function"==typeof e&&(e=e()),!(e instanceof AbortSignal))throw e9('"options.signal" must return or be an instance of AbortSignal',e8);return e}function tb(e){return e.includes("//")?e.replace("//","/"):e}async function tg(e,t,r,n){if(!(e instanceof URL))throw e9(`"${t}" must be an instance of URL`,e8);tW(e,n?.[e7]!==!0);let i=r(new URL(e.href)),a=tw(n?.headers);return a.set("accept","application/json"),(n?.[tr]||fetch)(i.href,{body:void 0,headers:Object.fromEntries(a.entries()),method:"GET",redirect:"manual",signal:n?.signal?tm(n.signal):void 0})}async function t_(e,t){return tg(e,"issuerIdentifier",e=>{switch(t?.algorithm){case void 0:case"oidc":e.pathname=tb(`${e.pathname}/.well-known/openid-configuration`);break;case"oauth2":var r,n;n=".well-known/oauth-authorization-server","/"===(r=e).pathname?r.pathname=n:r.pathname=tb(`${n}/${r.pathname}`);break;default:throw e9('"options.algorithm" must be "oidc" (default), or "oauth2"',e6)}return e},t)}function tS(e,t,r,n,i){try{if("number"!=typeof e||!Number.isFinite(e))throw e9(`${r} must be a number`,e8,i);if(e>0)return;if(t){if(0!==e)throw e9(`${r} must be a non-negative number`,e6,i);return}throw e9(`${r} must be a positive number`,e6,i)}catch(e){if(n)throw th(e.message,n,i);throw e}}function tE(e,t,r,n){try{if("string"!=typeof e)throw e9(`${t} must be a string`,e8,n);if(0===e.length)throw e9(`${t} must not be empty`,e6,n)}catch(e){if(r)throw th(e.message,r,n);throw e}}async function tv(e,t){if(!(e instanceof URL)&&e!==r1)throw e9('"expectedIssuerIdentifier" must be an instance of URL',e8);if(!e4(t,Response))throw e9('"response" must be an instance of Response',e8);if(200!==t.status)throw th('"response" is not a conform Authorization Server Metadata response (unexpected HTTP status code)',rE,t);rj(t);let r=await rQ(t);if(tE(r.issuer,'"response" body "issuer" property',rg,{body:r}),e!==r1&&new URL(r.issuer).href!==e.href)throw th('"response" body "issuer" property does not match the expected value',rR,{expected:e.href,body:r,attribute:"issuer"});return r}function tk(e){var t=e,r="application/json";if(t5(t)!==r)throw tA(t,r)}function tA(e,...t){let r='"response" content-type must be ';if(t.length>2){let e=t.pop();r+=`${t.join(", ")}, or ${e}`}else 2===t.length?r+=`${t[0]} or ${t[1]}`:r+=t[0];return th(r,rS,e)}function tT(){return tu(crypto.getRandomValues(new Uint8Array(32)))}async function tR(e){return tE(e,"codeVerifier"),tu(await crypto.subtle.digest("SHA-256",tc(e)))}function tx(e){switch(e.algorithm.name){case"RSA-PSS":switch(e.algorithm.hash.name){case"SHA-256":return"PS256";case"SHA-384":return"PS384";case"SHA-512":return"PS512";default:throw new tl("unsupported RsaHashedKeyAlgorithm hash name",{cause:e})}case"RSASSA-PKCS1-v1_5":switch(e.algorithm.hash.name){case"SHA-256":return"RS256";case"SHA-384":return"RS384";case"SHA-512":return"RS512";default:throw new tl("unsupported RsaHashedKeyAlgorithm hash name",{cause:e})}case"ECDSA":switch(e.algorithm.namedCurve){case"P-256":return"ES256";case"P-384":return"ES384";case"P-521":return"ES512";default:throw new tl("unsupported EcKeyAlgorithm namedCurve",{cause:e})}case"Ed25519":case"EdDSA":return"Ed25519";default:throw new tl("unsupported CryptoKey algorithm name",{cause:e})}}function tP(e){let t=e?.[te];return"number"==typeof t&&Number.isFinite(t)?t:0}function tO(e){let t=e?.[tt];return"number"==typeof t&&Number.isFinite(t)&&-1!==Math.sign(t)?t:30}function tC(){return Math.floor(Date.now()/1e3)}function tH(e){if("object"!=typeof e||null===e)throw e9('"as" must be an object',e8);tE(e.issuer,'"as.issuer"')}function tI(e){if("object"!=typeof e||null===e)throw e9('"client" must be an object',e8);tE(e.client_id,'"client.client_id"')}async function tj(e,t,r){if(!r.usages.includes("sign"))throw e9('CryptoKey instances used for signing assertions must include "sign" in their "usages"',e6);let n=`${tu(tc(JSON.stringify(e)))}.${tu(tc(JSON.stringify(t)))}`,i=tu(await crypto.subtle.sign(rK(r),r,tc(n)));return`${n}.${i}`}async function tN(e){let{kty:t,e:r,n,x:i,y:a,crv:o}=await crypto.subtle.exportKey("jwk",e),c={kty:t,e:r,n,x:i,y:a,crv:o};return s.set(e,c),c}async function tD(e){return(s||=new WeakMap).get(e)||tN(e)}let tU=URL.parse?(e,t)=>URL.parse(e,t):(e,t)=>{try{return new URL(e,t)}catch{return null}};function tW(e,t){if(t&&"https:"!==e.protocol)throw th("only requests to HTTPS are allowed",rv,e);if("https:"!==e.protocol&&"http:"!==e.protocol)throw th("only HTTP and HTTPS requests are allowed",rk,e)}function tK(e,t,r,n){let i;if("string"!=typeof e||!(i=tU(e)))throw th(`authorization server metadata does not contain a valid ${r?`"as.mtls_endpoint_aliases.${t}"`:`"as.${t}"`}`,void 0===e?rP:rO,{attribute:r?`mtls_endpoint_aliases.${t}`:t});return tW(i,n),i}function tM(e,t,r,n){return r&&e.mtls_endpoint_aliases&&t in e.mtls_endpoint_aliases?tK(e.mtls_endpoint_aliases[t],t,r,n):tK(e[t],t,r,n)}async function t$(e,t,r,n,i){tH(e),tI(t);let a=tM(e,"pushed_authorization_request_endpoint",t.use_mtls_endpoint_aliases,i?.[e7]!==!0),o=new URLSearchParams(n);o.set("client_id",t.client_id);let s=tw(i?.headers);s.set("accept","application/json"),i?.DPoP!==void 0&&(tQ(i.DPoP),await i.DPoP.addProof(a,s,"POST"));let c=await t3(e,t,r,a,o,s,i);return i?.DPoP?.cacheNonce(c),c}class tJ extends Error{cause;code;error;status;error_description;response;constructor(e,t){super(e,t),this.name=this.constructor.name,this.code=ry,this.cause=t.cause,this.error=t.cause.error,this.status=t.response.status,this.error_description=t.cause.error_description,Object.defineProperty(this,"response",{enumerable:!1,value:t.response}),Error.captureStackTrace?.(this,this.constructor)}}class tL extends Error{cause;code;error;error_description;constructor(e,t){super(e,t),this.name=this.constructor.name,this.code=rm,this.cause=t.cause,this.error=t.cause.get("error"),this.error_description=t.cause.get("error_description")??void 0,Error.captureStackTrace?.(this,this.constructor)}}class tq extends Error{cause;code;response;status;constructor(e,t){super(e,t),this.name=this.constructor.name,this.code=rf,this.cause=t.cause,this.status=t.response.status,this.response=t.response,Object.defineProperty(this,"response",{enumerable:!1}),Error.captureStackTrace?.(this,this.constructor)}}let tz="[a-zA-Z0-9!#$%&\\'\\*\\+\\-\\.\\^_`\\|~]+",tB=RegExp("^[,\\s]*("+tz+")\\s(.*)"),tG=RegExp("^[,\\s]*("+tz+')\\s*=\\s*"((?:[^"\\\\]|\\\\.)*)"[,\\s]*(.*)'),tF=RegExp("^[,\\s]*"+("("+tz+")\\s*=\\s*(")+tz+")[,\\s]*(.*)"),tV=RegExp("^([a-zA-Z0-9\\-\\._\\~\\+\\/]+[=]{0,2})(?:$|[,\\s])(.*)");async function tX(e,t,r){if(tH(e),tI(t),!e4(r,Response))throw e9('"response" must be an instance of Response',e8);rt(r),await tZ(r,201,"Pushed Authorization Request Endpoint"),rj(r);let n=await rQ(r);tE(n.request_uri,'"response" body "request_uri" property',rg,{body:n});let i="number"!=typeof n.expires_in?parseFloat(n.expires_in):n.expires_in;return tS(i,!1,'"response" body "expires_in" property',rg,{body:n}),n.expires_in=i,n}async function tY(e){if(e.status>399&&e.status<500){rj(e),tk(e);try{let t=await e.clone().json();if(ty(t)&&"string"==typeof t.error&&t.error.length)return t}catch{}}}async function tZ(e,t,r){if(e.status!==t){let t;if(t=await tY(e))throw await e.body?.cancel(),new tJ("server responded with an error in the response body",{cause:t,response:e});throw th(`"response" is not a conform ${r} response (unexpected HTTP status code)`,rE,e)}}function tQ(e){if(!ra.has(e))throw e9('"options.DPoP" is not a valid DPoPHandle',e6)}function t0(e,t,r,n){(c||=new WeakMap).set(e,{jwks:t,uat:r,get age(){return tC()-this.uat}}),n&&Object.assign(n,{jwks:structuredClone(t),uat:r})}function t1(e,t){c?.delete(e),delete t?.jwks,delete t?.uat}async function t2(e,t,r){var n;let i,a,o,{alg:s,kid:u}=r;if(function(e){if(!rU(e.alg))throw new tl('unsupported JWS "alg" identifier',{cause:{alg:e.alg}})}(r),!c?.has(e)&&!("object"!=typeof(n=t?.[ta])||null===n||!("uat"in n)||"number"!=typeof n.uat||tC()-n.uat>=300)&&"jwks"in n&&ty(n.jwks)&&Array.isArray(n.jwks.keys)&&Array.prototype.every.call(n.jwks.keys,ty)&&t0(e,t?.[ta].jwks,t?.[ta].uat),c?.has(e)){if({jwks:i,age:a}=c.get(e),a>=300)return t1(e,t?.[ta]),t2(e,t,r)}else i=await rN(e,t).then(rD),a=0,t0(e,i,tC(),t?.[ta]);switch(s.slice(0,2)){case"RS":case"PS":o="RSA";break;case"ES":o="EC";break;case"Ed":o="OKP";break;default:throw new tl("unsupported JWS algorithm",{cause:{alg:s}})}let l=i.keys.filter(e=>{if(e.kty!==o||void 0!==u&&u!==e.kid||void 0!==e.alg&&s!==e.alg||void 0!==e.use&&"sig"!==e.use||e.key_ops?.includes("verify")===!1)return!1;switch(!0){case"ES256"===s&&"P-256"!==e.crv:case"ES384"===s&&"P-384"!==e.crv:case"ES512"===s&&"P-521"!==e.crv:case"Ed25519"===s&&"Ed25519"!==e.crv:case"EdDSA"===s&&"Ed25519"!==e.crv:return!1}return!0}),{0:d,length:h}=l;if(!h){if(a>=60)return t1(e,t?.[ta]),t2(e,t,r);throw th("error when selecting a JWT verification key, no applicable keys found",rx,{header:r,candidates:l,jwks_uri:new URL(e.jwks_uri)})}if(1!==h)throw th('error when selecting a JWT verification key, multiple applicable keys found, a "kid" JWT Header Parameter is required',rx,{header:r,candidates:l,jwks_uri:new URL(e.jwks_uri)});return rY(s,d)}function t5(e){return e.headers.get("content-type")?.split(";")[0]}async function t3(e,t,r,n,i,a,o){return await r(e,t,i,a),a.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),(o?.[tr]||fetch)(n.href,{body:i,headers:Object.fromEntries(a.entries()),method:"POST",redirect:"manual",signal:o?.signal?tm(o.signal):void 0})}async function t4(e,t,r,n,i,a){let o=tM(e,"token_endpoint",t.use_mtls_endpoint_aliases,a?.[e7]!==!0);i.set("grant_type",n);let s=tw(a?.headers);s.set("accept","application/json"),a?.DPoP!==void 0&&(tQ(a.DPoP),await a.DPoP.addProof(o,s,"POST"));let c=await t3(e,t,r,o,i,s,a);return a?.DPoP?.cacheNonce(c),c}async function t6(e,t,r,n,i){tH(e),tI(t),tE(n,'"refreshToken"');let a=new URLSearchParams(i?.additionalParameters);return a.set("refresh_token",n),t4(e,t,r,"refresh_token",a,i)}Symbol();let t8=new WeakMap,t9=new WeakMap;function t7(e){if(!e.id_token)return;let t=t8.get(e);if(!t)throw e9('"ref" was already garbage collected or did not resolve from the proper sources',e6);return t}async function re(e,t,r,n,i){if(tH(e),tI(t),!e4(r,Response))throw e9('"response" must be an instance of Response',e8);rt(r),await tZ(r,200,"Token Endpoint"),rj(r);let a=await rQ(r);if(tE(a.access_token,'"response" body "access_token" property',rg,{body:a}),tE(a.token_type,'"response" body "token_type" property',rg,{body:a}),a.token_type=a.token_type.toLowerCase(),"dpop"!==a.token_type&&"bearer"!==a.token_type)throw new tl("unsupported `token_type` value",{cause:{body:a}});if(void 0!==a.expires_in){let e="number"!=typeof a.expires_in?parseFloat(a.expires_in):a.expires_in;tS(e,!1,'"response" body "expires_in" property',rg,{body:a}),a.expires_in=e}if(void 0!==a.refresh_token&&tE(a.refresh_token,'"response" body "refresh_token" property',rg,{body:a}),void 0!==a.scope&&"string"!=typeof a.scope)throw th('"response" body "scope" property must be a string',rg,{body:a});if(void 0!==a.id_token){tE(a.id_token,'"response" body "id_token" property',rg,{body:a});let o=["aud","exp","iat","iss","sub"];!0===t.require_auth_time&&o.push("auth_time"),void 0!==t.default_max_age&&(tS(t.default_max_age,!1,'"client.default_max_age"'),o.push("auth_time")),n?.length&&o.push(...n);let{claims:s,jwt:c}=await r$(a.id_token,rB.bind(void 0,t.id_token_signed_response_alg,e.id_token_signing_alg_values_supported,"RS256"),tP(t),tO(t),i?.[ti]).then(rc.bind(void 0,o)).then(ri.bind(void 0,e)).then(rn.bind(void 0,t.client_id));if(Array.isArray(s.aud)&&1!==s.aud.length){if(void 0===s.azp)throw th('ID Token "aud" (audience) claim includes additional untrusted audiences',rT,{claims:s,claim:"aud"});if(s.azp!==t.client_id)throw th('unexpected ID Token "azp" (authorized party) claim value',rT,{expected:t.client_id,claims:s,claim:"azp"})}void 0!==s.auth_time&&tS(s.auth_time,!1,'ID Token "auth_time" (authentication time)',rg,{claims:s}),t9.set(r,c),t8.set(a,s)}return a}function rt(e){let t;if(t=function(e){if(!e4(e,Response))throw e9('"response" must be an instance of Response',e8);let t=e.headers.get("www-authenticate");if(null===t)return;let r=[],n=t;for(;n;){let e,t=n.match(tB),i=t?.["1"].toLowerCase();if(n=t?.["2"],!i)return;let a={};for(;n;){let r,i;if(t=n.match(tG)){if([,r,i,n]=t,i.includes("\\"))try{i=JSON.parse(`"${i}"`)}catch{}a[r.toLowerCase()]=i;continue}if(t=n.match(tF)){[,r,i,n]=t,a[r.toLowerCase()]=i;continue}if(t=n.match(tV)){if(Object.keys(a).length)break;[,e,n]=t;break}return}let o={scheme:i,parameters:a};e&&(o.token68=e),r.push(o)}if(r.length)return r}(e))throw new tq("server responded with a challenge in the WWW-Authenticate HTTP Header",{cause:t,response:e})}async function rr(e,t,r,n){return re(e,t,r,void 0,n)}function rn(e,t){if(Array.isArray(t.claims.aud)){if(!t.claims.aud.includes(e))throw th('unexpected JWT "aud" (audience) claim value',rT,{expected:e,claims:t.claims,claim:"aud"})}else if(t.claims.aud!==e)throw th('unexpected JWT "aud" (audience) claim value',rT,{expected:e,claims:t.claims,claim:"aud"});return t}function ri(e,t){let r=e[r2]?.(t)??e.issuer;if(t.claims.iss!==r)throw th('unexpected JWT "iss" (issuer) claim value',rT,{expected:r,claims:t.claims,claim:"iss"});return t}let ra=new WeakSet;async function ro(e,t,r,n,i,a,o){if(tH(e),tI(t),!ra.has(n))throw e9('"callbackParameters" must be an instance of URLSearchParams obtained from "validateAuthResponse()", or "validateJwtAuthResponse()',e6);tE(i,'"redirectUri"');let s=rG(n,"code");if(!s)throw th('no authorization code in "callbackParameters"',rg);let c=new URLSearchParams(o?.additionalParameters);return c.set("redirect_uri",i),c.set("code",s),a!==r0&&(tE(a,'"codeVerifier"'),c.set("code_verifier",a)),t4(e,t,r,"authorization_code",c,o)}let rs={aud:"audience",c_hash:"code hash",client_id:"client id",exp:"expiration time",iat:"issued at",iss:"issuer",jti:"jwt id",nonce:"nonce",s_hash:"state hash",sub:"subject",ath:"access token hash",htm:"http method",htu:"http uri",cnf:"confirmation",auth_time:"authentication time"};function rc(e,t){for(let r of e)if(void 0===t.claims[r])throw th(`JWT "${r}" (${rs[r]}) claim missing`,rg,{claims:t.claims});return t}let ru=Symbol(),rl=Symbol();async function rd(e,t,r,n){return"string"==typeof n?.expectedNonce||"number"==typeof n?.maxAge||n?.requireIdToken?rh(e,t,r,n.expectedNonce,n.maxAge,{[ti]:n[ti]}):rp(e,t,r,n)}async function rh(e,t,r,n,i,a){let o=[];switch(n){case void 0:n=ru;break;case ru:break;default:tE(n,'"expectedNonce" argument'),o.push("nonce")}switch(i??=t.default_max_age){case void 0:i=rl;break;case rl:break;default:tS(i,!1,'"maxAge" argument'),o.push("auth_time")}let s=await re(e,t,r,o,a);tE(s.id_token,'"response" body "id_token" property',rg,{body:s});let c=t7(s);if(i!==rl){let e=tC()+tP(t),r=tO(t);if(c.auth_time+i<e-r)throw th("too much time has elapsed since the last End-User authentication",rA,{claims:c,now:e,tolerance:r,claim:"auth_time"})}if(n===ru){if(void 0!==c.nonce)throw th('unexpected ID Token "nonce" claim value',rT,{expected:void 0,claims:c,claim:"nonce"})}else if(c.nonce!==n)throw th('unexpected ID Token "nonce" claim value',rT,{expected:n,claims:c,claim:"nonce"});return s}async function rp(e,t,r,n){let i=await re(e,t,r,void 0,n),a=t7(i);if(a){if(void 0!==t.default_max_age){tS(t.default_max_age,!1,'"client.default_max_age"');let e=tC()+tP(t),r=tO(t);if(a.auth_time+t.default_max_age<e-r)throw th("too much time has elapsed since the last End-User authentication",rA,{claims:a,now:e,tolerance:r,claim:"auth_time"})}if(void 0!==a.nonce)throw th('unexpected ID Token "nonce" claim value',rT,{expected:void 0,claims:a,claim:"nonce"})}return i}let rf="OAUTH_WWW_AUTHENTICATE_CHALLENGE",ry="OAUTH_RESPONSE_BODY_ERROR",rw="OAUTH_UNSUPPORTED_OPERATION",rm="OAUTH_AUTHORIZATION_RESPONSE_ERROR",rb="OAUTH_PARSE_ERROR",rg="OAUTH_INVALID_RESPONSE",r_="OAUTH_INVALID_REQUEST",rS="OAUTH_RESPONSE_IS_NOT_JSON",rE="OAUTH_RESPONSE_IS_NOT_CONFORM",rv="OAUTH_HTTP_REQUEST_FORBIDDEN",rk="OAUTH_REQUEST_PROTOCOL_FORBIDDEN",rA="OAUTH_JWT_TIMESTAMP_CHECK_FAILED",rT="OAUTH_JWT_CLAIM_COMPARISON_FAILED",rR="OAUTH_JSON_ATTRIBUTE_COMPARISON_FAILED",rx="OAUTH_KEY_SELECTION_FAILED",rP="OAUTH_MISSING_SERVER_METADATA",rO="OAUTH_INVALID_SERVER_METADATA";function rC(e,t){if("string"!=typeof t.header.typ||t.header.typ.toLowerCase().replace(/^application\//,"")!==e)throw th('unexpected JWT "typ" header parameter value',rg,{header:t.header});return t}async function rH(e,t,r,n,i,a){return tH(e),tI(t),tE(n,'"grantType"'),t4(e,t,r,n,new URLSearchParams(i),a)}async function rI(e,t,r,n){return re(e,t,r,void 0,n)}function rj(e){if(e.bodyUsed)throw e9('"response" body has been used already',e6)}async function rN(e,t){tH(e);let r=tM(e,"jwks_uri",!1,t?.[e7]!==!0),n=tw(t?.headers);return n.set("accept","application/json"),n.append("accept","application/jwk-set+json"),(t?.[tr]||fetch)(r.href,{body:void 0,headers:Object.fromEntries(n.entries()),method:"GET",redirect:"manual",signal:t?.signal?tm(t.signal):void 0})}async function rD(e){if(!e4(e,Response))throw e9('"response" must be an instance of Response',e8);if(200!==e.status)throw th('"response" is not a conform JSON Web Key Set response (unexpected HTTP status code)',rE,e);rj(e);let t=await rQ(e,e=>(function(e,...t){if(!t.includes(t5(e)))throw tA(e,...t)})(e,"application/json","application/jwk-set+json"));if(!Array.isArray(t.keys))throw th('"response" body "keys" property must be an array',rg,{body:t});if(!Array.prototype.every.call(t.keys,ty))throw th('"response" body "keys" property members must be JWK formatted objects',rg,{body:t});return t}function rU(e){switch(e){case"PS256":case"ES256":case"RS256":case"PS384":case"ES384":case"RS384":case"PS512":case"ES512":case"RS512":case"Ed25519":case"EdDSA":return!0;default:return!1}}function rW(e){let{algorithm:t}=e;if("number"!=typeof t.modulusLength||t.modulusLength<2048)throw new tl(`unsupported ${t.name} modulusLength`,{cause:e})}function rK(e){switch(e.algorithm.name){case"ECDSA":return{name:e.algorithm.name,hash:function(e){let{algorithm:t}=e;switch(t.namedCurve){case"P-256":return"SHA-256";case"P-384":return"SHA-384";case"P-521":return"SHA-512";default:throw new tl("unsupported ECDSA namedCurve",{cause:e})}}(e)};case"RSA-PSS":switch(rW(e),e.algorithm.hash.name){case"SHA-256":case"SHA-384":case"SHA-512":return{name:e.algorithm.name,saltLength:parseInt(e.algorithm.hash.name.slice(-3),10)>>3};default:throw new tl("unsupported RSA-PSS hash name",{cause:e})}case"RSASSA-PKCS1-v1_5":return rW(e),e.algorithm.name;case"Ed25519":return e.algorithm.name}throw new tl("unsupported CryptoKey algorithm name",{cause:e})}async function rM(e,t,r,n){let i=tc(`${e}.${t}`),a=rK(r);if(!await crypto.subtle.verify(a,r,n,i))throw th("JWT signature verification failed",rg,{key:r,data:i,signature:n,algorithm:a})}async function r$(e,t,r,n,i){let a,o,{0:s,1:c,length:u}=e.split(".");if(5===u)if(void 0!==i)e=await i(e),{0:s,1:c,length:u}=e.split(".");else throw new tl("JWE decryption is not configured",{cause:e});if(3!==u)throw th("Invalid JWT",rg,e);try{a=JSON.parse(tc(tu(s)))}catch(e){throw th("failed to parse JWT Header body as base64url encoded JSON",rb,e)}if(!ty(a))throw th("JWT Header must be a top level object",rg,e);if(t(a),void 0!==a.crit)throw new tl('no JWT "crit" header parameter extensions are supported',{cause:{header:a}});try{o=JSON.parse(tc(tu(c)))}catch(e){throw th("failed to parse JWT Payload body as base64url encoded JSON",rb,e)}if(!ty(o))throw th("JWT Payload must be a top level object",rg,e);let l=tC()+r;if(void 0!==o.exp){if("number"!=typeof o.exp)throw th('unexpected JWT "exp" (expiration time) claim type',rg,{claims:o});if(o.exp<=l-n)throw th('unexpected JWT "exp" (expiration time) claim value, expiration is past current timestamp',rA,{claims:o,now:l,tolerance:n,claim:"exp"})}if(void 0!==o.iat&&"number"!=typeof o.iat)throw th('unexpected JWT "iat" (issued at) claim type',rg,{claims:o});if(void 0!==o.iss&&"string"!=typeof o.iss)throw th('unexpected JWT "iss" (issuer) claim type',rg,{claims:o});if(void 0!==o.nbf){if("number"!=typeof o.nbf)throw th('unexpected JWT "nbf" (not before) claim type',rg,{claims:o});if(o.nbf>l+n)throw th('unexpected JWT "nbf" (not before) claim value',rA,{claims:o,now:l,tolerance:n,claim:"nbf"})}if(void 0!==o.aud&&"string"!=typeof o.aud&&!Array.isArray(o.aud))throw th('unexpected JWT "aud" (audience) claim type',rg,{claims:o});return{header:a,claims:o,jwt:e}}async function rJ(e,t,r){let n;switch(t.alg){case"RS256":case"PS256":case"ES256":n="SHA-256";break;case"RS384":case"PS384":case"ES384":n="SHA-384";break;case"RS512":case"PS512":case"ES512":case"Ed25519":case"EdDSA":n="SHA-512";break;default:throw new tl(`unsupported JWS algorithm for ${r} calculation`,{cause:{alg:t.alg}})}let i=await crypto.subtle.digest(n,tc(e));return tu(i.slice(0,i.byteLength/2))}async function rL(e,t,r,n){return t===await rJ(e,r,n)}async function rq(e){if(e.bodyUsed)throw e9("form_post Request instances must contain a readable body",e6,{cause:e});return e.text()}async function rz(e){if("POST"!==e.method)throw e9("form_post responses are expected to use the POST method",e6,{cause:e});if("application/x-www-form-urlencoded"!==t5(e))throw e9("form_post responses are expected to use the application/x-www-form-urlencoded content-type",e6,{cause:e});return rq(e)}function rB(e,t,r,n){if(void 0!==e){if("string"==typeof e?n.alg!==e:!e.includes(n.alg))throw th('unexpected JWT "alg" header parameter',rg,{header:n,expected:e,reason:"client configuration"});return}if(Array.isArray(t)){if(!t.includes(n.alg))throw th('unexpected JWT "alg" header parameter',rg,{header:n,expected:t,reason:"authorization server metadata"});return}if(void 0!==r){if("string"==typeof r?n.alg!==r:"function"==typeof r?!r(n.alg):!r.includes(n.alg))throw th('unexpected JWT "alg" header parameter',rg,{header:n,expected:r,reason:"default value"});return}throw th('missing client or server configuration to verify used JWT "alg" header parameter',void 0,{client:e,issuer:t,fallback:r})}function rG(e,t){let{0:r,length:n}=e.getAll(t);if(n>1)throw th(`"${t}" parameter must be provided only once`,rg);return r}let rF=Symbol(),rV=Symbol();function rX(e,t,r,n){var i;if(tH(e),tI(t),r instanceof URL&&(r=r.searchParams),!(r instanceof URLSearchParams))throw e9('"parameters" must be an instance of URLSearchParams, or URL',e8);if(rG(r,"response"))throw th('"parameters" contains a JARM response, use validateJwtAuthResponse() instead of validateAuthResponse()',rg,{parameters:r});let a=rG(r,"iss"),o=rG(r,"state");if(!a&&e.authorization_response_iss_parameter_supported)throw th('response parameter "iss" (issuer) missing',rg,{parameters:r});if(a&&a!==e.issuer)throw th('unexpected "iss" (issuer) response parameter value',rg,{expected:e.issuer,parameters:r});switch(n){case void 0:case rV:if(void 0!==o)throw th('unexpected "state" response parameter encountered',rg,{expected:void 0,parameters:r});break;case rF:break;default:if(tE(n,'"expectedState" argument'),o!==n)throw th(void 0===o?'response parameter "state" missing':'unexpected "state" response parameter value',rg,{expected:n,parameters:r})}if(rG(r,"error"))throw new tL("authorization response from the server is an error",{cause:r});let s=rG(r,"id_token"),c=rG(r,"token");if(void 0!==s||void 0!==c)throw new tl("implicit and hybrid flows are not supported");return i=new URLSearchParams(r),ra.add(i),i}async function rY(e,t){let{ext:r,key_ops:n,use:i,...a}=t;return crypto.subtle.importKey("jwk",a,function(e){switch(e){case"PS256":case"PS384":case"PS512":return{name:"RSA-PSS",hash:`SHA-${e.slice(-3)}`};case"RS256":case"RS384":case"RS512":return{name:"RSASSA-PKCS1-v1_5",hash:`SHA-${e.slice(-3)}`};case"ES256":case"ES384":return{name:"ECDSA",namedCurve:`P-${e.slice(-3)}`};case"ES512":return{name:"ECDSA",namedCurve:"P-521"};case"Ed25519":case"EdDSA":return"Ed25519";default:throw new tl("unsupported JWS algorithm",{cause:{alg:e}})}}(e),!0,["verify"])}function rZ(e){let t=new URL(e);return t.search="",t.hash="",t.href}async function rQ(e,t=tk){let r;try{r=await e.json()}catch(r){throw t(e),th('failed to parse "response" body as JSON',rb,r)}if(!ty(r))throw th('"response" body must be a top level object',rg,{body:r});return r}let r0=Symbol(),r1=Symbol(),r2=Symbol(),r5={rE:"4.6.1"},r3=e=>e.endsWith("/")?e.slice(0,-1):e;function r4(e){var t;let r=["path"in e&&e.path&&`Path=${e.path}`,"expires"in e&&(e.expires||0===e.expires)&&`Expires=${("number"==typeof e.expires?new Date(e.expires):e.expires).toUTCString()}`,"maxAge"in e&&"number"==typeof e.maxAge&&`Max-Age=${e.maxAge}`,"domain"in e&&e.domain&&`Domain=${e.domain}`,"secure"in e&&e.secure&&"Secure","httpOnly"in e&&e.httpOnly&&"HttpOnly","sameSite"in e&&e.sameSite&&`SameSite=${e.sameSite}`,"partitioned"in e&&e.partitioned&&"Partitioned","priority"in e&&e.priority&&`Priority=${e.priority}`].filter(Boolean),n=`${e.name}=${encodeURIComponent(null!=(t=e.value)?t:"")}`;return 0===r.length?n:`${n}; ${r.join("; ")}`}function r6(e){let t=new Map;for(let r of e.split(/; */)){if(!r)continue;let e=r.indexOf("=");if(-1===e){t.set(r,"true");continue}let[n,i]=[r.slice(0,e),r.slice(e+1)];try{t.set(n,decodeURIComponent(null!=i?i:"true"))}catch{}}return t}var r8=["strict","lax","none"],r9=["low","medium","high"],r7=class{constructor(e){this._parsed=new Map,this._headers=e;let t=e.get("cookie");if(t)for(let[e,r]of r6(t))this._parsed.set(e,{name:e,value:r})}[Symbol.iterator](){return this._parsed[Symbol.iterator]()}get size(){return this._parsed.size}get(...e){let t="string"==typeof e[0]?e[0]:e[0].name;return this._parsed.get(t)}getAll(...e){var t;let r=Array.from(this._parsed);if(!e.length)return r.map(([e,t])=>t);let n="string"==typeof e[0]?e[0]:null==(t=e[0])?void 0:t.name;return r.filter(([e])=>e===n).map(([e,t])=>t)}has(e){return this._parsed.has(e)}set(...e){let[t,r]=1===e.length?[e[0].name,e[0].value]:e,n=this._parsed;return n.set(t,{name:t,value:r}),this._headers.set("cookie",Array.from(n).map(([e,t])=>r4(t)).join("; ")),this}delete(e){let t=this._parsed,r=Array.isArray(e)?e.map(e=>t.delete(e)):t.delete(e);return this._headers.set("cookie",Array.from(t).map(([e,t])=>r4(t)).join("; ")),r}clear(){return this.delete(Array.from(this._parsed.keys())),this}[Symbol.for("edge-runtime.inspect.custom")](){return`RequestCookies ${JSON.stringify(Object.fromEntries(this._parsed))}`}toString(){return[...this._parsed.values()].map(e=>`${e.name}=${encodeURIComponent(e.value)}`).join("; ")}},ne=class{constructor(e){var t,r,n;this._parsed=new Map,this._headers=e;let i=null!=(n=null!=(r=null==(t=e.getSetCookie)?void 0:t.call(e))?r:e.get("set-cookie"))?n:[];for(let e of Array.isArray(i)?i:function(e){if(!e)return[];var t,r,n,i,a,o=[],s=0;function c(){for(;s<e.length&&/\s/.test(e.charAt(s));)s+=1;return s<e.length}for(;s<e.length;){for(t=s,a=!1;c();)if(","===(r=e.charAt(s))){for(n=s,s+=1,c(),i=s;s<e.length&&"="!==(r=e.charAt(s))&&";"!==r&&","!==r;)s+=1;s<e.length&&"="===e.charAt(s)?(a=!0,s=i,o.push(e.substring(t,n)),t=s):s=n+1}else s+=1;(!a||s>=e.length)&&o.push(e.substring(t,e.length))}return o}(i)){let t=function(e){if(!e)return;let[[t,r],...n]=r6(e),{domain:i,expires:a,httponly:o,maxage:s,path:c,samesite:u,secure:l,partitioned:d,priority:h}=Object.fromEntries(n.map(([e,t])=>[e.toLowerCase().replace(/-/g,""),t]));{var p,f,y={name:t,value:decodeURIComponent(r),domain:i,...a&&{expires:new Date(a)},...o&&{httpOnly:!0},..."string"==typeof s&&{maxAge:Number(s)},path:c,...u&&{sameSite:(p=(p=u).toLowerCase(),r8.includes(p)?p:void 0)},...l&&{secure:!0},...h&&{priority:(f=(f=h).toLowerCase(),r9.includes(f)?f:void 0)},...d&&{partitioned:!0}};let e={};for(let t in y)y[t]&&(e[t]=y[t]);return e}}(e);t&&this._parsed.set(t.name,t)}}get(...e){let t="string"==typeof e[0]?e[0]:e[0].name;return this._parsed.get(t)}getAll(...e){var t;let r=Array.from(this._parsed.values());if(!e.length)return r;let n="string"==typeof e[0]?e[0]:null==(t=e[0])?void 0:t.name;return r.filter(e=>e.name===n)}has(e){return this._parsed.has(e)}set(...e){let[t,r,n]=1===e.length?[e[0].name,e[0].value,e[0]]:e,i=this._parsed;return i.set(t,function(e={name:"",value:""}){return"number"==typeof e.expires&&(e.expires=new Date(e.expires)),e.maxAge&&(e.expires=new Date(Date.now()+1e3*e.maxAge)),(null===e.path||void 0===e.path)&&(e.path="/"),e}({name:t,value:r,...n})),function(e,t){for(let[,r]of(t.delete("set-cookie"),e)){let e=r4(r);t.append("set-cookie",e)}}(i,this._headers),this}delete(...e){let[t,r]="string"==typeof e[0]?[e[0]]:[e[0].name,e[0]];return this.set({...r,name:t,value:"",expires:new Date(0)})}[Symbol.for("edge-runtime.inspect.custom")](){return`ResponseCookies ${JSON.stringify(Object.fromEntries(this._parsed))}`}toString(){return[...this._parsed.values()].map(r4).join("; ")}},nt=r(55511);let nr=(e,t,r,n,i)=>{let a=parseInt(e.substr(3),10)>>3||20,o=(0,nt.createHmac)(e,r.byteLength?r:new Uint8Array(a)).update(t).digest(),s=Math.ceil(i/a),c=new Uint8Array(a*s+n.byteLength+1),u=0,l=0;for(let t=1;t<=s;t++)c.set(n,l),c[l+n.byteLength]=t,c.set((0,nt.createHmac)(e,o).update(c.subarray(u,l+n.byteLength+1)).digest(),l),u=l,l+=a;return c.slice(0,i)};"function"!=typeof nt.hkdf||process.versions.electron||(u=async(...e)=>new Promise((t,r)=>{nt.hkdf(...e,(e,n)=>{e?r(e):t(new Uint8Array(n))})}));let nn=async(e,t,r,n,i)=>(u||nr)(e,t,r,n,i);function ni(e,t){if("string"==typeof e)return new TextEncoder().encode(e);if(!(e instanceof Uint8Array))throw TypeError(`"${t}"" must be an instance of Uint8Array or a string`);return e}async function na(e,t,r,n,i){return nn(function(e){switch(e){case"sha256":case"sha384":case"sha512":case"sha1":return e;default:throw TypeError('unsupported "digest" value')}}(e),function(e){let t=ni(e,"ikm");if(!t.byteLength)throw TypeError('"ikm" must be at least one byte in length');return t}(t),ni(r,"salt"),function(e){let t=ni(e,"info");if(t.byteLength>1024)throw TypeError('"info" must not contain more than 1024 bytes');return t}(n),function(e,t){if("number"!=typeof e||!Number.isInteger(e)||e<1)throw TypeError('"keylen" must be a positive integer');if(e>255*(parseInt(t.substr(3),10)>>3||20))throw TypeError('"keylen" too large');return e}(i,e))}let no=Symbol();function ns(e){switch(e){case"A128GCM":case"A128GCMKW":case"A192GCM":case"A192GCMKW":case"A256GCM":case"A256GCMKW":return 96;case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return 128;default:throw new H(`Unsupported JWE Algorithm: ${e}`)}}let nc=e=>(0,J.randomFillSync)(new Uint8Array(ns(e)>>3)),nu=(e,t)=>{if(t.length<<3!==ns(e))throw new j("Invalid Initialization Vector length")},nl=(e,t)=>{let r;switch(e){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":r=parseInt(e.slice(-3),10);break;case"A128GCM":case"A192GCM":case"A256GCM":r=parseInt(e.slice(1,4),10);break;default:throw new H(`Content Encryption Algorithm ${e} is not supported either by JOSE or your javascript runtime`)}if(t instanceof Uint8Array){let e=t.byteLength<<3;if(e!==r)throw new j(`Invalid Content Encryption Key length. Expected ${r} bits, got ${e} bits`);return}if(eb(t)&&"secret"===t.type){let e=t.symmetricKeySize<<3;if(e!==r)throw new j(`Invalid Content Encryption Key length. Expected ${r} bits, got ${e} bits`);return}throw TypeError("Invalid Content Encryption Key type")};function nd(e,t,r,n,i,a){let o=B(e,t,r,function(e){let t=Math.floor(e/0x100000000),r=new Uint8Array(8);return F(r,t,0),F(r,e%0x100000000,4),r}(e.length<<3)),s=(0,J.createHmac)(`sha${n}`,i);return s.update(o),s.digest().slice(0,a>>3)}let nh=e=>(l||=new Set((0,J.getCiphers)())).has(e),np=(e,t,r,n,i)=>{let a;if(em(r))ej(r,e,"encrypt"),a=J.KeyObject.from(r);else if(r instanceof Uint8Array||eb(r))a=r;else throw TypeError(e_(r,...ev,"Uint8Array"));switch(nl(e,a),n?nu(e,n):n=nc(e),e){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return function(e,t,r,n,i){let a=parseInt(e.slice(1,4),10);eb(r)&&(r=r.export());let o=r.subarray(a>>3),s=r.subarray(0,a>>3),c=`aes-${a}-cbc`;if(!nh(c))throw new H(`alg ${e} is not supported by your javascript runtime`);let u=(0,J.createCipheriv)(c,o,n),l=B(u.update(t),u.final()),d=nd(i,n,l,parseInt(e.slice(-3),10),s,a);return{ciphertext:l,tag:d,iv:n}}(e,t,a,n,i);case"A128GCM":case"A192GCM":case"A256GCM":return function(e,t,r,n,i){let a=parseInt(e.slice(1,4),10),o=`aes-${a}-gcm`;if(!nh(o))throw new H(`alg ${e} is not supported by your javascript runtime`);let s=(0,J.createCipheriv)(o,r,n,{authTagLength:16});i.byteLength&&s.setAAD(i,{plaintextLength:t.length});let c=s.update(t);return s.final(),{ciphertext:c,tag:s.getAuthTag(),iv:n}}(e,t,a,n,i);default:throw new H("Unsupported JWE Content Encryption Algorithm")}};function nf(e,t){if(e.symmetricKeySize<<3!==parseInt(t.slice(1,4),10))throw TypeError(`Invalid key size for alg: ${t}`)}function ny(e,t,r){if(eb(e))return e;if(e instanceof Uint8Array)return(0,J.createSecretKey)(e);if(em(e))return ej(e,t,r),J.KeyObject.from(e);throw TypeError(e_(e,...ev,"Uint8Array"))}let nw=(e,t,r)=>{let n=parseInt(e.slice(1,4),10),i=`aes${n}-wrap`;if(!nh(i))throw new H(`alg ${e} is not supported either by JOSE or your javascript runtime`);let a=ny(t,e,"wrapKey");nf(a,e);let o=(0,J.createCipheriv)(i,a,Q.Buffer.alloc(8,166));return B(o.update(r),o.final())},nm=(e,t,r)=>{let n=parseInt(e.slice(1,4),10),i=`aes${n}-wrap`;if(!nh(i))throw new H(`alg ${e} is not supported either by JOSE or your javascript runtime`);let a=ny(t,e,"unwrapKey");nf(a,e);let o=(0,J.createDecipheriv)(i,a,Q.Buffer.alloc(8,166));return B(o.update(r),o.final())},nb=(0,ef.promisify)(J.generateKeyPair);async function ng(e,t,r,n,i=new Uint8Array(0),a=new Uint8Array(0)){let o,s;if(em(e))ej(e,"ECDH"),o=J.KeyObject.from(e);else if(eb(e))o=e;else throw TypeError(e_(e,...ev));if(em(t))ej(t,"ECDH","deriveBits"),s=J.KeyObject.from(t);else if(eb(t))s=t;else throw TypeError(e_(t,...ev));let c=B(X(q.encode(r)),X(i),X(a),V(n));return Y((0,J.diffieHellman)({privateKey:s,publicKey:o}),n,c)}async function n_(e){let t;if(em(e))t=J.KeyObject.from(e);else if(eb(e))t=e;else throw TypeError(e_(e,...ev));switch(t.asymmetricKeyType){case"x25519":return nb("x25519");case"x448":return nb("x448");case"ec":return nb("ec",{namedCurve:eT(t)});default:throw new H("Invalid or unsupported EPK")}}let nS=e=>["P-256","P-384","P-521","X25519","X448"].includes(eT(e));function nE(e){if(!(e instanceof Uint8Array)||e.length<8)throw new j("PBES2 Salt Input must be 8 or more octets")}let nv=(0,ef.promisify)(J.pbkdf2);function nk(e,t){if(eb(e))return e.export();if(e instanceof Uint8Array)return e;if(em(e))return ej(e,t,"deriveBits","deriveKey"),J.KeyObject.from(e).export();throw TypeError(e_(e,...ev,"Uint8Array"))}let nA=async(e,t,r,n=2048,i=(0,J.randomFillSync)(new Uint8Array(16)))=>{nE(i);let a=G(e,i),o=parseInt(e.slice(13,16),10)>>3,s=nk(t,e),c=await nv(s,a,n,o,`sha${e.slice(8,11)}`);return{encryptedKey:await nw(e.slice(-6),c,r),p2c:n,p2s:ee(i)}},nT=async(e,t,r,n,i)=>{nE(i);let a=G(e,i),o=parseInt(e.slice(13,16),10)>>3,s=nk(t,e),c=await nv(s,a,n,o,`sha${e.slice(8,11)}`);return nm(e.slice(-6),c,r)},nR=(e,t)=>{if("rsa"!==e.asymmetricKeyType)throw TypeError("Invalid key for this operation, its asymmetricKeyType must be rsa");eR(e,t)},nx=(0,ef.deprecate)(()=>J.constants.RSA_PKCS1_PADDING,'The RSA1_5 "alg" (JWE Algorithm) is deprecated and will be removed in the next major revision.'),nP=e=>{switch(e){case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":return J.constants.RSA_PKCS1_OAEP_PADDING;case"RSA1_5":return nx();default:return}},nO=e=>{switch(e){case"RSA-OAEP":return"sha1";case"RSA-OAEP-256":return"sha256";case"RSA-OAEP-384":return"sha384";case"RSA-OAEP-512":return"sha512";default:return}};function nC(e,t,...r){if(eb(e))return e;if(em(e))return ej(e,t,...r),J.KeyObject.from(e);throw TypeError(e_(e,...ev))}let nH=(e,t,r)=>{let n=nP(e),i=nO(e),a=nC(t,e,"wrapKey","encrypt");return nR(a,e),(0,J.publicEncrypt)({key:a,oaepHash:i,padding:n},r)},nI=(e,t,r)=>{let n=nP(e),i=nO(e),a=nC(t,e,"unwrapKey","decrypt");return nR(a,e),(0,J.privateDecrypt)({key:a,oaepHash:i,padding:n},r)},nj={};function nN(e){switch(e){case"A128GCM":return 128;case"A192GCM":return 192;case"A256GCM":case"A128CBC-HS256":return 256;case"A192CBC-HS384":return 384;case"A256CBC-HS512":return 512;default:throw new H(`Unsupported JWE Algorithm: ${e}`)}}let nD=e=>(0,J.randomFillSync)(new Uint8Array(nN(e)>>3)),nU=e=>{let t;if(em(e)){if(!e.extractable)throw TypeError("CryptoKey is not extractable");t=J.KeyObject.from(e)}else if(eb(e))t=e;else if(e instanceof Uint8Array)return{kty:"oct",k:ee(e)};else throw TypeError(e_(e,...ev,"Uint8Array"));if("secret"!==t.type&&!["rsa","ec","ed25519","x25519","ed448","x448"].includes(t.asymmetricKeyType))throw new H("Unsupported key asymmetricKeyType");return t.export({format:"jwk"})};async function nW(e){return nU(e)}let nK=J.timingSafeEqual,nM=(e,t,r,n,i,a)=>{let o;if(em(t))ej(t,e,"decrypt"),o=J.KeyObject.from(t);else if(t instanceof Uint8Array||eb(t))o=t;else throw TypeError(e_(t,...ev,"Uint8Array"));if(!n)throw new j("JWE Initialization Vector missing");if(!i)throw new j("JWE Authentication Tag missing");switch(nl(e,o),nu(e,n),e){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return function(e,t,r,n,i,a){let o,s,c=parseInt(e.slice(1,4),10);eb(t)&&(t=t.export());let u=t.subarray(c>>3),l=t.subarray(0,c>>3),d=parseInt(e.slice(-3),10),h=`aes-${c}-cbc`;if(!nh(h))throw new H(`alg ${e} is not supported by your javascript runtime`);let p=nd(a,n,r,d,l,c);try{o=nK(i,p)}catch{}if(!o)throw new I;try{let e=(0,J.createDecipheriv)(h,u,n);s=B(e.update(r),e.final())}catch{}if(!s)throw new I;return s}(e,o,r,n,i,a);case"A128GCM":case"A192GCM":case"A256GCM":return function(e,t,r,n,i,a){let o=parseInt(e.slice(1,4),10),s=`aes-${o}-gcm`;if(!nh(s))throw new H(`alg ${e} is not supported by your javascript runtime`);try{let e=(0,J.createDecipheriv)(s,t,n,{authTagLength:16});e.setAuthTag(i),a.byteLength&&e.setAAD(a,{plaintextLength:r.length});let o=e.update(r);return e.final(),o}catch{throw new I}}(e,o,r,n,i,a);default:throw new H("Unsupported JWE Content Encryption Algorithm")}};async function n$(e,t,r,n){let i=e.slice(0,7),a=await np(i,r,t,n,new Uint8Array(0));return{encryptedKey:a.ciphertext,iv:ee(a.iv),tag:ee(a.tag)}}async function nJ(e,t,r,n,i){return nM(e.slice(0,7),t,r,n,i,new Uint8Array(0))}async function nL(e,t,r,n,i={}){let a,o,s;switch(eB(e,r,"encrypt"),r=await nj.normalizePublicKey?.(r,e)||r,e){case"dir":s=r;break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{if(!nS(r))throw new H("ECDH with the provided key is not allowed or not supported by your javascript runtime");let{apu:c,apv:u}=i,{epk:l}=i;l||=(await n_(r)).privateKey;let{x:d,y:h,crv:p,kty:f}=await nW(l),y=await ng(r,l,"ECDH-ES"===e?t:e,"ECDH-ES"===e?nN(t):parseInt(e.slice(-5,-2),10),c,u);if(o={epk:{x:d,crv:p,kty:f}},"EC"===f&&(o.epk.y=h),c&&(o.apu=ee(c)),u&&(o.apv=ee(u)),"ECDH-ES"===e){s=y;break}s=n||nD(t);let w=e.slice(-6);a=await nw(w,y,s);break}case"RSA1_5":case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":s=n||nD(t),a=await nH(e,r,s);break;case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":{s=n||nD(t);let{p2c:c,p2s:u}=i;({encryptedKey:a,...o}=await nA(e,r,s,c,u));break}case"A128KW":case"A192KW":case"A256KW":s=n||nD(t),a=await nw(e,r,s);break;case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":{s=n||nD(t);let{iv:c}=i;({encryptedKey:a,...o}=await n$(e,r,s,c));break}default:throw new H('Invalid or unsupported "alg" (JWE Algorithm) header value')}return{cek:s,encryptedKey:a,parameters:o}}class nq{_plaintext;_protectedHeader;_sharedUnprotectedHeader;_unprotectedHeader;_aad;_cek;_iv;_keyManagementParameters;constructor(e){if(!(e instanceof Uint8Array))throw TypeError("plaintext must be an instance of Uint8Array");this._plaintext=e}setKeyManagementParameters(e){if(this._keyManagementParameters)throw TypeError("setKeyManagementParameters can only be called once");return this._keyManagementParameters=e,this}setProtectedHeader(e){if(this._protectedHeader)throw TypeError("setProtectedHeader can only be called once");return this._protectedHeader=e,this}setSharedUnprotectedHeader(e){if(this._sharedUnprotectedHeader)throw TypeError("setSharedUnprotectedHeader can only be called once");return this._sharedUnprotectedHeader=e,this}setUnprotectedHeader(e){if(this._unprotectedHeader)throw TypeError("setUnprotectedHeader can only be called once");return this._unprotectedHeader=e,this}setAdditionalAuthenticatedData(e){return this._aad=e,this}setContentEncryptionKey(e){if(this._cek)throw TypeError("setContentEncryptionKey can only be called once");return this._cek=e,this}setInitializationVector(e){if(this._iv)throw TypeError("setInitializationVector can only be called once");return this._iv=e,this}async encrypt(e,t){let r,n,i,a,o;if(!this._protectedHeader&&!this._unprotectedHeader&&!this._sharedUnprotectedHeader)throw new j("either setProtectedHeader, setUnprotectedHeader, or sharedUnprotectedHeader must be called before #encrypt()");if(!eM(this._protectedHeader,this._unprotectedHeader,this._sharedUnprotectedHeader))throw new j("JWE Protected, JWE Shared Unprotected and JWE Per-Recipient Header Parameter names must be disjoint");let s={...this._protectedHeader,...this._unprotectedHeader,...this._sharedUnprotectedHeader};if(eF(j,new Map,t?.crit,this._protectedHeader,s),void 0!==s.zip)throw new H('JWE "zip" (Compression Algorithm) Header Parameter is not supported.');let{alg:c,enc:u}=s;if("string"!=typeof c||!c)throw new j('JWE "alg" (Algorithm) Header Parameter missing or invalid');if("string"!=typeof u||!u)throw new j('JWE "enc" (Encryption Algorithm) Header Parameter missing or invalid');if(this._cek&&("dir"===c||"ECDH-ES"===c))throw TypeError(`setContentEncryptionKey cannot be called with JWE "alg" (Algorithm) Header ${c}`);{let i;({cek:n,encryptedKey:r,parameters:i}=await nL(c,u,e,this._cek,this._keyManagementParameters)),i&&(t&&no in t?this._unprotectedHeader?this._unprotectedHeader={...this._unprotectedHeader,...i}:this.setUnprotectedHeader(i):this._protectedHeader?this._protectedHeader={...this._protectedHeader,...i}:this.setProtectedHeader(i))}a=this._protectedHeader?q.encode(ee(JSON.stringify(this._protectedHeader))):q.encode(""),this._aad?(o=ee(this._aad),i=B(a,q.encode("."),q.encode(o))):i=a;let{ciphertext:l,tag:d,iv:h}=await np(u,this._plaintext,n,this._iv,i),p={ciphertext:ee(l)};return h&&(p.iv=ee(h)),d&&(p.tag=ee(d)),r&&(p.encrypted_key=ee(r)),o&&(p.aad=o),this._protectedHeader&&(p.protected=z.decode(a)),this._sharedUnprotectedHeader&&(p.unprotected=this._sharedUnprotectedHeader),this._unprotectedHeader&&(p.header=this._unprotectedHeader),p}}class nz{_flattened;constructor(e){this._flattened=new nq(e)}setContentEncryptionKey(e){return this._flattened.setContentEncryptionKey(e),this}setInitializationVector(e){return this._flattened.setInitializationVector(e),this}setProtectedHeader(e){return this._flattened.setProtectedHeader(e),this}setKeyManagementParameters(e){return this._flattened.setKeyManagementParameters(e),this}async encrypt(e,t){let r=await this._flattened.encrypt(e,t);return[r.protected,r.encrypted_key,r.iv,r.ciphertext,r.tag].join(".")}}function nB(e,t){if(!Number.isFinite(t))throw TypeError(`Invalid ${e} input`);return t}class nG{_payload;constructor(e={}){if(!ei(e))throw TypeError("JWT Claims Set MUST be an object");this._payload=e}setIssuer(e){return this._payload={...this._payload,iss:e},this}setSubject(e){return this._payload={...this._payload,sub:e},this}setAudience(e){return this._payload={...this._payload,aud:e},this}setJti(e){return this._payload={...this._payload,jti:e},this}setNotBefore(e){return"number"==typeof e?this._payload={...this._payload,nbf:nB("setNotBefore",e)}:e instanceof Date?this._payload={...this._payload,nbf:nB("setNotBefore",eZ(e))}:this._payload={...this._payload,nbf:eZ(new Date)+e0(e)},this}setExpirationTime(e){return"number"==typeof e?this._payload={...this._payload,exp:nB("setExpirationTime",e)}:e instanceof Date?this._payload={...this._payload,exp:nB("setExpirationTime",eZ(e))}:this._payload={...this._payload,exp:eZ(new Date)+e0(e)},this}setIssuedAt(e){return void 0===e?this._payload={...this._payload,iat:eZ(new Date)}:e instanceof Date?this._payload={...this._payload,iat:nB("setIssuedAt",eZ(e))}:"string"==typeof e?this._payload={...this._payload,iat:nB("setIssuedAt",eZ(new Date)+e0(e))}:this._payload={...this._payload,iat:nB("setIssuedAt",e)},this}}class nF extends nG{_cek;_iv;_keyManagementParameters;_protectedHeader;_replicateIssuerAsHeader;_replicateSubjectAsHeader;_replicateAudienceAsHeader;setProtectedHeader(e){if(this._protectedHeader)throw TypeError("setProtectedHeader can only be called once");return this._protectedHeader=e,this}setKeyManagementParameters(e){if(this._keyManagementParameters)throw TypeError("setKeyManagementParameters can only be called once");return this._keyManagementParameters=e,this}setContentEncryptionKey(e){if(this._cek)throw TypeError("setContentEncryptionKey can only be called once");return this._cek=e,this}setInitializationVector(e){if(this._iv)throw TypeError("setInitializationVector can only be called once");return this._iv=e,this}replicateIssuerAsHeader(){return this._replicateIssuerAsHeader=!0,this}replicateSubjectAsHeader(){return this._replicateSubjectAsHeader=!0,this}replicateAudienceAsHeader(){return this._replicateAudienceAsHeader=!0,this}async encrypt(e,t){let r=new nz(q.encode(JSON.stringify(this._payload)));return this._replicateIssuerAsHeader&&(this._protectedHeader={...this._protectedHeader,iss:this._payload.iss}),this._replicateSubjectAsHeader&&(this._protectedHeader={...this._protectedHeader,sub:this._payload.sub}),this._replicateAudienceAsHeader&&(this._protectedHeader={...this._protectedHeader,aud:this._payload.aud}),r.setProtectedHeader(this._protectedHeader),this._iv&&r.setInitializationVector(this._iv),this._cek&&r.setContentEncryptionKey(this._cek),this._keyManagementParameters&&r.setKeyManagementParameters(this._keyManagementParameters),r.encrypt(e,t)}}async function nV(e,t,r,n,i){switch(eB(e,t,"decrypt"),t=await nj.normalizePrivateKey?.(t,e)||t,e){case"dir":if(void 0!==r)throw new j("Encountered unexpected JWE Encrypted Key");return t;case"ECDH-ES":if(void 0!==r)throw new j("Encountered unexpected JWE Encrypted Key");case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{let i,a;if(!ei(n.epk))throw new j('JOSE Header "epk" (Ephemeral Public Key) missing or invalid');if(!nS(t))throw new H("ECDH with the provided key is not allowed or not supported by your javascript runtime");let o=await eo(n.epk,e);if(void 0!==n.apu){if("string"!=typeof n.apu)throw new j('JOSE Header "apu" (Agreement PartyUInfo) invalid');try{i=et(n.apu)}catch{throw new j("Failed to base64url decode the apu")}}if(void 0!==n.apv){if("string"!=typeof n.apv)throw new j('JOSE Header "apv" (Agreement PartyVInfo) invalid');try{a=et(n.apv)}catch{throw new j("Failed to base64url decode the apv")}}let s=await ng(o,t,"ECDH-ES"===e?n.enc:e,"ECDH-ES"===e?nN(n.enc):parseInt(e.slice(-5,-2),10),i,a);if("ECDH-ES"===e)return s;if(void 0===r)throw new j("JWE Encrypted Key missing");return nm(e.slice(-6),s,r)}case"RSA1_5":case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":if(void 0===r)throw new j("JWE Encrypted Key missing");return nI(e,t,r);case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":{let a;if(void 0===r)throw new j("JWE Encrypted Key missing");if("number"!=typeof n.p2c)throw new j('JOSE Header "p2c" (PBES2 Count) missing or invalid');let o=i?.maxPBES2Count||1e4;if(n.p2c>o)throw new j('JOSE Header "p2c" (PBES2 Count) out is of acceptable bounds');if("string"!=typeof n.p2s)throw new j('JOSE Header "p2s" (PBES2 Salt) missing or invalid');try{a=et(n.p2s)}catch{throw new j("Failed to base64url decode the p2s")}return nT(e,t,r,n.p2c,a)}case"A128KW":case"A192KW":case"A256KW":if(void 0===r)throw new j("JWE Encrypted Key missing");return nm(e,t,r);case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":{let i,a;if(void 0===r)throw new j("JWE Encrypted Key missing");if("string"!=typeof n.iv)throw new j('JOSE Header "iv" (Initialization Vector) missing or invalid');if("string"!=typeof n.tag)throw new j('JOSE Header "tag" (Authentication Tag) missing or invalid');try{i=et(n.iv)}catch{throw new j("Failed to base64url decode the iv")}try{a=et(n.tag)}catch{throw new j("Failed to base64url decode the tag")}return nJ(e,t,r,i,a)}default:throw new H('Invalid or unsupported "alg" (JWE Algorithm) header value')}}async function nX(e,t,r){let n,i,a,o,s,c,u;if(!ei(e))throw new j("Flattened JWE must be an object");if(void 0===e.protected&&void 0===e.header&&void 0===e.unprotected)throw new j("JOSE Header missing");if(void 0!==e.iv&&"string"!=typeof e.iv)throw new j("JWE Initialization Vector incorrect type");if("string"!=typeof e.ciphertext)throw new j("JWE Ciphertext missing or incorrect type");if(void 0!==e.tag&&"string"!=typeof e.tag)throw new j("JWE Authentication Tag incorrect type");if(void 0!==e.protected&&"string"!=typeof e.protected)throw new j("JWE Protected Header incorrect type");if(void 0!==e.encrypted_key&&"string"!=typeof e.encrypted_key)throw new j("JWE Encrypted Key incorrect type");if(void 0!==e.aad&&"string"!=typeof e.aad)throw new j("JWE AAD incorrect type");if(void 0!==e.header&&!ei(e.header))throw new j("JWE Shared Unprotected Header incorrect type");if(void 0!==e.unprotected&&!ei(e.unprotected))throw new j("JWE Per-Recipient Unprotected Header incorrect type");if(e.protected)try{let t=et(e.protected);n=JSON.parse(z.decode(t))}catch{throw new j("JWE Protected Header is invalid")}if(!eM(n,e.header,e.unprotected))throw new j("JWE Protected, JWE Unprotected Header, and JWE Per-Recipient Unprotected Header Parameter names must be disjoint");let l={...n,...e.header,...e.unprotected};if(eF(j,new Map,r?.crit,n,l),void 0!==l.zip)throw new H('JWE "zip" (Compression Algorithm) Header Parameter is not supported.');let{alg:d,enc:h}=l;if("string"!=typeof d||!d)throw new j("missing JWE Algorithm (alg) in JWE Header");if("string"!=typeof h||!h)throw new j("missing JWE Encryption Algorithm (enc) in JWE Header");let p=r&&eV("keyManagementAlgorithms",r.keyManagementAlgorithms),f=r&&eV("contentEncryptionAlgorithms",r.contentEncryptionAlgorithms);if(p&&!p.has(d)||!p&&d.startsWith("PBES2"))throw new C('"alg" (Algorithm) Header Parameter value not allowed');if(f&&!f.has(h))throw new C('"enc" (Encryption Algorithm) Header Parameter value not allowed');if(void 0!==e.encrypted_key)try{i=et(e.encrypted_key)}catch{throw new j("Failed to base64url decode the encrypted_key")}let y=!1;"function"==typeof t&&(t=await t(n,e),y=!0);try{a=await nV(d,t,i,l,r)}catch(e){if(e instanceof TypeError||e instanceof j||e instanceof H)throw e;a=nD(h)}if(void 0!==e.iv)try{o=et(e.iv)}catch{throw new j("Failed to base64url decode the iv")}if(void 0!==e.tag)try{s=et(e.tag)}catch{throw new j("Failed to base64url decode the tag")}let w=q.encode(e.protected??"");c=void 0!==e.aad?B(w,q.encode("."),q.encode(e.aad)):w;try{u=et(e.ciphertext)}catch{throw new j("Failed to base64url decode the ciphertext")}let m={plaintext:await nM(h,a,u,o,s,c)};if(void 0!==e.protected&&(m.protectedHeader=n),void 0!==e.aad)try{m.additionalAuthenticatedData=et(e.aad)}catch{throw new j("Failed to base64url decode the aad")}return(void 0!==e.unprotected&&(m.sharedUnprotectedHeader=e.unprotected),void 0!==e.header&&(m.unprotectedHeader=e.header),y)?{...m,key:t}:m}async function nY(e,t,r){if(e instanceof Uint8Array&&(e=z.decode(e)),"string"!=typeof e)throw new j("Compact JWE must be a string or Uint8Array");let{0:n,1:i,2:a,3:o,4:s,length:c}=e.split(".");if(5!==c)throw new j("Invalid Compact JWE");let u=await nX({ciphertext:o,iv:a||void 0,protected:n,tag:s||void 0,encrypted_key:i||void 0},t,r),l={plaintext:u.plaintext,protectedHeader:u.protectedHeader};return"function"==typeof t?{...l,key:u.key}:l}async function nZ(e,t,r){let n=await nY(e,t,r),i=e5(n.protectedHeader,n.plaintext,r),{protectedHeader:a}=n;if(void 0!==a.iss&&a.iss!==i.iss)throw new P('replicated "iss" claim header parameter mismatch',i,"iss","mismatch");if(void 0!==a.sub&&a.sub!==i.sub)throw new P('replicated "sub" claim header parameter mismatch',i,"sub","mismatch");if(void 0!==a.aud&&JSON.stringify(a.aud)!==JSON.stringify(i.aud))throw new P('replicated "aud" claim header parameter mismatch',i,"aud","mismatch");let o={payload:i,protectedHeader:a};return"function"==typeof t?{...o,key:n.key}:o}let nQ="sha256",n0="JWE CEK";async function n1(e,t,r,n){let i=await na(nQ,t,"",n0,32);return(await new nF(e).setProtectedHeader({enc:"A256GCM",alg:"dir",...n}).setExpirationTime(r).encrypt(i)).toString()}async function n2(e,t,r){let n=await na(nQ,t,"",n0,32);return await nZ(e,n,{...r,clockTolerance:15})}let n5=e=>na("sha256",e,"","JWS Cookie Signing",32);async function n3(e,t,r){if(!t)return;let[n,i]=t.split("."),a={protected:ee(JSON.stringify({alg:"HS256",b64:!1,crit:["b64"]})),payload:`${e}=${n}`,signature:i},o=await n5(r);try{return await eX(a,o,{algorithms:["HS256"]}),n}catch(e){return}}let n4=RegExp("__(\\d+)$"),n6=/\.(\d+)$/,n8=(e,t)=>{let r=t?n6.exec(e):n4.exec(e);if(r)return parseInt(r[1],10)},n9=(e,t,r)=>{let n=new RegExp(r?`^${t}${n6.source}$`:`^${t}__\\d+$`);return e.getAll().filter(e=>n.test(e.name))};function n7(e,t,r){let n=t.get(e);if(n?.value)return n.value;let i=n9(t,e,r).sort((e,t)=>n8(e.name,r)-n8(t.name,r));if(0===i.length)return;let a=n8(i[i.length-1].name,r);return i.length!==a+1?void console.warn(`Incomplete chunked cookie '${e}': Found ${i.length} chunks, expected ${a+1}`):i.map(e=>e.value).join("")}function ie(e,t,r,n){r.delete(e),n9(t,e,n).forEach(e=>{r.delete(e.name)})}function it(e){e.headers.set("Cache-Control","private, no-cache, no-store, must-revalidate, max-age=0"),e.headers.set("Pragma","no-cache"),e.headers.set("Expires","0")}let ir=["sub","name","nickname","given_name","family_name","picture","email","email_verified","org_id"],ii=["client_id","redirect_uri","response_type","code_challenge","code_challenge_method","state","nonce"],ia="openid profile email offline_access";function io(e,t){return new URL(e&&e.startsWith("/")?e.substring(1,e.length):e,t&&!t.endsWith("/")?`${t}/`:t)}class is{constructor(e){if(this.fetch=e.fetch||fetch,this.jwksCache=e.jwksCache||{},this.allowInsecureRequests=e.allowInsecureRequests??!1,this.httpOptions=()=>{let t=new Headers,r=e.enableTelemetry??!0,n=e.httpTimeout??5e3;if(r){let e="nextjs-auth0",r=r5.rE;t.set("User-Agent",`${e}/${r}`),t.set("Auth0-Client",ic(JSON.stringify({name:e,version:r})))}return{signal:AbortSignal.timeout(n),headers:t}},this.allowInsecureRequests&&console.warn("allowInsecureRequests is enabled in a production environment. This is not recommended."),this.transactionStore=e.transactionStore,this.sessionStore=e.sessionStore,this.domain=e.domain,this.clientMetadata={client_id:e.clientId},this.clientSecret=e.clientSecret,this.authorizationParameters=e.authorizationParameters||{scope:ia},this.pushedAuthorizationRequests=e.pushedAuthorizationRequests??!1,this.clientAssertionSigningKey=e.clientAssertionSigningKey,this.clientAssertionSigningAlg=e.clientAssertionSigningAlg||"RS256",this.authorizationParameters.scope||(this.authorizationParameters.scope=ia),!this.authorizationParameters.scope.split(" ").map(e=>e.trim()).includes("openid"))throw Error("The 'openid' scope must be included in the set of scopes. See https://auth0.com/docs");this.appBaseUrl=e.appBaseUrl,this.signInReturnToPath=e.signInReturnToPath||"/",this.beforeSessionSaved=e.beforeSessionSaved,this.onCallback=e.onCallback||this.defaultOnCallback,this.routes={login:"/auth/login",logout:"/auth/logout",callback:"/auth/callback",backChannelLogout:"/auth/backchannel-logout",profile:process.env.NEXT_PUBLIC_PROFILE_ROUTE||"/auth/profile",accessToken:process.env.NEXT_PUBLIC_ACCESS_TOKEN_ROUTE||"/auth/access-token",...e.routes},this.enableAccessTokenEndpoint=e.enableAccessTokenEndpoint??!0}async handler(e){let{pathname:t}=e.nextUrl,r=r3(t),n=e.method;if("GET"===n&&r===this.routes.login)return this.handleLogin(e);{if("GET"===n&&r===this.routes.logout)return this.handleLogout(e);if("GET"===n&&r===this.routes.callback)return this.handleCallback(e);if("GET"===n&&r===this.routes.profile)return this.handleProfile(e);if("GET"===n&&r===this.routes.accessToken&&this.enableAccessTokenEndpoint)return this.handleAccessToken(e);if("POST"===n&&r===this.routes.backChannelLogout)return this.handleBackChannelLogout(e);let t=f.NextResponse.next(),i=await this.sessionStore.get(e.cookies);return i&&(await this.sessionStore.set(e.cookies,t.cookies,{...i}),it(t)),t}}async startInteractiveLogin(e={}){let t=io(this.routes.callback,this.appBaseUrl),r=this.signInReturnToPath;if(e.returnTo){let t=new URL(this.authorizationParameters.redirect_uri||this.appBaseUrl),n=function(e,t){let r;try{r=new URL(e,t)}catch(e){return}if(r.origin===t.origin)return r.toString()}(e.returnTo,t);n&&(r=n)}let n=tT(),i=await tR(n),a=tT(),o=tT(),s=new URLSearchParams;s.set("client_id",this.clientMetadata.client_id),s.set("redirect_uri",t.toString()),s.set("response_type","code"),s.set("code_challenge",i),s.set("code_challenge_method","S256"),s.set("state",a),s.set("nonce",o),Object.entries({...this.authorizationParameters,...e.authorizationParameters}).forEach(([e,t])=>{ii.includes(e)||null==t||s.set(e,String(t))});let c={nonce:o,maxAge:this.authorizationParameters.max_age,codeVerifier:n,responseType:"code",state:a,returnTo:r},[u,l]=await this.authorizationUrl(s);if(u)return new f.NextResponse("An error occured while trying to initiate the login request.",{status:500});let d=f.NextResponse.redirect(l.toString());return await this.transactionStore.save(d.cookies,c),d}async handleLogin(e){let t=Object.fromEntries(e.nextUrl.searchParams.entries()),r={authorizationParameters:this.pushedAuthorizationRequests?{}:t,returnTo:t.returnTo};return this.startInteractiveLogin(r)}async handleLogout(e){let t=await this.sessionStore.get(e.cookies),[r,n]=await this.discoverAuthorizationServerMetadata();if(r)return new f.NextResponse("An error occured while trying to initiate the logout request.",{status:500});let i=e.nextUrl.searchParams.get("returnTo")||this.appBaseUrl;if(!n.end_session_endpoint){console.warn("The Auth0 client does not have RP-initiated logout enabled, the user will be redirected to the `/v2/logout` endpoint instead. Learn how to enable it here: https://auth0.com/docs/authenticate/login/logout/log-users-out-of-auth0#enable-endpoint-discovery");let t=new URL("/v2/logout",this.issuer);t.searchParams.set("returnTo",i),t.searchParams.set("client_id",this.clientMetadata.client_id);let r=f.NextResponse.redirect(t);return await this.sessionStore.delete(e.cookies,r.cookies),await this.transactionStore.deleteAll(e.cookies,r.cookies),r}let a=new URL(n.end_session_endpoint);a.searchParams.set("client_id",this.clientMetadata.client_id),a.searchParams.set("post_logout_redirect_uri",i),t?.internal.sid&&a.searchParams.set("logout_hint",t.internal.sid),t?.tokenSet.idToken&&a.searchParams.set("id_token_hint",t?.tokenSet.idToken);let o=f.NextResponse.redirect(a);return await this.sessionStore.delete(e.cookies,o.cookies),it(o),await this.transactionStore.deleteAll(e.cookies,o.cookies),o}async handleCallback(e){let t,r,n=e.nextUrl.searchParams.get("state");if(!n)return this.onCallback(new b,{},null);let i=await this.transactionStore.get(e.cookies,n);if(!i)return this.onCallback(new g,{},null);let a=i.payload,o={returnTo:a.returnTo},[s,c]=await this.discoverAuthorizationServerMetadata();if(s)return this.onCallback(s,o,null);try{t=rX(c,this.clientMetadata,e.nextUrl.searchParams,a.state)}catch(e){return this.onCallback(new _({cause:new w({code:e.error,message:e.error_description})}),o,null)}let u=io(this.routes.callback,this.appBaseUrl),l=await ro(c,this.clientMetadata,await this.getClientAuth(),t,u.toString(),a.codeVerifier,{...this.httpOptions(),[tr]:this.fetch,[e7]:this.allowInsecureRequests});try{r=await rd(c,this.clientMetadata,l,{expectedNonce:a.nonce,maxAge:a.maxAge,requireIdToken:!0})}catch(e){return this.onCallback(new S({cause:new w({code:e.error,message:e.error_description})}),o,null)}let d=t7(r),h={user:d,tokenSet:{accessToken:r.access_token,idToken:r.id_token,scope:r.scope,refreshToken:r.refresh_token,expiresAt:Math.floor(Date.now()/1e3)+Number(r.expires_in)},internal:{sid:d.sid,createdAt:Math.floor(Date.now()/1e3)}},p=await this.onCallback(null,o,h);if(this.beforeSessionSaved)h={...await this.beforeSessionSaved(h,r.id_token??null),internal:h.internal};else h.user=Object.keys(d).reduce((e,t)=>(ir.includes(t)&&(e[t]=d[t]),e),{});return await this.sessionStore.set(e.cookies,p.cookies,h,!0),it(p),await this.transactionStore.delete(p.cookies,n),p}async handleProfile(e){let t=await this.sessionStore.get(e.cookies);if(!t)return new f.NextResponse(null,{status:401});let r=f.NextResponse.json(t?.user);return it(r),r}async handleAccessToken(e){let t=await this.sessionStore.get(e.cookies);if(!t)return f.NextResponse.json({error:{message:"The user does not have an active session.",code:d.MISSING_SESSION}},{status:401});let[r,n]=await this.getTokenSet(t.tokenSet);if(r)return f.NextResponse.json({error:{message:r.message,code:r.code}},{status:401});let i=f.NextResponse.json({token:n.accessToken,scope:n.scope,expires_at:n.expiresAt});return(n.accessToken!==t.tokenSet.accessToken||n.refreshToken!==t.tokenSet.refreshToken||n.expiresAt!==t.tokenSet.expiresAt)&&(await this.sessionStore.set(e.cookies,i.cookies,{...t,tokenSet:n}),it(i)),i}async handleBackChannelLogout(e){if(!this.sessionStore.store)return new f.NextResponse("A session data store is not configured.",{status:500});if(!this.sessionStore.store.deleteByLogoutToken)return new f.NextResponse("Back-channel logout is not supported by the session data store.",{status:500});let t=new URLSearchParams(await e.text()).get("logout_token");if(!t)return new f.NextResponse("Missing `logout_token` in the request body.",{status:400});let[r,n]=await this.verifyLogoutToken(t);return r?new f.NextResponse(r.message,{status:400}):(await this.sessionStore.store.deleteByLogoutToken(n),new f.NextResponse(null,{status:204}))}async getTokenSet(e,t){if(!e.refreshToken&&e.expiresAt<=Date.now()/1e3)return[new v(d.MISSING_REFRESH_TOKEN,"The access token has expired and a refresh token was not provided. The user needs to re-authenticate."),null];if(e.refreshToken&&(t||e.expiresAt<=Date.now()/1e3)){let t,[r,n]=await this.discoverAuthorizationServerMetadata();if(r)return console.error(r),[r,null];let i=await t6(n,this.clientMetadata,await this.getClientAuth(),e.refreshToken,{...this.httpOptions(),[tr]:this.fetch,[e7]:this.allowInsecureRequests});try{t=await rr(n,this.clientMetadata,i)}catch(e){return console.error(e),[new v(d.FAILED_TO_REFRESH_TOKEN,"The access token has expired and there was an error while trying to refresh it. Check the server logs for more information."),null]}let a=Math.floor(Date.now()/1e3)+Number(t.expires_in),o={...e,accessToken:t.access_token,idToken:t.id_token,expiresAt:a};return t.refresh_token?o.refreshToken=t.refresh_token:o.refreshToken=e.refreshToken,[null,o]}return[null,e]}async discoverAuthorizationServerMetadata(){if(this.authorizationServerMetadata)return[null,this.authorizationServerMetadata];let e=new URL(this.issuer);try{let t=await t_(e,{...this.httpOptions(),[tr]:this.fetch,[e7]:this.allowInsecureRequests}).then(t=>tv(e,t));return this.authorizationServerMetadata=t,[null,t]}catch(t){return console.error(`An error occured while performing the discovery request. Please make sure the AUTH0_DOMAIN environment variable is correctly configured  the format must be 'example.us.auth0.com'. issuer=${e.toString()}, error:`,t),[new m("Discovery failed for the OpenID Connect configuration."),null]}}async defaultOnCallback(e,t){return e?new f.NextResponse(e.message,{status:500}):f.NextResponse.redirect(io(t.returnTo||"/",this.appBaseUrl))}async verifyLogoutToken(e){let[t,r]=await this.discoverAuthorizationServerMetadata();if(t)return[t,null];let n=function(e,t){let r=new ep(e,t),n=async(e,t)=>r.getKey(e,t);return Object.defineProperties(n,{coolingDown:{get:()=>r.coolingDown(),enumerable:!0,configurable:!1},fresh:{get:()=>r.fresh(),enumerable:!0,configurable:!1},reload:{value:()=>r.reload(),enumerable:!0,configurable:!1,writable:!1},reloading:{get:()=>!!r._pendingFetch,enumerable:!0,configurable:!1},jwks:{value:()=>r._local?.jwks(),enumerable:!0,configurable:!1,writable:!1}}),n}(new URL(r.jwks_uri),{[eh]:this.jwksCache}),{payload:i}=await e3(e,n,{issuer:r.issuer,audience:this.clientMetadata.client_id,algorithms:["RS256"],requiredClaims:["iat"]});return"sid"in i||"sub"in i?"sid"in i&&"string"!=typeof i.sid?[new E('"sid" claim must be a string'),null]:"sub"in i&&"string"!=typeof i.sub?[new E('"sub" claim must be a string'),null]:"nonce"in i?[new E('"nonce" claim is prohibited'),null]:"events"in i?"object"!=typeof i.events||null===i.events?[new E('"events" claim must be an object'),null]:"http://schemas.openid.net/event/backchannel-logout"in i.events?"object"!=typeof i.events["http://schemas.openid.net/event/backchannel-logout"]?[new E('"http://schemas.openid.net/event/backchannel-logout" member in the "events" claim must be an object'),null]:[null,{sid:i.sid,sub:i.sub}]:[new E('"http://schemas.openid.net/event/backchannel-logout" member is missing in the "events" claim'),null]:[new E('"events" claim is missing'),null]:[new E('either "sid" or "sub" (or both) claims must be present'),null]}async authorizationUrl(e){let[t,r]=await this.discoverAuthorizationServerMetadata();if(t)return[t,null];if(this.pushedAuthorizationRequests&&!r.pushed_authorization_request_endpoint)return console.error("The Auth0 tenant does not have pushed authorization requests enabled. Learn how to enable it here: https://auth0.com/docs/get-started/applications/configure-par"),[Error("The authorization server does not support pushed authorization requests."),null];let n=new URL(r.authorization_endpoint);if(this.pushedAuthorizationRequests){let t,i=await t$(r,this.clientMetadata,await this.getClientAuth(),e,{...this.httpOptions(),[tr]:this.fetch,[e7]:this.allowInsecureRequests});try{t=await tX(r,this.clientMetadata,i)}catch(e){return[new _({cause:new w({code:e.error,message:e.error_description}),message:"An error occured while pushing the authorization request."}),null]}return n.searchParams.set("request_uri",t.request_uri),n.searchParams.set("client_id",this.clientMetadata.client_id),[null,n]}return n.search=e.toString(),[null,n]}async getClientAuth(){var e;if(!this.clientSecret&&!this.clientAssertionSigningKey)throw Error("The client secret or client assertion signing key must be provided.");let t=this.clientAssertionSigningKey;return!t||t instanceof CryptoKey||(t=await ea(t,this.clientAssertionSigningAlg)),t?function(e,t){var r;let{key:n,kid:i}=(r=e)instanceof CryptoKey?{key:r}:r?.key instanceof CryptoKey?(void 0!==r.kid&&tE(r.kid,'"kid"'),{key:r.key,kid:r.kid}):{};return tf(n,'"clientPrivateKey.key"'),async(e,t,r,a)=>{let o={alg:tx(n),kid:i},s=function(e,t){let r=tC()+tP(t);return{jti:tT(),aud:e.issuer,exp:r+60,iat:r,nbf:r,iss:t.client_id,sub:t.client_id}}(e,t);r.set("client_id",t.client_id),r.set("client_assertion_type","urn:ietf:params:oauth:client-assertion-type:jwt-bearer"),r.set("client_assertion",await tj(o,s,n))}}(t):(tE(e=this.clientSecret,'"clientSecret"'),(t,r,n,i)=>{n.set("client_id",r.client_id),n.set("client_secret",e)})}get issuer(){return this.domain.startsWith("http://")||this.domain.startsWith("https://")?this.domain:`https://${this.domain}`}async getConnectionTokenSet(e,t,r){if(!e.refreshToken&&(!t||t.expiresAt<=Date.now()/1e3))return[new k(h.MISSING_REFRESH_TOKEN,"A refresh token was not present, Connection Access Token requires a refresh token. The user needs to re-authenticate."),null];if(e.refreshToken&&(!t||t.expiresAt<=Date.now()/1e3)){let t,n=new URLSearchParams;n.append("connection",r.connection),n.append("subject_token_type","urn:ietf:params:oauth:token-type:refresh_token"),n.append("subject_token",e.refreshToken),n.append("requested_token_type","http://auth0.com/oauth/token-type/federated-connection-access-token"),r.login_hint&&n.append("login_hint",r.login_hint);let[i,a]=await this.discoverAuthorizationServerMetadata();if(i)return console.error(i),[i,null];let o=await rH(a,this.clientMetadata,await this.getClientAuth(),"urn:auth0:params:oauth:grant-type:token-exchange:federated-connection-access-token",n,{[tr]:this.fetch,[e7]:this.allowInsecureRequests});try{t=await rI(a,this.clientMetadata,o)}catch(e){return console.error(e),[new k(h.FAILED_TO_EXCHANGE,"There was an error trying to exchange the refresh token for a connection access token. Check the server logs for more information.",new w({code:e.error,message:e.error_description})),null]}return[null,{accessToken:t.access_token,expiresAt:Math.floor(Date.now()/1e3)+Number(t.expires_in),scope:t.scope,connection:r.connection}]}return[null,t]}}let ic=e=>{let t=new TextEncoder().encode(e),r=[];for(let e=0;e<t.length;e+=32768)r.push(String.fromCharCode.apply(null,t.subarray(e,e+32768)));return btoa(r.join(""))};class iu{constructor({secret:e,rolling:t=!0,absoluteDuration:r=259200,inactivityDuration:n=86400,store:i,cookieOptions:a}){this.secret=e,this.rolling=t,this.absoluteDuration=r,this.inactivityDuration=n,this.store=i,this.sessionCookieName=a?.name??"__session",this.cookieConfig={httpOnly:!0,sameSite:a?.sameSite??"lax",secure:a?.secure??!1,path:a?.path??"/",domain:a?.domain,transient:a?.transient}}epoch(){return Date.now()/1e3|0}calculateMaxAge(e){if(!this.rolling)return this.absoluteDuration;let t=Math.min(this.epoch()+this.inactivityDuration,e+this.absoluteDuration)-this.epoch();return t>0?t:0}}let il="appSession";function id(e,t){let r=t.user;return{user:r,tokenSet:{idToken:t.idToken??void 0,accessToken:t.accessToken??void 0,scope:t.accessTokenScope,refreshToken:t.refreshToken,expiresAt:t.accessTokenExpiresAt},internal:{sid:r.sid,createdAt:e.iat}}}let ih=()=>{let e=new Uint8Array(16);return crypto.getRandomValues(e),Array.from(e).map(e=>e.toString(16).padStart(2,"0")).join("")};class ip extends iu{constructor({secret:e,store:t,rolling:r,absoluteDuration:n,inactivityDuration:i,cookieOptions:a}){super({secret:e,rolling:r,absoluteDuration:n,inactivityDuration:i,cookieOptions:a}),this.store=t}async get(e){let t=e.get(this.sessionCookieName)||e.get(il);if(!t||!t.value)return null;let r=null;try{let{payload:e}=await n2(t.value,this.secret);r=e.id}catch(e){if("ERR_JWE_INVALID"===e.code){let e=await n3(t.name,t.value,this.secret);if(!e)return null;r=e}}if(!r)return null;let n=await this.store.get(r);return n?n.header?.iat?id(n.header,n.data):n:null}async set(e,t,r,n=!1){let i=null,a=e.get(this.sessionCookieName)?.value;if(a){let{payload:e}=await n2(a,this.secret);i=e.id}i&&n&&(await this.store.delete(i),i=ih()),i||(i=ih());let o=this.calculateMaxAge(r.internal.createdAt),s=Date.now()/1e3+o,c=await n1({id:i},this.secret,s);t.set(this.sessionCookieName,c.toString(),{...this.cookieConfig,maxAge:o}),await this.store.set(i,r),e.set(this.sessionCookieName,c.toString()),this.sessionCookieName!==il&&e.has(il)&&t.delete(il)}async delete(e,t){let r=e.get(this.sessionCookieName)?.value;if(await t.delete(this.sessionCookieName),!r)return;let{payload:n}=await n2(r,this.secret);await this.store.delete(n.id)}}class iy extends iu{constructor({secret:e,rolling:t,absoluteDuration:r,inactivityDuration:n,cookieOptions:i}){super({secret:e,rolling:t,absoluteDuration:r,inactivityDuration:n,cookieOptions:i}),this.connectionTokenSetsCookieName="__FC"}async get(e){var t;let r=n7(this.sessionCookieName,e)??n7(il,e,!0);if(!r)return null;let n=(t=await n2(r,this.secret)).protectedHeader.iat?id(t.protectedHeader,t.payload):t.payload,i=await Promise.all(this.getConnectionTokenSetsCookies(e).map(e=>n2(e.value,this.secret)));return{...n,...i.length?{connectionTokenSets:i.map(e=>e.payload)}:{}}}async set(e,t,r){let{connectionTokenSets:n,...i}=r,a=this.calculateMaxAge(r.internal.createdAt),o=Math.floor(Date.now()/1e3)+a,s=(await n1(i,this.secret,o)).toString(),c={...this.cookieConfig,maxAge:a};!function(e,t,r,n,i){let{transient:a,...o}=r,s={...o};if(a&&delete s.maxAge,new TextEncoder().encode(t).length<=3500){i.set(e,t,s),n.set(e,t),n9(n,e).forEach(e=>{i.delete(e.name),n.delete(e.name)});return}let c=0,u=0;for(;c<t.length;){let r=t.slice(c,c+3500),a=`${e}__${u}`;i.set(a,r,s),n.set(a,r),c+=3500,u++}let l=n9(n,e).length-u;if(l>0)for(let t=0;t<l;t++){let r=u+t,a=`${e}__${r}`;i.delete(a),n.delete(a)}i.delete(e),n.delete(e)}(this.sessionCookieName,s,c,e,t),n?.length&&await Promise.all(n.map((r,n)=>this.storeInCookie(e,t,r,`${this.connectionTokenSetsCookieName}_${n}`,a))),ie(il,e,t,!0)}async delete(e,t){ie(this.sessionCookieName,e,t),this.getConnectionTokenSetsCookies(e).forEach(e=>t.delete(e.name))}async storeInCookie(e,t,r,n,i){let a=Math.floor(Date.now()/1e3+i),o=await n1(r,this.secret,a),s=o.toString();t.set(n,o.toString(),{...this.cookieConfig,maxAge:i}),e.set(n,s);let c=new ne(new Headers);c.set(n,s,{...this.cookieConfig,maxAge:i}),new TextEncoder().encode(c.toString()).length>=4096&&(n===this.sessionCookieName?console.warn(`The ${n} cookie size exceeds 4096 bytes, which may cause issues in some browsers. Consider removing any unnecessary custom claims from the access token or the user profile. Alternatively, you can use a stateful session implementation to store the session data in a data store.`):console.warn(`The ${n} cookie size exceeds 4096 bytes, which may cause issues in some browsers. You can use a stateful session implementation to store the session data in a data store.`))}getConnectionTokenSetsCookies(e){return e.getAll().filter(e=>e.name.startsWith(this.connectionTokenSetsCookieName))}}class iw{constructor({secret:e,cookieOptions:t}){this.secret=e,this.transactionCookiePrefix=t?.prefix??"__txn_",this.cookieConfig={httpOnly:!0,sameSite:t?.sameSite??"lax",secure:t?.secure??!1,path:t?.path??"/",maxAge:3600}}getTransactionCookieName(e){return`${this.transactionCookiePrefix}${e}`}getCookiePrefix(){return this.transactionCookiePrefix}async save(e,t){let r=Math.floor(Date.now()/1e3+this.cookieConfig.maxAge),n=await n1(t,this.secret,r);if(!t.state)throw Error("Transaction state is required");e.set(this.getTransactionCookieName(t.state),n.toString(),this.cookieConfig)}async get(e,t){let r=this.getTransactionCookieName(t),n=e.get(r)?.value;return n?n2(n,this.secret):null}async delete(e,t){await e.delete(this.getTransactionCookieName(t))}async deleteAll(e,t){let r=this.getCookiePrefix();e.getAll().forEach(e=>{e.name.startsWith(r)&&t.delete(e.name)})}}class im{constructor(e={}){let{domain:t,clientId:r,clientSecret:n,appBaseUrl:i,secret:a,clientAssertionSigningKey:o}=this.validateAndExtractRequiredOptions(e),s=e.clientAssertionSigningAlg||process.env.AUTH0_CLIENT_ASSERTION_SIGNING_ALG,c={name:e.session?.cookie?.name??"__session",secure:e.session?.cookie?.secure??"true"===process.env.AUTH0_COOKIE_SECURE,sameSite:e.session?.cookie?.sameSite??process.env.AUTH0_COOKIE_SAME_SITE??"lax",path:e.session?.cookie?.path??process.env.AUTH0_COOKIE_PATH??"/",transient:e.session?.cookie?.transient??"true"===process.env.AUTH0_COOKIE_TRANSIENT,domain:e.session?.cookie?.domain??process.env.AUTH0_COOKIE_DOMAIN},u={prefix:e.transactionCookie?.prefix??"__txn_",secure:e.transactionCookie?.secure??!1,sameSite:e.transactionCookie?.sameSite??"lax",path:e.transactionCookie?.path??"/"};if(i){let{protocol:e}=new URL(i);"https:"===e&&(c.secure=!0,u.secure=!0)}this.transactionStore=new iw({...e.session,secret:a,cookieOptions:u}),this.sessionStore=e.sessionStore?new ip({...e.session,secret:a,store:e.sessionStore,cookieOptions:c}):new iy({...e.session,secret:a,cookieOptions:c}),this.authClient=new is({transactionStore:this.transactionStore,sessionStore:this.sessionStore,domain:t,clientId:r,clientSecret:n,clientAssertionSigningKey:o,clientAssertionSigningAlg:s,authorizationParameters:e.authorizationParameters,pushedAuthorizationRequests:e.pushedAuthorizationRequests,appBaseUrl:i,secret:a,signInReturnToPath:e.signInReturnToPath,beforeSessionSaved:e.beforeSessionSaved,onCallback:e.onCallback,routes:e.routes,allowInsecureRequests:e.allowInsecureRequests,httpTimeout:e.httpTimeout,enableTelemetry:e.enableTelemetry,enableAccessTokenEndpoint:e.enableAccessTokenEndpoint})}middleware(e){return this.authClient.handler.bind(this.authClient)(e)}async getSession(e){return e?e instanceof f.NextRequest?this.sessionStore.get(e.cookies):this.sessionStore.get(this.createRequestCookies(e)):this.sessionStore.get(await (0,p.U)())}async getAccessToken(e,t,r){let n,i,a={refresh:!1},o={};if(e&&(e instanceof Request||"object"==typeof e.headers)){if(n=e,i=t,o={...a,...r??{}},!i)throw TypeError("getAccessToken(req, res): The 'res' argument is missing. Both 'req' and 'res' must be provided together for Pages Router or middleware usage.")}else{if(void 0!==t||void 0!==r)throw TypeError("getAccessToken: Invalid arguments. Valid signatures are getAccessToken(), getAccessToken(options), or getAccessToken(req, res, options).");o={...a,...e??{}}}let s=n?await this.getSession(n):await this.getSession();if(!s)throw new v(d.MISSING_SESSION,"The user does not have an active session.");let[c,u]=await this.authClient.getTokenSet(s.tokenSet,o.refresh);if(c)throw c;return(u.accessToken!==s.tokenSet.accessToken||u.expiresAt!==s.tokenSet.expiresAt||u.refreshToken!==s.tokenSet.refreshToken)&&await this.saveToSession({...s,tokenSet:u},n,i),{token:u.accessToken,scope:u.scope,expiresAt:u.expiresAt}}async getAccessTokenForConnection(e,t,r){let n=t?await this.getSession(t):await this.getSession();if(!n)throw new k(h.MISSING_SESSION,"The user does not have an active session.");let i=n.connectionTokenSets?.find(t=>t.connection===e.connection),[a,o]=await this.authClient.getConnectionTokenSet(n.tokenSet,i,e);if(null!==a)throw a;if(o&&(!i||o.accessToken!==i.accessToken||o.expiresAt!==i.expiresAt||o.scope!==i.scope)){let a;a=i?n.connectionTokenSets?.map(t=>t.connection===e.connection?o:t):[...n.connectionTokenSets||[],o],await this.saveToSession({...n,connectionTokenSets:a},t,r)}return{token:o.accessToken,scope:o.scope,expiresAt:o.expiresAt}}async updateSession(e,t,r){if(t){if(!r)throw Error("The session data is missing.");if(e instanceof f.NextRequest&&t instanceof f.NextResponse){let n=await this.getSession(e);if(!n)throw Error("The user is not authenticated.");await this.sessionStore.set(e.cookies,t.cookies,{...r,internal:{...n.internal}})}else{let n=await this.getSession(e);if(!n)throw Error("The user is not authenticated.");let i=new Headers,a=new ne(i),o=this.createRequestCookies(e);for(let[e,s]of(await this.sessionStore.set(o,a,{...r,internal:{...n.internal}}),i.entries()))t.setHeader(e,s)}}else{let t=await this.getSession();if(!t)throw Error("The user is not authenticated.");if(!e)throw Error("The session data is missing.");await this.sessionStore.set(await (0,p.U)(),await (0,p.U)(),{...e,internal:{...t.internal}})}}createRequestCookies(e){let t=new Headers;for(let r in e.headers)if(Array.isArray(e.headers[r]))for(let n of e.headers[r])t.append(r,n);else t.append(r,e.headers[r]??"");return new r7(t)}async startInteractiveLogin(e){return this.authClient.startInteractiveLogin(e)}async saveToSession(e,t,r){if(t&&r)if(t instanceof f.NextRequest&&r instanceof f.NextResponse)await this.sessionStore.set(t.cookies,r.cookies,e);else{let n=new Headers,i=new ne(n);for(let[a,o]of(await this.sessionStore.set(this.createRequestCookies(t),i,e),n.entries()))r.setHeader(a,o)}else try{await this.sessionStore.set(await (0,p.U)(),await (0,p.U)(),e)}catch(e){}}validateAndExtractRequiredOptions(e){let t={domain:e.domain??process.env.AUTH0_DOMAIN,clientId:e.clientId??process.env.AUTH0_CLIENT_ID,appBaseUrl:e.appBaseUrl??process.env.APP_BASE_URL,secret:e.secret??process.env.AUTH0_SECRET},r=e.clientSecret??process.env.AUTH0_CLIENT_SECRET,n=e.clientAssertionSigningKey??process.env.AUTH0_CLIENT_ASSERTION_SIGNING_KEY,i=Object.entries(t).filter(([,e])=>!e).map(([e])=>e);if(r||n||i.push("clientAuthentication"),i.length){let e={domain:"AUTH0_DOMAIN",clientId:"AUTH0_CLIENT_ID",appBaseUrl:"APP_BASE_URL",secret:"AUTH0_SECRET"},t="WARNING: Not all required options where provided when creating an instance of Auth0Client. Ensure to provide all missing options, either by passing it to the Auth0Client constructor, or by setting the corresponding environment variable.\n";i.forEach(r=>{"clientAuthentication"===r?t+=`Missing: clientAuthentication: Set either AUTH0_CLIENT_SECRET env var or AUTH0_CLIENT_ASSERTION_SIGNING_KEY env var, or pass clientSecret or clientAssertionSigningKey in options
`:e[r]?t+=`Missing: ${r}: Set ${e[r]} env var or pass ${r} in options
`:t+=`Missing: ${r}
`}),console.error(t.trim())}return{...t,clientSecret:r,clientAssertionSigningKey:n}}}},99933:(e,t,r)=>{"use strict";Object.defineProperty(t,"U",{enumerable:!0,get:function(){return h}});let n=r(94069),i=r(23158),a=r(29294),o=r(63033),s=r(84971),c=r(80023),u=r(68388),l=r(76926),d=(r(44523),r(8719));function h(){let e="cookies",t=a.workAsyncStorage.getStore(),r=o.workUnitAsyncStorage.getStore();if(t){if(r&&"after"===r.phase&&!(0,d.isRequestAPICallableInsideAfter)())throw Object.defineProperty(Error(`Route ${t.route} used "cookies" inside "after(...)". This is not supported. If you need this data inside an "after" callback, use "cookies" outside of the callback. See more info here: https://nextjs.org/docs/canary/app/api-reference/functions/after`),"__NEXT_ERROR_CODE",{value:"E88",enumerable:!1,configurable:!0});if(t.forceStatic)return f(n.RequestCookiesAdapter.seal(new i.RequestCookies(new Headers({}))));if(r){if("cache"===r.type)throw Object.defineProperty(Error(`Route ${t.route} used "cookies" inside "use cache". Accessing Dynamic data sources inside a cache scope is not supported. If you need this data inside a cached function use "cookies" outside of the cached function and pass the required dynamic data in as an argument. See more info here: https://nextjs.org/docs/messages/next-request-in-use-cache`),"__NEXT_ERROR_CODE",{value:"E398",enumerable:!1,configurable:!0});else if("unstable-cache"===r.type)throw Object.defineProperty(Error(`Route ${t.route} used "cookies" inside a function cached with "unstable_cache(...)". Accessing Dynamic data sources inside a cache scope is not supported. If you need this data inside a cached function use "cookies" outside of the cached function and pass the required dynamic data in as an argument. See more info here: https://nextjs.org/docs/app/api-reference/functions/unstable_cache`),"__NEXT_ERROR_CODE",{value:"E157",enumerable:!1,configurable:!0})}if(t.dynamicShouldError)throw Object.defineProperty(new c.StaticGenBailoutError(`Route ${t.route} with \`dynamic = "error"\` couldn't be rendered statically because it used \`cookies\`. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`),"__NEXT_ERROR_CODE",{value:"E549",enumerable:!1,configurable:!0});if(r)if("prerender"===r.type){var l=t.route,h=r;let e=p.get(h);if(e)return e;let n=(0,u.makeHangingPromise)(h.renderSignal,"`cookies()`");return p.set(h,n),Object.defineProperties(n,{[Symbol.iterator]:{value:function(){let e="`cookies()[Symbol.iterator]()`",t=m(l,e);(0,s.abortAndThrowOnSynchronousRequestDataAccess)(l,e,t,h)}},size:{get(){let e="`cookies().size`",t=m(l,e);(0,s.abortAndThrowOnSynchronousRequestDataAccess)(l,e,t,h)}},get:{value:function(){let e;e=0==arguments.length?"`cookies().get()`":`\`cookies().get(${y(arguments[0])})\``;let t=m(l,e);(0,s.abortAndThrowOnSynchronousRequestDataAccess)(l,e,t,h)}},getAll:{value:function(){let e;e=0==arguments.length?"`cookies().getAll()`":`\`cookies().getAll(${y(arguments[0])})\``;let t=m(l,e);(0,s.abortAndThrowOnSynchronousRequestDataAccess)(l,e,t,h)}},has:{value:function(){let e;e=0==arguments.length?"`cookies().has()`":`\`cookies().has(${y(arguments[0])})\``;let t=m(l,e);(0,s.abortAndThrowOnSynchronousRequestDataAccess)(l,e,t,h)}},set:{value:function(){let e;if(0==arguments.length)e="`cookies().set()`";else{let t=arguments[0];e=t?`\`cookies().set(${y(t)}, ...)\``:"`cookies().set(...)`"}let t=m(l,e);(0,s.abortAndThrowOnSynchronousRequestDataAccess)(l,e,t,h)}},delete:{value:function(){let e;e=0==arguments.length?"`cookies().delete()`":1==arguments.length?`\`cookies().delete(${y(arguments[0])})\``:`\`cookies().delete(${y(arguments[0])}, ...)\``;let t=m(l,e);(0,s.abortAndThrowOnSynchronousRequestDataAccess)(l,e,t,h)}},clear:{value:function(){let e="`cookies().clear()`",t=m(l,e);(0,s.abortAndThrowOnSynchronousRequestDataAccess)(l,e,t,h)}},toString:{value:function(){let e="`cookies().toString()`",t=m(l,e);(0,s.abortAndThrowOnSynchronousRequestDataAccess)(l,e,t,h)}}}),n}else"prerender-ppr"===r.type?(0,s.postponeWithTracking)(t.route,e,r.dynamicTracking):"prerender-legacy"===r.type&&(0,s.throwToInterruptStaticGeneration)(e,t,r);(0,s.trackDynamicDataInDynamicRender)(t,r)}let w=(0,o.getExpectedRequestStore)(e);return f((0,n.areCookiesMutableInCurrentPhase)(w)?w.userspaceMutableCookies:w.cookies)}let p=new WeakMap;function f(e){let t=p.get(e);if(t)return t;let r=Promise.resolve(e);return p.set(e,r),Object.defineProperties(r,{[Symbol.iterator]:{value:e[Symbol.iterator]?e[Symbol.iterator].bind(e):b.bind(e)},size:{get:()=>e.size},get:{value:e.get.bind(e)},getAll:{value:e.getAll.bind(e)},has:{value:e.has.bind(e)},set:{value:e.set.bind(e)},delete:{value:e.delete.bind(e)},clear:{value:"function"==typeof e.clear?e.clear.bind(e):g.bind(e,r)},toString:{value:e.toString.bind(e)}}),r}function y(e){return"object"==typeof e&&null!==e&&"string"==typeof e.name?`'${e.name}'`:"string"==typeof e?`'${e}'`:"..."}let w=(0,l.createDedupedByCallsiteServerErrorLoggerDev)(m);function m(e,t){let r=e?`Route "${e}" `:"This route ";return Object.defineProperty(Error(`${r}used ${t}. \`cookies()\` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis`),"__NEXT_ERROR_CODE",{value:"E223",enumerable:!1,configurable:!0})}function b(){return this.getAll().map(e=>[e.name,e]).values()}function g(e){for(let e of this.getAll())this.delete(e.name);return e}}};
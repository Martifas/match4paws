(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[550],{35:(e,t)=>{"use strict";var r={H:null,A:null};function n(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=Array.isArray,a=Symbol.for("react.transitional.element"),o=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),c=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),f=Symbol.iterator,g=Object.prototype.hasOwnProperty,m=Object.assign;function y(e,t,r,n,i,o){return{$$typeof:a,type:e,key:t,ref:void 0!==(r=o.ref)?r:null,props:o}}function w(e){return"object"==typeof e&&null!==e&&e.$$typeof===a}var b=/\/+/g;function _(e,t){var r,n;return"object"==typeof e&&null!==e&&null!=e.key?(r=""+e.key,n={"=":"=0",":":"=2"},"$"+r.replace(/[=:]/g,function(e){return n[e]})):t.toString(36)}function v(){}function S(e,t,r){if(null==e)return e;var s=[],c=0;return!function e(t,r,s,c,l){var u,d,h,g=typeof t;("undefined"===g||"boolean"===g)&&(t=null);var m=!1;if(null===t)m=!0;else switch(g){case"bigint":case"string":case"number":m=!0;break;case"object":switch(t.$$typeof){case a:case o:m=!0;break;case p:return e((m=t._init)(t._payload),r,s,c,l)}}if(m)return l=l(t),m=""===c?"."+_(t,0):c,i(l)?(s="",null!=m&&(s=m.replace(b,"$&/")+"/"),e(l,r,s,"",function(e){return e})):null!=l&&(w(l)&&(u=l,d=s+(null==l.key||t&&t.key===l.key?"":(""+l.key).replace(b,"$&/")+"/")+m,l=y(u.type,d,void 0,void 0,void 0,u.props)),r.push(l)),1;m=0;var S=""===c?".":c+":";if(i(t))for(var E=0;E<t.length;E++)g=S+_(c=t[E],E),m+=e(c,r,s,g,l);else if("function"==typeof(E=null===(h=t)||"object"!=typeof h?null:"function"==typeof(h=f&&h[f]||h["@@iterator"])?h:null))for(t=E.call(t),E=0;!(c=t.next()).done;)g=S+_(c=c.value,E++),m+=e(c,r,s,g,l);else if("object"===g){if("function"==typeof t.then)return e(function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch("string"==typeof e.status?e.then(v,v):(e.status="pending",e.then(function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)},function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}(t),r,s,c,l);throw Error(n(31,"[object Object]"===(r=String(t))?"object with keys {"+Object.keys(t).join(", ")+"}":r))}return m}(e,s,"","",function(e){return t.call(r,e,c++)}),s}function E(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){(0===e._status||-1===e._status)&&(e._status=1,e._result=t)},function(t){(0===e._status||-1===e._status)&&(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}function A(){return new WeakMap}function T(){return{s:0,v:void 0,o:null,p:null}}t.Children={map:S,forEach:function(e,t,r){S(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return S(e,function(){t++}),t},toArray:function(e){return S(e,function(e){return e})||[]},only:function(e){if(!w(e))throw Error(n(143));return e}},t.Fragment=s,t.Profiler=l,t.StrictMode=c,t.Suspense=d,t.__SERVER_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,t.cache=function(e){return function(){var t=r.A;if(!t)return e.apply(null,arguments);var n=t.getCacheForType(A);void 0===(t=n.get(e))&&(t=T(),n.set(e,t)),n=0;for(var i=arguments.length;n<i;n++){var a=arguments[n];if("function"==typeof a||"object"==typeof a&&null!==a){var o=t.o;null===o&&(t.o=o=new WeakMap),void 0===(t=o.get(a))&&(t=T(),o.set(a,t))}else null===(o=t.p)&&(t.p=o=new Map),void 0===(t=o.get(a))&&(t=T(),o.set(a,t))}if(1===t.s)return t.v;if(2===t.s)throw t.v;try{var s=e.apply(null,arguments);return(n=t).s=1,n.v=s}catch(e){throw(s=t).s=2,s.v=e,e}}},t.captureOwnerStack=function(){return null},t.cloneElement=function(e,t,r){if(null==e)throw Error(n(267,e));var i=m({},e.props),a=e.key,o=void 0;if(null!=t)for(s in void 0!==t.ref&&(o=void 0),void 0!==t.key&&(a=""+t.key),t)g.call(t,s)&&"key"!==s&&"__self"!==s&&"__source"!==s&&("ref"!==s||void 0!==t.ref)&&(i[s]=t[s]);var s=arguments.length-2;if(1===s)i.children=r;else if(1<s){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+2];i.children=c}return y(e.type,a,void 0,void 0,o,i)},t.createElement=function(e,t,r){var n,i={},a=null;if(null!=t)for(n in void 0!==t.key&&(a=""+t.key),t)g.call(t,n)&&"key"!==n&&"__self"!==n&&"__source"!==n&&(i[n]=t[n]);var o=arguments.length-2;if(1===o)i.children=r;else if(1<o){for(var s=Array(o),c=0;c<o;c++)s[c]=arguments[c+2];i.children=s}if(e&&e.defaultProps)for(n in o=e.defaultProps)void 0===i[n]&&(i[n]=o[n]);return y(e,a,void 0,void 0,null,i)},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:u,render:e}},t.isValidElement=w,t.lazy=function(e){return{$$typeof:p,_payload:{_status:-1,_result:e},_init:E}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.use=function(e){return r.H.use(e)},t.useCallback=function(e,t){return r.H.useCallback(e,t)},t.useDebugValue=function(){},t.useId=function(){return r.H.useId()},t.useMemo=function(e,t){return r.H.useMemo(e,t)},t.version="19.2.0-canary-3fbfb9ba-20250409"},201:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{getTestReqInfo:function(){return o},withRequest:function(){return a}});let n=new(r(521)).AsyncLocalStorage;function i(e,t){let r=t.header(e,"next-test-proxy-port");if(!r)return;let n=t.url(e);return{url:n,proxyPort:Number(r),testData:t.header(e,"next-test-data")||""}}function a(e,t,r){let a=i(e,t);return a?n.run(a,r):r()}function o(e,t){let r=n.getStore();return r||(e&&t?i(e,t):void 0)}},280:(e,t,r)=>{var n;(()=>{var i={226:function(i,a){!function(o,s){"use strict";var c="function",l="undefined",u="object",d="string",h="major",p="model",f="name",g="type",m="vendor",y="version",w="architecture",b="console",_="mobile",v="tablet",S="smarttv",E="wearable",A="embedded",T="Amazon",k="Apple",R="ASUS",C="BlackBerry",x="Browser",P="Chrome",O="Firefox",N="Google",I="Huawei",M="Microsoft",D="Motorola",j="Opera",H="Samsung",L="Sharp",U="Sony",W="Xiaomi",$="Zebra",K="Facebook",q="Chromium OS",B="Mac OS",J=function(e,t){var r={};for(var n in e)t[n]&&t[n].length%2==0?r[n]=t[n].concat(e[n]):r[n]=e[n];return r},z=function(e){for(var t={},r=0;r<e.length;r++)t[e[r].toUpperCase()]=e[r];return t},V=function(e,t){return typeof e===d&&-1!==G(t).indexOf(G(e))},G=function(e){return e.toLowerCase()},F=function(e,t){if(typeof e===d)return e=e.replace(/^\s\s*/,""),typeof t===l?e:e.substring(0,350)},X=function(e,t){for(var r,n,i,a,o,l,d=0;d<t.length&&!o;){var h=t[d],p=t[d+1];for(r=n=0;r<h.length&&!o&&h[r];)if(o=h[r++].exec(e))for(i=0;i<p.length;i++)l=o[++n],typeof(a=p[i])===u&&a.length>0?2===a.length?typeof a[1]==c?this[a[0]]=a[1].call(this,l):this[a[0]]=a[1]:3===a.length?typeof a[1]!==c||a[1].exec&&a[1].test?this[a[0]]=l?l.replace(a[1],a[2]):void 0:this[a[0]]=l?a[1].call(this,l,a[2]):void 0:4===a.length&&(this[a[0]]=l?a[3].call(this,l.replace(a[1],a[2])):s):this[a]=l||s;d+=2}},Y=function(e,t){for(var r in t)if(typeof t[r]===u&&t[r].length>0){for(var n=0;n<t[r].length;n++)if(V(t[r][n],e))return"?"===r?s:r}else if(V(t[r],e))return"?"===r?s:r;return e},Q={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},Z={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[y,[f,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[y,[f,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[f,y],[/opios[\/ ]+([\w\.]+)/i],[y,[f,j+" Mini"]],[/\bopr\/([\w\.]+)/i],[y,[f,j]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[f,y],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[y,[f,"UC"+x]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i],[y,[f,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[y,[f,"WeChat"]],[/konqueror\/([\w\.]+)/i],[y,[f,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[y,[f,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[y,[f,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[f,/(.+)/,"$1 Secure "+x],y],[/\bfocus\/([\w\.]+)/i],[y,[f,O+" Focus"]],[/\bopt\/([\w\.]+)/i],[y,[f,j+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[y,[f,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[y,[f,"Dolphin"]],[/coast\/([\w\.]+)/i],[y,[f,j+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[y,[f,"MIUI "+x]],[/fxios\/([-\w\.]+)/i],[y,[f,O]],[/\bqihu|(qi?ho?o?|360)browser/i],[[f,"360 "+x]],[/(oculus|samsung|sailfish|huawei)browser\/([\w\.]+)/i],[[f,/(.+)/,"$1 "+x],y],[/(comodo_dragon)\/([\w\.]+)/i],[[f,/_/g," "],y],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[f,y],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i,/\[(linkedin)app\]/i],[f],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[f,K],y],[/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[f,y],[/\bgsa\/([\w\.]+) .*safari\//i],[y,[f,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[y,[f,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[y,[f,P+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[f,P+" WebView"],y],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[y,[f,"Android "+x]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[f,y],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[y,[f,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[y,f],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[f,[y,Y,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[f,y],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[f,"Netscape"],y],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[y,[f,O+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[f,y],[/(cobalt)\/([\w\.]+)/i],[f,[y,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[w,"amd64"]],[/(ia32(?=;))/i],[[w,G]],[/((?:i[346]|x)86)[;\)]/i],[[w,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[w,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[w,"armhf"]],[/windows (ce|mobile); ppc;/i],[[w,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[w,/ower/,"",G]],[/(sun4\w)[;\)]/i],[[w,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[w,G]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[p,[m,H],[g,v]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[p,[m,H],[g,_]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[p,[m,k],[g,_]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[p,[m,k],[g,v]],[/(macintosh);/i],[p,[m,k]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[p,[m,L],[g,_]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[p,[m,I],[g,v]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[p,[m,I],[g,_]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[p,/_/g," "],[m,W],[g,_]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[p,/_/g," "],[m,W],[g,v]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[p,[m,"OPPO"],[g,_]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[p,[m,"Vivo"],[g,_]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[p,[m,"Realme"],[g,_]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[p,[m,D],[g,_]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[p,[m,D],[g,v]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[p,[m,"LG"],[g,v]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[p,[m,"LG"],[g,_]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[p,[m,"Lenovo"],[g,v]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[p,/_/g," "],[m,"Nokia"],[g,_]],[/(pixel c)\b/i],[p,[m,N],[g,v]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[p,[m,N],[g,_]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[p,[m,U],[g,_]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[p,"Xperia Tablet"],[m,U],[g,v]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[p,[m,"OnePlus"],[g,_]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[p,[m,T],[g,v]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[p,/(.+)/g,"Fire Phone $1"],[m,T],[g,_]],[/(playbook);[-\w\),; ]+(rim)/i],[p,m,[g,v]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[p,[m,C],[g,_]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[p,[m,R],[g,v]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[p,[m,R],[g,_]],[/(nexus 9)/i],[p,[m,"HTC"],[g,v]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[m,[p,/_/g," "],[g,_]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[p,[m,"Acer"],[g,v]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[p,[m,"Meizu"],[g,_]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[m,p,[g,_]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[m,p,[g,v]],[/(surface duo)/i],[p,[m,M],[g,v]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[p,[m,"Fairphone"],[g,_]],[/(u304aa)/i],[p,[m,"AT&T"],[g,_]],[/\bsie-(\w*)/i],[p,[m,"Siemens"],[g,_]],[/\b(rct\w+) b/i],[p,[m,"RCA"],[g,v]],[/\b(venue[\d ]{2,7}) b/i],[p,[m,"Dell"],[g,v]],[/\b(q(?:mv|ta)\w+) b/i],[p,[m,"Verizon"],[g,v]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[p,[m,"Barnes & Noble"],[g,v]],[/\b(tm\d{3}\w+) b/i],[p,[m,"NuVision"],[g,v]],[/\b(k88) b/i],[p,[m,"ZTE"],[g,v]],[/\b(nx\d{3}j) b/i],[p,[m,"ZTE"],[g,_]],[/\b(gen\d{3}) b.+49h/i],[p,[m,"Swiss"],[g,_]],[/\b(zur\d{3}) b/i],[p,[m,"Swiss"],[g,v]],[/\b((zeki)?tb.*\b) b/i],[p,[m,"Zeki"],[g,v]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[m,"Dragon Touch"],p,[g,v]],[/\b(ns-?\w{0,9}) b/i],[p,[m,"Insignia"],[g,v]],[/\b((nxa|next)-?\w{0,9}) b/i],[p,[m,"NextBook"],[g,v]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[m,"Voice"],p,[g,_]],[/\b(lvtel\-)?(v1[12]) b/i],[[m,"LvTel"],p,[g,_]],[/\b(ph-1) /i],[p,[m,"Essential"],[g,_]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[p,[m,"Envizen"],[g,v]],[/\b(trio[-\w\. ]+) b/i],[p,[m,"MachSpeed"],[g,v]],[/\btu_(1491) b/i],[p,[m,"Rotor"],[g,v]],[/(shield[\w ]+) b/i],[p,[m,"Nvidia"],[g,v]],[/(sprint) (\w+)/i],[m,p,[g,_]],[/(kin\.[onetw]{3})/i],[[p,/\./g," "],[m,M],[g,_]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[p,[m,$],[g,v]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[p,[m,$],[g,_]],[/smart-tv.+(samsung)/i],[m,[g,S]],[/hbbtv.+maple;(\d+)/i],[[p,/^/,"SmartTV"],[m,H],[g,S]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[m,"LG"],[g,S]],[/(apple) ?tv/i],[m,[p,k+" TV"],[g,S]],[/crkey/i],[[p,P+"cast"],[m,N],[g,S]],[/droid.+aft(\w)( bui|\))/i],[p,[m,T],[g,S]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[p,[m,L],[g,S]],[/(bravia[\w ]+)( bui|\))/i],[p,[m,U],[g,S]],[/(mitv-\w{5}) bui/i],[p,[m,W],[g,S]],[/Hbbtv.*(technisat) (.*);/i],[m,p,[g,S]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[m,F],[p,F],[g,S]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[g,S]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[m,p,[g,b]],[/droid.+; (shield) bui/i],[p,[m,"Nvidia"],[g,b]],[/(playstation [345portablevi]+)/i],[p,[m,U],[g,b]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[p,[m,M],[g,b]],[/((pebble))app/i],[m,p,[g,E]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[p,[m,k],[g,E]],[/droid.+; (glass) \d/i],[p,[m,N],[g,E]],[/droid.+; (wt63?0{2,3})\)/i],[p,[m,$],[g,E]],[/(quest( 2| pro)?)/i],[p,[m,K],[g,E]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[m,[g,A]],[/(aeobc)\b/i],[p,[m,T],[g,A]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[p,[g,_]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[p,[g,v]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[g,v]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[g,_]],[/(android[-\w\. ]{0,9});.+buil/i],[p,[m,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[y,[f,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[y,[f,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[f,y],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[y,f]],os:[[/microsoft (windows) (vista|xp)/i],[f,y],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[f,[y,Y,Q]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[f,"Windows"],[y,Y,Q]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/ios;fbsv\/([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[y,/_/g,"."],[f,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[f,B],[y,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[y,f],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[f,y],[/\(bb(10);/i],[y,[f,C]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[y,[f,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[y,[f,O+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[y,[f,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[y,[f,"watchOS"]],[/crkey\/([\d\.]+)/i],[y,[f,P+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[f,q],y],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[f,y],[/(sunos) ?([\w\.\d]*)/i],[[f,"Solaris"],y],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[f,y]]},ee=function(e,t){if(typeof e===u&&(t=e,e=s),!(this instanceof ee))return new ee(e,t).getResult();var r=typeof o!==l&&o.navigator?o.navigator:s,n=e||(r&&r.userAgent?r.userAgent:""),i=r&&r.userAgentData?r.userAgentData:s,a=t?J(Z,t):Z,b=r&&r.userAgent==n;return this.getBrowser=function(){var e,t={};return t[f]=s,t[y]=s,X.call(t,n,a.browser),t[h]=typeof(e=t[y])===d?e.replace(/[^\d\.]/g,"").split(".")[0]:s,b&&r&&r.brave&&typeof r.brave.isBrave==c&&(t[f]="Brave"),t},this.getCPU=function(){var e={};return e[w]=s,X.call(e,n,a.cpu),e},this.getDevice=function(){var e={};return e[m]=s,e[p]=s,e[g]=s,X.call(e,n,a.device),b&&!e[g]&&i&&i.mobile&&(e[g]=_),b&&"Macintosh"==e[p]&&r&&typeof r.standalone!==l&&r.maxTouchPoints&&r.maxTouchPoints>2&&(e[p]="iPad",e[g]=v),e},this.getEngine=function(){var e={};return e[f]=s,e[y]=s,X.call(e,n,a.engine),e},this.getOS=function(){var e={};return e[f]=s,e[y]=s,X.call(e,n,a.os),b&&!e[f]&&i&&"Unknown"!=i.platform&&(e[f]=i.platform.replace(/chrome os/i,q).replace(/macos/i,B)),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return n},this.setUA=function(e){return n=typeof e===d&&e.length>350?F(e,350):e,this},this.setUA(n),this};ee.VERSION="1.0.35",ee.BROWSER=z([f,y,h]),ee.CPU=z([w]),ee.DEVICE=z([p,m,g,b,_,S,v,E,A]),ee.ENGINE=ee.OS=z([f,y]),typeof a!==l?(i.exports&&(a=i.exports=ee),a.UAParser=ee):r.amdO?void 0===(n=(function(){return ee}).call(t,r,t,e))||(e.exports=n):typeof o!==l&&(o.UAParser=ee);var et=typeof o!==l&&(o.jQuery||o.Zepto);if(et&&!et.ua){var er=new ee;et.ua=er.getResult(),et.ua.get=function(){return er.getUA()},et.ua.set=function(e){er.setUA(e);var t=er.getResult();for(var r in t)et.ua[r]=t[r]}}}("object"==typeof window?window:this)}},a={};function o(e){var t=a[e];if(void 0!==t)return t.exports;var r=a[e]={exports:{}},n=!0;try{i[e].call(r.exports,r,r.exports,o),n=!1}finally{n&&delete a[e]}return r.exports}o.ab="//",e.exports=o(226)})()},356:e=>{"use strict";e.exports=require("node:buffer")},521:e=>{"use strict";e.exports=require("node:async_hooks")},552:(e,t,r)=>{"use strict";var n=r(356).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{handleFetch:function(){return s},interceptFetch:function(){return c},reader:function(){return a}});let i=r(201),a={url:e=>e.url,header:(e,t)=>e.headers.get(t)};async function o(e,t){let{url:r,method:i,headers:a,body:o,cache:s,credentials:c,integrity:l,mode:u,redirect:d,referrer:h,referrerPolicy:p}=t;return{testData:e,api:"fetch",request:{url:r,method:i,headers:[...Array.from(a),["next-test-stack",function(){let e=(Error().stack??"").split("\n");for(let t=1;t<e.length;t++)if(e[t].length>0){e=e.slice(t);break}return(e=(e=(e=e.filter(e=>!e.includes("/next/dist/"))).slice(0,5)).map(e=>e.replace("webpack-internal:///(rsc)/","").trim())).join("    ")}()]],body:o?n.from(await t.arrayBuffer()).toString("base64"):null,cache:s,credentials:c,integrity:l,mode:u,redirect:d,referrer:h,referrerPolicy:p}}}async function s(e,t){let r=(0,i.getTestReqInfo)(t,a);if(!r)return e(t);let{testData:s,proxyPort:c}=r,l=await o(s,t),u=await e(`http://localhost:${c}`,{method:"POST",body:JSON.stringify(l),next:{internal:!0}});if(!u.ok)throw Object.defineProperty(Error(`Proxy request failed: ${u.status}`),"__NEXT_ERROR_CODE",{value:"E146",enumerable:!1,configurable:!0});let d=await u.json(),{api:h}=d;switch(h){case"continue":return e(t);case"abort":case"unhandled":throw Object.defineProperty(Error(`Proxy request aborted [${t.method} ${t.url}]`),"__NEXT_ERROR_CODE",{value:"E145",enumerable:!1,configurable:!0})}let{status:p,headers:f,body:g}=d.response;return new Response(g?n.from(g,"base64"):null,{status:p,headers:new Headers(f)})}function c(e){return r.g.fetch=function(t,r){var n;return(null==r||null==(n=r.next)?void 0:n.internal)?e(t,r):s(e,new Request(t,r))},()=>{r.g.fetch=e}}},650:(e,t,r)=>{"use strict";let n,i,a,o,s,c,l,u,d;r.r(t),r.d(t,{default:()=>oU});var h,p,f={};async function g(){return"_ENTRIES"in globalThis&&_ENTRIES.middleware_instrumentation&&await _ENTRIES.middleware_instrumentation}r.r(f),r.d(f,{config:()=>oD,middleware:()=>oM});let m=null;async function y(){if("phase-production-build"===process.env.NEXT_PHASE)return;m||(m=g());let e=await m;if(null==e?void 0:e.register)try{await e.register()}catch(e){throw e.message=`An error occurred while loading instrumentation hook: ${e.message}`,e}}async function w(...e){let t=await g();try{var r;await (null==t||null==(r=t.onRequestError)?void 0:r.call(t,...e))}catch(e){console.error("Error in instrumentation.onRequestError:",e)}}let b=null;function _(){return b||(b=y()),b}function v(e){return`The edge runtime does not support Node.js '${e}' module.
Learn More: https://nextjs.org/docs/messages/node-module-in-edge-runtime`}process!==r.g.process&&(process.env=r.g.process.env,r.g.process=process),Object.defineProperty(globalThis,"__import_unsupported",{value:function(e){let t=new Proxy(function(){},{get(t,r){if("then"===r)return{};throw Object.defineProperty(Error(v(e)),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0})},construct(){throw Object.defineProperty(Error(v(e)),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0})},apply(r,n,i){if("function"==typeof i[0])return i[0](t);throw Object.defineProperty(Error(v(e)),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0})}});return new Proxy({},{get:()=>t})},enumerable:!1,configurable:!1}),_();class S extends Error{constructor({page:e}){super(`The middleware "${e}" accepts an async API directly with the form:
  
  export function middleware(request, event) {
    return NextResponse.redirect('/new-location')
  }
  
  Read more: https://nextjs.org/docs/messages/middleware-new-signature
  `)}}class E extends Error{constructor(){super(`The request.page has been deprecated in favour of \`URLPattern\`.
  Read more: https://nextjs.org/docs/messages/middleware-request-page
  `)}}class A extends Error{constructor(){super(`The request.ua has been removed in favour of \`userAgent\` function.
  Read more: https://nextjs.org/docs/messages/middleware-parse-user-agent
  `)}}let T="_N_T_",k={shared:"shared",reactServerComponents:"rsc",serverSideRendering:"ssr",actionBrowser:"action-browser",apiNode:"api-node",apiEdge:"api-edge",middleware:"middleware",instrument:"instrument",edgeAsset:"edge-asset",appPagesBrowser:"app-pages-browser",pagesDirBrowser:"pages-dir-browser",pagesDirEdge:"pages-dir-edge",pagesDirNode:"pages-dir-node"};function R(e){var t,r,n,i,a,o=[],s=0;function c(){for(;s<e.length&&/\s/.test(e.charAt(s));)s+=1;return s<e.length}for(;s<e.length;){for(t=s,a=!1;c();)if(","===(r=e.charAt(s))){for(n=s,s+=1,c(),i=s;s<e.length&&"="!==(r=e.charAt(s))&&";"!==r&&","!==r;)s+=1;s<e.length&&"="===e.charAt(s)?(a=!0,s=i,o.push(e.substring(t,n)),t=s):s=n+1}else s+=1;(!a||s>=e.length)&&o.push(e.substring(t,e.length))}return o}function C(e){let t={},r=[];if(e)for(let[n,i]of e.entries())"set-cookie"===n.toLowerCase()?(r.push(...R(i)),t[n]=1===r.length?r[0]:r):t[n]=i;return t}function x(e){try{return String(new URL(String(e)))}catch(t){throw Object.defineProperty(Error(`URL is malformed "${String(e)}". Please use only absolute URLs - https://nextjs.org/docs/messages/middleware-relative-urls`,{cause:t}),"__NEXT_ERROR_CODE",{value:"E61",enumerable:!1,configurable:!0})}}({...k,GROUP:{builtinReact:[k.reactServerComponents,k.actionBrowser],serverOnly:[k.reactServerComponents,k.actionBrowser,k.instrument,k.middleware],neutralTarget:[k.apiNode,k.apiEdge],clientOnly:[k.serverSideRendering,k.appPagesBrowser],bundled:[k.reactServerComponents,k.actionBrowser,k.serverSideRendering,k.appPagesBrowser,k.shared,k.instrument,k.middleware],appPages:[k.reactServerComponents,k.serverSideRendering,k.appPagesBrowser,k.actionBrowser]}});let P=Symbol("response"),O=Symbol("passThrough"),N=Symbol("waitUntil");class I{constructor(e,t){this[O]=!1,this[N]=t?{kind:"external",function:t}:{kind:"internal",promises:[]}}respondWith(e){this[P]||(this[P]=Promise.resolve(e))}passThroughOnException(){this[O]=!0}waitUntil(e){if("external"===this[N].kind)return(0,this[N].function)(e);this[N].promises.push(e)}}class M extends I{constructor(e){var t;super(e.request,null==(t=e.context)?void 0:t.waitUntil),this.sourcePage=e.page}get request(){throw Object.defineProperty(new S({page:this.sourcePage}),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0})}respondWith(){throw Object.defineProperty(new S({page:this.sourcePage}),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0})}}function D(e){return e.replace(/\/$/,"")||"/"}function j(e){let t=e.indexOf("#"),r=e.indexOf("?"),n=r>-1&&(t<0||r<t);return n||t>-1?{pathname:e.substring(0,n?r:t),query:n?e.substring(r,t>-1?t:void 0):"",hash:t>-1?e.slice(t):""}:{pathname:e,query:"",hash:""}}function H(e,t){if(!e.startsWith("/")||!t)return e;let{pathname:r,query:n,hash:i}=j(e);return""+t+r+n+i}function L(e,t){if(!e.startsWith("/")||!t)return e;let{pathname:r,query:n,hash:i}=j(e);return""+r+t+n+i}function U(e,t){if("string"!=typeof e)return!1;let{pathname:r}=j(e);return r===t||r.startsWith(t+"/")}let W=new WeakMap;function $(e,t){let r;if(!t)return{pathname:e};let n=W.get(t);n||(n=t.map(e=>e.toLowerCase()),W.set(t,n));let i=e.split("/",2);if(!i[1])return{pathname:e};let a=i[1].toLowerCase(),o=n.indexOf(a);return o<0?{pathname:e}:(r=t[o],{pathname:e=e.slice(r.length+1)||"/",detectedLocale:r})}let K=/(?!^https?:\/\/)(127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}|\[::1\]|localhost)/;function q(e,t){return new URL(String(e).replace(K,"localhost"),t&&String(t).replace(K,"localhost"))}let B=Symbol("NextURLInternal");class J{constructor(e,t,r){let n,i;"object"==typeof t&&"pathname"in t||"string"==typeof t?(n=t,i=r||{}):i=r||t||{},this[B]={url:q(e,n??i.base),options:i,basePath:""},this.analyze()}analyze(){var e,t,r,n,i;let a=function(e,t){var r,n;let{basePath:i,i18n:a,trailingSlash:o}=null!=(r=t.nextConfig)?r:{},s={pathname:e,trailingSlash:"/"!==e?e.endsWith("/"):o};i&&U(s.pathname,i)&&(s.pathname=function(e,t){if(!U(e,t))return e;let r=e.slice(t.length);return r.startsWith("/")?r:"/"+r}(s.pathname,i),s.basePath=i);let c=s.pathname;if(s.pathname.startsWith("/_next/data/")&&s.pathname.endsWith(".json")){let e=s.pathname.replace(/^\/_next\/data\//,"").replace(/\.json$/,"").split("/");s.buildId=e[0],c="index"!==e[1]?"/"+e.slice(1).join("/"):"/",!0===t.parseData&&(s.pathname=c)}if(a){let e=t.i18nProvider?t.i18nProvider.analyze(s.pathname):$(s.pathname,a.locales);s.locale=e.detectedLocale,s.pathname=null!=(n=e.pathname)?n:s.pathname,!e.detectedLocale&&s.buildId&&(e=t.i18nProvider?t.i18nProvider.analyze(c):$(c,a.locales)).detectedLocale&&(s.locale=e.detectedLocale)}return s}(this[B].url.pathname,{nextConfig:this[B].options.nextConfig,parseData:!0,i18nProvider:this[B].options.i18nProvider}),o=function(e,t){let r;if((null==t?void 0:t.host)&&!Array.isArray(t.host))r=t.host.toString().split(":",1)[0];else{if(!e.hostname)return;r=e.hostname}return r.toLowerCase()}(this[B].url,this[B].options.headers);this[B].domainLocale=this[B].options.i18nProvider?this[B].options.i18nProvider.detectDomainLocale(o):function(e,t,r){if(e)for(let a of(r&&(r=r.toLowerCase()),e)){var n,i;if(t===(null==(n=a.domain)?void 0:n.split(":",1)[0].toLowerCase())||r===a.defaultLocale.toLowerCase()||(null==(i=a.locales)?void 0:i.some(e=>e.toLowerCase()===r)))return a}}(null==(t=this[B].options.nextConfig)||null==(e=t.i18n)?void 0:e.domains,o);let s=(null==(r=this[B].domainLocale)?void 0:r.defaultLocale)||(null==(i=this[B].options.nextConfig)||null==(n=i.i18n)?void 0:n.defaultLocale);this[B].url.pathname=a.pathname,this[B].defaultLocale=s,this[B].basePath=a.basePath??"",this[B].buildId=a.buildId,this[B].locale=a.locale??s,this[B].trailingSlash=a.trailingSlash}formatPathname(){var e;let t;return t=function(e,t,r,n){if(!t||t===r)return e;let i=e.toLowerCase();return!n&&(U(i,"/api")||U(i,"/"+t.toLowerCase()))?e:H(e,"/"+t)}((e={basePath:this[B].basePath,buildId:this[B].buildId,defaultLocale:this[B].options.forceLocale?void 0:this[B].defaultLocale,locale:this[B].locale,pathname:this[B].url.pathname,trailingSlash:this[B].trailingSlash}).pathname,e.locale,e.buildId?void 0:e.defaultLocale,e.ignorePrefix),(e.buildId||!e.trailingSlash)&&(t=D(t)),e.buildId&&(t=L(H(t,"/_next/data/"+e.buildId),"/"===e.pathname?"index.json":".json")),t=H(t,e.basePath),!e.buildId&&e.trailingSlash?t.endsWith("/")?t:L(t,"/"):D(t)}formatSearch(){return this[B].url.search}get buildId(){return this[B].buildId}set buildId(e){this[B].buildId=e}get locale(){return this[B].locale??""}set locale(e){var t,r;if(!this[B].locale||!(null==(r=this[B].options.nextConfig)||null==(t=r.i18n)?void 0:t.locales.includes(e)))throw Object.defineProperty(TypeError(`The NextURL configuration includes no locale "${e}"`),"__NEXT_ERROR_CODE",{value:"E597",enumerable:!1,configurable:!0});this[B].locale=e}get defaultLocale(){return this[B].defaultLocale}get domainLocale(){return this[B].domainLocale}get searchParams(){return this[B].url.searchParams}get host(){return this[B].url.host}set host(e){this[B].url.host=e}get hostname(){return this[B].url.hostname}set hostname(e){this[B].url.hostname=e}get port(){return this[B].url.port}set port(e){this[B].url.port=e}get protocol(){return this[B].url.protocol}set protocol(e){this[B].url.protocol=e}get href(){let e=this.formatPathname(),t=this.formatSearch();return`${this.protocol}//${this.host}${e}${t}${this.hash}`}set href(e){this[B].url=q(e),this.analyze()}get origin(){return this[B].url.origin}get pathname(){return this[B].url.pathname}set pathname(e){this[B].url.pathname=e}get hash(){return this[B].url.hash}set hash(e){this[B].url.hash=e}get search(){return this[B].url.search}set search(e){this[B].url.search=e}get password(){return this[B].url.password}set password(e){this[B].url.password=e}get username(){return this[B].url.username}set username(e){this[B].url.username=e}get basePath(){return this[B].basePath}set basePath(e){this[B].basePath=e.startsWith("/")?e:`/${e}`}toString(){return this.href}toJSON(){return this.href}[Symbol.for("edge-runtime.inspect.custom")](){return{href:this.href,origin:this.origin,protocol:this.protocol,username:this.username,password:this.password,host:this.host,hostname:this.hostname,port:this.port,pathname:this.pathname,search:this.search,searchParams:this.searchParams,hash:this.hash}}clone(){return new J(String(this),this[B].options)}}var z=r(724);let V=Symbol("internal request");class G extends Request{constructor(e,t={}){let r="string"!=typeof e&&"url"in e?e.url:String(e);x(r),e instanceof Request?super(e,t):super(r,t);let n=new J(r,{headers:C(this.headers),nextConfig:t.nextConfig});this[V]={cookies:new z.RequestCookies(this.headers),nextUrl:n,url:n.toString()}}[Symbol.for("edge-runtime.inspect.custom")](){return{cookies:this.cookies,nextUrl:this.nextUrl,url:this.url,bodyUsed:this.bodyUsed,cache:this.cache,credentials:this.credentials,destination:this.destination,headers:Object.fromEntries(this.headers),integrity:this.integrity,keepalive:this.keepalive,method:this.method,mode:this.mode,redirect:this.redirect,referrer:this.referrer,referrerPolicy:this.referrerPolicy,signal:this.signal}}get cookies(){return this[V].cookies}get nextUrl(){return this[V].nextUrl}get page(){throw new E}get ua(){throw new A}get url(){return this[V].url}}class F{static get(e,t,r){let n=Reflect.get(e,t,r);return"function"==typeof n?n.bind(e):n}static set(e,t,r,n){return Reflect.set(e,t,r,n)}static has(e,t){return Reflect.has(e,t)}static deleteProperty(e,t){return Reflect.deleteProperty(e,t)}}let X=Symbol("internal response"),Y=new Set([301,302,303,307,308]);function Q(e,t){var r;if(null==e||null==(r=e.request)?void 0:r.headers){if(!(e.request.headers instanceof Headers))throw Object.defineProperty(Error("request.headers must be an instance of Headers"),"__NEXT_ERROR_CODE",{value:"E119",enumerable:!1,configurable:!0});let r=[];for(let[n,i]of e.request.headers)t.set("x-middleware-request-"+n,i),r.push(n);t.set("x-middleware-override-headers",r.join(","))}}class Z extends Response{constructor(e,t={}){super(e,t);let r=this.headers,n=new Proxy(new z.ResponseCookies(r),{get(e,n,i){switch(n){case"delete":case"set":return(...i)=>{let a=Reflect.apply(e[n],e,i),o=new Headers(r);return a instanceof z.ResponseCookies&&r.set("x-middleware-set-cookie",a.getAll().map(e=>(0,z.stringifyCookie)(e)).join(",")),Q(t,o),a};default:return F.get(e,n,i)}}});this[X]={cookies:n,url:t.url?new J(t.url,{headers:C(r),nextConfig:t.nextConfig}):void 0}}[Symbol.for("edge-runtime.inspect.custom")](){return{cookies:this.cookies,url:this.url,body:this.body,bodyUsed:this.bodyUsed,headers:Object.fromEntries(this.headers),ok:this.ok,redirected:this.redirected,status:this.status,statusText:this.statusText,type:this.type}}get cookies(){return this[X].cookies}static json(e,t){let r=Response.json(e,t);return new Z(r.body,r)}static redirect(e,t){let r="number"==typeof t?t:(null==t?void 0:t.status)??307;if(!Y.has(r))throw Object.defineProperty(RangeError('Failed to execute "redirect" on "response": Invalid status code'),"__NEXT_ERROR_CODE",{value:"E529",enumerable:!1,configurable:!0});let n="object"==typeof t?t:{},i=new Headers(null==n?void 0:n.headers);return i.set("Location",x(e)),new Z(null,{...n,headers:i,status:r})}static rewrite(e,t){let r=new Headers(null==t?void 0:t.headers);return r.set("x-middleware-rewrite",x(e)),Q(t,r),new Z(null,{...t,headers:r})}static next(e){let t=new Headers(null==e?void 0:e.headers);return t.set("x-middleware-next","1"),Q(e,t),new Z(null,{...e,headers:t})}}function ee(e,t){let r="string"==typeof t?new URL(t):t,n=new URL(e,t),i=n.origin===r.origin;return{url:i?n.toString().slice(r.origin.length):n.toString(),isRelative:i}}let et="Next-Router-Prefetch",er=["RSC","Next-Router-State-Tree",et,"Next-HMR-Refresh","Next-Router-Segment-Prefetch"],en="_rsc";class ei extends Error{constructor(){super("Headers cannot be modified. Read more: https://nextjs.org/docs/app/api-reference/functions/headers")}static callable(){throw new ei}}class ea extends Headers{constructor(e){super(),this.headers=new Proxy(e,{get(t,r,n){if("symbol"==typeof r)return F.get(t,r,n);let i=r.toLowerCase(),a=Object.keys(e).find(e=>e.toLowerCase()===i);if(void 0!==a)return F.get(t,a,n)},set(t,r,n,i){if("symbol"==typeof r)return F.set(t,r,n,i);let a=r.toLowerCase(),o=Object.keys(e).find(e=>e.toLowerCase()===a);return F.set(t,o??r,n,i)},has(t,r){if("symbol"==typeof r)return F.has(t,r);let n=r.toLowerCase(),i=Object.keys(e).find(e=>e.toLowerCase()===n);return void 0!==i&&F.has(t,i)},deleteProperty(t,r){if("symbol"==typeof r)return F.deleteProperty(t,r);let n=r.toLowerCase(),i=Object.keys(e).find(e=>e.toLowerCase()===n);return void 0===i||F.deleteProperty(t,i)}})}static seal(e){return new Proxy(e,{get(e,t,r){switch(t){case"append":case"delete":case"set":return ei.callable;default:return F.get(e,t,r)}}})}merge(e){return Array.isArray(e)?e.join(", "):e}static from(e){return e instanceof Headers?e:new ea(e)}append(e,t){let r=this.headers[e];"string"==typeof r?this.headers[e]=[r,t]:Array.isArray(r)?r.push(t):this.headers[e]=t}delete(e){delete this.headers[e]}get(e){let t=this.headers[e];return void 0!==t?this.merge(t):null}has(e){return void 0!==this.headers[e]}set(e,t){this.headers[e]=t}forEach(e,t){for(let[r,n]of this.entries())e.call(t,n,r,this)}*entries(){for(let e of Object.keys(this.headers)){let t=e.toLowerCase(),r=this.get(t);yield[t,r]}}*keys(){for(let e of Object.keys(this.headers)){let t=e.toLowerCase();yield t}}*values(){for(let e of Object.keys(this.headers)){let t=this.get(e);yield t}}[Symbol.iterator](){return this.entries()}}let eo=Object.defineProperty(Error("Invariant: AsyncLocalStorage accessed in runtime where it is not available"),"__NEXT_ERROR_CODE",{value:"E504",enumerable:!1,configurable:!0});class es{disable(){throw eo}getStore(){}run(){throw eo}exit(){throw eo}enterWith(){throw eo}static bind(e){return e}}let ec="undefined"!=typeof globalThis&&globalThis.AsyncLocalStorage;function el(){return ec?new ec:new es}let eu=el(),ed=el();function eh(e){let t=ed.getStore();switch(!t&&function(e){throw Object.defineProperty(Error(`\`${e}\` was called outside a request scope. Read more: https://nextjs.org/docs/messages/next-dynamic-api-wrong-context`),"__NEXT_ERROR_CODE",{value:"E251",enumerable:!1,configurable:!0})}(e),t.type){case"request":default:return t;case"prerender":case"prerender-ppr":case"prerender-legacy":throw Object.defineProperty(Error(`\`${e}\` cannot be called inside a prerender. This is a bug in Next.js.`),"__NEXT_ERROR_CODE",{value:"E401",enumerable:!1,configurable:!0});case"cache":throw Object.defineProperty(Error(`\`${e}\` cannot be called inside "use cache". Call it outside and pass an argument instead. Read more: https://nextjs.org/docs/messages/next-request-in-use-cache`),"__NEXT_ERROR_CODE",{value:"E37",enumerable:!1,configurable:!0});case"unstable-cache":throw Object.defineProperty(Error(`\`${e}\` cannot be called inside unstable_cache. Call it outside and pass an argument instead. Read more: https://nextjs.org/docs/app/api-reference/functions/unstable_cache`),"__NEXT_ERROR_CODE",{value:"E69",enumerable:!1,configurable:!0})}}class ep extends Error{constructor(){super("Cookies can only be modified in a Server Action or Route Handler. Read more: https://nextjs.org/docs/app/api-reference/functions/cookies#options")}static callable(){throw new ep}}class ef{static seal(e){return new Proxy(e,{get(e,t,r){switch(t){case"clear":case"delete":case"set":return ep.callable;default:return F.get(e,t,r)}}})}}let eg=Symbol.for("next.mutated.cookies");class em{static wrap(e,t){let r=new z.ResponseCookies(new Headers);for(let t of e.getAll())r.set(t);let n=[],i=new Set,a=()=>{let e=eu.getStore();if(e&&(e.pathWasRevalidated=!0),n=r.getAll().filter(e=>i.has(e.name)),t){let e=[];for(let t of n){let r=new z.ResponseCookies(new Headers);r.set(t),e.push(r.toString())}t(e)}},o=new Proxy(r,{get(e,t,r){switch(t){case eg:return n;case"delete":return function(...t){i.add("string"==typeof t[0]?t[0]:t[0].name);try{return e.delete(...t),o}finally{a()}};case"set":return function(...t){i.add("string"==typeof t[0]?t[0]:t[0].name);try{return e.set(...t),o}finally{a()}};default:return F.get(e,t,r)}}});return o}}function ey(e){return"action"===e.phase}function ew(e){if(!ey(eh(e)))throw new ep}var eb=function(e){return e.handleRequest="BaseServer.handleRequest",e.run="BaseServer.run",e.pipe="BaseServer.pipe",e.getStaticHTML="BaseServer.getStaticHTML",e.render="BaseServer.render",e.renderToResponseWithComponents="BaseServer.renderToResponseWithComponents",e.renderToResponse="BaseServer.renderToResponse",e.renderToHTML="BaseServer.renderToHTML",e.renderError="BaseServer.renderError",e.renderErrorToResponse="BaseServer.renderErrorToResponse",e.renderErrorToHTML="BaseServer.renderErrorToHTML",e.render404="BaseServer.render404",e}(eb||{}),e_=function(e){return e.loadDefaultErrorComponents="LoadComponents.loadDefaultErrorComponents",e.loadComponents="LoadComponents.loadComponents",e}(e_||{}),ev=function(e){return e.getRequestHandler="NextServer.getRequestHandler",e.getServer="NextServer.getServer",e.getServerRequestHandler="NextServer.getServerRequestHandler",e.createServer="createServer.createServer",e}(ev||{}),eS=function(e){return e.compression="NextNodeServer.compression",e.getBuildId="NextNodeServer.getBuildId",e.createComponentTree="NextNodeServer.createComponentTree",e.clientComponentLoading="NextNodeServer.clientComponentLoading",e.getLayoutOrPageModule="NextNodeServer.getLayoutOrPageModule",e.generateStaticRoutes="NextNodeServer.generateStaticRoutes",e.generateFsStaticRoutes="NextNodeServer.generateFsStaticRoutes",e.generatePublicRoutes="NextNodeServer.generatePublicRoutes",e.generateImageRoutes="NextNodeServer.generateImageRoutes.route",e.sendRenderResult="NextNodeServer.sendRenderResult",e.proxyRequest="NextNodeServer.proxyRequest",e.runApi="NextNodeServer.runApi",e.render="NextNodeServer.render",e.renderHTML="NextNodeServer.renderHTML",e.imageOptimizer="NextNodeServer.imageOptimizer",e.getPagePath="NextNodeServer.getPagePath",e.getRoutesManifest="NextNodeServer.getRoutesManifest",e.findPageComponents="NextNodeServer.findPageComponents",e.getFontManifest="NextNodeServer.getFontManifest",e.getServerComponentManifest="NextNodeServer.getServerComponentManifest",e.getRequestHandler="NextNodeServer.getRequestHandler",e.renderToHTML="NextNodeServer.renderToHTML",e.renderError="NextNodeServer.renderError",e.renderErrorToHTML="NextNodeServer.renderErrorToHTML",e.render404="NextNodeServer.render404",e.startResponse="NextNodeServer.startResponse",e.route="route",e.onProxyReq="onProxyReq",e.apiResolver="apiResolver",e.internalFetch="internalFetch",e}(eS||{}),eE=function(e){return e.startServer="startServer.startServer",e}(eE||{}),eA=function(e){return e.getServerSideProps="Render.getServerSideProps",e.getStaticProps="Render.getStaticProps",e.renderToString="Render.renderToString",e.renderDocument="Render.renderDocument",e.createBodyResult="Render.createBodyResult",e}(eA||{}),eT=function(e){return e.renderToString="AppRender.renderToString",e.renderToReadableStream="AppRender.renderToReadableStream",e.getBodyResult="AppRender.getBodyResult",e.fetch="AppRender.fetch",e}(eT||{}),ek=function(e){return e.executeRoute="Router.executeRoute",e}(ek||{}),eR=function(e){return e.runHandler="Node.runHandler",e}(eR||{}),eC=function(e){return e.runHandler="AppRouteRouteHandlers.runHandler",e}(eC||{}),ex=function(e){return e.generateMetadata="ResolveMetadata.generateMetadata",e.generateViewport="ResolveMetadata.generateViewport",e}(ex||{}),eP=function(e){return e.execute="Middleware.execute",e}(eP||{});let eO=["Middleware.execute","BaseServer.handleRequest","Render.getServerSideProps","Render.getStaticProps","AppRender.fetch","AppRender.getBodyResult","Render.renderDocument","Node.runHandler","AppRouteRouteHandlers.runHandler","ResolveMetadata.generateMetadata","ResolveMetadata.generateViewport","NextNodeServer.createComponentTree","NextNodeServer.findPageComponents","NextNodeServer.getLayoutOrPageModule","NextNodeServer.startResponse","NextNodeServer.clientComponentLoading"],eN=["NextNodeServer.findPageComponents","NextNodeServer.createComponentTree","NextNodeServer.clientComponentLoading"];function eI(e){return null!==e&&"object"==typeof e&&"then"in e&&"function"==typeof e.then}let{context:eM,propagation:eD,trace:ej,SpanStatusCode:eH,SpanKind:eL,ROOT_CONTEXT:eU}=n=r(956);class eW extends Error{constructor(e,t){super(),this.bubble=e,this.result=t}}let e$=(e,t)=>{(function(e){return"object"==typeof e&&null!==e&&e instanceof eW})(t)&&t.bubble?e.setAttribute("next.bubble",!0):(t&&e.recordException(t),e.setStatus({code:eH.ERROR,message:null==t?void 0:t.message})),e.end()},eK=new Map,eq=n.createContextKey("next.rootSpanId"),eB=0,eJ=()=>eB++,ez={set(e,t,r){e.push({key:t,value:r})}};class eV{getTracerInstance(){return ej.getTracer("next.js","0.0.1")}getContext(){return eM}getTracePropagationData(){let e=eM.active(),t=[];return eD.inject(e,t,ez),t}getActiveScopeSpan(){return ej.getSpan(null==eM?void 0:eM.active())}withPropagatedContext(e,t,r){let n=eM.active();if(ej.getSpanContext(n))return t();let i=eD.extract(n,e,r);return eM.with(i,t)}trace(...e){var t;let[r,n,i]=e,{fn:a,options:o}="function"==typeof n?{fn:n,options:{}}:{fn:i,options:{...n}},s=o.spanName??r;if(!eO.includes(r)&&"1"!==process.env.NEXT_OTEL_VERBOSE||o.hideSpan)return a();let c=this.getSpanContext((null==o?void 0:o.parentSpan)??this.getActiveScopeSpan()),l=!1;c?(null==(t=ej.getSpanContext(c))?void 0:t.isRemote)&&(l=!0):(c=(null==eM?void 0:eM.active())??eU,l=!0);let u=eJ();return o.attributes={"next.span_name":s,"next.span_type":r,...o.attributes},eM.with(c.setValue(eq,u),()=>this.getTracerInstance().startActiveSpan(s,o,e=>{let t="performance"in globalThis&&"measure"in performance?globalThis.performance.now():void 0,n=()=>{eK.delete(u),t&&process.env.NEXT_OTEL_PERFORMANCE_PREFIX&&eN.includes(r||"")&&performance.measure(`${process.env.NEXT_OTEL_PERFORMANCE_PREFIX}:next-${(r.split(".").pop()||"").replace(/[A-Z]/g,e=>"-"+e.toLowerCase())}`,{start:t,end:performance.now()})};l&&eK.set(u,new Map(Object.entries(o.attributes??{})));try{if(a.length>1)return a(e,t=>e$(e,t));let t=a(e);if(eI(t))return t.then(t=>(e.end(),t)).catch(t=>{throw e$(e,t),t}).finally(n);return e.end(),n(),t}catch(t){throw e$(e,t),n(),t}}))}wrap(...e){let t=this,[r,n,i]=3===e.length?e:[e[0],{},e[1]];return eO.includes(r)||"1"===process.env.NEXT_OTEL_VERBOSE?function(){let e=n;"function"==typeof e&&"function"==typeof i&&(e=e.apply(this,arguments));let a=arguments.length-1,o=arguments[a];if("function"!=typeof o)return t.trace(r,e,()=>i.apply(this,arguments));{let n=t.getContext().bind(eM.active(),o);return t.trace(r,e,(e,t)=>(arguments[a]=function(e){return null==t||t(e),n.apply(this,arguments)},i.apply(this,arguments)))}}:i}startSpan(...e){let[t,r]=e,n=this.getSpanContext((null==r?void 0:r.parentSpan)??this.getActiveScopeSpan());return this.getTracerInstance().startSpan(t,r,n)}getSpanContext(e){return e?ej.setSpan(eM.active(),e):void 0}getRootSpanAttributes(){let e=eM.active().getValue(eq);return eK.get(e)}setRootSpanAttribute(e,t){let r=eM.active().getValue(eq),n=eK.get(r);n&&n.set(e,t)}}let eG=(()=>{let e=new eV;return()=>e})(),eF="__prerender_bypass";Symbol("__next_preview_data"),Symbol(eF);class eX{constructor(e,t,r,n){var i;let a=e&&function(e,t){let r=ea.from(e.headers);return{isOnDemandRevalidate:r.get("x-prerender-revalidate")===t.previewModeId,revalidateOnlyGenerated:r.has("x-prerender-revalidate-if-generated")}}(t,e).isOnDemandRevalidate,o=null==(i=r.get(eF))?void 0:i.value;this._isEnabled=!!(!a&&o&&e&&o===e.previewModeId),this._previewModeId=null==e?void 0:e.previewModeId,this._mutableCookies=n}get isEnabled(){return this._isEnabled}enable(){if(!this._previewModeId)throw Object.defineProperty(Error("Invariant: previewProps missing previewModeId this should never happen"),"__NEXT_ERROR_CODE",{value:"E93",enumerable:!1,configurable:!0});this._mutableCookies.set({name:eF,value:this._previewModeId,httpOnly:!0,sameSite:"none",secure:!0,path:"/"}),this._isEnabled=!0}disable(){this._mutableCookies.set({name:eF,value:"",httpOnly:!0,sameSite:"none",secure:!0,path:"/",expires:new Date(0)}),this._isEnabled=!1}}function eY(e,t){if("x-middleware-set-cookie"in e.headers&&"string"==typeof e.headers["x-middleware-set-cookie"]){let r=e.headers["x-middleware-set-cookie"],n=new Headers;for(let e of R(r))n.append("set-cookie",e);for(let e of new z.ResponseCookies(n).getAll())t.set(e)}}var eQ=r(802),eZ=r.n(eQ);class e0 extends Error{constructor(e,t){super("Invariant: "+(e.endsWith(".")?e:e+".")+" This is a bug in Next.js.",t),this.name="InvariantError"}}class e1{constructor(e,t){this.cache=new Map,this.sizes=new Map,this.totalSize=0,this.maxSize=e,this.calculateSize=t||(()=>1)}set(e,t){if(!e||!t)return;let r=this.calculateSize(t);if(r>this.maxSize)return void console.warn("Single item size exceeds maxSize");this.cache.has(e)&&(this.totalSize-=this.sizes.get(e)||0),this.cache.set(e,t),this.sizes.set(e,r),this.totalSize+=r,this.touch(e)}has(e){return!!e&&(this.touch(e),!!this.cache.get(e))}get(e){if(!e)return;let t=this.cache.get(e);if(void 0!==t)return this.touch(e),t}touch(e){let t=this.cache.get(e);void 0!==t&&(this.cache.delete(e),this.cache.set(e,t),this.evictIfNecessary())}evictIfNecessary(){for(;this.totalSize>this.maxSize&&this.cache.size>0;)this.evictLeastRecentlyUsed()}evictLeastRecentlyUsed(){let e=this.cache.keys().next().value;if(void 0!==e){let t=this.sizes.get(e)||0;this.totalSize-=t,this.cache.delete(e),this.sizes.delete(e)}}reset(){this.cache.clear(),this.sizes.clear(),this.totalSize=0}keys(){return[...this.cache.keys()]}remove(e){this.cache.has(e)&&(this.totalSize-=this.sizes.get(e)||0,this.cache.delete(e),this.sizes.delete(e))}clear(){this.cache.clear(),this.sizes.clear(),this.totalSize=0}get size(){return this.cache.size}get currentSize(){return this.totalSize}}r(356).Buffer,new e1(0x3200000,e=>e.size),process.env.NEXT_PRIVATE_DEBUG_CACHE&&console.debug.bind(console,"DefaultCacheHandler:"),process.env.NEXT_PRIVATE_DEBUG_CACHE,Symbol.for("@next/cache-handlers");let e2=Symbol.for("@next/cache-handlers-map"),e5=Symbol.for("@next/cache-handlers-set"),e3=globalThis;function e4(){if(e3[e2])return e3[e2].entries()}async function e6(e,t){if(!e)return t();let r=e8(e);try{return await t()}finally{let t=function(e,t){let r=new Set(e.pendingRevalidatedTags),n=new Set(e.pendingRevalidateWrites);return{pendingRevalidatedTags:t.pendingRevalidatedTags.filter(e=>!r.has(e)),pendingRevalidates:Object.fromEntries(Object.entries(t.pendingRevalidates).filter(([t])=>!(t in e.pendingRevalidates))),pendingRevalidateWrites:t.pendingRevalidateWrites.filter(e=>!n.has(e))}}(r,e8(e));await e7(e,t)}}function e8(e){return{pendingRevalidatedTags:e.pendingRevalidatedTags?[...e.pendingRevalidatedTags]:[],pendingRevalidates:{...e.pendingRevalidates},pendingRevalidateWrites:e.pendingRevalidateWrites?[...e.pendingRevalidateWrites]:[]}}async function e9(e,t){if(0===e.length)return;let r=[];t&&r.push(t.revalidateTag(e));let n=function(){if(e3[e5])return e3[e5].values()}();if(n)for(let t of n)r.push(t.expireTags(...e));await Promise.all(r)}async function e7(e,t){let r=(null==t?void 0:t.pendingRevalidatedTags)??e.pendingRevalidatedTags??[],n=(null==t?void 0:t.pendingRevalidates)??e.pendingRevalidates??{},i=(null==t?void 0:t.pendingRevalidateWrites)??e.pendingRevalidateWrites??[];return Promise.all([e9(r,e.incrementalCache),...Object.values(n),...i])}let te=Object.defineProperty(Error("Invariant: AsyncLocalStorage accessed in runtime where it is not available"),"__NEXT_ERROR_CODE",{value:"E504",enumerable:!1,configurable:!0});class tt{disable(){throw te}getStore(){}run(){throw te}exit(){throw te}enterWith(){throw te}static bind(e){return e}}let tr="undefined"!=typeof globalThis&&globalThis.AsyncLocalStorage,tn=tr?new tr:new tt;class ti{constructor({waitUntil:e,onClose:t,onTaskError:r}){this.workUnitStores=new Set,this.waitUntil=e,this.onClose=t,this.onTaskError=r,this.callbackQueue=new(eZ()),this.callbackQueue.pause()}after(e){if(eI(e))this.waitUntil||ta(),this.waitUntil(e.catch(e=>this.reportTaskError("promise",e)));else if("function"==typeof e)this.addCallback(e);else throw Object.defineProperty(Error("`after()`: Argument must be a promise or a function"),"__NEXT_ERROR_CODE",{value:"E50",enumerable:!1,configurable:!0})}addCallback(e){var t;this.waitUntil||ta();let r=ed.getStore();r&&this.workUnitStores.add(r);let n=tn.getStore(),i=n?n.rootTaskSpawnPhase:null==r?void 0:r.phase;this.runCallbacksOnClosePromise||(this.runCallbacksOnClosePromise=this.runCallbacksOnClose(),this.waitUntil(this.runCallbacksOnClosePromise));let a=(t=async()=>{try{await tn.run({rootTaskSpawnPhase:i},()=>e())}catch(e){this.reportTaskError("function",e)}},tr?tr.bind(t):tt.bind(t));this.callbackQueue.add(a)}async runCallbacksOnClose(){return await new Promise(e=>this.onClose(e)),this.runCallbacks()}async runCallbacks(){if(0===this.callbackQueue.size)return;for(let e of this.workUnitStores)e.phase="after";let e=eu.getStore();if(!e)throw Object.defineProperty(new e0("Missing workStore in AfterContext.runCallbacks"),"__NEXT_ERROR_CODE",{value:"E547",enumerable:!1,configurable:!0});return e6(e,()=>(this.callbackQueue.start(),this.callbackQueue.onIdle()))}reportTaskError(e,t){if(console.error("promise"===e?"A promise passed to `after()` rejected:":"An error occurred in a function passed to `after()`:",t),this.onTaskError)try{null==this.onTaskError||this.onTaskError.call(this,t)}catch(e){console.error(Object.defineProperty(new e0("`onTaskError` threw while handling an error thrown from an `after` task",{cause:e}),"__NEXT_ERROR_CODE",{value:"E569",enumerable:!1,configurable:!0}))}}}function ta(){throw Object.defineProperty(Error("`after()` will not work correctly, because `waitUntil` is not available in the current environment."),"__NEXT_ERROR_CODE",{value:"E91",enumerable:!1,configurable:!0})}function to(e){let t,r={then:(n,i)=>(t||(t=e()),t.then(e=>{r.value=e}).catch(()=>{}),t.then(n,i))};return r}class ts{onClose(e){if(this.isClosed)throw Object.defineProperty(Error("Cannot subscribe to a closed CloseController"),"__NEXT_ERROR_CODE",{value:"E365",enumerable:!1,configurable:!0});this.target.addEventListener("close",e),this.listeners++}dispatchClose(){if(this.isClosed)throw Object.defineProperty(Error("Cannot close a CloseController multiple times"),"__NEXT_ERROR_CODE",{value:"E229",enumerable:!1,configurable:!0});this.listeners>0&&this.target.dispatchEvent(new Event("close")),this.isClosed=!0}constructor(){this.target=new EventTarget,this.listeners=0,this.isClosed=!1}}function tc(){return{previewModeId:process.env.__NEXT_PREVIEW_MODE_ID,previewModeSigningKey:process.env.__NEXT_PREVIEW_MODE_SIGNING_KEY||"",previewModeEncryptionKey:process.env.__NEXT_PREVIEW_MODE_ENCRYPTION_KEY||""}}let tl=Symbol.for("@next/request-context"),tu=e=>{let t=["/layout"];if(e.startsWith("/")){let r=e.split("/");for(let e=1;e<r.length+1;e++){let n=r.slice(0,e).join("/");n&&(n.endsWith("/page")||n.endsWith("/route")||(n=`${n}${!n.endsWith("/")?"/":""}layout`),t.push(n))}}return t};async function td(e,t,r){let n=[],i=r&&r.size>0;for(let t of tu(e))t=`${T}${t}`,n.push(t);if(t.pathname&&!i){let e=`${T}${t.pathname}`;n.push(e)}return{tags:n,expirationsByCacheKind:function(e){let t=new Map,r=e4();if(r)for(let[n,i]of r)"getExpiration"in i&&t.set(n,to(async()=>i.getExpiration(...e)));return t}(n)}}class th extends G{constructor(e){super(e.input,e.init),this.sourcePage=e.page}get request(){throw Object.defineProperty(new S({page:this.sourcePage}),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0})}respondWith(){throw Object.defineProperty(new S({page:this.sourcePage}),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0})}waitUntil(){throw Object.defineProperty(new S({page:this.sourcePage}),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0})}}let tp={keys:e=>Array.from(e.keys()),get:(e,t)=>e.get(t)??void 0},tf=(e,t)=>eG().withPropagatedContext(e.headers,t,tp),tg=!1;async function tm(e){var t;let n,i;if(!tg&&(tg=!0,"true"===process.env.NEXT_PRIVATE_TEST_PROXY)){let{interceptTestApis:e,wrapRequestHandler:t}=r(905);e(),tf=t(tf)}await _();let a=void 0!==globalThis.__BUILD_MANIFEST;e.request.url=e.request.url.replace(/\.rsc($|\?)/,"$1");let o=new J(e.request.url,{headers:e.request.headers,nextConfig:e.request.nextConfig});for(let e of[...o.searchParams.keys()]){let t=o.searchParams.getAll(e),r=function(e){for(let t of["nxtP","nxtI"])if(e!==t&&e.startsWith(t))return e.substring(t.length);return null}(e);if(r){for(let e of(o.searchParams.delete(r),t))o.searchParams.append(r,e);o.searchParams.delete(e)}}let s=o.buildId;o.buildId="";let c=function(e){let t=new Headers;for(let[r,n]of Object.entries(e))for(let e of Array.isArray(n)?n:[n])void 0!==e&&("number"==typeof e&&(e=e.toString()),t.append(r,e));return t}(e.request.headers),l=c.has("x-nextjs-data"),u="1"===c.get("RSC");l&&"/index"===o.pathname&&(o.pathname="/");let d=new Map;if(!a)for(let e of er){let t=e.toLowerCase(),r=c.get(t);null!==r&&(d.set(t,r),c.delete(t))}let h=new th({page:e.page,input:(function(e){let t="string"==typeof e,r=t?new URL(e):e;return r.searchParams.delete(en),t?r.toString():r})(o).toString(),init:{body:e.request.body,headers:c,method:e.request.method,nextConfig:e.request.nextConfig,signal:e.request.signal}});l&&Object.defineProperty(h,"__isData",{enumerable:!1,value:!0}),!globalThis.__incrementalCache&&e.IncrementalCache&&(globalThis.__incrementalCache=new e.IncrementalCache({appDir:!0,fetchCache:!0,minimalMode:!0,fetchCacheKeyPrefix:"",dev:!1,requestHeaders:e.request.headers,requestProtocol:"https",getPrerenderManifest:()=>({version:-1,routes:{},dynamicRoutes:{},notFoundRoutes:[],preview:tc()})}));let p=e.request.waitUntil??(null==(t=function(){let e=globalThis[tl];return null==e?void 0:e.get()}())?void 0:t.waitUntil),f=new M({request:h,page:e.page,context:p?{waitUntil:p}:void 0});if((n=await tf(h,()=>{if("/middleware"===e.page||"/src/middleware"===e.page){let t=f.waitUntil.bind(f),r=new ts;return eG().trace(eP.execute,{spanName:`middleware ${h.method} ${h.nextUrl.pathname}`,attributes:{"http.target":h.nextUrl.pathname,"http.method":h.method}},async()=>{try{var n,a,o,c,l,u;let d=tc(),p=await td("/",h.nextUrl,null),g=(l=h.nextUrl,u=e=>{i=e},function(e,t,r,n,i,a,o,s,c,l,u){function d(e){r&&r.setHeader("Set-Cookie",e)}let h={};return{type:"request",phase:e,implicitTags:a,url:{pathname:n.pathname,search:n.search??""},rootParams:i,get headers(){return h.headers||(h.headers=function(e){let t=ea.from(e);for(let e of er)t.delete(e.toLowerCase());return ea.seal(t)}(t.headers)),h.headers},get cookies(){if(!h.cookies){let e=new z.RequestCookies(ea.from(t.headers));eY(t,e),h.cookies=ef.seal(e)}return h.cookies},set cookies(value){h.cookies=value},get mutableCookies(){if(!h.mutableCookies){let e=function(e,t){let r=new z.RequestCookies(ea.from(e));return em.wrap(r,t)}(t.headers,o||(r?d:void 0));eY(t,e),h.mutableCookies=e}return h.mutableCookies},get userspaceMutableCookies(){return h.userspaceMutableCookies||(h.userspaceMutableCookies=function(e){let t=new Proxy(e,{get(e,r,n){switch(r){case"delete":return function(...r){return ew("cookies().delete"),e.delete(...r),t};case"set":return function(...r){return ew("cookies().set"),e.set(...r),t};default:return F.get(e,r,n)}}});return t}(this.mutableCookies)),h.userspaceMutableCookies},get draftMode(){return h.draftMode||(h.draftMode=new eX(c,t,this.cookies,this.mutableCookies)),h.draftMode},renderResumeDataCache:s??null,isHmrRefresh:l,serverComponentsHmrCache:u||globalThis.__serverComponentsHmrCache}}("action",h,void 0,l,{},p,u,void 0,d,!1,void 0)),m=function({page:e,fallbackRouteParams:t,renderOpts:r,requestEndedState:n,isPrefetchRequest:i,buildId:a,previouslyRevalidatedTags:o}){var s;let c={isStaticGeneration:!r.shouldWaitOnAllReady&&!r.supportsDynamicResponse&&!r.isDraftMode&&!r.isPossibleServerAction,page:e,fallbackRouteParams:t,route:(s=e.split("/").reduce((e,t,r,n)=>t?"("===t[0]&&t.endsWith(")")||"@"===t[0]||("page"===t||"route"===t)&&r===n.length-1?e:e+"/"+t:e,"")).startsWith("/")?s:"/"+s,incrementalCache:r.incrementalCache||globalThis.__incrementalCache,cacheLifeProfiles:r.cacheLifeProfiles,isRevalidate:r.isRevalidate,isPrerendering:r.nextExport,fetchCache:r.fetchCache,isOnDemandRevalidate:r.isOnDemandRevalidate,isDraftMode:r.isDraftMode,requestEndedState:n,isPrefetchRequest:i,buildId:a,reactLoadableManifest:(null==r?void 0:r.reactLoadableManifest)||{},assetPrefix:(null==r?void 0:r.assetPrefix)||"",afterContext:function(e){let{waitUntil:t,onClose:r,onAfterTaskError:n}=e;return new ti({waitUntil:t,onClose:r,onTaskError:n})}(r),dynamicIOEnabled:r.experimental.dynamicIO,dev:r.dev??!1,previouslyRevalidatedTags:o,refreshTagsByCacheKind:function(){let e=new Map,t=e4();if(t)for(let[r,n]of t)"refreshTags"in n&&e.set(r,to(async()=>n.refreshTags()));return e}()};return r.store=c,c}({page:"/",fallbackRouteParams:null,renderOpts:{cacheLifeProfiles:null==(a=e.request.nextConfig)||null==(n=a.experimental)?void 0:n.cacheLife,experimental:{isRoutePPREnabled:!1,dynamicIO:!1,authInterrupts:!!(null==(c=e.request.nextConfig)||null==(o=c.experimental)?void 0:o.authInterrupts)},supportsDynamicResponse:!0,waitUntil:t,onClose:r.onClose.bind(r),onAfterTaskError:void 0},requestEndedState:{ended:!1},isPrefetchRequest:h.headers.has(et),buildId:s??"",previouslyRevalidatedTags:[]});return await eu.run(m,()=>ed.run(g,e.handler,h,f))}finally{setTimeout(()=>{r.dispatchClose()},0)}})}return e.handler(h,f)}))&&!(n instanceof Response))throw Object.defineProperty(TypeError("Expected an instance of Response to be returned"),"__NEXT_ERROR_CODE",{value:"E567",enumerable:!1,configurable:!0});n&&i&&n.headers.set("set-cookie",i);let g=null==n?void 0:n.headers.get("x-middleware-rewrite");if(n&&g&&(u||!a)){let t=new J(g,{forceLocale:!0,headers:e.request.headers,nextConfig:e.request.nextConfig});a||t.host!==h.nextUrl.host||(t.buildId=s||t.buildId,n.headers.set("x-middleware-rewrite",String(t)));let{url:r,isRelative:i}=ee(t.toString(),o.toString());!a&&l&&n.headers.set("x-nextjs-rewrite",r),u&&i&&(o.pathname!==t.pathname&&n.headers.set("x-nextjs-rewritten-path",t.pathname),o.search!==t.search&&n.headers.set("x-nextjs-rewritten-query",t.search.slice(1)))}let m=null==n?void 0:n.headers.get("Location");if(n&&m&&!a){let t=new J(m,{forceLocale:!1,headers:e.request.headers,nextConfig:e.request.nextConfig});n=new Response(n.body,n),t.host===o.host&&(t.buildId=s||t.buildId,n.headers.set("Location",t.toString())),l&&(n.headers.delete("Location"),n.headers.set("x-nextjs-redirect",ee(t.toString(),o.toString()).url))}let y=n||Z.next(),w=y.headers.get("x-middleware-override-headers"),b=[];if(w){for(let[e,t]of d)y.headers.set(`x-middleware-request-${e}`,t),b.push(e);b.length>0&&y.headers.set("x-middleware-override-headers",w+","+b.join(","))}return{response:y,waitUntil:("internal"===f[N].kind?Promise.all(f[N].promises).then(()=>{}):void 0)??Promise.resolve(),fetchMetrics:h.fetchMetrics}}r(280),"undefined"==typeof URLPattern||URLPattern;var ty=r(815);class tw extends Error{constructor(e){super("Dynamic server usage: "+e),this.description=e,this.digest="DYNAMIC_SERVER_USAGE"}}class tb extends Error{constructor(...e){super(...e),this.code="NEXT_STATIC_GEN_BAILOUT"}}class t_ extends Error{constructor(e){super(`During prerendering, ${e} rejects when the prerender is complete. Typically these errors are handled by React but if you move ${e} to a different context by using \`setTimeout\`, \`after\`, or similar functions you may observe this error and you should handle it in that context.`),this.expression=e,this.digest="HANGING_PROMISE_REJECTION"}}let tv=new WeakMap;function tS(){}let tE="function"==typeof ty.unstable_postpone;function tA(e,t,r,n){if(!1===n.controller.signal.aborted){let i=n.dynamicTracking;i&&null===i.syncDynamicErrorWithStack&&(i.syncDynamicExpression=t,i.syncDynamicErrorWithStack=r,!0===n.validating&&(i.syncDynamicLogged=!0)),function(e,t,r){let n=tk(`Route ${e} needs to bail out of prerendering at this point because it used ${t}.`);r.controller.abort(n);let i=r.dynamicTracking;i&&i.dynamicAccesses.push({stack:i.isDebugDynamicAccesses?Error().stack:void 0,expression:t})}(e,t,n)}throw tk(`Route ${e} needs to bail out of prerendering at this point because it used ${t}.`)}function tT(e,t){return`Route ${e} needs to bail out of prerendering at this point because it used ${t}. React throws this special object to indicate where. It should not be caught by your own try/catch. Learn more: https://nextjs.org/docs/messages/ppr-caught-error`}if(!1===function(e){return e.includes("needs to bail out of prerendering at this point because it used")&&e.includes("Learn more: https://nextjs.org/docs/messages/ppr-caught-error")}(tT("%%%","^^^")))throw Object.defineProperty(Error("Invariant: isDynamicPostpone misidentified a postpone reason. This is a bug in Next.js"),"__NEXT_ERROR_CODE",{value:"E296",enumerable:!1,configurable:!0});function tk(e){let t=Object.defineProperty(Error(e),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return t.digest="NEXT_PRERENDER_INTERRUPTED",t}RegExp(`\\n\\s+at __next_metadata_boundary__[\\n\\s]`),RegExp(`\\n\\s+at __next_viewport_boundary__[\\n\\s]`),RegExp(`\\n\\s+at __next_outlet_boundary__[\\n\\s]`),new WeakMap;let tR={current:null},tC="function"==typeof ty.cache?ty.cache:e=>e,tx=console.warn;function tP(e){return function(...t){tx(e(...t))}}function tO(){let e="cookies",t=eu.getStore(),r=ed.getStore();if(t){if(r&&"after"===r.phase&&!function(){let e=tn.getStore();return(null==e?void 0:e.rootTaskSpawnPhase)==="action"}())throw Object.defineProperty(Error(`Route ${t.route} used "cookies" inside "after(...)". This is not supported. If you need this data inside an "after" callback, use "cookies" outside of the callback. See more info here: https://nextjs.org/docs/canary/app/api-reference/functions/after`),"__NEXT_ERROR_CODE",{value:"E88",enumerable:!1,configurable:!0});if(t.forceStatic)return tI(ef.seal(new z.RequestCookies(new Headers({}))));if(r){if("cache"===r.type)throw Object.defineProperty(Error(`Route ${t.route} used "cookies" inside "use cache". Accessing Dynamic data sources inside a cache scope is not supported. If you need this data inside a cached function use "cookies" outside of the cached function and pass the required dynamic data in as an argument. See more info here: https://nextjs.org/docs/messages/next-request-in-use-cache`),"__NEXT_ERROR_CODE",{value:"E398",enumerable:!1,configurable:!0});else if("unstable-cache"===r.type)throw Object.defineProperty(Error(`Route ${t.route} used "cookies" inside a function cached with "unstable_cache(...)". Accessing Dynamic data sources inside a cache scope is not supported. If you need this data inside a cached function use "cookies" outside of the cached function and pass the required dynamic data in as an argument. See more info here: https://nextjs.org/docs/app/api-reference/functions/unstable_cache`),"__NEXT_ERROR_CODE",{value:"E157",enumerable:!1,configurable:!0})}if(t.dynamicShouldError)throw Object.defineProperty(new tb(`Route ${t.route} with \`dynamic = "error"\` couldn't be rendered statically because it used \`cookies\`. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`),"__NEXT_ERROR_CODE",{value:"E549",enumerable:!1,configurable:!0});if(r)if("prerender"===r.type){var n,i,a,o=t.route,s=r;let e=tN.get(s);if(e)return e;let c=function(e,t){if(e.aborted)return Promise.reject(new t_(t));{let r=new Promise((r,n)=>{let i=n.bind(null,new t_(t)),a=tv.get(e);if(a)a.push(i);else{let t=[i];tv.set(e,t),e.addEventListener("abort",()=>{for(let e=0;e<t.length;e++)t[e]()},{once:!0})}});return r.catch(tS),r}}(s.renderSignal,"`cookies()`");return tN.set(s,c),Object.defineProperties(c,{[Symbol.iterator]:{value:function(){let e="`cookies()[Symbol.iterator]()`",t=tj(o,e);tA(o,e,t,s)}},size:{get(){let e="`cookies().size`",t=tj(o,e);tA(o,e,t,s)}},get:{value:function(){let e;e=0==arguments.length?"`cookies().get()`":`\`cookies().get(${tM(arguments[0])})\``;let t=tj(o,e);tA(o,e,t,s)}},getAll:{value:function(){let e;e=0==arguments.length?"`cookies().getAll()`":`\`cookies().getAll(${tM(arguments[0])})\``;let t=tj(o,e);tA(o,e,t,s)}},has:{value:function(){let e;e=0==arguments.length?"`cookies().has()`":`\`cookies().has(${tM(arguments[0])})\``;let t=tj(o,e);tA(o,e,t,s)}},set:{value:function(){let e;if(0==arguments.length)e="`cookies().set()`";else{let t=arguments[0];e=t?`\`cookies().set(${tM(t)}, ...)\``:"`cookies().set(...)`"}let t=tj(o,e);tA(o,e,t,s)}},delete:{value:function(){let e;e=0==arguments.length?"`cookies().delete()`":1==arguments.length?`\`cookies().delete(${tM(arguments[0])})\``:`\`cookies().delete(${tM(arguments[0])}, ...)\``;let t=tj(o,e);tA(o,e,t,s)}},clear:{value:function(){let e="`cookies().clear()`",t=tj(o,e);tA(o,e,t,s)}},toString:{value:function(){let e="`cookies().toString()`",t=tj(o,e);tA(o,e,t,s)}}}),c}else{"prerender-ppr"===r.type?(n=t.route,i=e,a=r.dynamicTracking,function(){if(!tE)throw Object.defineProperty(Error("Invariant: React.unstable_postpone is not defined. This suggests the wrong version of React was loaded. This is a bug in Next.js"),"__NEXT_ERROR_CODE",{value:"E224",enumerable:!1,configurable:!0})}(),a&&a.dynamicAccesses.push({stack:a.isDebugDynamicAccesses?Error().stack:void 0,expression:i}),ty.unstable_postpone(tT(n,i))):"prerender-legacy"===r.type&&function(e,t,r){let n=Object.defineProperty(new tw(`Route ${t.route} couldn't be rendered statically because it used \`${e}\`. See more info here: https://nextjs.org/docs/messages/dynamic-server-error`),"__NEXT_ERROR_CODE",{value:"E558",enumerable:!1,configurable:!0});throw r.revalidate=0,t.dynamicUsageDescription=e,t.dynamicUsageStack=n.stack,n}(e,t,r)}r&&"cache"!==r.type&&"unstable-cache"!==r.type&&("prerender"===r.type||"prerender-legacy"===r.type)&&(r.revalidate=0)}let c=eh(e);return tI(ey(c)?c.userspaceMutableCookies:c.cookies)}tC(e=>{try{tx(tR.current)}finally{tR.current=null}});let tN=new WeakMap;function tI(e){let t=tN.get(e);if(t)return t;let r=Promise.resolve(e);return tN.set(e,r),Object.defineProperties(r,{[Symbol.iterator]:{value:e[Symbol.iterator]?e[Symbol.iterator].bind(e):tH.bind(e)},size:{get:()=>e.size},get:{value:e.get.bind(e)},getAll:{value:e.getAll.bind(e)},has:{value:e.has.bind(e)},set:{value:e.set.bind(e)},delete:{value:e.delete.bind(e)},clear:{value:"function"==typeof e.clear?e.clear.bind(e):tL.bind(e,r)},toString:{value:e.toString.bind(e)}}),r}function tM(e){return"object"==typeof e&&null!==e&&"string"==typeof e.name?`'${e.name}'`:"string"==typeof e?`'${e}'`:"..."}let tD=tP(tj);function tj(e,t){let r=e?`Route "${e}" `:"This route ";return Object.defineProperty(Error(`${r}used ${t}. \`cookies()\` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis`),"__NEXT_ERROR_CODE",{value:"E223",enumerable:!1,configurable:!0})}function tH(){return this.getAll().map(e=>[e.name,e]).values()}function tL(e){for(let e of this.getAll())this.delete(e.name);return e}let tU=new WeakMap,tW=tP(function(e,t){let r=e?`Route "${e}" `:"This route ";return Object.defineProperty(Error(`${r}used ${t}. \`headers()\` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis`),"__NEXT_ERROR_CODE",{value:"E277",enumerable:!1,configurable:!0})});function t$(){let e=workAsyncStorage.getStore(),t=workUnitAsyncStorage.getStore();switch((!e||!t)&&throwForMissingRequestStore("draftMode"),t.type){case"request":return tK(t.draftMode,e);case"cache":case"unstable-cache":let r=getDraftModeProviderForCacheScope(e,t);if(r)return tK(r,e);case"prerender":case"prerender-ppr":case"prerender-legacy":return tB(null);default:return t}}function tK(e,t){let r,n=tq.get(t$);return n||(r=tB(e),tq.set(e,r),r)}let tq=new WeakMap;function tB(e){let t=new tJ(e),r=Promise.resolve(t);return Object.defineProperty(r,"isEnabled",{get:()=>t.isEnabled,set(e){Object.defineProperty(r,"isEnabled",{value:e,writable:!0,enumerable:!0})},enumerable:!0,configurable:!0}),r.enable=t.enable.bind(t),r.disable=t.disable.bind(t),r}class tJ{constructor(e){this._provider=e}get isEnabled(){return null!==this._provider&&this._provider.isEnabled}enable(){tV("draftMode().enable()"),null!==this._provider&&this._provider.enable()}disable(){tV("draftMode().disable()"),null!==this._provider&&this._provider.disable()}}let tz=tP(function(e,t){let r=e?`Route "${e}" `:"This route ";return Object.defineProperty(Error(`${r}used ${t}. \`draftMode()\` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis`),"__NEXT_ERROR_CODE",{value:"E377",enumerable:!1,configurable:!0})});function tV(e){let t=workAsyncStorage.getStore(),r=workUnitAsyncStorage.getStore();if(t){if(r){if("cache"===r.type)throw Object.defineProperty(Error(`Route ${t.route} used "${e}" inside "use cache". The enabled status of draftMode can be read in caches but you must not enable or disable draftMode inside a cache. See more info here: https://nextjs.org/docs/messages/next-request-in-use-cache`),"__NEXT_ERROR_CODE",{value:"E246",enumerable:!1,configurable:!0});else if("unstable-cache"===r.type)throw Object.defineProperty(Error(`Route ${t.route} used "${e}" inside a function cached with "unstable_cache(...)". The enabled status of draftMode can be read in caches but you must not enable or disable draftMode inside a cache. See more info here: https://nextjs.org/docs/app/api-reference/functions/unstable_cache`),"__NEXT_ERROR_CODE",{value:"E259",enumerable:!1,configurable:!0});else if("after"===r.phase)throw Object.defineProperty(Error(`Route ${t.route} used "${e}" inside \`after\`. The enabled status of draftMode can be read inside \`after\` but you cannot enable or disable draftMode. See more info here: https://nextjs.org/docs/app/api-reference/functions/after`),"__NEXT_ERROR_CODE",{value:"E348",enumerable:!1,configurable:!0})}if(t.dynamicShouldError)throw Object.defineProperty(new StaticGenBailoutError(`Route ${t.route} with \`dynamic = "error"\` couldn't be rendered statically because it used \`${e}\`. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`),"__NEXT_ERROR_CODE",{value:"E553",enumerable:!1,configurable:!0});if(r){if("prerender"===r.type){let n=Object.defineProperty(Error(`Route ${t.route} used ${e} without first calling \`await connection()\`. See more info here: https://nextjs.org/docs/messages/next-prerender-sync-headers`),"__NEXT_ERROR_CODE",{value:"E126",enumerable:!1,configurable:!0});abortAndThrowOnSynchronousRequestDataAccess(t.route,e,n,r)}else if("prerender-ppr"===r.type)postponeWithTracking(t.route,e,r.dynamicTracking);else if("prerender-legacy"===r.type){r.revalidate=0;let n=Object.defineProperty(new DynamicServerError(`Route ${t.route} couldn't be rendered statically because it used \`${e}\`. See more info here: https://nextjs.org/docs/messages/dynamic-server-error`),"__NEXT_ERROR_CODE",{value:"E558",enumerable:!1,configurable:!0});throw t.dynamicUsageDescription=e,t.dynamicUsageStack=n.stack,n}}}}class tG extends Error{}class tF extends tG{constructor({code:e,message:t}){super(t??"An error occured while interacting with the authorization server."),this.name="OAuth2Error",this.code=e}}class tX extends tG{constructor(e){super(e??"Discovery failed for the OpenID Connect configuration."),this.code="discovery_error",this.name="DiscoveryError"}}class tY extends tG{constructor(e){super(e??"The state parameter is missing."),this.code="missing_state",this.name="MissingStateError"}}class tQ extends tG{constructor(e){super(e??"The state parameter is invalid."),this.code="invalid_state",this.name="InvalidStateError"}}class tZ extends tG{constructor({cause:e,message:t}){super(t??"An error occured during the authorization flow."),this.code="authorization_error",this.cause=e,this.name="AuthorizationError"}}class t0 extends tG{constructor({cause:e,message:t}){super(t??"An error occured while trying to exchange the authorization code."),this.code="authorization_code_grant_error",this.cause=e,this.name="AuthorizationCodeGrantError"}}class t1 extends tG{constructor(e){super(e??"An error occured while completing the backchannel logout request."),this.code="backchannel_logout_error",this.name="BackchannelLogoutError"}}!function(e){e.MISSING_SESSION="missing_session",e.MISSING_REFRESH_TOKEN="missing_refresh_token",e.FAILED_TO_REFRESH_TOKEN="failed_to_refresh_token"}(h||(h={}));class t2 extends tG{constructor(e,t){super(t),this.name="AccessTokenError",this.code=e}}!function(e){e.MISSING_SESSION="missing_session",e.MISSING_REFRESH_TOKEN="missing_refresh_token",e.FAILED_TO_EXCHANGE="failed_to_exchange_refresh_token"}(p||(p={}));class t5 extends tG{constructor(e,t,r){super(t),this.name="AccessTokenForConnectionError",this.code=e,this.cause=r}}class t3 extends Error{constructor(e,t){super(e,t),this.code="ERR_JOSE_GENERIC",this.name=this.constructor.name,Error.captureStackTrace?.(this,this.constructor)}}t3.code="ERR_JOSE_GENERIC";class t4 extends t3{constructor(e,t,r="unspecified",n="unspecified"){super(e,{cause:{claim:r,reason:n,payload:t}}),this.code="ERR_JWT_CLAIM_VALIDATION_FAILED",this.claim=r,this.reason=n,this.payload=t}}t4.code="ERR_JWT_CLAIM_VALIDATION_FAILED";class t6 extends t3{constructor(e,t,r="unspecified",n="unspecified"){super(e,{cause:{claim:r,reason:n,payload:t}}),this.code="ERR_JWT_EXPIRED",this.claim=r,this.reason=n,this.payload=t}}t6.code="ERR_JWT_EXPIRED";class t8 extends t3{constructor(){super(...arguments),this.code="ERR_JOSE_ALG_NOT_ALLOWED"}}t8.code="ERR_JOSE_ALG_NOT_ALLOWED";class t9 extends t3{constructor(){super(...arguments),this.code="ERR_JOSE_NOT_SUPPORTED"}}t9.code="ERR_JOSE_NOT_SUPPORTED";class t7 extends t3{constructor(e="decryption operation failed",t){super(e,t),this.code="ERR_JWE_DECRYPTION_FAILED"}}t7.code="ERR_JWE_DECRYPTION_FAILED";class re extends t3{constructor(){super(...arguments),this.code="ERR_JWE_INVALID"}}re.code="ERR_JWE_INVALID";class rt extends t3{constructor(){super(...arguments),this.code="ERR_JWS_INVALID"}}rt.code="ERR_JWS_INVALID";class rr extends t3{constructor(){super(...arguments),this.code="ERR_JWT_INVALID"}}rr.code="ERR_JWT_INVALID";class rn extends t3{constructor(){super(...arguments),this.code="ERR_JWK_INVALID"}}rn.code="ERR_JWK_INVALID";class ri extends t3{constructor(){super(...arguments),this.code="ERR_JWKS_INVALID"}}ri.code="ERR_JWKS_INVALID";class ra extends t3{constructor(e="no applicable key found in the JSON Web Key Set",t){super(e,t),this.code="ERR_JWKS_NO_MATCHING_KEY"}}ra.code="ERR_JWKS_NO_MATCHING_KEY";class ro extends t3{constructor(e="multiple matching keys found in the JSON Web Key Set",t){super(e,t),this.code="ERR_JWKS_MULTIPLE_MATCHING_KEYS"}}Symbol.asyncIterator,ro.code="ERR_JWKS_MULTIPLE_MATCHING_KEYS";class rs extends t3{constructor(e="request timed out",t){super(e,t),this.code="ERR_JWKS_TIMEOUT"}}rs.code="ERR_JWKS_TIMEOUT";class rc extends t3{constructor(e="signature verification failed",t){super(e,t),this.code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED"}}rc.code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED";let rl=async(e,t,r)=>{let n,i,a=!1;"function"==typeof AbortController&&(n=new AbortController,i=setTimeout(()=>{a=!0,n.abort()},t));let o=await fetch(e.href,{signal:n?n.signal:void 0,redirect:"manual",headers:r.headers}).catch(e=>{if(a)throw new rs;throw e});if(void 0!==i&&clearTimeout(i),200!==o.status)throw new t3("Expected 200 OK from the JSON Web Key Set HTTP response");try{return await o.json()}catch{throw new t3("Failed to parse the JSON Web Key Set HTTP response as JSON")}},ru=crypto,rd=e=>e instanceof CryptoKey,rh=async(e,t)=>{let r=`SHA-${e.slice(-3)}`;return new Uint8Array(await ru.subtle.digest(r,t))},rp=new TextEncoder,rf=new TextDecoder;function rg(...e){let t=new Uint8Array(e.reduce((e,{length:t})=>e+t,0)),r=0;for(let n of e)t.set(n,r),r+=n.length;return t}function rm(e,t,r){if(t<0||t>=0x100000000)throw RangeError(`value must be >= 0 and <= ${0x100000000-1}. Received ${t}`);e.set([t>>>24,t>>>16,t>>>8,255&t],r)}function ry(e){let t=Math.floor(e/0x100000000),r=new Uint8Array(8);return rm(r,t,0),rm(r,e%0x100000000,4),r}function rw(e){let t=new Uint8Array(4);return rm(t,e),t}function rb(e){return rg(rw(e.length),e)}async function r_(e,t,r){let n=Math.ceil((t>>3)/32),i=new Uint8Array(32*n);for(let t=0;t<n;t++){let n=new Uint8Array(4+e.length+r.length);n.set(rw(t+1)),n.set(e,4),n.set(r,4+e.length),i.set(await rh("sha256",n),32*t)}return i.slice(0,t>>3)}let rv=e=>{let t=e;"string"==typeof t&&(t=rp.encode(t));let r=[];for(let e=0;e<t.length;e+=32768)r.push(String.fromCharCode.apply(null,t.subarray(e,e+32768)));return btoa(r.join(""))},rS=e=>rv(e).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_"),rE=e=>{let t=atob(e),r=new Uint8Array(t.length);for(let e=0;e<t.length;e++)r[e]=t.charCodeAt(e);return r},rA=e=>{let t=e;t instanceof Uint8Array&&(t=rf.decode(t)),t=t.replace(/-/g,"+").replace(/_/g,"/").replace(/\s/g,"");try{return rE(t)}catch{throw TypeError("The input to be decoded is not correctly encoded.")}},rT=(e,t,r=0)=>{0===r&&(t.unshift(t.length),t.unshift(6));let n=e.indexOf(t[0],r);if(-1===n)return!1;let i=e.subarray(n,n+t.length);return i.length===t.length&&(i.every((e,r)=>e===t[r])||rT(e,t,n+1))},rk=e=>{switch(!0){case rT(e,[42,134,72,206,61,3,1,7]):return"P-256";case rT(e,[43,129,4,0,34]):return"P-384";case rT(e,[43,129,4,0,35]):return"P-521";case rT(e,[43,101,110]):return"X25519";case rT(e,[43,101,111]):return"X448";case rT(e,[43,101,112]):return"Ed25519";case rT(e,[43,101,113]):return"Ed448";default:throw new t9("Invalid or unsupported EC Key Curve or OKP Key Sub Type")}},rR=async(e,t,r,n,i)=>{let a,o,s=new Uint8Array(atob(r.replace(e,"")).split("").map(e=>e.charCodeAt(0))),c="spki"===t;switch(n){case"PS256":case"PS384":case"PS512":a={name:"RSA-PSS",hash:`SHA-${n.slice(-3)}`},o=c?["verify"]:["sign"];break;case"RS256":case"RS384":case"RS512":a={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${n.slice(-3)}`},o=c?["verify"]:["sign"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":a={name:"RSA-OAEP",hash:`SHA-${parseInt(n.slice(-3),10)||1}`},o=c?["encrypt","wrapKey"]:["decrypt","unwrapKey"];break;case"ES256":a={name:"ECDSA",namedCurve:"P-256"},o=c?["verify"]:["sign"];break;case"ES384":a={name:"ECDSA",namedCurve:"P-384"},o=c?["verify"]:["sign"];break;case"ES512":a={name:"ECDSA",namedCurve:"P-521"},o=c?["verify"]:["sign"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{let e=rk(s);a=e.startsWith("P-")?{name:"ECDH",namedCurve:e}:{name:e},o=c?[]:["deriveBits"];break}case"Ed25519":a={name:"Ed25519"},o=c?["verify"]:["sign"];break;case"EdDSA":a={name:rk(s)},o=c?["verify"]:["sign"];break;default:throw new t9('Invalid or unsupported "alg" (Algorithm) value')}return ru.subtle.importKey(t,s,a,i?.extractable??!1,o)},rC=(e,t,r)=>rR(/(?:-----(?:BEGIN|END) PRIVATE KEY-----|\s)/g,"pkcs8",e,t,r),rx=async e=>{if(!e.alg)throw TypeError('"alg" argument is required when "jwk.alg" is not present');let{algorithm:t,keyUsages:r}=function(e){let t,r;switch(e.kty){case"RSA":switch(e.alg){case"PS256":case"PS384":case"PS512":t={name:"RSA-PSS",hash:`SHA-${e.alg.slice(-3)}`},r=e.d?["sign"]:["verify"];break;case"RS256":case"RS384":case"RS512":t={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${e.alg.slice(-3)}`},r=e.d?["sign"]:["verify"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":t={name:"RSA-OAEP",hash:`SHA-${parseInt(e.alg.slice(-3),10)||1}`},r=e.d?["decrypt","unwrapKey"]:["encrypt","wrapKey"];break;default:throw new t9('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;case"EC":switch(e.alg){case"ES256":t={name:"ECDSA",namedCurve:"P-256"},r=e.d?["sign"]:["verify"];break;case"ES384":t={name:"ECDSA",namedCurve:"P-384"},r=e.d?["sign"]:["verify"];break;case"ES512":t={name:"ECDSA",namedCurve:"P-521"},r=e.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":t={name:"ECDH",namedCurve:e.crv},r=e.d?["deriveBits"]:[];break;default:throw new t9('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;case"OKP":switch(e.alg){case"Ed25519":t={name:"Ed25519"},r=e.d?["sign"]:["verify"];break;case"EdDSA":t={name:e.crv},r=e.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":t={name:e.crv},r=e.d?["deriveBits"]:[];break;default:throw new t9('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;default:throw new t9('Invalid or unsupported JWK "kty" (Key Type) Parameter value')}return{algorithm:t,keyUsages:r}}(e),n=[t,e.ext??!1,e.key_ops??r],i={...e};return delete i.alg,delete i.use,ru.subtle.importKey("jwk",i,...n)};function rP(e){if("object"!=typeof e||null===e||"[object Object]"!==Object.prototype.toString.call(e))return!1;if(null===Object.getPrototypeOf(e))return!0;let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}async function rO(e,t,r){if("string"!=typeof e||0!==e.indexOf("-----BEGIN PRIVATE KEY-----"))throw TypeError('"pkcs8" must be PKCS#8 formatted string');return rC(e,t,r)}async function rN(e,t){if(!rP(e))throw TypeError("JWK must be an object");switch(t||(t=e.alg),e.kty){case"oct":if("string"!=typeof e.k||!e.k)throw TypeError('missing "k" (Key Value) Parameter value');return rA(e.k);case"RSA":if("oth"in e&&void 0!==e.oth)throw new t9('RSA JWK "oth" (Other Primes Info) Parameter value is not supported');case"EC":case"OKP":return rx({...e,alg:t});default:throw new t9('Unsupported "kty" (Key Type) Parameter value')}}function rI(e){return rP(e)}function rM(e){return"function"==typeof structuredClone?structuredClone(e):JSON.parse(JSON.stringify(e))}class rD{constructor(e){if(this._cached=new WeakMap,!function(e){return e&&"object"==typeof e&&Array.isArray(e.keys)&&e.keys.every(rI)}(e))throw new ri("JSON Web Key Set malformed");this._jwks=rM(e)}async getKey(e,t){let{alg:r,kid:n}={...e,...t?.header},i=function(e){switch("string"==typeof e&&e.slice(0,2)){case"RS":case"PS":return"RSA";case"ES":return"EC";case"Ed":return"OKP";default:throw new t9('Unsupported "alg" value for a JSON Web Key Set')}}(r),a=this._jwks.keys.filter(e=>{let t=i===e.kty;if(t&&"string"==typeof n&&(t=n===e.kid),t&&"string"==typeof e.alg&&(t=r===e.alg),t&&"string"==typeof e.use&&(t="sig"===e.use),t&&Array.isArray(e.key_ops)&&(t=e.key_ops.includes("verify")),t)switch(r){case"ES256":t="P-256"===e.crv;break;case"ES256K":t="secp256k1"===e.crv;break;case"ES384":t="P-384"===e.crv;break;case"ES512":t="P-521"===e.crv;break;case"Ed25519":t="Ed25519"===e.crv;break;case"EdDSA":t="Ed25519"===e.crv||"Ed448"===e.crv}return t}),{0:o,length:s}=a;if(0===s)throw new ra;if(1!==s){let e=new ro,{_cached:t}=this;throw e[Symbol.asyncIterator]=async function*(){for(let e of a)try{yield await rj(t,e,r)}catch{}},e}return rj(this._cached,o,r)}}async function rj(e,t,r){let n=e.get(t)||e.set(t,{}).get(t);if(void 0===n[r]){let e=await rN({...t,ext:!0},r);if(e instanceof Uint8Array||"public"!==e.type)throw new ri("JSON Web Key Set members must be public keys");n[r]=e}return n[r]}function rH(e){let t=new rD(e),r=async(e,r)=>t.getKey(e,r);return Object.defineProperties(r,{jwks:{value:()=>rM(t._jwks),enumerable:!0,configurable:!1,writable:!1}}),r}"undefined"!=typeof navigator&&navigator.userAgent?.startsWith?.("Mozilla/5.0 ")||(i="jose/v5.10.0");let rL=Symbol();class rU{constructor(e,t){if(!(e instanceof URL))throw TypeError("url must be an instance of URL");this._url=new URL(e.href),this._options={agent:t?.agent,headers:t?.headers},this._timeoutDuration="number"==typeof t?.timeoutDuration?t?.timeoutDuration:5e3,this._cooldownDuration="number"==typeof t?.cooldownDuration?t?.cooldownDuration:3e4,this._cacheMaxAge="number"==typeof t?.cacheMaxAge?t?.cacheMaxAge:6e5,t?.[rL]!==void 0&&(this._cache=t?.[rL],function(e,t){return!("object"!=typeof e||null===e||!("uat"in e)||"number"!=typeof e.uat||Date.now()-e.uat>=t)&&"jwks"in e&&!!rP(e.jwks)&&!!Array.isArray(e.jwks.keys)&&!!Array.prototype.every.call(e.jwks.keys,rP)}(t?.[rL],this._cacheMaxAge)&&(this._jwksTimestamp=this._cache.uat,this._local=rH(this._cache.jwks)))}coolingDown(){return"number"==typeof this._jwksTimestamp&&Date.now()<this._jwksTimestamp+this._cooldownDuration}fresh(){return"number"==typeof this._jwksTimestamp&&Date.now()<this._jwksTimestamp+this._cacheMaxAge}async getKey(e,t){this._local&&this.fresh()||await this.reload();try{return await this._local(e,t)}catch(r){if(r instanceof ra&&!1===this.coolingDown())return await this.reload(),this._local(e,t);throw r}}async reload(){this._pendingFetch&&("undefined"!=typeof WebSocketPair||"undefined"!=typeof navigator&&"Cloudflare-Workers"===navigator.userAgent)&&(this._pendingFetch=void 0);let e=new Headers(this._options.headers);i&&!e.has("User-Agent")&&(e.set("User-Agent",i),this._options.headers=Object.fromEntries(e.entries())),this._pendingFetch||(this._pendingFetch=rl(this._url,this._timeoutDuration,this._options).then(e=>{this._local=rH(e),this._cache&&(this._cache.uat=Date.now(),this._cache.jwks=e),this._jwksTimestamp=Date.now(),this._pendingFetch=void 0}).catch(e=>{throw this._pendingFetch=void 0,e})),await this._pendingFetch}}let rW=(e,t)=>{if(e.startsWith("RS")||e.startsWith("PS")){let{modulusLength:r}=t.algorithm;if("number"!=typeof r||r<2048)throw TypeError(`${e} requires key modulusLength to be 2048 bits or larger`)}};function r$(e,t="algorithm.name"){return TypeError(`CryptoKey does not support this operation, its ${t} must be ${e}`)}function rK(e,t){return e.name===t}function rq(e){return parseInt(e.name.slice(4),10)}function rB(e,t){if(t.length&&!t.some(t=>e.usages.includes(t))){let e="CryptoKey does not support this operation, its usages must include ";if(t.length>2){let r=t.pop();e+=`one of ${t.join(", ")}, or ${r}.`}else 2===t.length?e+=`one of ${t[0]} or ${t[1]}.`:e+=`${t[0]}.`;throw TypeError(e)}}function rJ(e,t,...r){switch(t){case"A128GCM":case"A192GCM":case"A256GCM":{if(!rK(e.algorithm,"AES-GCM"))throw r$("AES-GCM");let r=parseInt(t.slice(1,4),10);if(e.algorithm.length!==r)throw r$(r,"algorithm.length");break}case"A128KW":case"A192KW":case"A256KW":{if(!rK(e.algorithm,"AES-KW"))throw r$("AES-KW");let r=parseInt(t.slice(1,4),10);if(e.algorithm.length!==r)throw r$(r,"algorithm.length");break}case"ECDH":switch(e.algorithm.name){case"ECDH":case"X25519":case"X448":break;default:throw r$("ECDH, X25519, or X448")}break;case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":if(!rK(e.algorithm,"PBKDF2"))throw r$("PBKDF2");break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":{if(!rK(e.algorithm,"RSA-OAEP"))throw r$("RSA-OAEP");let r=parseInt(t.slice(9),10)||1;if(rq(e.algorithm.hash)!==r)throw r$(`SHA-${r}`,"algorithm.hash");break}default:throw TypeError("CryptoKey does not support this operation")}rB(e,r)}function rz(e,t,...r){if((r=r.filter(Boolean)).length>2){let t=r.pop();e+=`one of type ${r.join(", ")}, or ${t}.`}else 2===r.length?e+=`one of type ${r[0]} or ${r[1]}.`:e+=`of type ${r[0]}.`;return null==t?e+=` Received ${t}`:"function"==typeof t&&t.name?e+=` Received function ${t.name}`:"object"==typeof t&&null!=t&&t.constructor?.name&&(e+=` Received an instance of ${t.constructor.name}`),e}let rV=(e,...t)=>rz("Key must be ",e,...t);function rG(e,t,...r){return rz(`Key for the ${e} algorithm must be `,t,...r)}let rF=e=>!!rd(e)||e?.[Symbol.toStringTag]==="KeyObject",rX=["CryptoKey"];function rY(e){return rP(e)&&"string"==typeof e.kty}let rQ=e=>rA(e),rZ=e=>e?.[Symbol.toStringTag]==="KeyObject",r0=async(e,t,r,n,i=!1)=>{let a=e.get(t);if(a?.[n])return a[n];let o=await rx({...r,alg:n});return i&&Object.freeze(t),a?a[n]=o:e.set(t,{[n]:o}),o},r1={normalizePublicKey:(e,t)=>{if(rZ(e)){let r=e.export({format:"jwk"});return(delete r.d,delete r.dp,delete r.dq,delete r.p,delete r.q,delete r.qi,r.k)?rQ(r.k):(o||(o=new WeakMap),r0(o,e,r,t))}return rY(e)?e.k?rA(e.k):(o||(o=new WeakMap),r0(o,e,e,t,!0)):e},normalizePrivateKey:(e,t)=>{if(rZ(e)){let r=e.export({format:"jwk"});return r.k?rQ(r.k):(a||(a=new WeakMap),r0(a,e,r,t))}return rY(e)?e.k?rA(e.k):(a||(a=new WeakMap),r0(a,e,e,t,!0)):e}};async function r2(e,t,r){if("sign"===r&&(t=await r1.normalizePrivateKey(t,e)),"verify"===r&&(t=await r1.normalizePublicKey(t,e)),rd(t))return!function(e,t,...r){switch(t){case"HS256":case"HS384":case"HS512":{if(!rK(e.algorithm,"HMAC"))throw r$("HMAC");let r=parseInt(t.slice(2),10);if(rq(e.algorithm.hash)!==r)throw r$(`SHA-${r}`,"algorithm.hash");break}case"RS256":case"RS384":case"RS512":{if(!rK(e.algorithm,"RSASSA-PKCS1-v1_5"))throw r$("RSASSA-PKCS1-v1_5");let r=parseInt(t.slice(2),10);if(rq(e.algorithm.hash)!==r)throw r$(`SHA-${r}`,"algorithm.hash");break}case"PS256":case"PS384":case"PS512":{if(!rK(e.algorithm,"RSA-PSS"))throw r$("RSA-PSS");let r=parseInt(t.slice(2),10);if(rq(e.algorithm.hash)!==r)throw r$(`SHA-${r}`,"algorithm.hash");break}case"EdDSA":if("Ed25519"!==e.algorithm.name&&"Ed448"!==e.algorithm.name)throw r$("Ed25519 or Ed448");break;case"Ed25519":if(!rK(e.algorithm,"Ed25519"))throw r$("Ed25519");break;case"ES256":case"ES384":case"ES512":{if(!rK(e.algorithm,"ECDSA"))throw r$("ECDSA");let r=function(e){switch(e){case"ES256":return"P-256";case"ES384":return"P-384";case"ES512":return"P-521";default:throw Error("unreachable")}}(t);if(e.algorithm.namedCurve!==r)throw r$(r,"algorithm.namedCurve");break}default:throw TypeError("CryptoKey does not support this operation")}rB(e,r)}(t,e,r),t;if(t instanceof Uint8Array){if(!e.startsWith("HS"))throw TypeError(rV(t,...rX));return ru.subtle.importKey("raw",t,{hash:`SHA-${e.slice(-3)}`,name:"HMAC"},!1,[r])}throw TypeError(rV(t,...rX,"Uint8Array","JSON Web Key"))}let r5=async(e,t,r,n)=>{let i=await r2(e,t,"verify");rW(e,i);let a=function(e,t){let r=`SHA-${e.slice(-3)}`;switch(e){case"HS256":case"HS384":case"HS512":return{hash:r,name:"HMAC"};case"PS256":case"PS384":case"PS512":return{hash:r,name:"RSA-PSS",saltLength:e.slice(-3)>>3};case"RS256":case"RS384":case"RS512":return{hash:r,name:"RSASSA-PKCS1-v1_5"};case"ES256":case"ES384":case"ES512":return{hash:r,name:"ECDSA",namedCurve:t.namedCurve};case"Ed25519":return{name:"Ed25519"};case"EdDSA":return{name:t.name};default:throw new t9(`alg ${e} is not supported either by JOSE or your javascript runtime`)}}(e,i.algorithm);try{return await ru.subtle.verify(a,i,r,n)}catch{return!1}},r3=(...e)=>{let t,r=e.filter(Boolean);if(0===r.length||1===r.length)return!0;for(let e of r){let r=Object.keys(e);if(!t||0===t.size){t=new Set(r);continue}for(let e of r){if(t.has(e))return!1;t.add(e)}}return!0},r4=e=>e?.[Symbol.toStringTag],r6=(e,t,r)=>{if(void 0!==t.use&&"sig"!==t.use)throw TypeError("Invalid key for this operation, when present its use must be sig");if(void 0!==t.key_ops&&t.key_ops.includes?.(r)!==!0)throw TypeError(`Invalid key for this operation, when present its key_ops must include ${r}`);if(void 0!==t.alg&&t.alg!==e)throw TypeError(`Invalid key for this operation, when present its alg must be ${e}`);return!0},r8=(e,t,r,n)=>{if(!(t instanceof Uint8Array)){if(n&&rY(t)){if(function(e){return rY(e)&&"oct"===e.kty&&"string"==typeof e.k}(t)&&r6(e,t,r))return;throw TypeError('JSON Web Key for symmetric algorithms must have JWK "kty" (Key Type) equal to "oct" and the JWK "k" (Key Value) present')}if(!rF(t))throw TypeError(rG(e,t,...rX,"Uint8Array",n?"JSON Web Key":null));if("secret"!==t.type)throw TypeError(`${r4(t)} instances for symmetric algorithms must be of type "secret"`)}},r9=(e,t,r,n)=>{if(n&&rY(t))switch(r){case"sign":if(function(e){return"oct"!==e.kty&&"string"==typeof e.d}(t)&&r6(e,t,r))return;throw TypeError("JSON Web Key for this operation be a private JWK");case"verify":if(function(e){return"oct"!==e.kty&&void 0===e.d}(t)&&r6(e,t,r))return;throw TypeError("JSON Web Key for this operation be a public JWK")}if(!rF(t))throw TypeError(rG(e,t,...rX,n?"JSON Web Key":null));if("secret"===t.type)throw TypeError(`${r4(t)} instances for asymmetric algorithms must not be of type "secret"`);if("sign"===r&&"public"===t.type)throw TypeError(`${r4(t)} instances for asymmetric algorithm signing must be of type "private"`);if("decrypt"===r&&"public"===t.type)throw TypeError(`${r4(t)} instances for asymmetric algorithm decryption must be of type "private"`);if(t.algorithm&&"verify"===r&&"private"===t.type)throw TypeError(`${r4(t)} instances for asymmetric algorithm verifying must be of type "public"`);if(t.algorithm&&"encrypt"===r&&"private"===t.type)throw TypeError(`${r4(t)} instances for asymmetric algorithm encryption must be of type "public"`)};function r7(e,t,r,n){t.startsWith("HS")||"dir"===t||t.startsWith("PBES2")||/^A\d{3}(?:GCM)?KW$/.test(t)?r8(t,r,n,e):r9(t,r,n,e)}let ne=r7.bind(void 0,!1),nt=r7.bind(void 0,!0),nr=function(e,t,r,n,i){let a;if(void 0!==i.crit&&n?.crit===void 0)throw new e('"crit" (Critical) Header Parameter MUST be integrity protected');if(!n||void 0===n.crit)return new Set;if(!Array.isArray(n.crit)||0===n.crit.length||n.crit.some(e=>"string"!=typeof e||0===e.length))throw new e('"crit" (Critical) Header Parameter MUST be an array of non-empty strings when present');for(let o of(a=void 0!==r?new Map([...Object.entries(r),...t.entries()]):t,n.crit)){if(!a.has(o))throw new t9(`Extension Header Parameter "${o}" is not recognized`);if(void 0===i[o])throw new e(`Extension Header Parameter "${o}" is missing`);if(a.get(o)&&void 0===n[o])throw new e(`Extension Header Parameter "${o}" MUST be integrity protected`)}return new Set(n.crit)},nn=(e,t)=>{if(void 0!==t&&(!Array.isArray(t)||t.some(e=>"string"!=typeof e)))throw TypeError(`"${e}" option must be an array of strings`);if(t)return new Set(t)};async function ni(e,t,r){let n,i;if(!rP(e))throw new rt("Flattened JWS must be an object");if(void 0===e.protected&&void 0===e.header)throw new rt('Flattened JWS must have either of the "protected" or "header" members');if(void 0!==e.protected&&"string"!=typeof e.protected)throw new rt("JWS Protected Header incorrect type");if(void 0===e.payload)throw new rt("JWS Payload missing");if("string"!=typeof e.signature)throw new rt("JWS Signature missing or incorrect type");if(void 0!==e.header&&!rP(e.header))throw new rt("JWS Unprotected Header incorrect type");let a={};if(e.protected)try{let t=rA(e.protected);a=JSON.parse(rf.decode(t))}catch{throw new rt("JWS Protected Header is invalid")}if(!r3(a,e.header))throw new rt("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");let o={...a,...e.header},s=nr(rt,new Map([["b64",!0]]),r?.crit,a,o),c=!0;if(s.has("b64")&&"boolean"!=typeof(c=a.b64))throw new rt('The "b64" (base64url-encode payload) Header Parameter must be a boolean');let{alg:l}=o;if("string"!=typeof l||!l)throw new rt('JWS "alg" (Algorithm) Header Parameter missing or invalid');let u=r&&nn("algorithms",r.algorithms);if(u&&!u.has(l))throw new t8('"alg" (Algorithm) Header Parameter value not allowed');if(c){if("string"!=typeof e.payload)throw new rt("JWS Payload must be a string")}else if("string"!=typeof e.payload&&!(e.payload instanceof Uint8Array))throw new rt("JWS Payload must be a string or an Uint8Array instance");let d=!1;"function"==typeof t?(t=await t(a,e),d=!0,nt(l,t,"verify"),rY(t)&&(t=await rN(t,l))):nt(l,t,"verify");let h=rg(rp.encode(e.protected??""),rp.encode("."),"string"==typeof e.payload?rp.encode(e.payload):e.payload);try{n=rA(e.signature)}catch{throw new rt("Failed to base64url decode the signature")}if(!await r5(l,t,n,h))throw new rc;if(c)try{i=rA(e.payload)}catch{throw new rt("Failed to base64url decode the payload")}else i="string"==typeof e.payload?rp.encode(e.payload):e.payload;let p={payload:i};return(void 0!==e.protected&&(p.protectedHeader=a),void 0!==e.header&&(p.unprotectedHeader=e.header),d)?{...p,key:t}:p}async function na(e,t,r){if(e instanceof Uint8Array&&(e=rf.decode(e)),"string"!=typeof e)throw new rt("Compact JWS must be a string or Uint8Array");let{0:n,1:i,2:a,length:o}=e.split(".");if(3!==o)throw new rt("Invalid Compact JWS");let s=await ni({payload:i,protected:n,signature:a},t,r),c={payload:s.payload,protectedHeader:s.protectedHeader};return"function"==typeof t?{...c,key:s.key}:c}let no=e=>Math.floor(e.getTime()/1e3),ns=/^(\+|\-)? ?(\d+|\d+\.\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)(?: (ago|from now))?$/i,nc=e=>{let t,r=ns.exec(e);if(!r||r[4]&&r[1])throw TypeError("Invalid time period format");let n=parseFloat(r[2]);switch(r[3].toLowerCase()){case"sec":case"secs":case"second":case"seconds":case"s":t=Math.round(n);break;case"minute":case"minutes":case"min":case"mins":case"m":t=Math.round(60*n);break;case"hour":case"hours":case"hr":case"hrs":case"h":t=Math.round(3600*n);break;case"day":case"days":case"d":t=Math.round(86400*n);break;case"week":case"weeks":case"w":t=Math.round(604800*n);break;default:t=Math.round(0x1e187e0*n)}return"-"===r[1]||"ago"===r[4]?-t:t},nl=e=>e.toLowerCase().replace(/^application\//,""),nu=(e,t)=>"string"==typeof e?t.includes(e):!!Array.isArray(e)&&t.some(Set.prototype.has.bind(new Set(e))),nd=(e,t,r={})=>{let n,i;try{n=JSON.parse(rf.decode(t))}catch{}if(!rP(n))throw new rr("JWT Claims Set must be a top-level JSON object");let{typ:a}=r;if(a&&("string"!=typeof e.typ||nl(e.typ)!==nl(a)))throw new t4('unexpected "typ" JWT header value',n,"typ","check_failed");let{requiredClaims:o=[],issuer:s,subject:c,audience:l,maxTokenAge:u}=r,d=[...o];for(let e of(void 0!==u&&d.push("iat"),void 0!==l&&d.push("aud"),void 0!==c&&d.push("sub"),void 0!==s&&d.push("iss"),new Set(d.reverse())))if(!(e in n))throw new t4(`missing required "${e}" claim`,n,e,"missing");if(s&&!(Array.isArray(s)?s:[s]).includes(n.iss))throw new t4('unexpected "iss" claim value',n,"iss","check_failed");if(c&&n.sub!==c)throw new t4('unexpected "sub" claim value',n,"sub","check_failed");if(l&&!nu(n.aud,"string"==typeof l?[l]:l))throw new t4('unexpected "aud" claim value',n,"aud","check_failed");switch(typeof r.clockTolerance){case"string":i=nc(r.clockTolerance);break;case"number":i=r.clockTolerance;break;case"undefined":i=0;break;default:throw TypeError("Invalid clockTolerance option type")}let{currentDate:h}=r,p=no(h||new Date);if((void 0!==n.iat||u)&&"number"!=typeof n.iat)throw new t4('"iat" claim must be a number',n,"iat","invalid");if(void 0!==n.nbf){if("number"!=typeof n.nbf)throw new t4('"nbf" claim must be a number',n,"nbf","invalid");if(n.nbf>p+i)throw new t4('"nbf" claim timestamp check failed',n,"nbf","check_failed")}if(void 0!==n.exp){if("number"!=typeof n.exp)throw new t4('"exp" claim must be a number',n,"exp","invalid");if(n.exp<=p-i)throw new t6('"exp" claim timestamp check failed',n,"exp","check_failed")}if(u){let e=p-n.iat;if(e-i>("number"==typeof u?u:nc(u)))throw new t6('"iat" claim timestamp check failed (too far in the past)',n,"iat","check_failed");if(e<0-i)throw new t4('"iat" claim timestamp check failed (it should be in the past)',n,"iat","check_failed")}return n};async function nh(e,t,r){let n=await na(e,t,r);if(n.protectedHeader.crit?.includes("b64")&&!1===n.protectedHeader.b64)throw new rr("JWTs MUST NOT use unencoded payload");let i={payload:nd(n.protectedHeader,n.payload,r),protectedHeader:n.protectedHeader};return"function"==typeof t?{...i,key:n.key}:i}function np(e,t){if(null==e)return!1;try{return e instanceof t||Object.getPrototypeOf(e)[Symbol.toStringTag]===t.prototype[Symbol.toStringTag]}catch{return!1}}"undefined"!=typeof navigator&&navigator.userAgent?.startsWith?.("Mozilla/5.0 ")||(s="oauth4webapi/v3.5.2");let nf="ERR_INVALID_ARG_VALUE",ng="ERR_INVALID_ARG_TYPE";function nm(e,t,r){let n=TypeError(e,{cause:r});return Object.assign(n,{code:t}),n}let ny=Symbol(),nw=Symbol(),nb=Symbol(),n_=Symbol(),nv=Symbol(),nS=Symbol(),nE=Symbol(),nA=new TextEncoder,nT=new TextDecoder;function nk(e){return"string"==typeof e?nA.encode(e):nT.decode(e)}function nR(e){return"string"==typeof e?l(e):c(e)}c=Uint8Array.prototype.toBase64?e=>(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),e.toBase64({alphabet:"base64url",omitPadding:!0})):e=>{e instanceof ArrayBuffer&&(e=new Uint8Array(e));let t=[];for(let r=0;r<e.byteLength;r+=32768)t.push(String.fromCharCode.apply(null,e.subarray(r,r+32768)));return btoa(t.join("")).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")},l=Uint8Array.fromBase64?e=>{try{return Uint8Array.fromBase64(e,{alphabet:"base64url"})}catch(e){throw nm("The input to be decoded is not correctly encoded.",nf,e)}}:e=>{try{let t=atob(e.replace(/-/g,"+").replace(/_/g,"/").replace(/\s/g,"")),r=new Uint8Array(t.length);for(let e=0;e<t.length;e++)r[e]=t.charCodeAt(e);return r}catch(e){throw nm("The input to be decoded is not correctly encoded.",nf,e)}};class nC extends Error{code;constructor(e,t){super(e,t),this.name=this.constructor.name,this.code=ij,Error.captureStackTrace?.(this,this.constructor)}}class nx extends Error{code;constructor(e,t){super(e,t),this.name=this.constructor.name,t?.code&&(this.code=t?.code),Error.captureStackTrace?.(this,this.constructor)}}function nP(e,t,r){return new nx(e,{code:t,cause:r})}function nO(e,t){if(!(e instanceof CryptoKey))throw nm(`${t} must be a CryptoKey`,ng)}function nN(e,t){if(nO(e,t),"private"!==e.type)throw nm(`${t} must be a private CryptoKey`,nf)}function nI(e){return!(null===e||"object"!=typeof e||Array.isArray(e))}function nM(e){np(e,Headers)&&(e=Object.fromEntries(e.entries()));let t=new Headers(e);if(s&&!t.has("user-agent")&&t.set("user-agent",s),t.has("authorization"))throw nm('"options.headers" must not include the "authorization" header name',nf);return t}function nD(e){if("function"==typeof e&&(e=e()),!(e instanceof AbortSignal))throw nm('"options.signal" must return or be an instance of AbortSignal',ng);return e}function nj(e){return e.includes("//")?e.replace("//","/"):e}async function nH(e,t,r,n){if(!(e instanceof URL))throw nm(`"${t}" must be an instance of URL`,ng);n2(e,n?.[ny]!==!0);let i=r(new URL(e.href)),a=nM(n?.headers);return a.set("accept","application/json"),(n?.[n_]||fetch)(i.href,{body:void 0,headers:Object.fromEntries(a.entries()),method:"GET",redirect:"manual",signal:n?.signal?nD(n.signal):void 0})}async function nL(e,t){return nH(e,"issuerIdentifier",e=>{switch(t?.algorithm){case void 0:case"oidc":e.pathname=nj(`${e.pathname}/.well-known/openid-configuration`);break;case"oauth2":var r,n;n=".well-known/oauth-authorization-server","/"===(r=e).pathname?r.pathname=n:r.pathname=nj(`${n}/${r.pathname}`);break;default:throw nm('"options.algorithm" must be "oidc" (default), or "oauth2"',nf)}return e},t)}function nU(e,t,r,n,i){try{if("number"!=typeof e||!Number.isFinite(e))throw nm(`${r} must be a number`,ng,i);if(e>0)return;if(t){if(0!==e)throw nm(`${r} must be a non-negative number`,nf,i);return}throw nm(`${r} must be a positive number`,nf,i)}catch(e){if(n)throw nP(e.message,n,i);throw e}}function nW(e,t,r,n){try{if("string"!=typeof e)throw nm(`${t} must be a string`,ng,n);if(0===e.length)throw nm(`${t} must not be empty`,nf,n)}catch(e){if(r)throw nP(e.message,r,n);throw e}}async function n$(e,t){if(!(e instanceof URL)&&e!==ad)throw nm('"expectedIssuerIdentifier" must be an instance of URL',ng);if(!np(t,Response))throw nm('"response" must be an instance of Response',ng);if(200!==t.status)throw nP('"response" is not a conform Authorization Server Metadata response (unexpected HTTP status code)',iK,t);i0(t);let r=await al(t);if(nW(r.issuer,'"response" body "issuer" property',iU,{body:r}),e!==ad&&new URL(r.issuer).href!==e.href)throw nP('"response" body "issuer" property does not match the expected value',iV,{expected:e.href,body:r,attribute:"issuer"});return r}function nK(e){var t=e,r="application/json";if(ih(t)!==r)throw nq(t,r)}function nq(e,...t){let r='"response" content-type must be ';if(t.length>2){let e=t.pop();r+=`${t.join(", ")}, or ${e}`}else 2===t.length?r+=`${t[0]} or ${t[1]}`:r+=t[0];return nP(r,i$,e)}function nB(){return nR(crypto.getRandomValues(new Uint8Array(32)))}async function nJ(e){return nW(e,"codeVerifier"),nR(await crypto.subtle.digest("SHA-256",nk(e)))}function nz(e){switch(e.algorithm.name){case"RSA-PSS":switch(e.algorithm.hash.name){case"SHA-256":return"PS256";case"SHA-384":return"PS384";case"SHA-512":return"PS512";default:throw new nC("unsupported RsaHashedKeyAlgorithm hash name",{cause:e})}case"RSASSA-PKCS1-v1_5":switch(e.algorithm.hash.name){case"SHA-256":return"RS256";case"SHA-384":return"RS384";case"SHA-512":return"RS512";default:throw new nC("unsupported RsaHashedKeyAlgorithm hash name",{cause:e})}case"ECDSA":switch(e.algorithm.namedCurve){case"P-256":return"ES256";case"P-384":return"ES384";case"P-521":return"ES512";default:throw new nC("unsupported EcKeyAlgorithm namedCurve",{cause:e})}case"Ed25519":case"EdDSA":return"Ed25519";default:throw new nC("unsupported CryptoKey algorithm name",{cause:e})}}function nV(e){let t=e?.[nw];return"number"==typeof t&&Number.isFinite(t)?t:0}function nG(e){let t=e?.[nb];return"number"==typeof t&&Number.isFinite(t)&&-1!==Math.sign(t)?t:30}function nF(){return Math.floor(Date.now()/1e3)}function nX(e){if("object"!=typeof e||null===e)throw nm('"as" must be an object',ng);nW(e.issuer,'"as.issuer"')}function nY(e){if("object"!=typeof e||null===e)throw nm('"client" must be an object',ng);nW(e.client_id,'"client.client_id"')}async function nQ(e,t,r){if(!r.usages.includes("sign"))throw nm('CryptoKey instances used for signing assertions must include "sign" in their "usages"',nf);let n=`${nR(nk(JSON.stringify(e)))}.${nR(nk(JSON.stringify(t)))}`,i=nR(await crypto.subtle.sign(i4(r),r,nk(n)));return`${n}.${i}`}async function nZ(e){let{kty:t,e:r,n,x:i,y:a,crv:o}=await crypto.subtle.exportKey("jwk",e),s={kty:t,e:r,n,x:i,y:a,crv:o};return u.set(e,s),s}async function n0(e){return(u||=new WeakMap).get(e)||nZ(e)}let n1=URL.parse?(e,t)=>URL.parse(e,t):(e,t)=>{try{return new URL(e,t)}catch{return null}};function n2(e,t){if(t&&"https:"!==e.protocol)throw nP("only requests to HTTPS are allowed",iq,e);if("https:"!==e.protocol&&"http:"!==e.protocol)throw nP("only HTTP and HTTPS requests are allowed",iB,e)}function n5(e,t,r,n){let i;if("string"!=typeof e||!(i=n1(e)))throw nP(`authorization server metadata does not contain a valid ${r?`"as.mtls_endpoint_aliases.${t}"`:`"as.${t}"`}`,void 0===e?iF:iX,{attribute:r?`mtls_endpoint_aliases.${t}`:t});return n2(i,n),i}function n3(e,t,r,n){return r&&e.mtls_endpoint_aliases&&t in e.mtls_endpoint_aliases?n5(e.mtls_endpoint_aliases[t],t,r,n):n5(e[t],t,r,n)}async function n4(e,t,r,n,i){nX(e),nY(t);let a=n3(e,"pushed_authorization_request_endpoint",t.use_mtls_endpoint_aliases,i?.[ny]!==!0),o=new URLSearchParams(n);o.set("client_id",t.client_id);let s=nM(i?.headers);s.set("accept","application/json"),i?.DPoP!==void 0&&(ic(i.DPoP),await i.DPoP.addProof(a,s,"POST"));let c=await ip(e,t,r,a,o,s,i);return i?.DPoP?.cacheNonce(c),c}class n6 extends Error{cause;code;error;status;error_description;response;constructor(e,t){super(e,t),this.name=this.constructor.name,this.code=iD,this.cause=t.cause,this.error=t.cause.error,this.status=t.response.status,this.error_description=t.cause.error_description,Object.defineProperty(this,"response",{enumerable:!1,value:t.response}),Error.captureStackTrace?.(this,this.constructor)}}class n8 extends Error{cause;code;error;error_description;constructor(e,t){super(e,t),this.name=this.constructor.name,this.code=iH,this.cause=t.cause,this.error=t.cause.get("error"),this.error_description=t.cause.get("error_description")??void 0,Error.captureStackTrace?.(this,this.constructor)}}class n9 extends Error{cause;code;response;status;constructor(e,t){super(e,t),this.name=this.constructor.name,this.code=iM,this.cause=t.cause,this.status=t.response.status,this.response=t.response,Object.defineProperty(this,"response",{enumerable:!1}),Error.captureStackTrace?.(this,this.constructor)}}let n7="[a-zA-Z0-9!#$%&\\'\\*\\+\\-\\.\\^_`\\|~]+",ie=RegExp("^[,\\s]*("+n7+")\\s(.*)"),it=RegExp("^[,\\s]*("+n7+')\\s*=\\s*"((?:[^"\\\\]|\\\\.)*)"[,\\s]*(.*)'),ir=RegExp("^[,\\s]*"+("("+n7+")\\s*=\\s*(")+n7+")[,\\s]*(.*)"),ii=RegExp("^([a-zA-Z0-9\\-\\._\\~\\+\\/]+[=]{0,2})(?:$|[,\\s])(.*)");async function ia(e,t,r){if(nX(e),nY(t),!np(r,Response))throw nm('"response" must be an instance of Response',ng);iv(r),await is(r,201,"Pushed Authorization Request Endpoint"),i0(r);let n=await al(r);nW(n.request_uri,'"response" body "request_uri" property',iU,{body:n});let i="number"!=typeof n.expires_in?parseFloat(n.expires_in):n.expires_in;return nU(i,!1,'"response" body "expires_in" property',iU,{body:n}),n.expires_in=i,n}async function io(e){if(e.status>399&&e.status<500){i0(e),nK(e);try{let t=await e.clone().json();if(nI(t)&&"string"==typeof t.error&&t.error.length)return t}catch{}}}async function is(e,t,r){if(e.status!==t){let t;if(t=await io(e))throw await e.body?.cancel(),new n6("server responded with an error in the response body",{cause:t,response:e});throw nP(`"response" is not a conform ${r} response (unexpected HTTP status code)`,iK,e)}}function ic(e){if(!iT.has(e))throw nm('"options.DPoP" is not a valid DPoPHandle',nf)}function il(e,t,r,n){(d||=new WeakMap).set(e,{jwks:t,uat:r,get age(){return nF()-this.uat}}),n&&Object.assign(n,{jwks:structuredClone(t),uat:r})}function iu(e,t){d?.delete(e),delete t?.jwks,delete t?.uat}async function id(e,t,r){var n;let i,a,o,{alg:s,kid:c}=r;if(function(e){if(!i5(e.alg))throw new nC('unsupported JWS "alg" identifier',{cause:{alg:e.alg}})}(r),!d?.has(e)&&!("object"!=typeof(n=t?.[nE])||null===n||!("uat"in n)||"number"!=typeof n.uat||nF()-n.uat>=300)&&"jwks"in n&&nI(n.jwks)&&Array.isArray(n.jwks.keys)&&Array.prototype.every.call(n.jwks.keys,nI)&&il(e,t?.[nE].jwks,t?.[nE].uat),d?.has(e)){if({jwks:i,age:a}=d.get(e),a>=300)return iu(e,t?.[nE]),id(e,t,r)}else i=await i1(e,t).then(i2),a=0,il(e,i,nF(),t?.[nE]);switch(s.slice(0,2)){case"RS":case"PS":o="RSA";break;case"ES":o="EC";break;case"Ed":o="OKP";break;default:throw new nC("unsupported JWS algorithm",{cause:{alg:s}})}let l=i.keys.filter(e=>{if(e.kty!==o||void 0!==c&&c!==e.kid||void 0!==e.alg&&s!==e.alg||void 0!==e.use&&"sig"!==e.use||e.key_ops?.includes("verify")===!1)return!1;switch(!0){case"ES256"===s&&"P-256"!==e.crv:case"ES384"===s&&"P-384"!==e.crv:case"ES512"===s&&"P-521"!==e.crv:case"Ed25519"===s&&"Ed25519"!==e.crv:case"EdDSA"===s&&"Ed25519"!==e.crv:return!1}return!0}),{0:u,length:h}=l;if(!h){if(a>=60)return iu(e,t?.[nE]),id(e,t,r);throw nP("error when selecting a JWT verification key, no applicable keys found",iG,{header:r,candidates:l,jwks_uri:new URL(e.jwks_uri)})}if(1!==h)throw nP('error when selecting a JWT verification key, multiple applicable keys found, a "kid" JWT Header Parameter is required',iG,{header:r,candidates:l,jwks_uri:new URL(e.jwks_uri)});return as(s,u)}function ih(e){return e.headers.get("content-type")?.split(";")[0]}async function ip(e,t,r,n,i,a,o){return await r(e,t,i,a),a.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),(o?.[n_]||fetch)(n.href,{body:i,headers:Object.fromEntries(a.entries()),method:"POST",redirect:"manual",signal:o?.signal?nD(o.signal):void 0})}async function ig(e,t,r,n,i,a){let o=n3(e,"token_endpoint",t.use_mtls_endpoint_aliases,a?.[ny]!==!0);i.set("grant_type",n);let s=nM(a?.headers);s.set("accept","application/json"),a?.DPoP!==void 0&&(ic(a.DPoP),await a.DPoP.addProof(o,s,"POST"));let c=await ip(e,t,r,o,i,s,a);return a?.DPoP?.cacheNonce(c),c}async function im(e,t,r,n,i){nX(e),nY(t),nW(n,'"refreshToken"');let a=new URLSearchParams(i?.additionalParameters);return a.set("refresh_token",n),ig(e,t,r,"refresh_token",a,i)}Symbol();let iy=new WeakMap,iw=new WeakMap;function ib(e){if(!e.id_token)return;let t=iy.get(e);if(!t)throw nm('"ref" was already garbage collected or did not resolve from the proper sources',nf);return t}async function i_(e,t,r,n,i){if(nX(e),nY(t),!np(r,Response))throw nm('"response" must be an instance of Response',ng);iv(r),await is(r,200,"Token Endpoint"),i0(r);let a=await al(r);if(nW(a.access_token,'"response" body "access_token" property',iU,{body:a}),nW(a.token_type,'"response" body "token_type" property',iU,{body:a}),a.token_type=a.token_type.toLowerCase(),"dpop"!==a.token_type&&"bearer"!==a.token_type)throw new nC("unsupported `token_type` value",{cause:{body:a}});if(void 0!==a.expires_in){let e="number"!=typeof a.expires_in?parseFloat(a.expires_in):a.expires_in;nU(e,!1,'"response" body "expires_in" property',iU,{body:a}),a.expires_in=e}if(void 0!==a.refresh_token&&nW(a.refresh_token,'"response" body "refresh_token" property',iU,{body:a}),void 0!==a.scope&&"string"!=typeof a.scope)throw nP('"response" body "scope" property must be a string',iU,{body:a});if(void 0!==a.id_token){nW(a.id_token,'"response" body "id_token" property',iU,{body:a});let o=["aud","exp","iat","iss","sub"];!0===t.require_auth_time&&o.push("auth_time"),void 0!==t.default_max_age&&(nU(t.default_max_age,!1,'"client.default_max_age"'),o.push("auth_time")),n?.length&&o.push(...n);let{claims:s,jwt:c}=await i8(a.id_token,ar.bind(void 0,t.id_token_signed_response_alg,e.id_token_signing_alg_values_supported,"RS256"),nV(t),nG(t),i?.[nS]).then(iC.bind(void 0,o)).then(iA.bind(void 0,e)).then(iE.bind(void 0,t.client_id));if(Array.isArray(s.aud)&&1!==s.aud.length){if(void 0===s.azp)throw nP('ID Token "aud" (audience) claim includes additional untrusted audiences',iz,{claims:s,claim:"aud"});if(s.azp!==t.client_id)throw nP('unexpected ID Token "azp" (authorized party) claim value',iz,{expected:t.client_id,claims:s,claim:"azp"})}void 0!==s.auth_time&&nU(s.auth_time,!1,'ID Token "auth_time" (authentication time)',iU,{claims:s}),iw.set(r,c),iy.set(a,s)}return a}function iv(e){let t;if(t=function(e){if(!np(e,Response))throw nm('"response" must be an instance of Response',ng);let t=e.headers.get("www-authenticate");if(null===t)return;let r=[],n=t;for(;n;){let e,t=n.match(ie),i=t?.["1"].toLowerCase();if(n=t?.["2"],!i)return;let a={};for(;n;){let r,i;if(t=n.match(it)){if([,r,i,n]=t,i.includes("\\"))try{i=JSON.parse(`"${i}"`)}catch{}a[r.toLowerCase()]=i;continue}if(t=n.match(ir)){[,r,i,n]=t,a[r.toLowerCase()]=i;continue}if(t=n.match(ii)){if(Object.keys(a).length)break;[,e,n]=t;break}return}let o={scheme:i,parameters:a};e&&(o.token68=e),r.push(o)}if(r.length)return r}(e))throw new n9("server responded with a challenge in the WWW-Authenticate HTTP Header",{cause:t,response:e})}async function iS(e,t,r,n){return i_(e,t,r,void 0,n)}function iE(e,t){if(Array.isArray(t.claims.aud)){if(!t.claims.aud.includes(e))throw nP('unexpected JWT "aud" (audience) claim value',iz,{expected:e,claims:t.claims,claim:"aud"})}else if(t.claims.aud!==e)throw nP('unexpected JWT "aud" (audience) claim value',iz,{expected:e,claims:t.claims,claim:"aud"});return t}function iA(e,t){let r=e[ah]?.(t)??e.issuer;if(t.claims.iss!==r)throw nP('unexpected JWT "iss" (issuer) claim value',iz,{expected:r,claims:t.claims,claim:"iss"});return t}let iT=new WeakSet;async function ik(e,t,r,n,i,a,o){if(nX(e),nY(t),!iT.has(n))throw nm('"callbackParameters" must be an instance of URLSearchParams obtained from "validateAuthResponse()", or "validateJwtAuthResponse()',nf);nW(i,'"redirectUri"');let s=an(n,"code");if(!s)throw nP('no authorization code in "callbackParameters"',iU);let c=new URLSearchParams(o?.additionalParameters);return c.set("redirect_uri",i),c.set("code",s),a!==au&&(nW(a,'"codeVerifier"'),c.set("code_verifier",a)),ig(e,t,r,"authorization_code",c,o)}let iR={aud:"audience",c_hash:"code hash",client_id:"client id",exp:"expiration time",iat:"issued at",iss:"issuer",jti:"jwt id",nonce:"nonce",s_hash:"state hash",sub:"subject",ath:"access token hash",htm:"http method",htu:"http uri",cnf:"confirmation",auth_time:"authentication time"};function iC(e,t){for(let r of e)if(void 0===t.claims[r])throw nP(`JWT "${r}" (${iR[r]}) claim missing`,iU,{claims:t.claims});return t}let ix=Symbol(),iP=Symbol();async function iO(e,t,r,n){return"string"==typeof n?.expectedNonce||"number"==typeof n?.maxAge||n?.requireIdToken?iN(e,t,r,n.expectedNonce,n.maxAge,{[nS]:n[nS]}):iI(e,t,r,n)}async function iN(e,t,r,n,i,a){let o=[];switch(n){case void 0:n=ix;break;case ix:break;default:nW(n,'"expectedNonce" argument'),o.push("nonce")}switch(i??=t.default_max_age){case void 0:i=iP;break;case iP:break;default:nU(i,!1,'"maxAge" argument'),o.push("auth_time")}let s=await i_(e,t,r,o,a);nW(s.id_token,'"response" body "id_token" property',iU,{body:s});let c=ib(s);if(i!==iP){let e=nF()+nV(t),r=nG(t);if(c.auth_time+i<e-r)throw nP("too much time has elapsed since the last End-User authentication",iJ,{claims:c,now:e,tolerance:r,claim:"auth_time"})}if(n===ix){if(void 0!==c.nonce)throw nP('unexpected ID Token "nonce" claim value',iz,{expected:void 0,claims:c,claim:"nonce"})}else if(c.nonce!==n)throw nP('unexpected ID Token "nonce" claim value',iz,{expected:n,claims:c,claim:"nonce"});return s}async function iI(e,t,r,n){let i=await i_(e,t,r,void 0,n),a=ib(i);if(a){if(void 0!==t.default_max_age){nU(t.default_max_age,!1,'"client.default_max_age"');let e=nF()+nV(t),r=nG(t);if(a.auth_time+t.default_max_age<e-r)throw nP("too much time has elapsed since the last End-User authentication",iJ,{claims:a,now:e,tolerance:r,claim:"auth_time"})}if(void 0!==a.nonce)throw nP('unexpected ID Token "nonce" claim value',iz,{expected:void 0,claims:a,claim:"nonce"})}return i}let iM="OAUTH_WWW_AUTHENTICATE_CHALLENGE",iD="OAUTH_RESPONSE_BODY_ERROR",ij="OAUTH_UNSUPPORTED_OPERATION",iH="OAUTH_AUTHORIZATION_RESPONSE_ERROR",iL="OAUTH_PARSE_ERROR",iU="OAUTH_INVALID_RESPONSE",iW="OAUTH_INVALID_REQUEST",i$="OAUTH_RESPONSE_IS_NOT_JSON",iK="OAUTH_RESPONSE_IS_NOT_CONFORM",iq="OAUTH_HTTP_REQUEST_FORBIDDEN",iB="OAUTH_REQUEST_PROTOCOL_FORBIDDEN",iJ="OAUTH_JWT_TIMESTAMP_CHECK_FAILED",iz="OAUTH_JWT_CLAIM_COMPARISON_FAILED",iV="OAUTH_JSON_ATTRIBUTE_COMPARISON_FAILED",iG="OAUTH_KEY_SELECTION_FAILED",iF="OAUTH_MISSING_SERVER_METADATA",iX="OAUTH_INVALID_SERVER_METADATA";function iY(e,t){if("string"!=typeof t.header.typ||t.header.typ.toLowerCase().replace(/^application\//,"")!==e)throw nP('unexpected JWT "typ" header parameter value',iU,{header:t.header});return t}async function iQ(e,t,r,n,i,a){return nX(e),nY(t),nW(n,'"grantType"'),ig(e,t,r,n,new URLSearchParams(i),a)}async function iZ(e,t,r,n){return i_(e,t,r,void 0,n)}function i0(e){if(e.bodyUsed)throw nm('"response" body has been used already',nf)}async function i1(e,t){nX(e);let r=n3(e,"jwks_uri",!1,t?.[ny]!==!0),n=nM(t?.headers);return n.set("accept","application/json"),n.append("accept","application/jwk-set+json"),(t?.[n_]||fetch)(r.href,{body:void 0,headers:Object.fromEntries(n.entries()),method:"GET",redirect:"manual",signal:t?.signal?nD(t.signal):void 0})}async function i2(e){if(!np(e,Response))throw nm('"response" must be an instance of Response',ng);if(200!==e.status)throw nP('"response" is not a conform JSON Web Key Set response (unexpected HTTP status code)',iK,e);i0(e);let t=await al(e,e=>(function(e,...t){if(!t.includes(ih(e)))throw nq(e,...t)})(e,"application/json","application/jwk-set+json"));if(!Array.isArray(t.keys))throw nP('"response" body "keys" property must be an array',iU,{body:t});if(!Array.prototype.every.call(t.keys,nI))throw nP('"response" body "keys" property members must be JWK formatted objects',iU,{body:t});return t}function i5(e){switch(e){case"PS256":case"ES256":case"RS256":case"PS384":case"ES384":case"RS384":case"PS512":case"ES512":case"RS512":case"Ed25519":case"EdDSA":return!0;default:return!1}}function i3(e){let{algorithm:t}=e;if("number"!=typeof t.modulusLength||t.modulusLength<2048)throw new nC(`unsupported ${t.name} modulusLength`,{cause:e})}function i4(e){switch(e.algorithm.name){case"ECDSA":return{name:e.algorithm.name,hash:function(e){let{algorithm:t}=e;switch(t.namedCurve){case"P-256":return"SHA-256";case"P-384":return"SHA-384";case"P-521":return"SHA-512";default:throw new nC("unsupported ECDSA namedCurve",{cause:e})}}(e)};case"RSA-PSS":switch(i3(e),e.algorithm.hash.name){case"SHA-256":case"SHA-384":case"SHA-512":return{name:e.algorithm.name,saltLength:parseInt(e.algorithm.hash.name.slice(-3),10)>>3};default:throw new nC("unsupported RSA-PSS hash name",{cause:e})}case"RSASSA-PKCS1-v1_5":return i3(e),e.algorithm.name;case"Ed25519":return e.algorithm.name}throw new nC("unsupported CryptoKey algorithm name",{cause:e})}async function i6(e,t,r,n){let i=nk(`${e}.${t}`),a=i4(r);if(!await crypto.subtle.verify(a,r,n,i))throw nP("JWT signature verification failed",iU,{key:r,data:i,signature:n,algorithm:a})}async function i8(e,t,r,n,i){let a,o,{0:s,1:c,length:l}=e.split(".");if(5===l)if(void 0!==i)e=await i(e),{0:s,1:c,length:l}=e.split(".");else throw new nC("JWE decryption is not configured",{cause:e});if(3!==l)throw nP("Invalid JWT",iU,e);try{a=JSON.parse(nk(nR(s)))}catch(e){throw nP("failed to parse JWT Header body as base64url encoded JSON",iL,e)}if(!nI(a))throw nP("JWT Header must be a top level object",iU,e);if(t(a),void 0!==a.crit)throw new nC('no JWT "crit" header parameter extensions are supported',{cause:{header:a}});try{o=JSON.parse(nk(nR(c)))}catch(e){throw nP("failed to parse JWT Payload body as base64url encoded JSON",iL,e)}if(!nI(o))throw nP("JWT Payload must be a top level object",iU,e);let u=nF()+r;if(void 0!==o.exp){if("number"!=typeof o.exp)throw nP('unexpected JWT "exp" (expiration time) claim type',iU,{claims:o});if(o.exp<=u-n)throw nP('unexpected JWT "exp" (expiration time) claim value, expiration is past current timestamp',iJ,{claims:o,now:u,tolerance:n,claim:"exp"})}if(void 0!==o.iat&&"number"!=typeof o.iat)throw nP('unexpected JWT "iat" (issued at) claim type',iU,{claims:o});if(void 0!==o.iss&&"string"!=typeof o.iss)throw nP('unexpected JWT "iss" (issuer) claim type',iU,{claims:o});if(void 0!==o.nbf){if("number"!=typeof o.nbf)throw nP('unexpected JWT "nbf" (not before) claim type',iU,{claims:o});if(o.nbf>u+n)throw nP('unexpected JWT "nbf" (not before) claim value',iJ,{claims:o,now:u,tolerance:n,claim:"nbf"})}if(void 0!==o.aud&&"string"!=typeof o.aud&&!Array.isArray(o.aud))throw nP('unexpected JWT "aud" (audience) claim type',iU,{claims:o});return{header:a,claims:o,jwt:e}}async function i9(e,t,r){let n;switch(t.alg){case"RS256":case"PS256":case"ES256":n="SHA-256";break;case"RS384":case"PS384":case"ES384":n="SHA-384";break;case"RS512":case"PS512":case"ES512":case"Ed25519":case"EdDSA":n="SHA-512";break;default:throw new nC(`unsupported JWS algorithm for ${r} calculation`,{cause:{alg:t.alg}})}let i=await crypto.subtle.digest(n,nk(e));return nR(i.slice(0,i.byteLength/2))}async function i7(e,t,r,n){return t===await i9(e,r,n)}async function ae(e){if(e.bodyUsed)throw nm("form_post Request instances must contain a readable body",nf,{cause:e});return e.text()}async function at(e){if("POST"!==e.method)throw nm("form_post responses are expected to use the POST method",nf,{cause:e});if("application/x-www-form-urlencoded"!==ih(e))throw nm("form_post responses are expected to use the application/x-www-form-urlencoded content-type",nf,{cause:e});return ae(e)}function ar(e,t,r,n){if(void 0!==e){if("string"==typeof e?n.alg!==e:!e.includes(n.alg))throw nP('unexpected JWT "alg" header parameter',iU,{header:n,expected:e,reason:"client configuration"});return}if(Array.isArray(t)){if(!t.includes(n.alg))throw nP('unexpected JWT "alg" header parameter',iU,{header:n,expected:t,reason:"authorization server metadata"});return}if(void 0!==r){if("string"==typeof r?n.alg!==r:"function"==typeof r?!r(n.alg):!r.includes(n.alg))throw nP('unexpected JWT "alg" header parameter',iU,{header:n,expected:r,reason:"default value"});return}throw nP('missing client or server configuration to verify used JWT "alg" header parameter',void 0,{client:e,issuer:t,fallback:r})}function an(e,t){let{0:r,length:n}=e.getAll(t);if(n>1)throw nP(`"${t}" parameter must be provided only once`,iU);return r}let ai=Symbol(),aa=Symbol();function ao(e,t,r,n){var i;if(nX(e),nY(t),r instanceof URL&&(r=r.searchParams),!(r instanceof URLSearchParams))throw nm('"parameters" must be an instance of URLSearchParams, or URL',ng);if(an(r,"response"))throw nP('"parameters" contains a JARM response, use validateJwtAuthResponse() instead of validateAuthResponse()',iU,{parameters:r});let a=an(r,"iss"),o=an(r,"state");if(!a&&e.authorization_response_iss_parameter_supported)throw nP('response parameter "iss" (issuer) missing',iU,{parameters:r});if(a&&a!==e.issuer)throw nP('unexpected "iss" (issuer) response parameter value',iU,{expected:e.issuer,parameters:r});switch(n){case void 0:case aa:if(void 0!==o)throw nP('unexpected "state" response parameter encountered',iU,{expected:void 0,parameters:r});break;case ai:break;default:if(nW(n,'"expectedState" argument'),o!==n)throw nP(void 0===o?'response parameter "state" missing':'unexpected "state" response parameter value',iU,{expected:n,parameters:r})}if(an(r,"error"))throw new n8("authorization response from the server is an error",{cause:r});let s=an(r,"id_token"),c=an(r,"token");if(void 0!==s||void 0!==c)throw new nC("implicit and hybrid flows are not supported");return i=new URLSearchParams(r),iT.add(i),i}async function as(e,t){let{ext:r,key_ops:n,use:i,...a}=t;return crypto.subtle.importKey("jwk",a,function(e){switch(e){case"PS256":case"PS384":case"PS512":return{name:"RSA-PSS",hash:`SHA-${e.slice(-3)}`};case"RS256":case"RS384":case"RS512":return{name:"RSASSA-PKCS1-v1_5",hash:`SHA-${e.slice(-3)}`};case"ES256":case"ES384":return{name:"ECDSA",namedCurve:`P-${e.slice(-3)}`};case"ES512":return{name:"ECDSA",namedCurve:"P-521"};case"Ed25519":case"EdDSA":return"Ed25519";default:throw new nC("unsupported JWS algorithm",{cause:{alg:e}})}}(e),!0,["verify"])}function ac(e){let t=new URL(e);return t.search="",t.hash="",t.href}async function al(e,t=nK){let r;try{r=await e.json()}catch(r){throw t(e),nP('failed to parse "response" body as JSON',iL,r)}if(!nI(r))throw nP('"response" body must be a top level object',iU,{body:r});return r}let au=Symbol(),ad=Symbol(),ah=Symbol(),ap={rE:"4.6.1"},af=e=>e.endsWith("/")?e.slice(0,-1):e;function ag(e){var t;let r=["path"in e&&e.path&&`Path=${e.path}`,"expires"in e&&(e.expires||0===e.expires)&&`Expires=${("number"==typeof e.expires?new Date(e.expires):e.expires).toUTCString()}`,"maxAge"in e&&"number"==typeof e.maxAge&&`Max-Age=${e.maxAge}`,"domain"in e&&e.domain&&`Domain=${e.domain}`,"secure"in e&&e.secure&&"Secure","httpOnly"in e&&e.httpOnly&&"HttpOnly","sameSite"in e&&e.sameSite&&`SameSite=${e.sameSite}`,"partitioned"in e&&e.partitioned&&"Partitioned","priority"in e&&e.priority&&`Priority=${e.priority}`].filter(Boolean),n=`${e.name}=${encodeURIComponent(null!=(t=e.value)?t:"")}`;return 0===r.length?n:`${n}; ${r.join("; ")}`}function am(e){let t=new Map;for(let r of e.split(/; */)){if(!r)continue;let e=r.indexOf("=");if(-1===e){t.set(r,"true");continue}let[n,i]=[r.slice(0,e),r.slice(e+1)];try{t.set(n,decodeURIComponent(null!=i?i:"true"))}catch{}}return t}var ay=["strict","lax","none"],aw=["low","medium","high"],ab=class{constructor(e){this._parsed=new Map,this._headers=e;let t=e.get("cookie");if(t)for(let[e,r]of am(t))this._parsed.set(e,{name:e,value:r})}[Symbol.iterator](){return this._parsed[Symbol.iterator]()}get size(){return this._parsed.size}get(...e){let t="string"==typeof e[0]?e[0]:e[0].name;return this._parsed.get(t)}getAll(...e){var t;let r=Array.from(this._parsed);if(!e.length)return r.map(([e,t])=>t);let n="string"==typeof e[0]?e[0]:null==(t=e[0])?void 0:t.name;return r.filter(([e])=>e===n).map(([e,t])=>t)}has(e){return this._parsed.has(e)}set(...e){let[t,r]=1===e.length?[e[0].name,e[0].value]:e,n=this._parsed;return n.set(t,{name:t,value:r}),this._headers.set("cookie",Array.from(n).map(([e,t])=>ag(t)).join("; ")),this}delete(e){let t=this._parsed,r=Array.isArray(e)?e.map(e=>t.delete(e)):t.delete(e);return this._headers.set("cookie",Array.from(t).map(([e,t])=>ag(t)).join("; ")),r}clear(){return this.delete(Array.from(this._parsed.keys())),this}[Symbol.for("edge-runtime.inspect.custom")](){return`RequestCookies ${JSON.stringify(Object.fromEntries(this._parsed))}`}toString(){return[...this._parsed.values()].map(e=>`${e.name}=${encodeURIComponent(e.value)}`).join("; ")}},a_=class{constructor(e){var t,r,n;this._parsed=new Map,this._headers=e;let i=null!=(n=null!=(r=null==(t=e.getSetCookie)?void 0:t.call(e))?r:e.get("set-cookie"))?n:[];for(let e of Array.isArray(i)?i:function(e){if(!e)return[];var t,r,n,i,a,o=[],s=0;function c(){for(;s<e.length&&/\s/.test(e.charAt(s));)s+=1;return s<e.length}for(;s<e.length;){for(t=s,a=!1;c();)if(","===(r=e.charAt(s))){for(n=s,s+=1,c(),i=s;s<e.length&&"="!==(r=e.charAt(s))&&";"!==r&&","!==r;)s+=1;s<e.length&&"="===e.charAt(s)?(a=!0,s=i,o.push(e.substring(t,n)),t=s):s=n+1}else s+=1;(!a||s>=e.length)&&o.push(e.substring(t,e.length))}return o}(i)){let t=function(e){if(!e)return;let[[t,r],...n]=am(e),{domain:i,expires:a,httponly:o,maxage:s,path:c,samesite:l,secure:u,partitioned:d,priority:h}=Object.fromEntries(n.map(([e,t])=>[e.toLowerCase().replace(/-/g,""),t]));{var p,f,g={name:t,value:decodeURIComponent(r),domain:i,...a&&{expires:new Date(a)},...o&&{httpOnly:!0},..."string"==typeof s&&{maxAge:Number(s)},path:c,...l&&{sameSite:(p=(p=l).toLowerCase(),ay.includes(p)?p:void 0)},...u&&{secure:!0},...h&&{priority:(f=(f=h).toLowerCase(),aw.includes(f)?f:void 0)},...d&&{partitioned:!0}};let e={};for(let t in g)g[t]&&(e[t]=g[t]);return e}}(e);t&&this._parsed.set(t.name,t)}}get(...e){let t="string"==typeof e[0]?e[0]:e[0].name;return this._parsed.get(t)}getAll(...e){var t;let r=Array.from(this._parsed.values());if(!e.length)return r;let n="string"==typeof e[0]?e[0]:null==(t=e[0])?void 0:t.name;return r.filter(e=>e.name===n)}has(e){return this._parsed.has(e)}set(...e){let[t,r,n]=1===e.length?[e[0].name,e[0].value,e[0]]:e,i=this._parsed;return i.set(t,function(e={name:"",value:""}){return"number"==typeof e.expires&&(e.expires=new Date(e.expires)),e.maxAge&&(e.expires=new Date(Date.now()+1e3*e.maxAge)),(null===e.path||void 0===e.path)&&(e.path="/"),e}({name:t,value:r,...n})),function(e,t){for(let[,r]of(t.delete("set-cookie"),e)){let e=ag(r);t.append("set-cookie",e)}}(i,this._headers),this}delete(...e){let[t,r]="string"==typeof e[0]?[e[0]]:[e[0].name,e[0]];return this.set({...r,name:t,value:"",expires:new Date(0)})}[Symbol.for("edge-runtime.inspect.custom")](){return`ResponseCookies ${JSON.stringify(Object.fromEntries(this._parsed))}`}toString(){return[...this._parsed.values()].map(ag).join("; ")}};let av=()=>{if("undefined"!=typeof globalThis)return globalThis;if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;throw Error("unable to locate global object")},aS=async(e,t,r,n,i)=>{let{crypto:{subtle:a}}=av();return new Uint8Array(await a.deriveBits({name:"HKDF",hash:`SHA-${e.substr(3)}`,salt:r,info:n},await a.importKey("raw",t,"HKDF",!1,["deriveBits"]),i<<3))};function aE(e,t){if("string"==typeof e)return new TextEncoder().encode(e);if(!(e instanceof Uint8Array))throw TypeError(`"${t}"" must be an instance of Uint8Array or a string`);return e}async function aA(e,t,r,n,i){return aS(function(e){switch(e){case"sha256":case"sha384":case"sha512":case"sha1":return e;default:throw TypeError('unsupported "digest" value')}}(e),function(e){let t=aE(e,"ikm");if(!t.byteLength)throw TypeError('"ikm" must be at least one byte in length');return t}(t),aE(r,"salt"),function(e){let t=aE(e,"info");if(t.byteLength>1024)throw TypeError('"info" must not contain more than 1024 bytes');return t}(n),function(e,t){if("number"!=typeof e||!Number.isInteger(e)||e<1)throw TypeError('"keylen" must be a positive integer');if(e>255*(parseInt(t.substr(3),10)>>3||20))throw TypeError('"keylen" too large');return e}(i,e))}let aT=Symbol(),ak=ru.getRandomValues.bind(ru);function aR(e){switch(e){case"A128GCM":case"A128GCMKW":case"A192GCM":case"A192GCMKW":case"A256GCM":case"A256GCMKW":return 96;case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return 128;default:throw new t9(`Unsupported JWE Algorithm: ${e}`)}}let aC=e=>ak(new Uint8Array(aR(e)>>3)),ax=(e,t)=>{if(t.length<<3!==aR(e))throw new re("Invalid Initialization Vector length")},aP=(e,t)=>{let r=e.byteLength<<3;if(r!==t)throw new re(`Invalid Content Encryption Key length. Expected ${t} bits, got ${r} bits`)};async function aO(e,t,r,n,i){if(!(r instanceof Uint8Array))throw TypeError(rV(r,"Uint8Array"));let a=parseInt(e.slice(1,4),10),o=await ru.subtle.importKey("raw",r.subarray(a>>3),"AES-CBC",!1,["encrypt"]),s=await ru.subtle.importKey("raw",r.subarray(0,a>>3),{hash:`SHA-${a<<1}`,name:"HMAC"},!1,["sign"]),c=new Uint8Array(await ru.subtle.encrypt({iv:n,name:"AES-CBC"},o,t)),l=rg(i,n,c,ry(i.length<<3));return{ciphertext:c,tag:new Uint8Array((await ru.subtle.sign("HMAC",s,l)).slice(0,a>>3)),iv:n}}async function aN(e,t,r,n,i){let a;r instanceof Uint8Array?a=await ru.subtle.importKey("raw",r,"AES-GCM",!1,["encrypt"]):(rJ(r,e,"encrypt"),a=r);let o=new Uint8Array(await ru.subtle.encrypt({additionalData:i,iv:n,name:"AES-GCM",tagLength:128},a,t)),s=o.slice(-16);return{ciphertext:o.slice(0,-16),tag:s,iv:n}}let aI=async(e,t,r,n,i)=>{if(!rd(r)&&!(r instanceof Uint8Array))throw TypeError(rV(r,...rX,"Uint8Array"));switch(n?ax(e,n):n=aC(e),e){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return r instanceof Uint8Array&&aP(r,parseInt(e.slice(-3),10)),aO(e,t,r,n,i);case"A128GCM":case"A192GCM":case"A256GCM":return r instanceof Uint8Array&&aP(r,parseInt(e.slice(1,4),10)),aN(e,t,r,n,i);default:throw new t9("Unsupported JWE Content Encryption Algorithm")}},aM=[{hash:"SHA-256",name:"HMAC"},!0,["sign"]];function aD(e,t){if(e.algorithm.length!==parseInt(t.slice(1,4),10))throw TypeError(`Invalid key size for alg: ${t}`)}function aj(e,t,r){if(rd(e))return rJ(e,t,r),e;if(e instanceof Uint8Array)return ru.subtle.importKey("raw",e,"AES-KW",!0,[r]);throw TypeError(rV(e,...rX,"Uint8Array"))}let aH=async(e,t,r)=>{let n=await aj(t,e,"wrapKey");aD(n,e);let i=await ru.subtle.importKey("raw",r,...aM);return new Uint8Array(await ru.subtle.wrapKey("raw",i,n,"AES-KW"))},aL=async(e,t,r)=>{let n=await aj(t,e,"unwrapKey");aD(n,e);let i=await ru.subtle.unwrapKey("raw",r,n,"AES-KW",...aM);return new Uint8Array(await ru.subtle.exportKey("raw",i))};async function aU(e,t,r,n,i=new Uint8Array(0),a=new Uint8Array(0)){let o;if(!rd(e))throw TypeError(rV(e,...rX));if(rJ(e,"ECDH"),!rd(t))throw TypeError(rV(t,...rX));rJ(t,"ECDH","deriveBits");let s=rg(rb(rp.encode(r)),rb(i),rb(a),rw(n));return o="X25519"===e.algorithm.name?256:"X448"===e.algorithm.name?448:Math.ceil(parseInt(e.algorithm.namedCurve.substr(-3),10)/8)<<3,r_(new Uint8Array(await ru.subtle.deriveBits({name:e.algorithm.name,public:e},t,o)),n,s)}async function aW(e){if(!rd(e))throw TypeError(rV(e,...rX));return ru.subtle.generateKey(e.algorithm,!0,["deriveBits"])}function a$(e){if(!rd(e))throw TypeError(rV(e,...rX));return["P-256","P-384","P-521"].includes(e.algorithm.namedCurve)||"X25519"===e.algorithm.name||"X448"===e.algorithm.name}async function aK(e,t,r,n){if(!(e instanceof Uint8Array)||e.length<8)throw new re("PBES2 Salt Input must be 8 or more octets");let i=rg(rp.encode(t),new Uint8Array([0]),e),a=parseInt(t.slice(13,16),10),o={hash:`SHA-${t.slice(8,11)}`,iterations:r,name:"PBKDF2",salt:i},s=await function(e,t){if(e instanceof Uint8Array)return ru.subtle.importKey("raw",e,"PBKDF2",!1,["deriveBits"]);if(rd(e))return rJ(e,t,"deriveBits","deriveKey"),e;throw TypeError(rV(e,...rX,"Uint8Array"))}(n,t);if(s.usages.includes("deriveBits"))return new Uint8Array(await ru.subtle.deriveBits(o,s,a));if(s.usages.includes("deriveKey"))return ru.subtle.deriveKey(o,s,{length:a,name:"AES-KW"},!1,["wrapKey","unwrapKey"]);throw TypeError('PBKDF2 key "usages" must include "deriveBits" or "deriveKey"')}let aq=async(e,t,r,n=2048,i=ak(new Uint8Array(16)))=>{let a=await aK(i,e,n,t);return{encryptedKey:await aH(e.slice(-6),a,r),p2c:n,p2s:rS(i)}},aB=async(e,t,r,n,i)=>{let a=await aK(i,e,n,t);return aL(e.slice(-6),a,r)};function aJ(e){switch(e){case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":return"RSA-OAEP";default:throw new t9(`alg ${e} is not supported either by JOSE or your javascript runtime`)}}let az=async(e,t,r)=>{if(!rd(t))throw TypeError(rV(t,...rX));if(rJ(t,e,"encrypt","wrapKey"),rW(e,t),t.usages.includes("encrypt"))return new Uint8Array(await ru.subtle.encrypt(aJ(e),t,r));if(t.usages.includes("wrapKey")){let n=await ru.subtle.importKey("raw",r,...aM);return new Uint8Array(await ru.subtle.wrapKey("raw",n,t,aJ(e)))}throw TypeError('RSA-OAEP key "usages" must include "encrypt" or "wrapKey" for this operation')},aV=async(e,t,r)=>{if(!rd(t))throw TypeError(rV(t,...rX));if(rJ(t,e,"decrypt","unwrapKey"),rW(e,t),t.usages.includes("decrypt"))return new Uint8Array(await ru.subtle.decrypt(aJ(e),t,r));if(t.usages.includes("unwrapKey")){let n=await ru.subtle.unwrapKey("raw",r,t,aJ(e),...aM);return new Uint8Array(await ru.subtle.exportKey("raw",n))}throw TypeError('RSA-OAEP key "usages" must include "decrypt" or "unwrapKey" for this operation')};function aG(e){switch(e){case"A128GCM":return 128;case"A192GCM":return 192;case"A256GCM":case"A128CBC-HS256":return 256;case"A192CBC-HS384":return 384;case"A256CBC-HS512":return 512;default:throw new t9(`Unsupported JWE Algorithm: ${e}`)}}let aF=e=>ak(new Uint8Array(aG(e)>>3)),aX=async e=>{if(e instanceof Uint8Array)return{kty:"oct",k:rS(e)};if(!rd(e))throw TypeError(rV(e,...rX,"Uint8Array"));if(!e.extractable)throw TypeError("non-extractable CryptoKey cannot be exported as a JWK");let{ext:t,key_ops:r,alg:n,use:i,...a}=await ru.subtle.exportKey("jwk",e);return a};async function aY(e){return aX(e)}let aQ=(e,t)=>{if(!(e instanceof Uint8Array))throw TypeError("First argument must be a buffer");if(!(t instanceof Uint8Array))throw TypeError("Second argument must be a buffer");if(e.length!==t.length)throw TypeError("Input buffers must have the same length");let r=e.length,n=0,i=-1;for(;++i<r;)n|=e[i]^t[i];return 0===n};async function aZ(e,t,r,n,i,a){let o,s;if(!(t instanceof Uint8Array))throw TypeError(rV(t,"Uint8Array"));let c=parseInt(e.slice(1,4),10),l=await ru.subtle.importKey("raw",t.subarray(c>>3),"AES-CBC",!1,["decrypt"]),u=await ru.subtle.importKey("raw",t.subarray(0,c>>3),{hash:`SHA-${c<<1}`,name:"HMAC"},!1,["sign"]),d=rg(a,n,r,ry(a.length<<3)),h=new Uint8Array((await ru.subtle.sign("HMAC",u,d)).slice(0,c>>3));try{o=aQ(i,h)}catch{}if(!o)throw new t7;try{s=new Uint8Array(await ru.subtle.decrypt({iv:n,name:"AES-CBC"},l,r))}catch{}if(!s)throw new t7;return s}async function a0(e,t,r,n,i,a){let o;t instanceof Uint8Array?o=await ru.subtle.importKey("raw",t,"AES-GCM",!1,["decrypt"]):(rJ(t,e,"decrypt"),o=t);try{return new Uint8Array(await ru.subtle.decrypt({additionalData:a,iv:n,name:"AES-GCM",tagLength:128},o,rg(r,i)))}catch{throw new t7}}let a1=async(e,t,r,n,i,a)=>{if(!rd(t)&&!(t instanceof Uint8Array))throw TypeError(rV(t,...rX,"Uint8Array"));if(!n)throw new re("JWE Initialization Vector missing");if(!i)throw new re("JWE Authentication Tag missing");switch(ax(e,n),e){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return t instanceof Uint8Array&&aP(t,parseInt(e.slice(-3),10)),aZ(e,t,r,n,i,a);case"A128GCM":case"A192GCM":case"A256GCM":return t instanceof Uint8Array&&aP(t,parseInt(e.slice(1,4),10)),a0(e,t,r,n,i,a);default:throw new t9("Unsupported JWE Content Encryption Algorithm")}};async function a2(e,t,r,n){let i=e.slice(0,7),a=await aI(i,r,t,n,new Uint8Array(0));return{encryptedKey:a.ciphertext,iv:rS(a.iv),tag:rS(a.tag)}}async function a5(e,t,r,n,i){return a1(e.slice(0,7),t,r,n,i,new Uint8Array(0))}async function a3(e,t,r,n,i={}){let a,o,s;switch(ne(e,r,"encrypt"),r=await r1.normalizePublicKey?.(r,e)||r,e){case"dir":s=r;break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{if(!a$(r))throw new t9("ECDH with the provided key is not allowed or not supported by your javascript runtime");let{apu:c,apv:l}=i,{epk:u}=i;u||(u=(await aW(r)).privateKey);let{x:d,y:h,crv:p,kty:f}=await aY(u),g=await aU(r,u,"ECDH-ES"===e?t:e,"ECDH-ES"===e?aG(t):parseInt(e.slice(-5,-2),10),c,l);if(o={epk:{x:d,crv:p,kty:f}},"EC"===f&&(o.epk.y=h),c&&(o.apu=rS(c)),l&&(o.apv=rS(l)),"ECDH-ES"===e){s=g;break}s=n||aF(t);let m=e.slice(-6);a=await aH(m,g,s);break}case"RSA1_5":case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":s=n||aF(t),a=await az(e,r,s);break;case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":{s=n||aF(t);let{p2c:c,p2s:l}=i;({encryptedKey:a,...o}=await aq(e,r,s,c,l));break}case"A128KW":case"A192KW":case"A256KW":s=n||aF(t),a=await aH(e,r,s);break;case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":{s=n||aF(t);let{iv:c}=i;({encryptedKey:a,...o}=await a2(e,r,s,c));break}default:throw new t9('Invalid or unsupported "alg" (JWE Algorithm) header value')}return{cek:s,encryptedKey:a,parameters:o}}class a4{constructor(e){if(!(e instanceof Uint8Array))throw TypeError("plaintext must be an instance of Uint8Array");this._plaintext=e}setKeyManagementParameters(e){if(this._keyManagementParameters)throw TypeError("setKeyManagementParameters can only be called once");return this._keyManagementParameters=e,this}setProtectedHeader(e){if(this._protectedHeader)throw TypeError("setProtectedHeader can only be called once");return this._protectedHeader=e,this}setSharedUnprotectedHeader(e){if(this._sharedUnprotectedHeader)throw TypeError("setSharedUnprotectedHeader can only be called once");return this._sharedUnprotectedHeader=e,this}setUnprotectedHeader(e){if(this._unprotectedHeader)throw TypeError("setUnprotectedHeader can only be called once");return this._unprotectedHeader=e,this}setAdditionalAuthenticatedData(e){return this._aad=e,this}setContentEncryptionKey(e){if(this._cek)throw TypeError("setContentEncryptionKey can only be called once");return this._cek=e,this}setInitializationVector(e){if(this._iv)throw TypeError("setInitializationVector can only be called once");return this._iv=e,this}async encrypt(e,t){let r,n,i,a,o;if(!this._protectedHeader&&!this._unprotectedHeader&&!this._sharedUnprotectedHeader)throw new re("either setProtectedHeader, setUnprotectedHeader, or sharedUnprotectedHeader must be called before #encrypt()");if(!r3(this._protectedHeader,this._unprotectedHeader,this._sharedUnprotectedHeader))throw new re("JWE Protected, JWE Shared Unprotected and JWE Per-Recipient Header Parameter names must be disjoint");let s={...this._protectedHeader,...this._unprotectedHeader,...this._sharedUnprotectedHeader};if(nr(re,new Map,t?.crit,this._protectedHeader,s),void 0!==s.zip)throw new t9('JWE "zip" (Compression Algorithm) Header Parameter is not supported.');let{alg:c,enc:l}=s;if("string"!=typeof c||!c)throw new re('JWE "alg" (Algorithm) Header Parameter missing or invalid');if("string"!=typeof l||!l)throw new re('JWE "enc" (Encryption Algorithm) Header Parameter missing or invalid');if(this._cek&&("dir"===c||"ECDH-ES"===c))throw TypeError(`setContentEncryptionKey cannot be called with JWE "alg" (Algorithm) Header ${c}`);{let i;({cek:n,encryptedKey:r,parameters:i}=await a3(c,l,e,this._cek,this._keyManagementParameters)),i&&(t&&aT in t?this._unprotectedHeader?this._unprotectedHeader={...this._unprotectedHeader,...i}:this.setUnprotectedHeader(i):this._protectedHeader?this._protectedHeader={...this._protectedHeader,...i}:this.setProtectedHeader(i))}a=this._protectedHeader?rp.encode(rS(JSON.stringify(this._protectedHeader))):rp.encode(""),this._aad?(o=rS(this._aad),i=rg(a,rp.encode("."),rp.encode(o))):i=a;let{ciphertext:u,tag:d,iv:h}=await aI(l,this._plaintext,n,this._iv,i),p={ciphertext:rS(u)};return h&&(p.iv=rS(h)),d&&(p.tag=rS(d)),r&&(p.encrypted_key=rS(r)),o&&(p.aad=o),this._protectedHeader&&(p.protected=rf.decode(a)),this._sharedUnprotectedHeader&&(p.unprotected=this._sharedUnprotectedHeader),this._unprotectedHeader&&(p.header=this._unprotectedHeader),p}}class a6{constructor(e){this._flattened=new a4(e)}setContentEncryptionKey(e){return this._flattened.setContentEncryptionKey(e),this}setInitializationVector(e){return this._flattened.setInitializationVector(e),this}setProtectedHeader(e){return this._flattened.setProtectedHeader(e),this}setKeyManagementParameters(e){return this._flattened.setKeyManagementParameters(e),this}async encrypt(e,t){let r=await this._flattened.encrypt(e,t);return[r.protected,r.encrypted_key,r.iv,r.ciphertext,r.tag].join(".")}}function a8(e,t){if(!Number.isFinite(t))throw TypeError(`Invalid ${e} input`);return t}class a9{constructor(e={}){if(!rP(e))throw TypeError("JWT Claims Set MUST be an object");this._payload=e}setIssuer(e){return this._payload={...this._payload,iss:e},this}setSubject(e){return this._payload={...this._payload,sub:e},this}setAudience(e){return this._payload={...this._payload,aud:e},this}setJti(e){return this._payload={...this._payload,jti:e},this}setNotBefore(e){return"number"==typeof e?this._payload={...this._payload,nbf:a8("setNotBefore",e)}:e instanceof Date?this._payload={...this._payload,nbf:a8("setNotBefore",no(e))}:this._payload={...this._payload,nbf:no(new Date)+nc(e)},this}setExpirationTime(e){return"number"==typeof e?this._payload={...this._payload,exp:a8("setExpirationTime",e)}:e instanceof Date?this._payload={...this._payload,exp:a8("setExpirationTime",no(e))}:this._payload={...this._payload,exp:no(new Date)+nc(e)},this}setIssuedAt(e){return void 0===e?this._payload={...this._payload,iat:no(new Date)}:e instanceof Date?this._payload={...this._payload,iat:a8("setIssuedAt",no(e))}:"string"==typeof e?this._payload={...this._payload,iat:a8("setIssuedAt",no(new Date)+nc(e))}:this._payload={...this._payload,iat:a8("setIssuedAt",e)},this}}class a7 extends a9{setProtectedHeader(e){if(this._protectedHeader)throw TypeError("setProtectedHeader can only be called once");return this._protectedHeader=e,this}setKeyManagementParameters(e){if(this._keyManagementParameters)throw TypeError("setKeyManagementParameters can only be called once");return this._keyManagementParameters=e,this}setContentEncryptionKey(e){if(this._cek)throw TypeError("setContentEncryptionKey can only be called once");return this._cek=e,this}setInitializationVector(e){if(this._iv)throw TypeError("setInitializationVector can only be called once");return this._iv=e,this}replicateIssuerAsHeader(){return this._replicateIssuerAsHeader=!0,this}replicateSubjectAsHeader(){return this._replicateSubjectAsHeader=!0,this}replicateAudienceAsHeader(){return this._replicateAudienceAsHeader=!0,this}async encrypt(e,t){let r=new a6(rp.encode(JSON.stringify(this._payload)));return this._replicateIssuerAsHeader&&(this._protectedHeader={...this._protectedHeader,iss:this._payload.iss}),this._replicateSubjectAsHeader&&(this._protectedHeader={...this._protectedHeader,sub:this._payload.sub}),this._replicateAudienceAsHeader&&(this._protectedHeader={...this._protectedHeader,aud:this._payload.aud}),r.setProtectedHeader(this._protectedHeader),this._iv&&r.setInitializationVector(this._iv),this._cek&&r.setContentEncryptionKey(this._cek),this._keyManagementParameters&&r.setKeyManagementParameters(this._keyManagementParameters),r.encrypt(e,t)}}async function oe(e,t,r,n,i){switch(ne(e,t,"decrypt"),t=await r1.normalizePrivateKey?.(t,e)||t,e){case"dir":if(void 0!==r)throw new re("Encountered unexpected JWE Encrypted Key");return t;case"ECDH-ES":if(void 0!==r)throw new re("Encountered unexpected JWE Encrypted Key");case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{let i,a;if(!rP(n.epk))throw new re('JOSE Header "epk" (Ephemeral Public Key) missing or invalid');if(!a$(t))throw new t9("ECDH with the provided key is not allowed or not supported by your javascript runtime");let o=await rN(n.epk,e);if(void 0!==n.apu){if("string"!=typeof n.apu)throw new re('JOSE Header "apu" (Agreement PartyUInfo) invalid');try{i=rA(n.apu)}catch{throw new re("Failed to base64url decode the apu")}}if(void 0!==n.apv){if("string"!=typeof n.apv)throw new re('JOSE Header "apv" (Agreement PartyVInfo) invalid');try{a=rA(n.apv)}catch{throw new re("Failed to base64url decode the apv")}}let s=await aU(o,t,"ECDH-ES"===e?n.enc:e,"ECDH-ES"===e?aG(n.enc):parseInt(e.slice(-5,-2),10),i,a);if("ECDH-ES"===e)return s;if(void 0===r)throw new re("JWE Encrypted Key missing");return aL(e.slice(-6),s,r)}case"RSA1_5":case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":if(void 0===r)throw new re("JWE Encrypted Key missing");return aV(e,t,r);case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":{let a;if(void 0===r)throw new re("JWE Encrypted Key missing");if("number"!=typeof n.p2c)throw new re('JOSE Header "p2c" (PBES2 Count) missing or invalid');let o=i?.maxPBES2Count||1e4;if(n.p2c>o)throw new re('JOSE Header "p2c" (PBES2 Count) out is of acceptable bounds');if("string"!=typeof n.p2s)throw new re('JOSE Header "p2s" (PBES2 Salt) missing or invalid');try{a=rA(n.p2s)}catch{throw new re("Failed to base64url decode the p2s")}return aB(e,t,r,n.p2c,a)}case"A128KW":case"A192KW":case"A256KW":if(void 0===r)throw new re("JWE Encrypted Key missing");return aL(e,t,r);case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":{let i,a;if(void 0===r)throw new re("JWE Encrypted Key missing");if("string"!=typeof n.iv)throw new re('JOSE Header "iv" (Initialization Vector) missing or invalid');if("string"!=typeof n.tag)throw new re('JOSE Header "tag" (Authentication Tag) missing or invalid');try{i=rA(n.iv)}catch{throw new re("Failed to base64url decode the iv")}try{a=rA(n.tag)}catch{throw new re("Failed to base64url decode the tag")}return a5(e,t,r,i,a)}default:throw new t9('Invalid or unsupported "alg" (JWE Algorithm) header value')}}async function ot(e,t,r){let n,i,a,o,s,c,l;if(!rP(e))throw new re("Flattened JWE must be an object");if(void 0===e.protected&&void 0===e.header&&void 0===e.unprotected)throw new re("JOSE Header missing");if(void 0!==e.iv&&"string"!=typeof e.iv)throw new re("JWE Initialization Vector incorrect type");if("string"!=typeof e.ciphertext)throw new re("JWE Ciphertext missing or incorrect type");if(void 0!==e.tag&&"string"!=typeof e.tag)throw new re("JWE Authentication Tag incorrect type");if(void 0!==e.protected&&"string"!=typeof e.protected)throw new re("JWE Protected Header incorrect type");if(void 0!==e.encrypted_key&&"string"!=typeof e.encrypted_key)throw new re("JWE Encrypted Key incorrect type");if(void 0!==e.aad&&"string"!=typeof e.aad)throw new re("JWE AAD incorrect type");if(void 0!==e.header&&!rP(e.header))throw new re("JWE Shared Unprotected Header incorrect type");if(void 0!==e.unprotected&&!rP(e.unprotected))throw new re("JWE Per-Recipient Unprotected Header incorrect type");if(e.protected)try{let t=rA(e.protected);n=JSON.parse(rf.decode(t))}catch{throw new re("JWE Protected Header is invalid")}if(!r3(n,e.header,e.unprotected))throw new re("JWE Protected, JWE Unprotected Header, and JWE Per-Recipient Unprotected Header Parameter names must be disjoint");let u={...n,...e.header,...e.unprotected};if(nr(re,new Map,r?.crit,n,u),void 0!==u.zip)throw new t9('JWE "zip" (Compression Algorithm) Header Parameter is not supported.');let{alg:d,enc:h}=u;if("string"!=typeof d||!d)throw new re("missing JWE Algorithm (alg) in JWE Header");if("string"!=typeof h||!h)throw new re("missing JWE Encryption Algorithm (enc) in JWE Header");let p=r&&nn("keyManagementAlgorithms",r.keyManagementAlgorithms),f=r&&nn("contentEncryptionAlgorithms",r.contentEncryptionAlgorithms);if(p&&!p.has(d)||!p&&d.startsWith("PBES2"))throw new t8('"alg" (Algorithm) Header Parameter value not allowed');if(f&&!f.has(h))throw new t8('"enc" (Encryption Algorithm) Header Parameter value not allowed');if(void 0!==e.encrypted_key)try{i=rA(e.encrypted_key)}catch{throw new re("Failed to base64url decode the encrypted_key")}let g=!1;"function"==typeof t&&(t=await t(n,e),g=!0);try{a=await oe(d,t,i,u,r)}catch(e){if(e instanceof TypeError||e instanceof re||e instanceof t9)throw e;a=aF(h)}if(void 0!==e.iv)try{o=rA(e.iv)}catch{throw new re("Failed to base64url decode the iv")}if(void 0!==e.tag)try{s=rA(e.tag)}catch{throw new re("Failed to base64url decode the tag")}let m=rp.encode(e.protected??"");c=void 0!==e.aad?rg(m,rp.encode("."),rp.encode(e.aad)):m;try{l=rA(e.ciphertext)}catch{throw new re("Failed to base64url decode the ciphertext")}let y={plaintext:await a1(h,a,l,o,s,c)};if(void 0!==e.protected&&(y.protectedHeader=n),void 0!==e.aad)try{y.additionalAuthenticatedData=rA(e.aad)}catch{throw new re("Failed to base64url decode the aad")}return(void 0!==e.unprotected&&(y.sharedUnprotectedHeader=e.unprotected),void 0!==e.header&&(y.unprotectedHeader=e.header),g)?{...y,key:t}:y}async function or(e,t,r){if(e instanceof Uint8Array&&(e=rf.decode(e)),"string"!=typeof e)throw new re("Compact JWE must be a string or Uint8Array");let{0:n,1:i,2:a,3:o,4:s,length:c}=e.split(".");if(5!==c)throw new re("Invalid Compact JWE");let l=await ot({ciphertext:o,iv:a||void 0,protected:n,tag:s||void 0,encrypted_key:i||void 0},t,r),u={plaintext:l.plaintext,protectedHeader:l.protectedHeader};return"function"==typeof t?{...u,key:l.key}:u}async function on(e,t,r){let n=await or(e,t,r),i=nd(n.protectedHeader,n.plaintext,r),{protectedHeader:a}=n;if(void 0!==a.iss&&a.iss!==i.iss)throw new t4('replicated "iss" claim header parameter mismatch',i,"iss","mismatch");if(void 0!==a.sub&&a.sub!==i.sub)throw new t4('replicated "sub" claim header parameter mismatch',i,"sub","mismatch");if(void 0!==a.aud&&JSON.stringify(a.aud)!==JSON.stringify(i.aud))throw new t4('replicated "aud" claim header parameter mismatch',i,"aud","mismatch");let o={payload:i,protectedHeader:a};return"function"==typeof t?{...o,key:n.key}:o}let oi="sha256",oa="JWE CEK";async function oo(e,t,r,n){let i=await aA(oi,t,"",oa,32);return(await new a7(e).setProtectedHeader({enc:"A256GCM",alg:"dir",...n}).setExpirationTime(r).encrypt(i)).toString()}async function os(e,t,r){let n=await aA(oi,t,"",oa,32);return await on(e,n,{...r,clockTolerance:15})}let oc=e=>aA("sha256",e,"","JWS Cookie Signing",32);async function ol(e,t,r){if(!t)return;let[n,i]=t.split("."),a={protected:rS(JSON.stringify({alg:"HS256",b64:!1,crit:["b64"]})),payload:`${e}=${n}`,signature:i},o=await oc(r);try{return await ni(a,o,{algorithms:["HS256"]}),n}catch(e){return}}let ou=RegExp("__(\\d+)$"),od=/\.(\d+)$/,oh=(e,t)=>{let r=t?od.exec(e):ou.exec(e);if(r)return parseInt(r[1],10)},op=(e,t,r)=>{let n=new RegExp(r?`^${t}${od.source}$`:`^${t}__\\d+$`);return e.getAll().filter(e=>n.test(e.name))};function of(e,t,r){let n=t.get(e);if(n?.value)return n.value;let i=op(t,e,r).sort((e,t)=>oh(e.name,r)-oh(t.name,r));if(0===i.length)return;let a=oh(i[i.length-1].name,r);return i.length!==a+1?void console.warn(`Incomplete chunked cookie '${e}': Found ${i.length} chunks, expected ${a+1}`):i.map(e=>e.value).join("")}function og(e,t,r,n){r.delete(e),op(t,e,n).forEach(e=>{r.delete(e.name)})}function om(e){e.headers.set("Cache-Control","private, no-cache, no-store, must-revalidate, max-age=0"),e.headers.set("Pragma","no-cache"),e.headers.set("Expires","0")}let oy=["sub","name","nickname","given_name","family_name","picture","email","email_verified","org_id"],ow=["client_id","redirect_uri","response_type","code_challenge","code_challenge_method","state","nonce"],ob="openid profile email offline_access";function o_(e,t){return new URL(e&&e.startsWith("/")?e.substring(1,e.length):e,t&&!t.endsWith("/")?`${t}/`:t)}class ov{constructor(e){if(this.fetch=e.fetch||fetch,this.jwksCache=e.jwksCache||{},this.allowInsecureRequests=e.allowInsecureRequests??!1,this.httpOptions=()=>{let t=new Headers,r=e.enableTelemetry??!0,n=e.httpTimeout??5e3;if(r){let e="nextjs-auth0",r=ap.rE;t.set("User-Agent",`${e}/${r}`),t.set("Auth0-Client",oS(JSON.stringify({name:e,version:r})))}return{signal:AbortSignal.timeout(n),headers:t}},this.allowInsecureRequests&&console.warn("allowInsecureRequests is enabled in a production environment. This is not recommended."),this.transactionStore=e.transactionStore,this.sessionStore=e.sessionStore,this.domain=e.domain,this.clientMetadata={client_id:e.clientId},this.clientSecret=e.clientSecret,this.authorizationParameters=e.authorizationParameters||{scope:ob},this.pushedAuthorizationRequests=e.pushedAuthorizationRequests??!1,this.clientAssertionSigningKey=e.clientAssertionSigningKey,this.clientAssertionSigningAlg=e.clientAssertionSigningAlg||"RS256",this.authorizationParameters.scope||(this.authorizationParameters.scope=ob),!this.authorizationParameters.scope.split(" ").map(e=>e.trim()).includes("openid"))throw Error("The 'openid' scope must be included in the set of scopes. See https://auth0.com/docs");this.appBaseUrl=e.appBaseUrl,this.signInReturnToPath=e.signInReturnToPath||"/",this.beforeSessionSaved=e.beforeSessionSaved,this.onCallback=e.onCallback||this.defaultOnCallback,this.routes={login:"/auth/login",logout:"/auth/logout",callback:"/auth/callback",backChannelLogout:"/auth/backchannel-logout",profile:process.env.NEXT_PUBLIC_PROFILE_ROUTE||"/auth/profile",accessToken:process.env.NEXT_PUBLIC_ACCESS_TOKEN_ROUTE||"/auth/access-token",...e.routes},this.enableAccessTokenEndpoint=e.enableAccessTokenEndpoint??!0}async handler(e){let{pathname:t}=e.nextUrl,r=af(t),n=e.method;if("GET"===n&&r===this.routes.login)return this.handleLogin(e);{if("GET"===n&&r===this.routes.logout)return this.handleLogout(e);if("GET"===n&&r===this.routes.callback)return this.handleCallback(e);if("GET"===n&&r===this.routes.profile)return this.handleProfile(e);if("GET"===n&&r===this.routes.accessToken&&this.enableAccessTokenEndpoint)return this.handleAccessToken(e);if("POST"===n&&r===this.routes.backChannelLogout)return this.handleBackChannelLogout(e);let t=Z.next(),i=await this.sessionStore.get(e.cookies);return i&&(await this.sessionStore.set(e.cookies,t.cookies,{...i}),om(t)),t}}async startInteractiveLogin(e={}){let t=o_(this.routes.callback,this.appBaseUrl),r=this.signInReturnToPath;if(e.returnTo){let t=new URL(this.authorizationParameters.redirect_uri||this.appBaseUrl),n=function(e,t){let r;try{r=new URL(e,t)}catch(e){return}if(r.origin===t.origin)return r.toString()}(e.returnTo,t);n&&(r=n)}let n=nB(),i=await nJ(n),a=nB(),o=nB(),s=new URLSearchParams;s.set("client_id",this.clientMetadata.client_id),s.set("redirect_uri",t.toString()),s.set("response_type","code"),s.set("code_challenge",i),s.set("code_challenge_method","S256"),s.set("state",a),s.set("nonce",o),Object.entries({...this.authorizationParameters,...e.authorizationParameters}).forEach(([e,t])=>{ow.includes(e)||null==t||s.set(e,String(t))});let c={nonce:o,maxAge:this.authorizationParameters.max_age,codeVerifier:n,responseType:"code",state:a,returnTo:r},[l,u]=await this.authorizationUrl(s);if(l)return new Z("An error occured while trying to initiate the login request.",{status:500});let d=Z.redirect(u.toString());return await this.transactionStore.save(d.cookies,c),d}async handleLogin(e){let t=Object.fromEntries(e.nextUrl.searchParams.entries()),r={authorizationParameters:this.pushedAuthorizationRequests?{}:t,returnTo:t.returnTo};return this.startInteractiveLogin(r)}async handleLogout(e){let t=await this.sessionStore.get(e.cookies),[r,n]=await this.discoverAuthorizationServerMetadata();if(r)return new Z("An error occured while trying to initiate the logout request.",{status:500});let i=e.nextUrl.searchParams.get("returnTo")||this.appBaseUrl;if(!n.end_session_endpoint){console.warn("The Auth0 client does not have RP-initiated logout enabled, the user will be redirected to the `/v2/logout` endpoint instead. Learn how to enable it here: https://auth0.com/docs/authenticate/login/logout/log-users-out-of-auth0#enable-endpoint-discovery");let t=new URL("/v2/logout",this.issuer);t.searchParams.set("returnTo",i),t.searchParams.set("client_id",this.clientMetadata.client_id);let r=Z.redirect(t);return await this.sessionStore.delete(e.cookies,r.cookies),await this.transactionStore.deleteAll(e.cookies,r.cookies),r}let a=new URL(n.end_session_endpoint);a.searchParams.set("client_id",this.clientMetadata.client_id),a.searchParams.set("post_logout_redirect_uri",i),t?.internal.sid&&a.searchParams.set("logout_hint",t.internal.sid),t?.tokenSet.idToken&&a.searchParams.set("id_token_hint",t?.tokenSet.idToken);let o=Z.redirect(a);return await this.sessionStore.delete(e.cookies,o.cookies),om(o),await this.transactionStore.deleteAll(e.cookies,o.cookies),o}async handleCallback(e){let t,r,n=e.nextUrl.searchParams.get("state");if(!n)return this.onCallback(new tY,{},null);let i=await this.transactionStore.get(e.cookies,n);if(!i)return this.onCallback(new tQ,{},null);let a=i.payload,o={returnTo:a.returnTo},[s,c]=await this.discoverAuthorizationServerMetadata();if(s)return this.onCallback(s,o,null);try{t=ao(c,this.clientMetadata,e.nextUrl.searchParams,a.state)}catch(e){return this.onCallback(new tZ({cause:new tF({code:e.error,message:e.error_description})}),o,null)}let l=o_(this.routes.callback,this.appBaseUrl),u=await ik(c,this.clientMetadata,await this.getClientAuth(),t,l.toString(),a.codeVerifier,{...this.httpOptions(),[n_]:this.fetch,[ny]:this.allowInsecureRequests});try{r=await iO(c,this.clientMetadata,u,{expectedNonce:a.nonce,maxAge:a.maxAge,requireIdToken:!0})}catch(e){return this.onCallback(new t0({cause:new tF({code:e.error,message:e.error_description})}),o,null)}let d=ib(r),h={user:d,tokenSet:{accessToken:r.access_token,idToken:r.id_token,scope:r.scope,refreshToken:r.refresh_token,expiresAt:Math.floor(Date.now()/1e3)+Number(r.expires_in)},internal:{sid:d.sid,createdAt:Math.floor(Date.now()/1e3)}},p=await this.onCallback(null,o,h);if(this.beforeSessionSaved)h={...await this.beforeSessionSaved(h,r.id_token??null),internal:h.internal};else h.user=Object.keys(d).reduce((e,t)=>(oy.includes(t)&&(e[t]=d[t]),e),{});return await this.sessionStore.set(e.cookies,p.cookies,h,!0),om(p),await this.transactionStore.delete(p.cookies,n),p}async handleProfile(e){let t=await this.sessionStore.get(e.cookies);if(!t)return new Z(null,{status:401});let r=Z.json(t?.user);return om(r),r}async handleAccessToken(e){let t=await this.sessionStore.get(e.cookies);if(!t)return Z.json({error:{message:"The user does not have an active session.",code:h.MISSING_SESSION}},{status:401});let[r,n]=await this.getTokenSet(t.tokenSet);if(r)return Z.json({error:{message:r.message,code:r.code}},{status:401});let i=Z.json({token:n.accessToken,scope:n.scope,expires_at:n.expiresAt});return(n.accessToken!==t.tokenSet.accessToken||n.refreshToken!==t.tokenSet.refreshToken||n.expiresAt!==t.tokenSet.expiresAt)&&(await this.sessionStore.set(e.cookies,i.cookies,{...t,tokenSet:n}),om(i)),i}async handleBackChannelLogout(e){if(!this.sessionStore.store)return new Z("A session data store is not configured.",{status:500});if(!this.sessionStore.store.deleteByLogoutToken)return new Z("Back-channel logout is not supported by the session data store.",{status:500});let t=new URLSearchParams(await e.text()).get("logout_token");if(!t)return new Z("Missing `logout_token` in the request body.",{status:400});let[r,n]=await this.verifyLogoutToken(t);return r?new Z(r.message,{status:400}):(await this.sessionStore.store.deleteByLogoutToken(n),new Z(null,{status:204}))}async getTokenSet(e,t){if(!e.refreshToken&&e.expiresAt<=Date.now()/1e3)return[new t2(h.MISSING_REFRESH_TOKEN,"The access token has expired and a refresh token was not provided. The user needs to re-authenticate."),null];if(e.refreshToken&&(t||e.expiresAt<=Date.now()/1e3)){let t,[r,n]=await this.discoverAuthorizationServerMetadata();if(r)return console.error(r),[r,null];let i=await im(n,this.clientMetadata,await this.getClientAuth(),e.refreshToken,{...this.httpOptions(),[n_]:this.fetch,[ny]:this.allowInsecureRequests});try{t=await iS(n,this.clientMetadata,i)}catch(e){return console.error(e),[new t2(h.FAILED_TO_REFRESH_TOKEN,"The access token has expired and there was an error while trying to refresh it. Check the server logs for more information."),null]}let a=Math.floor(Date.now()/1e3)+Number(t.expires_in),o={...e,accessToken:t.access_token,idToken:t.id_token,expiresAt:a};return t.refresh_token?o.refreshToken=t.refresh_token:o.refreshToken=e.refreshToken,[null,o]}return[null,e]}async discoverAuthorizationServerMetadata(){if(this.authorizationServerMetadata)return[null,this.authorizationServerMetadata];let e=new URL(this.issuer);try{let t=await nL(e,{...this.httpOptions(),[n_]:this.fetch,[ny]:this.allowInsecureRequests}).then(t=>n$(e,t));return this.authorizationServerMetadata=t,[null,t]}catch(t){return console.error(`An error occured while performing the discovery request. Please make sure the AUTH0_DOMAIN environment variable is correctly configured — the format must be 'example.us.auth0.com'. issuer=${e.toString()}, error:`,t),[new tX("Discovery failed for the OpenID Connect configuration."),null]}}async defaultOnCallback(e,t){return e?new Z(e.message,{status:500}):Z.redirect(o_(t.returnTo||"/",this.appBaseUrl))}async verifyLogoutToken(e){let[t,r]=await this.discoverAuthorizationServerMetadata();if(t)return[t,null];let n=function(e,t){let r=new rU(e,t),n=async(e,t)=>r.getKey(e,t);return Object.defineProperties(n,{coolingDown:{get:()=>r.coolingDown(),enumerable:!0,configurable:!1},fresh:{get:()=>r.fresh(),enumerable:!0,configurable:!1},reload:{value:()=>r.reload(),enumerable:!0,configurable:!1,writable:!1},reloading:{get:()=>!!r._pendingFetch,enumerable:!0,configurable:!1},jwks:{value:()=>r._local?.jwks(),enumerable:!0,configurable:!1,writable:!1}}),n}(new URL(r.jwks_uri),{[rL]:this.jwksCache}),{payload:i}=await nh(e,n,{issuer:r.issuer,audience:this.clientMetadata.client_id,algorithms:["RS256"],requiredClaims:["iat"]});return"sid"in i||"sub"in i?"sid"in i&&"string"!=typeof i.sid?[new t1('"sid" claim must be a string'),null]:"sub"in i&&"string"!=typeof i.sub?[new t1('"sub" claim must be a string'),null]:"nonce"in i?[new t1('"nonce" claim is prohibited'),null]:"events"in i?"object"!=typeof i.events||null===i.events?[new t1('"events" claim must be an object'),null]:"http://schemas.openid.net/event/backchannel-logout"in i.events?"object"!=typeof i.events["http://schemas.openid.net/event/backchannel-logout"]?[new t1('"http://schemas.openid.net/event/backchannel-logout" member in the "events" claim must be an object'),null]:[null,{sid:i.sid,sub:i.sub}]:[new t1('"http://schemas.openid.net/event/backchannel-logout" member is missing in the "events" claim'),null]:[new t1('"events" claim is missing'),null]:[new t1('either "sid" or "sub" (or both) claims must be present'),null]}async authorizationUrl(e){let[t,r]=await this.discoverAuthorizationServerMetadata();if(t)return[t,null];if(this.pushedAuthorizationRequests&&!r.pushed_authorization_request_endpoint)return console.error("The Auth0 tenant does not have pushed authorization requests enabled. Learn how to enable it here: https://auth0.com/docs/get-started/applications/configure-par"),[Error("The authorization server does not support pushed authorization requests."),null];let n=new URL(r.authorization_endpoint);if(this.pushedAuthorizationRequests){let t,i=await n4(r,this.clientMetadata,await this.getClientAuth(),e,{...this.httpOptions(),[n_]:this.fetch,[ny]:this.allowInsecureRequests});try{t=await ia(r,this.clientMetadata,i)}catch(e){return[new tZ({cause:new tF({code:e.error,message:e.error_description}),message:"An error occured while pushing the authorization request."}),null]}return n.searchParams.set("request_uri",t.request_uri),n.searchParams.set("client_id",this.clientMetadata.client_id),[null,n]}return n.search=e.toString(),[null,n]}async getClientAuth(){var e;if(!this.clientSecret&&!this.clientAssertionSigningKey)throw Error("The client secret or client assertion signing key must be provided.");let t=this.clientAssertionSigningKey;return!t||t instanceof CryptoKey||(t=await rO(t,this.clientAssertionSigningAlg)),t?function(e,t){var r;let{key:n,kid:i}=(r=e)instanceof CryptoKey?{key:r}:r?.key instanceof CryptoKey?(void 0!==r.kid&&nW(r.kid,'"kid"'),{key:r.key,kid:r.kid}):{};return nN(n,'"clientPrivateKey.key"'),async(e,t,r,a)=>{let o={alg:nz(n),kid:i},s=function(e,t){let r=nF()+nV(t);return{jti:nB(),aud:e.issuer,exp:r+60,iat:r,nbf:r,iss:t.client_id,sub:t.client_id}}(e,t);r.set("client_id",t.client_id),r.set("client_assertion_type","urn:ietf:params:oauth:client-assertion-type:jwt-bearer"),r.set("client_assertion",await nQ(o,s,n))}}(t):(nW(e=this.clientSecret,'"clientSecret"'),(t,r,n,i)=>{n.set("client_id",r.client_id),n.set("client_secret",e)})}get issuer(){return this.domain.startsWith("http://")||this.domain.startsWith("https://")?this.domain:`https://${this.domain}`}async getConnectionTokenSet(e,t,r){if(!e.refreshToken&&(!t||t.expiresAt<=Date.now()/1e3))return[new t5(p.MISSING_REFRESH_TOKEN,"A refresh token was not present, Connection Access Token requires a refresh token. The user needs to re-authenticate."),null];if(e.refreshToken&&(!t||t.expiresAt<=Date.now()/1e3)){let t,n=new URLSearchParams;n.append("connection",r.connection),n.append("subject_token_type","urn:ietf:params:oauth:token-type:refresh_token"),n.append("subject_token",e.refreshToken),n.append("requested_token_type","http://auth0.com/oauth/token-type/federated-connection-access-token"),r.login_hint&&n.append("login_hint",r.login_hint);let[i,a]=await this.discoverAuthorizationServerMetadata();if(i)return console.error(i),[i,null];let o=await iQ(a,this.clientMetadata,await this.getClientAuth(),"urn:auth0:params:oauth:grant-type:token-exchange:federated-connection-access-token",n,{[n_]:this.fetch,[ny]:this.allowInsecureRequests});try{t=await iZ(a,this.clientMetadata,o)}catch(e){return console.error(e),[new t5(p.FAILED_TO_EXCHANGE,"There was an error trying to exchange the refresh token for a connection access token. Check the server logs for more information.",new tF({code:e.error,message:e.error_description})),null]}return[null,{accessToken:t.access_token,expiresAt:Math.floor(Date.now()/1e3)+Number(t.expires_in),scope:t.scope,connection:r.connection}]}return[null,t]}}let oS=e=>{let t=new TextEncoder().encode(e),r=[];for(let e=0;e<t.length;e+=32768)r.push(String.fromCharCode.apply(null,t.subarray(e,e+32768)));return btoa(r.join(""))};class oE{constructor({secret:e,rolling:t=!0,absoluteDuration:r=259200,inactivityDuration:n=86400,store:i,cookieOptions:a}){this.secret=e,this.rolling=t,this.absoluteDuration=r,this.inactivityDuration=n,this.store=i,this.sessionCookieName=a?.name??"__session",this.cookieConfig={httpOnly:!0,sameSite:a?.sameSite??"lax",secure:a?.secure??!1,path:a?.path??"/",domain:a?.domain,transient:a?.transient}}epoch(){return Date.now()/1e3|0}calculateMaxAge(e){if(!this.rolling)return this.absoluteDuration;let t=Math.min(this.epoch()+this.inactivityDuration,e+this.absoluteDuration)-this.epoch();return t>0?t:0}}let oA="appSession";function oT(e,t){let r=t.user;return{user:r,tokenSet:{idToken:t.idToken??void 0,accessToken:t.accessToken??void 0,scope:t.accessTokenScope,refreshToken:t.refreshToken,expiresAt:t.accessTokenExpiresAt},internal:{sid:r.sid,createdAt:e.iat}}}let ok=()=>{let e=new Uint8Array(16);return crypto.getRandomValues(e),Array.from(e).map(e=>e.toString(16).padStart(2,"0")).join("")};class oR extends oE{constructor({secret:e,store:t,rolling:r,absoluteDuration:n,inactivityDuration:i,cookieOptions:a}){super({secret:e,rolling:r,absoluteDuration:n,inactivityDuration:i,cookieOptions:a}),this.store=t}async get(e){let t=e.get(this.sessionCookieName)||e.get(oA);if(!t||!t.value)return null;let r=null;try{let{payload:e}=await os(t.value,this.secret);r=e.id}catch(e){if("ERR_JWE_INVALID"===e.code){let e=await ol(t.name,t.value,this.secret);if(!e)return null;r=e}}if(!r)return null;let n=await this.store.get(r);return n?n.header?.iat?oT(n.header,n.data):n:null}async set(e,t,r,n=!1){let i=null,a=e.get(this.sessionCookieName)?.value;if(a){let{payload:e}=await os(a,this.secret);i=e.id}i&&n&&(await this.store.delete(i),i=ok()),i||(i=ok());let o=this.calculateMaxAge(r.internal.createdAt),s=Date.now()/1e3+o,c=await oo({id:i},this.secret,s);t.set(this.sessionCookieName,c.toString(),{...this.cookieConfig,maxAge:o}),await this.store.set(i,r),e.set(this.sessionCookieName,c.toString()),this.sessionCookieName!==oA&&e.has(oA)&&t.delete(oA)}async delete(e,t){let r=e.get(this.sessionCookieName)?.value;if(await t.delete(this.sessionCookieName),!r)return;let{payload:n}=await os(r,this.secret);await this.store.delete(n.id)}}class oC extends oE{constructor({secret:e,rolling:t,absoluteDuration:r,inactivityDuration:n,cookieOptions:i}){super({secret:e,rolling:t,absoluteDuration:r,inactivityDuration:n,cookieOptions:i}),this.connectionTokenSetsCookieName="__FC"}async get(e){var t;let r=of(this.sessionCookieName,e)??of(oA,e,!0);if(!r)return null;let n=(t=await os(r,this.secret)).protectedHeader.iat?oT(t.protectedHeader,t.payload):t.payload,i=await Promise.all(this.getConnectionTokenSetsCookies(e).map(e=>os(e.value,this.secret)));return{...n,...i.length?{connectionTokenSets:i.map(e=>e.payload)}:{}}}async set(e,t,r){let{connectionTokenSets:n,...i}=r,a=this.calculateMaxAge(r.internal.createdAt),o=Math.floor(Date.now()/1e3)+a,s=(await oo(i,this.secret,o)).toString(),c={...this.cookieConfig,maxAge:a};!function(e,t,r,n,i){let{transient:a,...o}=r,s={...o};if(a&&delete s.maxAge,new TextEncoder().encode(t).length<=3500){i.set(e,t,s),n.set(e,t),op(n,e).forEach(e=>{i.delete(e.name),n.delete(e.name)});return}let c=0,l=0;for(;c<t.length;){let r=t.slice(c,c+3500),a=`${e}__${l}`;i.set(a,r,s),n.set(a,r),c+=3500,l++}let u=op(n,e).length-l;if(u>0)for(let t=0;t<u;t++){let r=l+t,a=`${e}__${r}`;i.delete(a),n.delete(a)}i.delete(e),n.delete(e)}(this.sessionCookieName,s,c,e,t),n?.length&&await Promise.all(n.map((r,n)=>this.storeInCookie(e,t,r,`${this.connectionTokenSetsCookieName}_${n}`,a))),og(oA,e,t,!0)}async delete(e,t){og(this.sessionCookieName,e,t),this.getConnectionTokenSetsCookies(e).forEach(e=>t.delete(e.name))}async storeInCookie(e,t,r,n,i){let a=Math.floor(Date.now()/1e3+i),o=await oo(r,this.secret,a),s=o.toString();t.set(n,o.toString(),{...this.cookieConfig,maxAge:i}),e.set(n,s);let c=new a_(new Headers);c.set(n,s,{...this.cookieConfig,maxAge:i}),new TextEncoder().encode(c.toString()).length>=4096&&(n===this.sessionCookieName?console.warn(`The ${n} cookie size exceeds 4096 bytes, which may cause issues in some browsers. Consider removing any unnecessary custom claims from the access token or the user profile. Alternatively, you can use a stateful session implementation to store the session data in a data store.`):console.warn(`The ${n} cookie size exceeds 4096 bytes, which may cause issues in some browsers. You can use a stateful session implementation to store the session data in a data store.`))}getConnectionTokenSetsCookies(e){return e.getAll().filter(e=>e.name.startsWith(this.connectionTokenSetsCookieName))}}class ox{constructor({secret:e,cookieOptions:t}){this.secret=e,this.transactionCookiePrefix=t?.prefix??"__txn_",this.cookieConfig={httpOnly:!0,sameSite:t?.sameSite??"lax",secure:t?.secure??!1,path:t?.path??"/",maxAge:3600}}getTransactionCookieName(e){return`${this.transactionCookiePrefix}${e}`}getCookiePrefix(){return this.transactionCookiePrefix}async save(e,t){let r=Math.floor(Date.now()/1e3+this.cookieConfig.maxAge),n=await oo(t,this.secret,r);if(!t.state)throw Error("Transaction state is required");e.set(this.getTransactionCookieName(t.state),n.toString(),this.cookieConfig)}async get(e,t){let r=this.getTransactionCookieName(t),n=e.get(r)?.value;return n?os(n,this.secret):null}async delete(e,t){await e.delete(this.getTransactionCookieName(t))}async deleteAll(e,t){let r=this.getCookiePrefix();e.getAll().forEach(e=>{e.name.startsWith(r)&&t.delete(e.name)})}}class oP{constructor(e={}){let{domain:t,clientId:r,clientSecret:n,appBaseUrl:i,secret:a,clientAssertionSigningKey:o}=this.validateAndExtractRequiredOptions(e),s=e.clientAssertionSigningAlg||process.env.AUTH0_CLIENT_ASSERTION_SIGNING_ALG,c={name:e.session?.cookie?.name??"__session",secure:e.session?.cookie?.secure??"true"===process.env.AUTH0_COOKIE_SECURE,sameSite:e.session?.cookie?.sameSite??process.env.AUTH0_COOKIE_SAME_SITE??"lax",path:e.session?.cookie?.path??process.env.AUTH0_COOKIE_PATH??"/",transient:e.session?.cookie?.transient??"true"===process.env.AUTH0_COOKIE_TRANSIENT,domain:e.session?.cookie?.domain??process.env.AUTH0_COOKIE_DOMAIN},l={prefix:e.transactionCookie?.prefix??"__txn_",secure:e.transactionCookie?.secure??!1,sameSite:e.transactionCookie?.sameSite??"lax",path:e.transactionCookie?.path??"/"};if(i){let{protocol:e}=new URL(i);"https:"===e&&(c.secure=!0,l.secure=!0)}this.transactionStore=new ox({...e.session,secret:a,cookieOptions:l}),this.sessionStore=e.sessionStore?new oR({...e.session,secret:a,store:e.sessionStore,cookieOptions:c}):new oC({...e.session,secret:a,cookieOptions:c}),this.authClient=new ov({transactionStore:this.transactionStore,sessionStore:this.sessionStore,domain:t,clientId:r,clientSecret:n,clientAssertionSigningKey:o,clientAssertionSigningAlg:s,authorizationParameters:e.authorizationParameters,pushedAuthorizationRequests:e.pushedAuthorizationRequests,appBaseUrl:i,secret:a,signInReturnToPath:e.signInReturnToPath,beforeSessionSaved:e.beforeSessionSaved,onCallback:e.onCallback,routes:e.routes,allowInsecureRequests:e.allowInsecureRequests,httpTimeout:e.httpTimeout,enableTelemetry:e.enableTelemetry,enableAccessTokenEndpoint:e.enableAccessTokenEndpoint})}middleware(e){return this.authClient.handler.bind(this.authClient)(e)}async getSession(e){return e?e instanceof G?this.sessionStore.get(e.cookies):this.sessionStore.get(this.createRequestCookies(e)):this.sessionStore.get(await tO())}async getAccessToken(e,t,r){let n,i,a={refresh:!1},o={};if(e&&(e instanceof Request||"object"==typeof e.headers)){if(n=e,i=t,o={...a,...r??{}},!i)throw TypeError("getAccessToken(req, res): The 'res' argument is missing. Both 'req' and 'res' must be provided together for Pages Router or middleware usage.")}else{if(void 0!==t||void 0!==r)throw TypeError("getAccessToken: Invalid arguments. Valid signatures are getAccessToken(), getAccessToken(options), or getAccessToken(req, res, options).");o={...a,...e??{}}}let s=n?await this.getSession(n):await this.getSession();if(!s)throw new t2(h.MISSING_SESSION,"The user does not have an active session.");let[c,l]=await this.authClient.getTokenSet(s.tokenSet,o.refresh);if(c)throw c;return(l.accessToken!==s.tokenSet.accessToken||l.expiresAt!==s.tokenSet.expiresAt||l.refreshToken!==s.tokenSet.refreshToken)&&await this.saveToSession({...s,tokenSet:l},n,i),{token:l.accessToken,scope:l.scope,expiresAt:l.expiresAt}}async getAccessTokenForConnection(e,t,r){let n=t?await this.getSession(t):await this.getSession();if(!n)throw new t5(p.MISSING_SESSION,"The user does not have an active session.");let i=n.connectionTokenSets?.find(t=>t.connection===e.connection),[a,o]=await this.authClient.getConnectionTokenSet(n.tokenSet,i,e);if(null!==a)throw a;if(o&&(!i||o.accessToken!==i.accessToken||o.expiresAt!==i.expiresAt||o.scope!==i.scope)){let a;a=i?n.connectionTokenSets?.map(t=>t.connection===e.connection?o:t):[...n.connectionTokenSets||[],o],await this.saveToSession({...n,connectionTokenSets:a},t,r)}return{token:o.accessToken,scope:o.scope,expiresAt:o.expiresAt}}async updateSession(e,t,r){if(t){if(!r)throw Error("The session data is missing.");if(e instanceof G&&t instanceof Z){let n=await this.getSession(e);if(!n)throw Error("The user is not authenticated.");await this.sessionStore.set(e.cookies,t.cookies,{...r,internal:{...n.internal}})}else{let n=await this.getSession(e);if(!n)throw Error("The user is not authenticated.");let i=new Headers,a=new a_(i),o=this.createRequestCookies(e);for(let[e,s]of(await this.sessionStore.set(o,a,{...r,internal:{...n.internal}}),i.entries()))t.setHeader(e,s)}}else{let t=await this.getSession();if(!t)throw Error("The user is not authenticated.");if(!e)throw Error("The session data is missing.");await this.sessionStore.set(await tO(),await tO(),{...e,internal:{...t.internal}})}}createRequestCookies(e){let t=new Headers;for(let r in e.headers)if(Array.isArray(e.headers[r]))for(let n of e.headers[r])t.append(r,n);else t.append(r,e.headers[r]??"");return new ab(t)}async startInteractiveLogin(e){return this.authClient.startInteractiveLogin(e)}async saveToSession(e,t,r){if(t&&r)if(t instanceof G&&r instanceof Z)await this.sessionStore.set(t.cookies,r.cookies,e);else{let n=new Headers,i=new a_(n);for(let[a,o]of(await this.sessionStore.set(this.createRequestCookies(t),i,e),n.entries()))r.setHeader(a,o)}else try{await this.sessionStore.set(await tO(),await tO(),e)}catch(e){}}validateAndExtractRequiredOptions(e){let t={domain:e.domain??process.env.AUTH0_DOMAIN,clientId:e.clientId??process.env.AUTH0_CLIENT_ID,appBaseUrl:e.appBaseUrl??process.env.APP_BASE_URL,secret:e.secret??process.env.AUTH0_SECRET},r=e.clientSecret??process.env.AUTH0_CLIENT_SECRET,n=e.clientAssertionSigningKey??process.env.AUTH0_CLIENT_ASSERTION_SIGNING_KEY,i=Object.entries(t).filter(([,e])=>!e).map(([e])=>e);if(r||n||i.push("clientAuthentication"),i.length){let e={domain:"AUTH0_DOMAIN",clientId:"AUTH0_CLIENT_ID",appBaseUrl:"APP_BASE_URL",secret:"AUTH0_SECRET"},t="WARNING: Not all required options where provided when creating an instance of Auth0Client. Ensure to provide all missing options, either by passing it to the Auth0Client constructor, or by setting the corresponding environment variable.\n";i.forEach(r=>{"clientAuthentication"===r?t+=`Missing: clientAuthentication: Set either AUTH0_CLIENT_SECRET env var or AUTH0_CLIENT_ASSERTION_SIGNING_KEY env var, or pass clientSecret or clientAssertionSigningKey in options
`:e[r]?t+=`Missing: ${r}: Set ${e[r]} env var or pass ${r} in options
`:t+=`Missing: ${r}
`}),console.error(t.trim())}return{...t,clientSecret:r,clientAssertionSigningKey:n}}}let oO=new oP({domain:process.env.AUTH0_DOMAIN,clientId:process.env.AUTH0_CLIENT_ID,clientSecret:process.env.AUTH0_CLIENT_SECRET,secret:process.env.AUTH0_SECRET,appBaseUrl:process.env.APP_BASE_URL}),oN=["/onboarding","/favorites","/messages","/account","/api/favorites","/api/messages"],oI=e=>oN.some(t=>e.startsWith(t));async function oM(e){let t=await oO.middleware(e);if(!oI(e.nextUrl.pathname)||await oO.getSession(e))return t;let r=new URL("/auth/login",e.url);return r.searchParams.set("returnTo",e.nextUrl.pathname),Z.redirect(r)}let oD={matcher:["/((?!_next/static|_next/image|favicon.ico|robots.txt|sitemap.xml|api/auth).*)"]},oj=(Object.values({NOT_FOUND:404,FORBIDDEN:403,UNAUTHORIZED:401}),{...f}),oH=oj.middleware||oj.default,oL="/src/middleware";if("function"!=typeof oH)throw Object.defineProperty(Error(`The Middleware "${oL}" must export a \`middleware\` or a \`default\` function`),"__NEXT_ERROR_CODE",{value:"E120",enumerable:!1,configurable:!0});function oU(e){return tm({...e,page:oL,handler:async(...e)=>{try{return await oH(...e)}catch(i){let t=e[0],r=new URL(t.url),n=r.pathname+r.search;throw await w(i,{path:n,method:t.method,headers:Object.fromEntries(t.headers.entries())},{routerKind:"Pages Router",routePath:"/middleware",routeType:"middleware",revalidateReason:void 0}),i}}})}},724:e=>{"use strict";var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,n=Object.getOwnPropertyNames,i=Object.prototype.hasOwnProperty,a={};function o(e){var t;let r=["path"in e&&e.path&&`Path=${e.path}`,"expires"in e&&(e.expires||0===e.expires)&&`Expires=${("number"==typeof e.expires?new Date(e.expires):e.expires).toUTCString()}`,"maxAge"in e&&"number"==typeof e.maxAge&&`Max-Age=${e.maxAge}`,"domain"in e&&e.domain&&`Domain=${e.domain}`,"secure"in e&&e.secure&&"Secure","httpOnly"in e&&e.httpOnly&&"HttpOnly","sameSite"in e&&e.sameSite&&`SameSite=${e.sameSite}`,"partitioned"in e&&e.partitioned&&"Partitioned","priority"in e&&e.priority&&`Priority=${e.priority}`].filter(Boolean),n=`${e.name}=${encodeURIComponent(null!=(t=e.value)?t:"")}`;return 0===r.length?n:`${n}; ${r.join("; ")}`}function s(e){let t=new Map;for(let r of e.split(/; */)){if(!r)continue;let e=r.indexOf("=");if(-1===e){t.set(r,"true");continue}let[n,i]=[r.slice(0,e),r.slice(e+1)];try{t.set(n,decodeURIComponent(null!=i?i:"true"))}catch{}}return t}function c(e){if(!e)return;let[[t,r],...n]=s(e),{domain:i,expires:a,httponly:o,maxage:c,path:d,samesite:h,secure:p,partitioned:f,priority:g}=Object.fromEntries(n.map(([e,t])=>[e.toLowerCase().replace(/-/g,""),t]));{var m,y,w={name:t,value:decodeURIComponent(r),domain:i,...a&&{expires:new Date(a)},...o&&{httpOnly:!0},..."string"==typeof c&&{maxAge:Number(c)},path:d,...h&&{sameSite:l.includes(m=(m=h).toLowerCase())?m:void 0},...p&&{secure:!0},...g&&{priority:u.includes(y=(y=g).toLowerCase())?y:void 0},...f&&{partitioned:!0}};let e={};for(let t in w)w[t]&&(e[t]=w[t]);return e}}((e,r)=>{for(var n in r)t(e,n,{get:r[n],enumerable:!0})})(a,{RequestCookies:()=>d,ResponseCookies:()=>h,parseCookie:()=>s,parseSetCookie:()=>c,stringifyCookie:()=>o}),e.exports=((e,a,o,s)=>{if(a&&"object"==typeof a||"function"==typeof a)for(let c of n(a))i.call(e,c)||c===o||t(e,c,{get:()=>a[c],enumerable:!(s=r(a,c))||s.enumerable});return e})(t({},"__esModule",{value:!0}),a);var l=["strict","lax","none"],u=["low","medium","high"],d=class{constructor(e){this._parsed=new Map,this._headers=e;let t=e.get("cookie");if(t)for(let[e,r]of s(t))this._parsed.set(e,{name:e,value:r})}[Symbol.iterator](){return this._parsed[Symbol.iterator]()}get size(){return this._parsed.size}get(...e){let t="string"==typeof e[0]?e[0]:e[0].name;return this._parsed.get(t)}getAll(...e){var t;let r=Array.from(this._parsed);if(!e.length)return r.map(([e,t])=>t);let n="string"==typeof e[0]?e[0]:null==(t=e[0])?void 0:t.name;return r.filter(([e])=>e===n).map(([e,t])=>t)}has(e){return this._parsed.has(e)}set(...e){let[t,r]=1===e.length?[e[0].name,e[0].value]:e,n=this._parsed;return n.set(t,{name:t,value:r}),this._headers.set("cookie",Array.from(n).map(([e,t])=>o(t)).join("; ")),this}delete(e){let t=this._parsed,r=Array.isArray(e)?e.map(e=>t.delete(e)):t.delete(e);return this._headers.set("cookie",Array.from(t).map(([e,t])=>o(t)).join("; ")),r}clear(){return this.delete(Array.from(this._parsed.keys())),this}[Symbol.for("edge-runtime.inspect.custom")](){return`RequestCookies ${JSON.stringify(Object.fromEntries(this._parsed))}`}toString(){return[...this._parsed.values()].map(e=>`${e.name}=${encodeURIComponent(e.value)}`).join("; ")}},h=class{constructor(e){var t,r,n;this._parsed=new Map,this._headers=e;let i=null!=(n=null!=(r=null==(t=e.getSetCookie)?void 0:t.call(e))?r:e.get("set-cookie"))?n:[];for(let e of Array.isArray(i)?i:function(e){if(!e)return[];var t,r,n,i,a,o=[],s=0;function c(){for(;s<e.length&&/\s/.test(e.charAt(s));)s+=1;return s<e.length}for(;s<e.length;){for(t=s,a=!1;c();)if(","===(r=e.charAt(s))){for(n=s,s+=1,c(),i=s;s<e.length&&"="!==(r=e.charAt(s))&&";"!==r&&","!==r;)s+=1;s<e.length&&"="===e.charAt(s)?(a=!0,s=i,o.push(e.substring(t,n)),t=s):s=n+1}else s+=1;(!a||s>=e.length)&&o.push(e.substring(t,e.length))}return o}(i)){let t=c(e);t&&this._parsed.set(t.name,t)}}get(...e){let t="string"==typeof e[0]?e[0]:e[0].name;return this._parsed.get(t)}getAll(...e){var t;let r=Array.from(this._parsed.values());if(!e.length)return r;let n="string"==typeof e[0]?e[0]:null==(t=e[0])?void 0:t.name;return r.filter(e=>e.name===n)}has(e){return this._parsed.has(e)}set(...e){let[t,r,n]=1===e.length?[e[0].name,e[0].value,e[0]]:e,i=this._parsed;return i.set(t,function(e={name:"",value:""}){return"number"==typeof e.expires&&(e.expires=new Date(e.expires)),e.maxAge&&(e.expires=new Date(Date.now()+1e3*e.maxAge)),(null===e.path||void 0===e.path)&&(e.path="/"),e}({name:t,value:r,...n})),function(e,t){for(let[,r]of(t.delete("set-cookie"),e)){let e=o(r);t.append("set-cookie",e)}}(i,this._headers),this}delete(...e){let[t,r]="string"==typeof e[0]?[e[0]]:[e[0].name,e[0]];return this.set({...r,name:t,value:"",expires:new Date(0)})}[Symbol.for("edge-runtime.inspect.custom")](){return`ResponseCookies ${JSON.stringify(Object.fromEntries(this._parsed))}`}toString(){return[...this._parsed.values()].map(o).join("; ")}}},802:e=>{(()=>{"use strict";var t={993:e=>{var t=Object.prototype.hasOwnProperty,r="~";function n(){}function i(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function a(e,t,n,a,o){if("function"!=typeof n)throw TypeError("The listener must be a function");var s=new i(n,a||e,o),c=r?r+t:t;return e._events[c]?e._events[c].fn?e._events[c]=[e._events[c],s]:e._events[c].push(s):(e._events[c]=s,e._eventsCount++),e}function o(e,t){0==--e._eventsCount?e._events=new n:delete e._events[t]}function s(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(r=!1)),s.prototype.eventNames=function(){var e,n,i=[];if(0===this._eventsCount)return i;for(n in e=this._events)t.call(e,n)&&i.push(r?n.slice(1):n);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},s.prototype.listeners=function(e){var t=r?r+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,a=n.length,o=Array(a);i<a;i++)o[i]=n[i].fn;return o},s.prototype.listenerCount=function(e){var t=r?r+e:e,n=this._events[t];return n?n.fn?1:n.length:0},s.prototype.emit=function(e,t,n,i,a,o){var s=r?r+e:e;if(!this._events[s])return!1;var c,l,u=this._events[s],d=arguments.length;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),d){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,n),!0;case 4:return u.fn.call(u.context,t,n,i),!0;case 5:return u.fn.call(u.context,t,n,i,a),!0;case 6:return u.fn.call(u.context,t,n,i,a,o),!0}for(l=1,c=Array(d-1);l<d;l++)c[l-1]=arguments[l];u.fn.apply(u.context,c)}else{var h,p=u.length;for(l=0;l<p;l++)switch(u[l].once&&this.removeListener(e,u[l].fn,void 0,!0),d){case 1:u[l].fn.call(u[l].context);break;case 2:u[l].fn.call(u[l].context,t);break;case 3:u[l].fn.call(u[l].context,t,n);break;case 4:u[l].fn.call(u[l].context,t,n,i);break;default:if(!c)for(h=1,c=Array(d-1);h<d;h++)c[h-1]=arguments[h];u[l].fn.apply(u[l].context,c)}}return!0},s.prototype.on=function(e,t,r){return a(this,e,t,r,!1)},s.prototype.once=function(e,t,r){return a(this,e,t,r,!0)},s.prototype.removeListener=function(e,t,n,i){var a=r?r+e:e;if(!this._events[a])return this;if(!t)return o(this,a),this;var s=this._events[a];if(s.fn)s.fn!==t||i&&!s.once||n&&s.context!==n||o(this,a);else{for(var c=0,l=[],u=s.length;c<u;c++)(s[c].fn!==t||i&&!s[c].once||n&&s[c].context!==n)&&l.push(s[c]);l.length?this._events[a]=1===l.length?l[0]:l:o(this,a)}return this},s.prototype.removeAllListeners=function(e){var t;return e?(t=r?r+e:e,this._events[t]&&o(this,t)):(this._events=new n,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=r,s.EventEmitter=s,e.exports=s},213:e=>{e.exports=(e,t)=>(t=t||(()=>{}),e.then(e=>new Promise(e=>{e(t())}).then(()=>e),e=>new Promise(e=>{e(t())}).then(()=>{throw e})))},574:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r){let n=0,i=e.length;for(;i>0;){let a=i/2|0,o=n+a;0>=r(e[o],t)?(n=++o,i-=a+1):i=a}return n}},821:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});let n=r(574);class i{constructor(){this._queue=[]}enqueue(e,t){let r={priority:(t=Object.assign({priority:0},t)).priority,run:e};if(this.size&&this._queue[this.size-1].priority>=t.priority)return void this._queue.push(r);let i=n.default(this._queue,r,(e,t)=>t.priority-e.priority);this._queue.splice(i,0,r)}dequeue(){let e=this._queue.shift();return null==e?void 0:e.run}filter(e){return this._queue.filter(t=>t.priority===e.priority).map(e=>e.run)}get size(){return this._queue.length}}t.default=i},816:(e,t,r)=>{let n=r(213);class i extends Error{constructor(e){super(e),this.name="TimeoutError"}}let a=(e,t,r)=>new Promise((a,o)=>{if("number"!=typeof t||t<0)throw TypeError("Expected `milliseconds` to be a positive number");if(t===1/0)return void a(e);let s=setTimeout(()=>{if("function"==typeof r){try{a(r())}catch(e){o(e)}return}let n="string"==typeof r?r:`Promise timed out after ${t} milliseconds`,s=r instanceof Error?r:new i(n);"function"==typeof e.cancel&&e.cancel(),o(s)},t);n(e.then(a,o),()=>{clearTimeout(s)})});e.exports=a,e.exports.default=a,e.exports.TimeoutError=i}},r={};function n(e){var i=r[e];if(void 0!==i)return i.exports;var a=r[e]={exports:{}},o=!0;try{t[e](a,a.exports,n),o=!1}finally{o&&delete r[e]}return a.exports}n.ab="//";var i={};(()=>{Object.defineProperty(i,"__esModule",{value:!0});let e=n(993),t=n(816),r=n(821),a=()=>{},o=new t.TimeoutError;class s extends e{constructor(e){var t,n,i,o;if(super(),this._intervalCount=0,this._intervalEnd=0,this._pendingCount=0,this._resolveEmpty=a,this._resolveIdle=a,!("number"==typeof(e=Object.assign({carryoverConcurrencyCount:!1,intervalCap:1/0,interval:0,concurrency:1/0,autoStart:!0,queueClass:r.default},e)).intervalCap&&e.intervalCap>=1))throw TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${null!=(n=null==(t=e.intervalCap)?void 0:t.toString())?n:""}\` (${typeof e.intervalCap})`);if(void 0===e.interval||!(Number.isFinite(e.interval)&&e.interval>=0))throw TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${null!=(o=null==(i=e.interval)?void 0:i.toString())?o:""}\` (${typeof e.interval})`);this._carryoverConcurrencyCount=e.carryoverConcurrencyCount,this._isIntervalIgnored=e.intervalCap===1/0||0===e.interval,this._intervalCap=e.intervalCap,this._interval=e.interval,this._queue=new e.queueClass,this._queueClass=e.queueClass,this.concurrency=e.concurrency,this._timeout=e.timeout,this._throwOnTimeout=!0===e.throwOnTimeout,this._isPaused=!1===e.autoStart}get _doesIntervalAllowAnother(){return this._isIntervalIgnored||this._intervalCount<this._intervalCap}get _doesConcurrentAllowAnother(){return this._pendingCount<this._concurrency}_next(){this._pendingCount--,this._tryToStartAnother(),this.emit("next")}_resolvePromises(){this._resolveEmpty(),this._resolveEmpty=a,0===this._pendingCount&&(this._resolveIdle(),this._resolveIdle=a,this.emit("idle"))}_onResumeInterval(){this._onInterval(),this._initializeIntervalIfNeeded(),this._timeoutId=void 0}_isIntervalPaused(){let e=Date.now();if(void 0===this._intervalId){let t=this._intervalEnd-e;if(!(t<0))return void 0===this._timeoutId&&(this._timeoutId=setTimeout(()=>{this._onResumeInterval()},t)),!0;this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0}return!1}_tryToStartAnother(){if(0===this._queue.size)return this._intervalId&&clearInterval(this._intervalId),this._intervalId=void 0,this._resolvePromises(),!1;if(!this._isPaused){let e=!this._isIntervalPaused();if(this._doesIntervalAllowAnother&&this._doesConcurrentAllowAnother){let t=this._queue.dequeue();return!!t&&(this.emit("active"),t(),e&&this._initializeIntervalIfNeeded(),!0)}}return!1}_initializeIntervalIfNeeded(){this._isIntervalIgnored||void 0!==this._intervalId||(this._intervalId=setInterval(()=>{this._onInterval()},this._interval),this._intervalEnd=Date.now()+this._interval)}_onInterval(){0===this._intervalCount&&0===this._pendingCount&&this._intervalId&&(clearInterval(this._intervalId),this._intervalId=void 0),this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0,this._processQueue()}_processQueue(){for(;this._tryToStartAnother(););}get concurrency(){return this._concurrency}set concurrency(e){if(!("number"==typeof e&&e>=1))throw TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${e}\` (${typeof e})`);this._concurrency=e,this._processQueue()}async add(e,r={}){return new Promise((n,i)=>{let a=async()=>{this._pendingCount++,this._intervalCount++;try{let a=void 0===this._timeout&&void 0===r.timeout?e():t.default(Promise.resolve(e()),void 0===r.timeout?this._timeout:r.timeout,()=>{(void 0===r.throwOnTimeout?this._throwOnTimeout:r.throwOnTimeout)&&i(o)});n(await a)}catch(e){i(e)}this._next()};this._queue.enqueue(a,r),this._tryToStartAnother(),this.emit("add")})}async addAll(e,t){return Promise.all(e.map(async e=>this.add(e,t)))}start(){return this._isPaused&&(this._isPaused=!1,this._processQueue()),this}pause(){this._isPaused=!0}clear(){this._queue=new this._queueClass}async onEmpty(){if(0!==this._queue.size)return new Promise(e=>{let t=this._resolveEmpty;this._resolveEmpty=()=>{t(),e()}})}async onIdle(){if(0!==this._pendingCount||0!==this._queue.size)return new Promise(e=>{let t=this._resolveIdle;this._resolveIdle=()=>{t(),e()}})}get size(){return this._queue.size}sizeBy(e){return this._queue.filter(e).length}get pending(){return this._pendingCount}get isPaused(){return this._isPaused}get timeout(){return this._timeout}set timeout(e){this._timeout=e}}i.default=s})(),e.exports=i})()},815:(e,t,r)=>{"use strict";e.exports=r(35)},890:e=>{(()=>{"use strict";"undefined"!=typeof __nccwpck_require__&&(__nccwpck_require__.ab="//");var t={};(()=>{t.parse=function(t,r){if("string"!=typeof t)throw TypeError("argument str must be a string");for(var i={},a=t.split(n),o=(r||{}).decode||e,s=0;s<a.length;s++){var c=a[s],l=c.indexOf("=");if(!(l<0)){var u=c.substr(0,l).trim(),d=c.substr(++l,c.length).trim();'"'==d[0]&&(d=d.slice(1,-1)),void 0==i[u]&&(i[u]=function(e,t){try{return t(e)}catch(t){return e}}(d,o))}}return i},t.serialize=function(e,t,n){var a=n||{},o=a.encode||r;if("function"!=typeof o)throw TypeError("option encode is invalid");if(!i.test(e))throw TypeError("argument name is invalid");var s=o(t);if(s&&!i.test(s))throw TypeError("argument val is invalid");var c=e+"="+s;if(null!=a.maxAge){var l=a.maxAge-0;if(isNaN(l)||!isFinite(l))throw TypeError("option maxAge is invalid");c+="; Max-Age="+Math.floor(l)}if(a.domain){if(!i.test(a.domain))throw TypeError("option domain is invalid");c+="; Domain="+a.domain}if(a.path){if(!i.test(a.path))throw TypeError("option path is invalid");c+="; Path="+a.path}if(a.expires){if("function"!=typeof a.expires.toUTCString)throw TypeError("option expires is invalid");c+="; Expires="+a.expires.toUTCString()}if(a.httpOnly&&(c+="; HttpOnly"),a.secure&&(c+="; Secure"),a.sameSite)switch("string"==typeof a.sameSite?a.sameSite.toLowerCase():a.sameSite){case!0:case"strict":c+="; SameSite=Strict";break;case"lax":c+="; SameSite=Lax";break;case"none":c+="; SameSite=None";break;default:throw TypeError("option sameSite is invalid")}return c};var e=decodeURIComponent,r=encodeURIComponent,n=/; */,i=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/})(),e.exports=t})()},905:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{interceptTestApis:function(){return a},wrapRequestHandler:function(){return o}});let n=r(201),i=r(552);function a(){return(0,i.interceptFetch)(r.g.fetch)}function o(e){return(t,r)=>(0,n.withRequest)(t,i.reader,()=>e(t,r))}},956:(e,t,r)=>{(()=>{"use strict";var t={491:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ContextAPI=void 0;let n=r(223),i=r(172),a=r(930),o="context",s=new n.NoopContextManager;class c{constructor(){}static getInstance(){return this._instance||(this._instance=new c),this._instance}setGlobalContextManager(e){return(0,i.registerGlobal)(o,e,a.DiagAPI.instance())}active(){return this._getContextManager().active()}with(e,t,r,...n){return this._getContextManager().with(e,t,r,...n)}bind(e,t){return this._getContextManager().bind(e,t)}_getContextManager(){return(0,i.getGlobal)(o)||s}disable(){this._getContextManager().disable(),(0,i.unregisterGlobal)(o,a.DiagAPI.instance())}}t.ContextAPI=c},930:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DiagAPI=void 0;let n=r(56),i=r(912),a=r(957),o=r(172);class s{constructor(){function e(e){return function(...t){let r=(0,o.getGlobal)("diag");if(r)return r[e](...t)}}let t=this;t.setLogger=(e,r={logLevel:a.DiagLogLevel.INFO})=>{var n,s,c;if(e===t){let e=Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return t.error(null!=(n=e.stack)?n:e.message),!1}"number"==typeof r&&(r={logLevel:r});let l=(0,o.getGlobal)("diag"),u=(0,i.createLogLevelDiagLogger)(null!=(s=r.logLevel)?s:a.DiagLogLevel.INFO,e);if(l&&!r.suppressOverrideMessage){let e=null!=(c=Error().stack)?c:"<failed to generate stacktrace>";l.warn(`Current logger will be overwritten from ${e}`),u.warn(`Current logger will overwrite one already registered from ${e}`)}return(0,o.registerGlobal)("diag",u,t,!0)},t.disable=()=>{(0,o.unregisterGlobal)("diag",t)},t.createComponentLogger=e=>new n.DiagComponentLogger(e),t.verbose=e("verbose"),t.debug=e("debug"),t.info=e("info"),t.warn=e("warn"),t.error=e("error")}static instance(){return this._instance||(this._instance=new s),this._instance}}t.DiagAPI=s},653:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MetricsAPI=void 0;let n=r(660),i=r(172),a=r(930),o="metrics";class s{constructor(){}static getInstance(){return this._instance||(this._instance=new s),this._instance}setGlobalMeterProvider(e){return(0,i.registerGlobal)(o,e,a.DiagAPI.instance())}getMeterProvider(){return(0,i.getGlobal)(o)||n.NOOP_METER_PROVIDER}getMeter(e,t,r){return this.getMeterProvider().getMeter(e,t,r)}disable(){(0,i.unregisterGlobal)(o,a.DiagAPI.instance())}}t.MetricsAPI=s},181:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PropagationAPI=void 0;let n=r(172),i=r(874),a=r(194),o=r(277),s=r(369),c=r(930),l="propagation",u=new i.NoopTextMapPropagator;class d{constructor(){this.createBaggage=s.createBaggage,this.getBaggage=o.getBaggage,this.getActiveBaggage=o.getActiveBaggage,this.setBaggage=o.setBaggage,this.deleteBaggage=o.deleteBaggage}static getInstance(){return this._instance||(this._instance=new d),this._instance}setGlobalPropagator(e){return(0,n.registerGlobal)(l,e,c.DiagAPI.instance())}inject(e,t,r=a.defaultTextMapSetter){return this._getGlobalPropagator().inject(e,t,r)}extract(e,t,r=a.defaultTextMapGetter){return this._getGlobalPropagator().extract(e,t,r)}fields(){return this._getGlobalPropagator().fields()}disable(){(0,n.unregisterGlobal)(l,c.DiagAPI.instance())}_getGlobalPropagator(){return(0,n.getGlobal)(l)||u}}t.PropagationAPI=d},997:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TraceAPI=void 0;let n=r(172),i=r(846),a=r(139),o=r(607),s=r(930),c="trace";class l{constructor(){this._proxyTracerProvider=new i.ProxyTracerProvider,this.wrapSpanContext=a.wrapSpanContext,this.isSpanContextValid=a.isSpanContextValid,this.deleteSpan=o.deleteSpan,this.getSpan=o.getSpan,this.getActiveSpan=o.getActiveSpan,this.getSpanContext=o.getSpanContext,this.setSpan=o.setSpan,this.setSpanContext=o.setSpanContext}static getInstance(){return this._instance||(this._instance=new l),this._instance}setGlobalTracerProvider(e){let t=(0,n.registerGlobal)(c,this._proxyTracerProvider,s.DiagAPI.instance());return t&&this._proxyTracerProvider.setDelegate(e),t}getTracerProvider(){return(0,n.getGlobal)(c)||this._proxyTracerProvider}getTracer(e,t){return this.getTracerProvider().getTracer(e,t)}disable(){(0,n.unregisterGlobal)(c,s.DiagAPI.instance()),this._proxyTracerProvider=new i.ProxyTracerProvider}}t.TraceAPI=l},277:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.deleteBaggage=t.setBaggage=t.getActiveBaggage=t.getBaggage=void 0;let n=r(491),i=(0,r(780).createContextKey)("OpenTelemetry Baggage Key");function a(e){return e.getValue(i)||void 0}t.getBaggage=a,t.getActiveBaggage=function(){return a(n.ContextAPI.getInstance().active())},t.setBaggage=function(e,t){return e.setValue(i,t)},t.deleteBaggage=function(e){return e.deleteValue(i)}},993:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BaggageImpl=void 0;class r{constructor(e){this._entries=e?new Map(e):new Map}getEntry(e){let t=this._entries.get(e);if(t)return Object.assign({},t)}getAllEntries(){return Array.from(this._entries.entries()).map(([e,t])=>[e,t])}setEntry(e,t){let n=new r(this._entries);return n._entries.set(e,t),n}removeEntry(e){let t=new r(this._entries);return t._entries.delete(e),t}removeEntries(...e){let t=new r(this._entries);for(let r of e)t._entries.delete(r);return t}clear(){return new r}}t.BaggageImpl=r},830:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.baggageEntryMetadataSymbol=void 0,t.baggageEntryMetadataSymbol=Symbol("BaggageEntryMetadata")},369:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.baggageEntryMetadataFromString=t.createBaggage=void 0;let n=r(930),i=r(993),a=r(830),o=n.DiagAPI.instance();t.createBaggage=function(e={}){return new i.BaggageImpl(new Map(Object.entries(e)))},t.baggageEntryMetadataFromString=function(e){return"string"!=typeof e&&(o.error(`Cannot create baggage metadata from unknown type: ${typeof e}`),e=""),{__TYPE__:a.baggageEntryMetadataSymbol,toString:()=>e}}},67:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.context=void 0,t.context=r(491).ContextAPI.getInstance()},223:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NoopContextManager=void 0;let n=r(780);class i{active(){return n.ROOT_CONTEXT}with(e,t,r,...n){return t.call(r,...n)}bind(e,t){return t}enable(){return this}disable(){return this}}t.NoopContextManager=i},780:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ROOT_CONTEXT=t.createContextKey=void 0,t.createContextKey=function(e){return Symbol.for(e)};class r{constructor(e){let t=this;t._currentContext=e?new Map(e):new Map,t.getValue=e=>t._currentContext.get(e),t.setValue=(e,n)=>{let i=new r(t._currentContext);return i._currentContext.set(e,n),i},t.deleteValue=e=>{let n=new r(t._currentContext);return n._currentContext.delete(e),n}}}t.ROOT_CONTEXT=new r},506:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.diag=void 0,t.diag=r(930).DiagAPI.instance()},56:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DiagComponentLogger=void 0;let n=r(172);class i{constructor(e){this._namespace=e.namespace||"DiagComponentLogger"}debug(...e){return a("debug",this._namespace,e)}error(...e){return a("error",this._namespace,e)}info(...e){return a("info",this._namespace,e)}warn(...e){return a("warn",this._namespace,e)}verbose(...e){return a("verbose",this._namespace,e)}}function a(e,t,r){let i=(0,n.getGlobal)("diag");if(i)return r.unshift(t),i[e](...r)}t.DiagComponentLogger=i},972:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DiagConsoleLogger=void 0;let r=[{n:"error",c:"error"},{n:"warn",c:"warn"},{n:"info",c:"info"},{n:"debug",c:"debug"},{n:"verbose",c:"trace"}];class n{constructor(){for(let e=0;e<r.length;e++)this[r[e].n]=function(e){return function(...t){if(console){let r=console[e];if("function"!=typeof r&&(r=console.log),"function"==typeof r)return r.apply(console,t)}}}(r[e].c)}}t.DiagConsoleLogger=n},912:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createLogLevelDiagLogger=void 0;let n=r(957);t.createLogLevelDiagLogger=function(e,t){function r(r,n){let i=t[r];return"function"==typeof i&&e>=n?i.bind(t):function(){}}return e<n.DiagLogLevel.NONE?e=n.DiagLogLevel.NONE:e>n.DiagLogLevel.ALL&&(e=n.DiagLogLevel.ALL),t=t||{},{error:r("error",n.DiagLogLevel.ERROR),warn:r("warn",n.DiagLogLevel.WARN),info:r("info",n.DiagLogLevel.INFO),debug:r("debug",n.DiagLogLevel.DEBUG),verbose:r("verbose",n.DiagLogLevel.VERBOSE)}}},957:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DiagLogLevel=void 0,function(e){e[e.NONE=0]="NONE",e[e.ERROR=30]="ERROR",e[e.WARN=50]="WARN",e[e.INFO=60]="INFO",e[e.DEBUG=70]="DEBUG",e[e.VERBOSE=80]="VERBOSE",e[e.ALL=9999]="ALL"}(t.DiagLogLevel||(t.DiagLogLevel={}))},172:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.unregisterGlobal=t.getGlobal=t.registerGlobal=void 0;let n=r(200),i=r(521),a=r(130),o=i.VERSION.split(".")[0],s=Symbol.for(`opentelemetry.js.api.${o}`),c=n._globalThis;t.registerGlobal=function(e,t,r,n=!1){var a;let o=c[s]=null!=(a=c[s])?a:{version:i.VERSION};if(!n&&o[e]){let t=Error(`@opentelemetry/api: Attempted duplicate registration of API: ${e}`);return r.error(t.stack||t.message),!1}if(o.version!==i.VERSION){let t=Error(`@opentelemetry/api: Registration of version v${o.version} for ${e} does not match previously registered API v${i.VERSION}`);return r.error(t.stack||t.message),!1}return o[e]=t,r.debug(`@opentelemetry/api: Registered a global for ${e} v${i.VERSION}.`),!0},t.getGlobal=function(e){var t,r;let n=null==(t=c[s])?void 0:t.version;if(n&&(0,a.isCompatible)(n))return null==(r=c[s])?void 0:r[e]},t.unregisterGlobal=function(e,t){t.debug(`@opentelemetry/api: Unregistering a global for ${e} v${i.VERSION}.`);let r=c[s];r&&delete r[e]}},130:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isCompatible=t._makeCompatibilityCheck=void 0;let n=r(521),i=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function a(e){let t=new Set([e]),r=new Set,n=e.match(i);if(!n)return()=>!1;let a={major:+n[1],minor:+n[2],patch:+n[3],prerelease:n[4]};if(null!=a.prerelease)return function(t){return t===e};function o(e){return r.add(e),!1}return function(e){if(t.has(e))return!0;if(r.has(e))return!1;let n=e.match(i);if(!n)return o(e);let s={major:+n[1],minor:+n[2],patch:+n[3],prerelease:n[4]};if(null!=s.prerelease||a.major!==s.major)return o(e);if(0===a.major)return a.minor===s.minor&&a.patch<=s.patch?(t.add(e),!0):o(e);return a.minor<=s.minor?(t.add(e),!0):o(e)}}t._makeCompatibilityCheck=a,t.isCompatible=a(n.VERSION)},886:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.metrics=void 0,t.metrics=r(653).MetricsAPI.getInstance()},901:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ValueType=void 0,function(e){e[e.INT=0]="INT",e[e.DOUBLE=1]="DOUBLE"}(t.ValueType||(t.ValueType={}))},102:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createNoopMeter=t.NOOP_OBSERVABLE_UP_DOWN_COUNTER_METRIC=t.NOOP_OBSERVABLE_GAUGE_METRIC=t.NOOP_OBSERVABLE_COUNTER_METRIC=t.NOOP_UP_DOWN_COUNTER_METRIC=t.NOOP_HISTOGRAM_METRIC=t.NOOP_COUNTER_METRIC=t.NOOP_METER=t.NoopObservableUpDownCounterMetric=t.NoopObservableGaugeMetric=t.NoopObservableCounterMetric=t.NoopObservableMetric=t.NoopHistogramMetric=t.NoopUpDownCounterMetric=t.NoopCounterMetric=t.NoopMetric=t.NoopMeter=void 0;class r{constructor(){}createHistogram(e,r){return t.NOOP_HISTOGRAM_METRIC}createCounter(e,r){return t.NOOP_COUNTER_METRIC}createUpDownCounter(e,r){return t.NOOP_UP_DOWN_COUNTER_METRIC}createObservableGauge(e,r){return t.NOOP_OBSERVABLE_GAUGE_METRIC}createObservableCounter(e,r){return t.NOOP_OBSERVABLE_COUNTER_METRIC}createObservableUpDownCounter(e,r){return t.NOOP_OBSERVABLE_UP_DOWN_COUNTER_METRIC}addBatchObservableCallback(e,t){}removeBatchObservableCallback(e){}}t.NoopMeter=r;class n{}t.NoopMetric=n;class i extends n{add(e,t){}}t.NoopCounterMetric=i;class a extends n{add(e,t){}}t.NoopUpDownCounterMetric=a;class o extends n{record(e,t){}}t.NoopHistogramMetric=o;class s{addCallback(e){}removeCallback(e){}}t.NoopObservableMetric=s;class c extends s{}t.NoopObservableCounterMetric=c;class l extends s{}t.NoopObservableGaugeMetric=l;class u extends s{}t.NoopObservableUpDownCounterMetric=u,t.NOOP_METER=new r,t.NOOP_COUNTER_METRIC=new i,t.NOOP_HISTOGRAM_METRIC=new o,t.NOOP_UP_DOWN_COUNTER_METRIC=new a,t.NOOP_OBSERVABLE_COUNTER_METRIC=new c,t.NOOP_OBSERVABLE_GAUGE_METRIC=new l,t.NOOP_OBSERVABLE_UP_DOWN_COUNTER_METRIC=new u,t.createNoopMeter=function(){return t.NOOP_METER}},660:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NOOP_METER_PROVIDER=t.NoopMeterProvider=void 0;let n=r(102);class i{getMeter(e,t,r){return n.NOOP_METER}}t.NoopMeterProvider=i,t.NOOP_METER_PROVIDER=new i},200:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(46),t)},651:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t._globalThis=void 0,t._globalThis="object"==typeof globalThis?globalThis:r.g},46:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(651),t)},939:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.propagation=void 0,t.propagation=r(181).PropagationAPI.getInstance()},874:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NoopTextMapPropagator=void 0;class r{inject(e,t){}extract(e,t){return e}fields(){return[]}}t.NoopTextMapPropagator=r},194:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.defaultTextMapSetter=t.defaultTextMapGetter=void 0,t.defaultTextMapGetter={get(e,t){if(null!=e)return e[t]},keys:e=>null==e?[]:Object.keys(e)},t.defaultTextMapSetter={set(e,t,r){null!=e&&(e[t]=r)}}},845:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.trace=void 0,t.trace=r(997).TraceAPI.getInstance()},403:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NonRecordingSpan=void 0;let n=r(476);class i{constructor(e=n.INVALID_SPAN_CONTEXT){this._spanContext=e}spanContext(){return this._spanContext}setAttribute(e,t){return this}setAttributes(e){return this}addEvent(e,t){return this}setStatus(e){return this}updateName(e){return this}end(e){}isRecording(){return!1}recordException(e,t){}}t.NonRecordingSpan=i},614:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NoopTracer=void 0;let n=r(491),i=r(607),a=r(403),o=r(139),s=n.ContextAPI.getInstance();class c{startSpan(e,t,r=s.active()){var n;if(null==t?void 0:t.root)return new a.NonRecordingSpan;let c=r&&(0,i.getSpanContext)(r);return"object"==typeof(n=c)&&"string"==typeof n.spanId&&"string"==typeof n.traceId&&"number"==typeof n.traceFlags&&(0,o.isSpanContextValid)(c)?new a.NonRecordingSpan(c):new a.NonRecordingSpan}startActiveSpan(e,t,r,n){let a,o,c;if(arguments.length<2)return;2==arguments.length?c=t:3==arguments.length?(a=t,c=r):(a=t,o=r,c=n);let l=null!=o?o:s.active(),u=this.startSpan(e,a,l),d=(0,i.setSpan)(l,u);return s.with(d,c,void 0,u)}}t.NoopTracer=c},124:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NoopTracerProvider=void 0;let n=r(614);class i{getTracer(e,t,r){return new n.NoopTracer}}t.NoopTracerProvider=i},125:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ProxyTracer=void 0;let n=new(r(614)).NoopTracer;class i{constructor(e,t,r,n){this._provider=e,this.name=t,this.version=r,this.options=n}startSpan(e,t,r){return this._getTracer().startSpan(e,t,r)}startActiveSpan(e,t,r,n){let i=this._getTracer();return Reflect.apply(i.startActiveSpan,i,arguments)}_getTracer(){if(this._delegate)return this._delegate;let e=this._provider.getDelegateTracer(this.name,this.version,this.options);return e?(this._delegate=e,this._delegate):n}}t.ProxyTracer=i},846:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ProxyTracerProvider=void 0;let n=r(125),i=new(r(124)).NoopTracerProvider;class a{getTracer(e,t,r){var i;return null!=(i=this.getDelegateTracer(e,t,r))?i:new n.ProxyTracer(this,e,t,r)}getDelegate(){var e;return null!=(e=this._delegate)?e:i}setDelegate(e){this._delegate=e}getDelegateTracer(e,t,r){var n;return null==(n=this._delegate)?void 0:n.getTracer(e,t,r)}}t.ProxyTracerProvider=a},996:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SamplingDecision=void 0,function(e){e[e.NOT_RECORD=0]="NOT_RECORD",e[e.RECORD=1]="RECORD",e[e.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"}(t.SamplingDecision||(t.SamplingDecision={}))},607:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getSpanContext=t.setSpanContext=t.deleteSpan=t.setSpan=t.getActiveSpan=t.getSpan=void 0;let n=r(780),i=r(403),a=r(491),o=(0,n.createContextKey)("OpenTelemetry Context Key SPAN");function s(e){return e.getValue(o)||void 0}function c(e,t){return e.setValue(o,t)}t.getSpan=s,t.getActiveSpan=function(){return s(a.ContextAPI.getInstance().active())},t.setSpan=c,t.deleteSpan=function(e){return e.deleteValue(o)},t.setSpanContext=function(e,t){return c(e,new i.NonRecordingSpan(t))},t.getSpanContext=function(e){var t;return null==(t=s(e))?void 0:t.spanContext()}},325:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TraceStateImpl=void 0;let n=r(564);class i{constructor(e){this._internalState=new Map,e&&this._parse(e)}set(e,t){let r=this._clone();return r._internalState.has(e)&&r._internalState.delete(e),r._internalState.set(e,t),r}unset(e){let t=this._clone();return t._internalState.delete(e),t}get(e){return this._internalState.get(e)}serialize(){return this._keys().reduce((e,t)=>(e.push(t+"="+this.get(t)),e),[]).join(",")}_parse(e){!(e.length>512)&&(this._internalState=e.split(",").reverse().reduce((e,t)=>{let r=t.trim(),i=r.indexOf("=");if(-1!==i){let a=r.slice(0,i),o=r.slice(i+1,t.length);(0,n.validateKey)(a)&&(0,n.validateValue)(o)&&e.set(a,o)}return e},new Map),this._internalState.size>32&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,32))))}_keys(){return Array.from(this._internalState.keys()).reverse()}_clone(){let e=new i;return e._internalState=new Map(this._internalState),e}}t.TraceStateImpl=i},564:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.validateValue=t.validateKey=void 0;let r="[_0-9a-z-*/]",n=`[a-z]${r}{0,255}`,i=`[a-z0-9]${r}{0,240}@[a-z]${r}{0,13}`,a=RegExp(`^(?:${n}|${i})$`),o=/^[ -~]{0,255}[!-~]$/,s=/,|=/;t.validateKey=function(e){return a.test(e)},t.validateValue=function(e){return o.test(e)&&!s.test(e)}},98:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createTraceState=void 0;let n=r(325);t.createTraceState=function(e){return new n.TraceStateImpl(e)}},476:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.INVALID_SPAN_CONTEXT=t.INVALID_TRACEID=t.INVALID_SPANID=void 0;let n=r(475);t.INVALID_SPANID="0000000000000000",t.INVALID_TRACEID="00000000000000000000000000000000",t.INVALID_SPAN_CONTEXT={traceId:t.INVALID_TRACEID,spanId:t.INVALID_SPANID,traceFlags:n.TraceFlags.NONE}},357:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SpanKind=void 0,function(e){e[e.INTERNAL=0]="INTERNAL",e[e.SERVER=1]="SERVER",e[e.CLIENT=2]="CLIENT",e[e.PRODUCER=3]="PRODUCER",e[e.CONSUMER=4]="CONSUMER"}(t.SpanKind||(t.SpanKind={}))},139:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.wrapSpanContext=t.isSpanContextValid=t.isValidSpanId=t.isValidTraceId=void 0;let n=r(476),i=r(403),a=/^([0-9a-f]{32})$/i,o=/^[0-9a-f]{16}$/i;function s(e){return a.test(e)&&e!==n.INVALID_TRACEID}function c(e){return o.test(e)&&e!==n.INVALID_SPANID}t.isValidTraceId=s,t.isValidSpanId=c,t.isSpanContextValid=function(e){return s(e.traceId)&&c(e.spanId)},t.wrapSpanContext=function(e){return new i.NonRecordingSpan(e)}},847:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SpanStatusCode=void 0,function(e){e[e.UNSET=0]="UNSET",e[e.OK=1]="OK",e[e.ERROR=2]="ERROR"}(t.SpanStatusCode||(t.SpanStatusCode={}))},475:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TraceFlags=void 0,function(e){e[e.NONE=0]="NONE",e[e.SAMPLED=1]="SAMPLED"}(t.TraceFlags||(t.TraceFlags={}))},521:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.VERSION=void 0,t.VERSION="1.6.0"}},n={};function i(e){var r=n[e];if(void 0!==r)return r.exports;var a=n[e]={exports:{}},o=!0;try{t[e].call(a.exports,a,a.exports,i),o=!1}finally{o&&delete n[e]}return a.exports}i.ab="//";var a={};(()=>{Object.defineProperty(a,"__esModule",{value:!0}),a.trace=a.propagation=a.metrics=a.diag=a.context=a.INVALID_SPAN_CONTEXT=a.INVALID_TRACEID=a.INVALID_SPANID=a.isValidSpanId=a.isValidTraceId=a.isSpanContextValid=a.createTraceState=a.TraceFlags=a.SpanStatusCode=a.SpanKind=a.SamplingDecision=a.ProxyTracerProvider=a.ProxyTracer=a.defaultTextMapSetter=a.defaultTextMapGetter=a.ValueType=a.createNoopMeter=a.DiagLogLevel=a.DiagConsoleLogger=a.ROOT_CONTEXT=a.createContextKey=a.baggageEntryMetadataFromString=void 0;var e=i(369);Object.defineProperty(a,"baggageEntryMetadataFromString",{enumerable:!0,get:function(){return e.baggageEntryMetadataFromString}});var t=i(780);Object.defineProperty(a,"createContextKey",{enumerable:!0,get:function(){return t.createContextKey}}),Object.defineProperty(a,"ROOT_CONTEXT",{enumerable:!0,get:function(){return t.ROOT_CONTEXT}});var r=i(972);Object.defineProperty(a,"DiagConsoleLogger",{enumerable:!0,get:function(){return r.DiagConsoleLogger}});var n=i(957);Object.defineProperty(a,"DiagLogLevel",{enumerable:!0,get:function(){return n.DiagLogLevel}});var o=i(102);Object.defineProperty(a,"createNoopMeter",{enumerable:!0,get:function(){return o.createNoopMeter}});var s=i(901);Object.defineProperty(a,"ValueType",{enumerable:!0,get:function(){return s.ValueType}});var c=i(194);Object.defineProperty(a,"defaultTextMapGetter",{enumerable:!0,get:function(){return c.defaultTextMapGetter}}),Object.defineProperty(a,"defaultTextMapSetter",{enumerable:!0,get:function(){return c.defaultTextMapSetter}});var l=i(125);Object.defineProperty(a,"ProxyTracer",{enumerable:!0,get:function(){return l.ProxyTracer}});var u=i(846);Object.defineProperty(a,"ProxyTracerProvider",{enumerable:!0,get:function(){return u.ProxyTracerProvider}});var d=i(996);Object.defineProperty(a,"SamplingDecision",{enumerable:!0,get:function(){return d.SamplingDecision}});var h=i(357);Object.defineProperty(a,"SpanKind",{enumerable:!0,get:function(){return h.SpanKind}});var p=i(847);Object.defineProperty(a,"SpanStatusCode",{enumerable:!0,get:function(){return p.SpanStatusCode}});var f=i(475);Object.defineProperty(a,"TraceFlags",{enumerable:!0,get:function(){return f.TraceFlags}});var g=i(98);Object.defineProperty(a,"createTraceState",{enumerable:!0,get:function(){return g.createTraceState}});var m=i(139);Object.defineProperty(a,"isSpanContextValid",{enumerable:!0,get:function(){return m.isSpanContextValid}}),Object.defineProperty(a,"isValidTraceId",{enumerable:!0,get:function(){return m.isValidTraceId}}),Object.defineProperty(a,"isValidSpanId",{enumerable:!0,get:function(){return m.isValidSpanId}});var y=i(476);Object.defineProperty(a,"INVALID_SPANID",{enumerable:!0,get:function(){return y.INVALID_SPANID}}),Object.defineProperty(a,"INVALID_TRACEID",{enumerable:!0,get:function(){return y.INVALID_TRACEID}}),Object.defineProperty(a,"INVALID_SPAN_CONTEXT",{enumerable:!0,get:function(){return y.INVALID_SPAN_CONTEXT}});let w=i(67);Object.defineProperty(a,"context",{enumerable:!0,get:function(){return w.context}});let b=i(506);Object.defineProperty(a,"diag",{enumerable:!0,get:function(){return b.diag}});let _=i(886);Object.defineProperty(a,"metrics",{enumerable:!0,get:function(){return _.metrics}});let v=i(939);Object.defineProperty(a,"propagation",{enumerable:!0,get:function(){return v.propagation}});let S=i(845);Object.defineProperty(a,"trace",{enumerable:!0,get:function(){return S.trace}}),a.default={context:w.context,diag:b.diag,metrics:_.metrics,propagation:v.propagation,trace:S.trace}})(),e.exports=a})()}},e=>{var t=e(e.s=650);(_ENTRIES="undefined"==typeof _ENTRIES?{}:_ENTRIES)["middleware_src/middleware"]=t}]);
//# sourceMappingURL=middleware.js.map
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5883],{680:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var l=r(4277);let n={theme:void 0},s=function(e){let t,r;return function(s){let o=t;return(void 0===o||s.theme!==r)&&(n.theme=s.theme,t=o=(0,l.A)(e(n)),r=s.theme),o}}},1078:(e,t,r)=>{"use strict";r.d(t,{default:()=>a});var l=r(5155),n=r(5695),s=r(8464),o=r(2596);function a(e){let{to:t,hidden:r,className:a,onClick:i,smartNavigation:c=!1,...u}=e,d=(0,n.useRouter)(),f=(0,n.usePathname)();return r?null:(0,l.jsx)("button",{type:"button",onClick:()=>{i?i():t?d.push(t):c&&(document.referrer.includes("/favorites")||f.startsWith("/pet/"))?d.push("/favorites?refresh="+Date.now()):d.back()},className:(0,o.A)("text-[#ed9426] hover:text-orange-300 hover:scale-110 font-bold",a),...u,children:(0,l.jsx)(s.A,{fontSize:"large"})})}},5170:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var l=r(870);function n(e,t,r="Mui"){let s={};return t.forEach(t=>{s[t]=(0,l.Ay)(e,t,r)}),s}},5695:(e,t,r)=>{"use strict";var l=r(8999);r.o(l,"usePathname")&&r.d(t,{usePathname:function(){return l.usePathname}}),r.o(l,"useRouter")&&r.d(t,{useRouter:function(){return l.useRouter}}),r.o(l,"useSearchParams")&&r.d(t,{useSearchParams:function(){return l.useSearchParams}}),r.o(l,"useServerInsertedHTML")&&r.d(t,{useServerInsertedHTML:function(){return l.useServerInsertedHTML}})},5832:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>u});var l=r(5155),n=r(5695),s=r(2115),o=r(6766);function a(){let e=(0,n.useRouter)(),{conversations:t,loading:r,error:a}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:15e3,[t,r]=(0,s.useState)([]),[l,n]=(0,s.useState)(!0),[o,a]=(0,s.useState)(null),i=(0,s.useCallback)(async()=>{try{let e=await fetch("/api/conversations"),t=await e.json();r(t.conversations),a(null)}catch(e){a("Failed to load conversations")}finally{n(!1)}},[]);return(0,s.useEffect)(()=>{i();let t=setInterval(i,e);return()=>clearInterval(t)},[i,e]),{conversations:t,loading:l,error:o,refresh:i}}();return r?(0,l.jsx)("p",{className:"py-10 text-center",children:"Loadingâ€¦"}):a?(0,l.jsx)("p",{className:"text-center text-red-500",children:a}):t.length?(0,l.jsx)("ul",{className:"divide-y flex flex-col w-full justify-center mx-auto",children:t.map(t=>{var r,n;return(0,l.jsxs)("li",{className:"flex items-center gap-4 p-4 sm:pl-30 hover:bg-gray-50 cursor-pointer w-full border-t border-b border-gray-300",onClick:()=>e.push("/messages/".concat(t.id)),children:[(0,l.jsx)(o.default,{src:null!=(r=t.thumbUrl)?r:"/placeholder.png",alt:"",className:"w-12 h-12 rounded-full object-cover flex-shrink-0"}),(0,l.jsxs)("div",{className:"flex-1",children:[(0,l.jsx)("p",{className:"font-medium line-clamp-1",children:null!=(n=t.lastBody)?n:"New conversation"}),(0,l.jsx)("span",{className:"text-xs text-gray-500",children:t.lastSentAt?new Date(t.lastSentAt).toLocaleString():""})]}),t.unread>0&&(0,l.jsx)("span",{className:"ml-auto bg-orange-500 text-white text-xs px-2 py-1 rounded-full",children:t.unread})]},t.id)})}):(0,l.jsx)("p",{className:"text-center text-gray-500 py-10",children:"No messages yet."})}var i=r(6915),c=r(1078);function u(){return(0,l.jsxs)("div",{className:"flex flex-col h-screen bg-white",children:[(0,l.jsx)(i.default,{left:(0,l.jsx)(c.default,{smartNavigation:!0}),center:(0,l.jsx)("h1",{className:"text-lg font-semibold",children:"Messages"})}),(0,l.jsx)(a,{})]})}},6915:(e,t,r)=>{"use strict";r.d(t,{default:()=>n});var l=r(5155);function n(e){let{left:t,center:r,right:n,children:s}=e;return(0,l.jsx)("header",{className:"w-full max-w-md mx-auto  md:max-w-xl py-2 flex items-center justify-between gap-4",children:s||(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"flex-shrink-0",children:t}),(0,l.jsx)("div",{className:"flex-1 text-center overflow-hidden",children:r}),(0,l.jsx)("div",{className:"flex-shrink-0",children:n})]})})}r(2115)},7515:(e,t,r)=>{"use strict";r.d(t,{A:()=>x});var l=r(2115),n=r(2596),s=r(7472),o=r(3209),a=r(5955),i=r(680),c=r(186),u=r(5170),d=r(870);function f(e){return(0,d.Ay)("MuiSvgIcon",e)}(0,u.A)("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);var m=r(5155);let h=e=>{let{color:t,fontSize:r,classes:l}=e,n={root:["root","inherit"!==t&&"color".concat((0,o.A)(t)),"fontSize".concat((0,o.A)(r))]};return(0,s.A)(n,f,l)},v=(0,a.Ay)("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.root,"inherit"!==r.color&&t["color".concat((0,o.A)(r.color))],t["fontSize".concat((0,o.A)(r.fontSize))]]}})((0,i.A)(e=>{var t,r,l,n,s,o,a,i,c,u,d,f,m,h,v,p,x,S;let{theme:g}=e;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",flexShrink:0,transition:null==(n=g.transitions)||null==(l=n.create)?void 0:l.call(n,"fill",{duration:null==(r=(null!=(v=g.vars)?v:g).transitions)||null==(t=r.duration)?void 0:t.shorter}),variants:[{props:e=>!e.hasSvgAsChild,style:{fill:"currentColor"}},{props:{fontSize:"inherit"},style:{fontSize:"inherit"}},{props:{fontSize:"small"},style:{fontSize:(null==(o=g.typography)||null==(s=o.pxToRem)?void 0:s.call(o,20))||"1.25rem"}},{props:{fontSize:"medium"},style:{fontSize:(null==(i=g.typography)||null==(a=i.pxToRem)?void 0:a.call(i,24))||"1.5rem"}},{props:{fontSize:"large"},style:{fontSize:(null==(u=g.typography)||null==(c=u.pxToRem)?void 0:c.call(u,35))||"2.1875rem"}},...Object.entries((null!=(p=g.vars)?p:g).palette).filter(e=>{let[,t]=e;return t&&t.main}).map(e=>{var t,r,l;let[n]=e;return{props:{color:n},style:{color:null==(r=(null!=(l=g.vars)?l:g).palette)||null==(t=r[n])?void 0:t.main}}}),{props:{color:"action"},style:{color:null==(f=(null!=(x=g.vars)?x:g).palette)||null==(d=f.action)?void 0:d.active}},{props:{color:"disabled"},style:{color:null==(h=(null!=(S=g.vars)?S:g).palette)||null==(m=h.action)?void 0:m.disabled}},{props:{color:"inherit"},style:{color:void 0}}]}})),p=l.forwardRef(function(e,t){let r=(0,c.b)({props:e,name:"MuiSvgIcon"}),{children:s,className:o,color:a="inherit",component:i="svg",fontSize:u="medium",htmlColor:d,inheritViewBox:f=!1,titleAccess:p,viewBox:x="0 0 24 24",...S}=r,g=l.isValidElement(s)&&"svg"===s.type,y={...r,color:a,component:i,fontSize:u,instanceFontSize:e.fontSize,inheritViewBox:f,viewBox:x,hasSvgAsChild:g},j={};f||(j.viewBox=x);let N=h(y);return(0,m.jsxs)(v,{as:i,className:(0,n.A)(N.root,o),focusable:"false",color:d,"aria-hidden":!p||void 0,role:p?"img":void 0,ref:t,...j,...S,...g&&s.props,ownerState:y,children:[g?s.props.children:s,p?(0,m.jsx)("title",{children:p}):null]})});function x(e,t){function r(t,r){return(0,m.jsx)(p,{"data-testid":void 0,ref:r,...t,children:e})}return r.muiName=p.muiName,l.memo(l.forwardRef(r))}p.muiName="SvgIcon"},7822:(e,t,r)=>{Promise.resolve().then(r.bind(r,5832))},8464:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var l=r(7515),n=r(5155);let s=(0,l.A)((0,n.jsx)("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20z"}),"ArrowBack")}},e=>{var t=t=>e(e.s=t);e.O(0,[6727,6766,8441,1684,7358],()=>t(7822)),_N_E=e.O()}]);
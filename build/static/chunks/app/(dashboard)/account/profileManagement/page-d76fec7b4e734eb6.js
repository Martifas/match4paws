(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9279],{1078:(e,t,l)=>{"use strict";l.d(t,{default:()=>i});var n=l(5155),r=l(5695),a=l(8464),s=l(2596);function i(e){let{to:t,hidden:l,className:i,onClick:o,smartNavigation:u=!1,...d}=e,c=(0,r.useRouter)(),f=(0,r.usePathname)();return l?null:(0,n.jsx)("button",{type:"button",onClick:()=>{o?o():t?c.push(t):u&&(document.referrer.includes("/favorites")||f.startsWith("/pet/"))?c.push("/favorites?refresh="+Date.now()):c.back()},className:(0,s.A)("text-[#ed9426] hover:text-orange-300 hover:scale-110 font-bold",i),...d,children:(0,n.jsx)(a.A,{fontSize:"large"})})}},5468:(e,t,l)=>{Promise.resolve().then(l.bind(l,7878))},6768:(e,t,l)=>{"use strict";l.d(t,{A:()=>s,AuthProvider:()=>i});var n=l(5155),r=l(2115);let a=(0,r.createContext)(null),s=()=>(0,r.useContext)(a);function i(e){let{initialUser:t,children:l}=e;return(0,n.jsx)(a.Provider,{value:t,children:l})}},6915:(e,t,l)=>{"use strict";l.d(t,{default:()=>r});var n=l(5155);function r(e){let{left:t,center:l,right:r,children:a}=e;return(0,n.jsx)("header",{className:"w-full max-w-md mx-auto  md:max-w-xl py-2 flex items-center justify-between gap-4",children:a||(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"flex-shrink-0",children:t}),(0,n.jsx)("div",{className:"flex-1 text-center overflow-hidden",children:l}),(0,n.jsx)("div",{className:"flex-shrink-0",children:r})]})})}l(2115)},7601:(e,t,l)=>{"use strict";l.d(t,{A:()=>a});var n=l(6768),r=l(2115);function a(){let e=(0,n.A)(),[t,l]=(0,r.useState)(null),[a,s]=(0,r.useState)(!0);return(0,r.useEffect)(()=>{(async()=>{if(!(null==e?void 0:e.id))return s(!1);try{let e=await fetch("/api/user/profile");if(e.ok){let t=await e.json();l(t.user)}}catch(e){console.error("Error fetching user data:",e)}finally{s(!1)}})()},[null==e?void 0:e.id]),{user:t,isLoading:a}}},7878:(e,t,l)=>{"use strict";l.d(t,{default:()=>m});var n=l(5155),r=l(2115),a=l(4581),s=l(4426),i=l(3731),o=l(5726),u=l(2302),d=l(5079),c=l(7601),f=l(6915),h=l(1078),x=l(9203);function m(){let{user:e,isLoading:t}=(0,c.A)(),{fields:l,update:m,dirty:v,resetDirty:p}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{name:"",phone:"",address:""},[t,l]=(0,r.useState)(e),[n,a]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{l(e),a(!1)},[e]),{fields:t,update:(0,r.useCallback)((e,t)=>{l(l=>({...l,[e]:t})),a(!0)},[]),dirty:n,resetDirty:()=>a(!1)}}((0,r.useMemo)(()=>{var t,l,n;return{name:null!=(t=null==e?void 0:e.name)?t:"",phone:null!=(l=null==e?void 0:e.phone)?l:"",address:null!=(n=null==e?void 0:e.address)?n:""}},[null==e?void 0:e.name,null==e?void 0:e.phone,null==e?void 0:e.address])),[j,g]=(0,r.useState)(!1),[b,y]=(0,r.useState)(null),w=async()=>{if(v){g(!0);try{if(!(await fetch("/api/user/profile",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)})).ok)throw Error();y("ok"),p()}catch(e){y("err")}finally{g(!1)}}};return t||!e?(0,n.jsx)(a.default,{className:"flex justify-center py-20",children:(0,n.jsx)(s.default,{})}):(0,n.jsxs)(a.default,{className:"max-w-lg mx-auto px-4 pb-20 min-h-[90vh] flex flex-col",children:[(0,n.jsx)(f.default,{left:(0,n.jsx)(h.default,{smartNavigation:!0}),center:(0,n.jsx)("h1",{className:"text-lg font-semibold",children:"My Profile"})}),(0,n.jsxs)(a.default,{component:"form",className:"flex flex-col gap-6 mt-6 flex-1",children:[(0,n.jsx)(i.A,{label:"Full Name",required:!0,value:l.name,onChange:e=>m("name",e.target.value)}),(0,n.jsx)(d.fD,{label:"Phone",required:!0,defaultCountry:"LT",value:l.phone,onChange:e=>m("phone",e)}),(0,n.jsx)(i.A,{label:"Address",multiline:!0,rows:2,value:l.address,onChange:e=>m("address",e.target.value),placeholder:"Street, City, ZIP"}),(0,n.jsx)(x.A,{disabled:j||!v||!l.name.trim()||!l.phone.trim(),onClick:w,children:j?"Savingâ€¦":"Save Changes"})]}),(0,n.jsx)(o.A,{open:null!==b,autoHideDuration:3e3,onClose:()=>y(null),children:"ok"===b?(0,n.jsx)(u.A,{severity:"success",sx:{width:"100%"},children:"Profile updated!"}):(0,n.jsx)(u.A,{severity:"error",sx:{width:"100%"},children:"Something went wrong."})})]})}},9203:(e,t,l)=>{"use strict";l.d(t,{A:()=>a});var n=l(5155),r=l(2596);function a(e){let{fullWidth:t=!0,className:l,...a}=e;return(0,n.jsx)("button",{...a,className:(0,r.A)("bg-[#ed9426] text-white font-bold rounded-full px-4 py-3","hover:bg-orange-400 hover:scale-[1.02] active:bg-orange-500","transition-transform disabled:opacity-50 disabled:pointer-events-none",t&&"w-full max-w-md mx-auto",l)})}}},e=>{var t=t=>e(e.s=t);e.O(0,[7365,6727,5978,8702,9985,3127,8813,9701,3298,3383,8441,1684,7358],()=>t(5468)),_N_E=e.O()}]);
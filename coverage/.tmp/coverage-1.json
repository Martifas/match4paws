{"/home/marty/turing/4-module/4-sprint/match4paws/src/components/ui/buttons/FavoriteButton.tsx":{"path":"/home/marty/turing/4-module/4-sprint/match4paws/src/components/ui/buttons/FavoriteButton.tsx","statementMap":{"0":{"start":{"line":12,"column":38},"end":{"line":12,"column":60}},"1":{"start":{"line":13,"column":36},"end":{"line":13,"column":51}},"2":{"start":{"line":14,"column":2},"end":{"line":16,"column":21}},"3":{"start":{"line":15,"column":4},"end":{"line":15,"column":32}},"4":{"start":{"line":17,"column":22},"end":{"line":45,"column":3}},"5":{"start":{"line":18,"column":4},"end":{"line":18,"column":23}},"6":{"start":{"line":19,"column":4},"end":{"line":19,"column":24}},"7":{"start":{"line":20,"column":4},"end":{"line":20,"column":23}},"8":{"start":{"line":21,"column":29},"end":{"line":21,"column":40}},"9":{"start":{"line":22,"column":34},"end":{"line":22,"column":44}},"10":{"start":{"line":23,"column":4},"end":{"line":23,"column":36}},"11":{"start":{"line":24,"column":4},"end":{"line":26,"column":5}},"12":{"start":{"line":25,"column":6},"end":{"line":25,"column":27}},"13":{"start":{"line":27,"column":4},"end":{"line":44,"column":5}},"14":{"start":{"line":28,"column":23},"end":{"line":32,"column":8}},"15":{"start":{"line":33,"column":6},"end":{"line":35,"column":7}},"16":{"start":{"line":34,"column":8},"end":{"line":34,"column":66}},"17":{"start":{"line":37,"column":6},"end":{"line":37,"column":57}},"18":{"start":{"line":38,"column":6},"end":{"line":38,"column":43}},"19":{"start":{"line":39,"column":6},"end":{"line":41,"column":7}},"20":{"start":{"line":40,"column":8},"end":{"line":40,"column":34}},"21":{"start":{"line":43,"column":6},"end":{"line":43,"column":26}},"22":{"start":{"line":46,"column":2},"end":{"line":89,"column":4}},"23":{"start":{"line":61,"column":8},"end":{"line":63,"column":9}},"24":{"start":{"line":62,"column":10},"end":{"line":62,"column":76}},"25":{"start":{"line":66,"column":8},"end":{"line":68,"column":9}},"26":{"start":{"line":67,"column":10},"end":{"line":67,"column":106}}},"fnMap":{"0":{"name":"FavoriteButton","decl":{"start":{"line":6,"column":24},"end":{"line":6,"column":38}},"loc":{"start":{"line":11,"column":3},"end":{"line":90,"column":1}},"line":11},"1":{"name":"(anonymous_1)","decl":{"start":{"line":14,"column":12},"end":{"line":14,"column":13}},"loc":{"start":{"line":14,"column":18},"end":{"line":16,"column":3}},"line":14},"2":{"name":"(anonymous_2)","decl":{"start":{"line":17,"column":22},"end":{"line":17,"column":23}},"loc":{"start":{"line":17,"column":35},"end":{"line":45,"column":3}},"line":17},"3":{"name":"(anonymous_3)","decl":{"start":{"line":60,"column":20},"end":{"line":60,"column":21}},"loc":{"start":{"line":60,"column":27},"end":{"line":64,"column":7}},"line":60},"4":{"name":"(anonymous_4)","decl":{"start":{"line":65,"column":20},"end":{"line":65,"column":21}},"loc":{"start":{"line":65,"column":27},"end":{"line":69,"column":7}},"line":65}},"branchMap":{"0":{"loc":{"start":{"line":24,"column":4},"end":{"line":26,"column":5}},"type":"if","locations":[{"start":{"line":24,"column":4},"end":{"line":26,"column":5}},{"start":{},"end":{}}],"line":24},"1":{"loc":{"start":{"line":24,"column":8},"end":{"line":24,"column":42}},"type":"binary-expr","locations":[{"start":{"line":24,"column":8},"end":{"line":24,"column":25}},{"start":{"line":24,"column":29},"end":{"line":24,"column":42}}],"line":24},"2":{"loc":{"start":{"line":29,"column":16},"end":{"line":29,"column":52}},"type":"cond-expr","locations":[{"start":{"line":29,"column":35},"end":{"line":29,"column":41}},{"start":{"line":29,"column":44},"end":{"line":29,"column":52}}],"line":29},"3":{"loc":{"start":{"line":33,"column":6},"end":{"line":35,"column":7}},"type":"if","locations":[{"start":{"line":33,"column":6},"end":{"line":35,"column":7}},{"start":{},"end":{}}],"line":33},"4":{"loc":{"start":{"line":39,"column":6},"end":{"line":41,"column":7}},"type":"if","locations":[{"start":{"line":39,"column":6},"end":{"line":41,"column":7}},{"start":{},"end":{}}],"line":39},"5":{"loc":{"start":{"line":39,"column":10},"end":{"line":39,"column":49}},"type":"binary-expr","locations":[{"start":{"line":39,"column":10},"end":{"line":39,"column":27}},{"start":{"line":39,"column":31},"end":{"line":39,"column":49}}],"line":39},"6":{"loc":{"start":{"line":53,"column":10},"end":{"line":53,"column":73}},"type":"cond-expr","locations":[{"start":{"line":53,"column":22},"end":{"line":53,"column":53}},{"start":{"line":53,"column":56},"end":{"line":53,"column":73}}],"line":53},"7":{"loc":{"start":{"line":54,"column":10},"end":{"line":54,"column":49}},"type":"cond-expr","locations":[{"start":{"line":54,"column":23},"end":{"line":54,"column":44}},{"start":{"line":54,"column":47},"end":{"line":54,"column":49}}],"line":54},"8":{"loc":{"start":{"line":58,"column":25},"end":{"line":58,"column":80}},"type":"cond-expr","locations":[{"start":{"line":58,"column":38},"end":{"line":58,"column":64}},{"start":{"line":58,"column":67},"end":{"line":58,"column":80}}],"line":58},"9":{"loc":{"start":{"line":61,"column":8},"end":{"line":63,"column":9}},"type":"if","locations":[{"start":{"line":61,"column":8},"end":{"line":63,"column":9}},{"start":{},"end":{}}],"line":61},"10":{"loc":{"start":{"line":66,"column":8},"end":{"line":68,"column":9}},"type":"if","locations":[{"start":{"line":66,"column":8},"end":{"line":68,"column":9}},{"start":{},"end":{}}],"line":66},"11":{"loc":{"start":{"line":67,"column":50},"end":{"line":67,"column":105}},"type":"cond-expr","locations":[{"start":{"line":67,"column":63},"end":{"line":67,"column":89}},{"start":{"line":67,"column":92},"end":{"line":67,"column":105}}],"line":67},"12":{"loc":{"start":{"line":70,"column":20},"end":{"line":70,"column":77}},"type":"cond-expr","locations":[{"start":{"line":70,"column":33},"end":{"line":70,"column":56}},{"start":{"line":70,"column":59},"end":{"line":70,"column":77}}],"line":70},"13":{"loc":{"start":{"line":71,"column":16},"end":{"line":79,"column":14}},"type":"cond-expr","locations":[{"start":{"line":71,"column":45},"end":{"line":75,"column":14}},{"start":{"line":75,"column":33},"end":{"line":79,"column":14}}],"line":71}},"s":{"0":23,"1":23,"2":23,"3":7,"4":23,"5":5,"6":5,"7":5,"8":5,"9":5,"10":5,"11":5,"12":2,"13":5,"14":5,"15":4,"16":1,"17":2,"18":2,"19":2,"20":1,"21":5,"22":23,"23":5,"24":5,"25":0,"26":0},"f":{"0":23,"1":7,"2":5,"3":5,"4":0},"b":{"0":[2,3],"1":[5,2],"2":[3,2],"3":[1,3],"4":[1,1],"5":[2,1],"6":[10,13],"7":[13,10],"8":[13,10],"9":[5,0],"10":[0,0],"11":[0,0],"12":[13,10],"13":[13,10]},"inputSourceMap":{"version":3,"sources":["/home/marty/turing/4-module/4-sprint/match4paws/src/components/ui/buttons/FavoriteButton.tsx"],"sourcesContent":["'use client';\n\nimport { useEffect, useState } from 'react';\nimport FavoriteIcon from '@mui/icons-material/Favorite';\nimport FavoriteBorderOutlinedIcon from '@mui/icons-material/FavoriteBorderOutlined';\n\ntype Props = {\n  petId: string;\n  initiallyFav: boolean;\n  onUnfavorited?: (petId: string) => void;\n  onFavoriteRestored?: (petId: string) => void;\n};\n\nexport default function FavoriteButton({\n  petId,\n  initiallyFav,\n  onUnfavorited,\n  onFavoriteRestored,\n}: Props) {\n  const [isFavorite, setIsFavorite] = useState(initiallyFav);\n  const [isLoading, setIsLoading] = useState(false);\n\n  useEffect(() => {\n    setIsFavorite(initiallyFav);\n  }, [initiallyFav]);\n\n  const handleClick = async (e: React.MouseEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n\n    setIsLoading(true);\n    const newFavoriteState = !isFavorite;\n    const previousFavoriteState = isFavorite;\n\n    setIsFavorite(newFavoriteState);\n\n    if (!newFavoriteState && onUnfavorited) {\n      onUnfavorited(petId);\n    }\n\n    try {\n      const response = await fetch('/api/favorites', {\n        method: newFavoriteState ? 'POST' : 'DELETE',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ petId }),\n      });\n\n      if (!response.ok) {\n        throw new Error(`API request failed: ${response.status}`);\n      }\n    } catch (error) {\n      console.error('Failed to update favorite:', error);\n\n      setIsFavorite(previousFavoriteState);\n\n      if (!newFavoriteState && onFavoriteRestored) {\n        onFavoriteRestored(petId);\n      }\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  return (\n    <button\n      onClick={handleClick}\n      disabled={isLoading}\n      className={`\n        p-2 rounded-full transition-all duration-200 z-10 relative\n        ${isLoading ? 'opacity-50 cursor-not-allowed' : 'hover:scale-105'}\n        ${!isLoading ? 'hover:bg-orange-200' : ''}\n      `}\n      style={{\n        color: '#ed9426',\n        backgroundColor: isFavorite\n          ? 'rgba(237, 148, 38, 0.15)'\n          : 'transparent',\n      }}\n      onMouseEnter={e => {\n        if (!isLoading) {\n          e.currentTarget.style.backgroundColor = 'rgba(237, 148, 38, 0.3)';\n        }\n      }}\n      onMouseLeave={e => {\n        if (!isLoading) {\n          e.currentTarget.style.backgroundColor = isFavorite\n            ? 'rgba(237, 148, 38, 0.15)'\n            : 'transparent';\n        }\n      }}\n      aria-label={isFavorite ? 'Remove from favorites' : 'Add to favorites'}\n    >\n      {isFavorite ? <FavoriteIcon /> : <FavoriteBorderOutlinedIcon />}\n    </button>\n  );\n}\n"],"mappings":";AA4FoB;AA1FpB,SAAS,WAAW,gBAAgB;AACpC,OAAO,kBAAkB;AACzB,OAAO,gCAAgC;AASvC,wBAAwB,eAAe;AAAA,EACrC;AAAA,EACA;AAAA,EACA;AAAA,EACA;AACF,GAAU;AACR,QAAM,CAAC,YAAY,aAAa,IAAI,SAAS,YAAY;AACzD,QAAM,CAAC,WAAW,YAAY,IAAI,SAAS,KAAK;AAEhD,YAAU,MAAM;AACd,kBAAc,YAAY;AAAA,EAC5B,GAAG,CAAC,YAAY,CAAC;AAEjB,QAAM,cAAc,OAAO,MAAwB;AACjD,MAAE,eAAe;AACjB,MAAE,gBAAgB;AAElB,iBAAa,IAAI;AACjB,UAAM,mBAAmB,CAAC;AAC1B,UAAM,wBAAwB;AAE9B,kBAAc,gBAAgB;AAE9B,QAAI,CAAC,oBAAoB,eAAe;AACtC,oBAAc,KAAK;AAAA,IACrB;AAEA,QAAI;AACF,YAAM,WAAW,MAAM,MAAM,kBAAkB;AAAA,QAC7C,QAAQ,mBAAmB,SAAS;AAAA,QACpC,SAAS,EAAE,gBAAgB,mBAAmB;AAAA,QAC9C,MAAM,KAAK,UAAU,EAAE,MAAM,CAAC;AAAA,MAChC,CAAC;AAED,UAAI,CAAC,SAAS,IAAI;AAChB,cAAM,IAAI,MAAM,uBAAuB,SAAS,MAAM,EAAE;AAAA,MAC1D;AAAA,IACF,SAAS,OAAO;AACd,cAAQ,MAAM,8BAA8B,KAAK;AAEjD,oBAAc,qBAAqB;AAEnC,UAAI,CAAC,oBAAoB,oBAAoB;AAC3C,2BAAmB,KAAK;AAAA,MAC1B;AAAA,IACF,UAAE;AACA,mBAAa,KAAK;AAAA,IACpB;AAAA,EACF;AAEA,SACE;AAAA,IAAC;AAAA;AAAA,MACC,SAAS;AAAA,MACT,UAAU;AAAA,MACV,WAAW;AAAA;AAAA,UAEP,YAAY,kCAAkC,iBAAiB;AAAA,UAC/D,CAAC,YAAY,wBAAwB,EAAE;AAAA;AAAA,MAE3C,OAAO;AAAA,QACL,OAAO;AAAA,QACP,iBAAiB,aACb,6BACA;AAAA,MACN;AAAA,MACA,cAAc,OAAK;AACjB,YAAI,CAAC,WAAW;AACd,YAAE,cAAc,MAAM,kBAAkB;AAAA,QAC1C;AAAA,MACF;AAAA,MACA,cAAc,OAAK;AACjB,YAAI,CAAC,WAAW;AACd,YAAE,cAAc,MAAM,kBAAkB,aACpC,6BACA;AAAA,QACN;AAAA,MACF;AAAA,MACA,cAAY,aAAa,0BAA0B;AAAA,MAElD,uBAAa,uBAAC,kBAAD;AAAA;AAAA;AAAA;AAAA,aAAc,IAAK,uBAAC,gCAAD;AAAA;AAAA;AAAA;AAAA,aAA4B;AAAA;AAAA,IA5B/D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EA6BA;AAEJ;","names":[]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"2101b2accc20133d8b2ea8f37f93c6a2dd1ae899"}}